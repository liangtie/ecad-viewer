var pR=Object.defineProperty;var yS=Object.getOwnPropertyDescriptor;var a=(i,e)=>pR(i,"name",{value:e,configurable:!0});var Me=(i,e,t,n)=>{for(var r=n>1?void 0:n?yS(e,t):e,s=i.length-1,o;s>=0;s--)(o=i[s])&&(r=(n?o(e,t,r):o(r))||r);return n&&r&&pR(e,t,r),r};function kf(i){return i===null||typeof i!="object"&&typeof i!="function"}a(kf,"is_primitive");function Vn(i){return typeof i=="string"}a(Vn,"is_string");function Li(i){return typeof i=="number"&&!isNaN(i)}a(Li,"is_number");function Tl(i){return Array.isArray(i)||typeof i?.[Symbol.iterator]=="function"}a(Tl,"is_iterable");function Xf(i){return Array.isArray(i)}a(Xf,"is_array");function mR(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)&&!(i instanceof RegExp)&&!(i instanceof Date)}a(mR,"is_object");function cu(i){return Xf(i)?i:[i]}a(cu,"as_array");function RR(i){return Xf(i)?i:Tl(i)?Array.from(i):[i]}a(RR,"iterable_as_array");var SS=new Intl.Collator(void 0,{numeric:!0});function Kr(i,e){return i.slice().sort((t,n)=>SS.compare(e(t),e(n)))}a(Kr,"sorted_by_numeric_strings");function Ki(i){window.setTimeout(()=>{i()},0)}a(Ki,"later");var fr=class{static{a(this,"DeferredPromise")}#e;#t;#i;#n;#r;constructor(){this.#e=new Promise((e,t)=>{this.#t=e,this.#i=t})}get rejected(){return this.#n===1}get resolved(){return this.#n===0}get settled(){return!!this.#n}get value(){return this.#r}then(e,t){return this.#e.then(e,t)}resolve(e){this.#n=0,this.#r=e,this.#t(e)}reject(e){this.#n=1,this.#r=e,this.#i(e)}},pr=class extends fr{static{a(this,"Barrier")}get isOpen(){return this.resolved&&this.value===!0}open(){this.resolve(!0)}};var To=class{constructor(){this._disposables=new Set;this._is_disposed=!1}static{a(this,"Disposables")}add(e){if(this._is_disposed)throw new Error("Tried to add item to a DisposableStack that's already been disposed");return this._disposables.add(e),e}disposeAndRemove(e){e&&(e.dispose(),this._disposables.delete(e))}get isDisposed(){return this._is_disposed}dispose(){if(this._is_disposed){console.trace("dispose() called on an already disposed resource");return}for(let e of this._disposables.values())e.dispose();this._disposables.clear(),this._is_disposed=!0}};var gR=new Map,Qi=class{constructor(e){this.css_string=e}static{a(this,"CSS")}get stylesheet(){let e=gR.get(this.css_string);return e==null&&(e=new CSSStyleSheet,e.replaceSync(this.css_string),gR.set(this.css_string,e)),e}};function Je(i,...e){let t="";for(let n=0;n<i.length-1;n++){t+=i[n];let r=e[n];if(r instanceof Qi)t+=r.css_string;else if(Li(r))t+=String(r);else throw new Error("Only CSS or number variables allowed in css template literal")}return t+=i.at(-1),new Qi(t)}a(Je,"css");function _R(i,e){i.adoptedStyleSheets=i.adoptedStyleSheets.concat(e.map(t=>t instanceof CSSStyleSheet?t:t.stylesheet))}a(_R,"adopt_styles");function TS(i){return typeof HTMLElement=="object"&&i instanceof HTMLElement}a(TS,"is_HTMLElement");function re(i,...e){let t=document.createElement("template");t.innerHTML=vS(i,e);let n=t.content;return n=document.importNode(n,!0),NS(n,e),n.childElementCount==1?n.firstElementChild:n}a(re,"html");var Hf=class{constructor(e){this.text=e}static{a(this,"Literal")}},Gf=/\$\$:(\d+):\$\$/g;function vS(i,e){let t=[];for(let r=0;r<i.length-1;r++)t.push(i[r]),e[r]instanceof Hf?t.push(e[r].text):t.push(`$$:${r}:$$`);return t.push(i[i.length-1]),t.join("")}a(vS,"prepare_template_html");function NS(i,e){let t=document.createTreeWalker(i,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_TEXT,null),n;for(;(n=t.nextNode())!==null;)if(n.nodeType==Node.TEXT_NODE)PS(n.parentNode,n,e);else if(n.nodeType==Node.ELEMENT_NODE){let r=n;for(let s of r.getAttributeNames()){let o=r.getAttributeNode(s);ES(r,o,e)}}}a(NS,"apply_values_to_tree");function PS(i,e,t){if(!i)return;let n=e.data.split(Gf);if(!(!n||n.length==1)){if(TS(i)&&["script","style"].includes(i.localName))throw new Error("Cannot bind values inside of <script> or <style> tags");for(let r=0;r<n.length;r++){let s=n[r];if(s)if(r%2==0)i.insertBefore(new Text(s),e);else for(let o of bR(t[parseInt(s,10)]))o!=null&&i.insertBefore(o,e)}e.data=""}}a(PS,"apply_content_value");function ES(i,e,t){let n=e.value.split(Gf);if(!(!n||n.length==1)){if(e.localName.startsWith("on"))throw new Error(`Cannot bind to event handler ${e.localName}.`);if(n.length==3&&n[0]==""&&n[2]==""){let r=t[parseInt(n[1],10)];r===!0?e.value="":r===!1||r===null||r===void 0?i.removeAttribute(e.name):e.value=Df(r,e.name);return}e.value=e.value.replaceAll(Gf,(r,s)=>{let o=t[parseInt(s,10)];return Df(o,e.localName)})}}a(ES,"apply_attribute_value");function*bR(i){if(!(i==null||i==null)){if(kf(i)){yield new Text(i.toString());return}if(i instanceof Node||i instanceof DocumentFragment){yield i;return}if(Tl(i)){for(let e of i)yield*bR(e);return}throw new Error(`Invalid value ${i}`)}}a(bR,"convert_value_for_content");function Df(i,e){if(i==null||i==null)return"";if(kf(i))return i.toString();if(Tl(i))return Array.from(i).map(t=>Df(t,e)).join("");throw new Error(`Invalid value ${i}`)}a(Df,"convert_value_for_attr");var Qr=class extends HTMLElement{constructor(){super();this.updateComplete=new fr;this.disposables=new To;let t=this.constructor;t.exportparts.length&&this.setAttribute("exportparts",t.exportparts.join(","))}static{a(this,"CustomElement")}static{this.useShadowRoot=!0}static{this.exportparts=[]}addDisposable(t){return this.disposables.add(t)}get renderRoot(){return this.shadowRoot??this}connectedCallback(){this.#e()}disconnectedCallback(){this.disposables.dispose()}initialContentCallback(){}render(){return re``}async load(t){this.on_content_changed(t),await this.update()}on_content_changed(t){}renderedCallback(){}async update(){for(this.updateComplete=new fr;this.renderRoot.firstChild;)this.renderRoot.firstChild.remove();return this.renderRoot.appendChild(await this.render()),this.renderedCallback(),window.requestAnimationFrame(()=>{this.updateComplete.resolve(!0)}),this.updateComplete}#e(){let t=this.constructor;return this.updateComplete=new fr,this.constructor.useShadowRoot&&this.attachShadow({mode:"open"}),t.styles&&_R(this.shadowRoot??document,cu(t.styles)),(async()=>{let n=this.render();this.renderRoot.appendChild(n),this.renderedCallback(),this.initialContentCallback(),window.requestAnimationFrame(()=>{this.updateComplete.resolve(!0)})})(),this.updateComplete}queryAssignedElements(t,n){let s=this.renderRoot.querySelector(`slot${t?`[name=${t}]`:":not([name])"}`)?.assignedElements()??[];return n?s.filter(o=>o.matches(n)):s}};function Ye(i){let e=i.converter?.to_attribute??MR.to_attribute,t=i.converter?.from_attribute??MR.from_attribute;return(n,r)=>{let s=r.replace("_","-"),o=!1;Object.defineProperty(n,r,{enumerable:!0,configurable:!0,get(){return t(this.getAttribute(s),i.type)},set(l){let c=this[r],u=e(l,i.type);u===null?this.removeAttribute(s):this.setAttribute(s,u),o||(o=!0,i.on_change?.(c,l),o=!1)}})}}a(Ye,"attribute");var MR={to_attribute(i,e){if(i===null)return i;switch(e){case Boolean:return i?"":null;case String:return i;case Number:return`${i}`;default:throw new Error(`Can not convert type "${e}" and value "${i} to attribute`)}},from_attribute(i,e){switch(e){case Boolean:return i!==null;case String:return i;case Number:return i===null?null:Number(i);default:throw new Error(`Can not convert type "${e}" and value "${i} to attribute`)}}};function Tt(i,e){return(t,n)=>{let r=typeof n=="symbol"?Symbol():`__${n}`;Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get(){let s=this;if(e&&s[r]!==void 0)return s[r];let o=this.renderRoot?.querySelector(i)??null;return e&&o&&(s[r]=o),o}})}}a(Tt,"query");function xR(i){return(e,t)=>{Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get(){return this.renderRoot?.querySelectorAll(i)??[]}})}}a(xR,"query_all");var uu=class extends Qr{constructor(){super();this.ariaHidden="true",this.hidden=!0,this.style.display="none"}static{a(this,"ECadSource")}};Me([Ye({type:String})],uu.prototype,"src",2);window.customElements.define("ecad-source",uu);function yn(i,e,t,n){return i.addEventListener(e,t,n),{dispose:()=>{i.removeEventListener(e,t,n)}}}a(yn,"listen");function Bi(i,e,t,n,r){return yn(i,t,s=>{let o=s.target.closest(e);o&&n(s,o)},r)}a(Bi,"delegate");var hu=class i extends Event{constructor(t,n){super(i.type,{bubbles:!0,cancelable:!0,composed:!0});this.context_name=t;this._callback=n}static{a(this,"ContextRequestEvent")}static{this.type="context-request"}callback(t){this.stopPropagation(),this._callback(t)}};async function yR(i,e){return new Promise(t=>{i.dispatchEvent(new hu(e,n=>{t(n)}))})}a(yR,"requestContext");function SR(i,e,t){i.addEventListener(hu.type,n=>{let r=n;r.context_name==e&&r.callback(t)})}a(SR,"provideContext");async function wS(i,e){return(await yR(i,e))()}a(wS,"requestLazyContext");async function LS(i,e,t){SR(i,e,t)}a(LS,"provideLazyContext");function TR(i){return class extends i{static{a(this,"WithContext")}constructor(...t){super(...t)}async requestContext(t){return await yR(this,t)}provideContext(t,n){SR(this,t,n)}async requestLazyContext(t){return await wS(this,t)}provideLazyContext(t,n){LS(this,t,n)}}}a(TR,"WithContext");var AS=Je`
    :host {
        box-sizing: border-box;
    }

    :host *,
    :host *::before,
    :host *::after {
        box-sizing: inherit;
    }

    [hidden] {
        display: none !important;
    }
`,de=class extends TR(Qr){static{a(this,"KCUIElement")}static{this.styles=[AS]}};var vl=class i extends de{static{a(this,"KCUIIconElement")}static{this.sprites_url=""}static{this.styles=[Je`
            :host {
                box-sizing: border-box;
                font-family: "Material Symbols Outlined";
                font-weight: normal;
                font-style: normal;
                font-size: inherit;
                line-height: 1;
                letter-spacing: normal;
                text-transform: none;
                white-space: nowrap;
                word-wrap: normal;
                direction: ltr;
                -webkit-font-feature-settings: "liga";
                -moz-font-feature-settings: "liga";
                font-feature-settings: "liga";
                -webkit-font-smoothing: antialiased;
                user-select: none;
            }

            svg {
                width: 1.2em;
                height: auto;
                fill: currentColor;
            }
        `]}render(){let e=this.textContent??"";if(e.startsWith("svg:")){let t=e.slice(4),n=`${i.sprites_url}#${t}`;return re`<svg viewBox="0 0 48 48" width="48">
                <use xlink:href="${n}" />
            </svg>`}else return re`<slot></slot>`}};window.customElements.define("kc-ui-icon",vl);var Ji=class extends de{static{a(this,"KCUIButtonElement")}static{this.styles=[...de.styles,Je`
            :host {
                display: inline-flex;
                position: relative;
                width: auto;
                cursor: pointer;
                user-select: none;
                align-items: center;
                justify-content: center;
            }

            button {
                all: unset;
                display: inline-flex;
                align-items: center;
                justify-content: center;
                padding: 0.5em;
                border: 1px solid transparent;
                border-radius: 0.25em;
                font-weight: medium;
                font-size: 1em;
                background: var(--button-bg);
                color: var(--button-fg);
                width: 16px;
                height: 16px;
                transition:
                    color var(--transition-time-short) ease,
                    border var(--transition-time-short) ease,
                    background var(--transition-time-short) ease;
            }

            :host {
                fill: var(--button-fg);
            }

            button:hover {
                background: var(--button-hover-bg);
                color: var(--button-hover-fg);
            }

            button:disabled {
                background: var(--button-disabled-bg);
                color: var(--button-disabled-fg);
            }

            button:focus {
                outline: var(--button-focus-outline);
            }

            :host([selected]) button {
                background: var(--button-selected-bg);
                color: var(--button-selected-fg);
            }

            /* variants */

            button.outline {
                background: var(--button-outline-bg);
                color: var(--button-outline-fg);
            }

            button.outline:hover {
                background: var(--button-outline-hover-bg);
                color: var(--button-outline-hover-fg);
            }

            button.outline:disabled {
                background: var(--button-outline-disabled-bg);
                color: var(--button-outline-disabled-fg);
            }

            :host([selected]) button.outline {
                background: var(--button-outline-disabled-bg);
                color: var(--button--outline-disabled-fg);
            }

            button.toolbar {
                background: var(--button-toolbar-bg);
                color: var(--button-toolbar-fg);
            }

            button.toolbar:hover {
                background: var(--button-toolbar-hover-bg);
                color: var(--button-toolbar-hover-fg);
            }

            button.toolbar:disabled {
                background: var(--button-toolbar-disabled-bg);
                color: var(--button-toolbar-disabled-fg);
            }

            :host([selected]) button.toolbar {
                background: var(--button-toolbar-disabled-bg);
                color: var(--button--toolbar-disabled-fg);
            }

            button.toolbar-alt {
                background: var(--button-toolbar-alt-bg);
                color: var(--button-toolbar-alt-fg);
            }

            button.toolbar-alt:hover {
                background: var(--button-toolbar-alt-hover-bg);
                color: var(--button-toolbar-alt-hover-fg);
            }

            button.toolbar-alt:disabled {
                background: var(--button-toolbar-alt-disabled-bg);
                color: var(--button-toolbar-alt-disabled-fg);
            }

            :host([selected]) button.toolbar-alt {
                background: var(--button-toolbar-alt-disabled-bg);
                color: var(--button--toolbar-alt-disabled-fg);
            }

            button.menu {
                background: var(--button-menu-bg);
                color: var(--button-menu-fg);
                padding: 0;
            }

            button.menu:hover {
                background: var(--button-menu-hover-bg);
                color: var(--button-menu-hover-fg);
                outline: none;
            }

            button.menu:focus {
                outline: none;
            }

            button.menu:disabled {
                background: var(--button-menu-disabled-bg);
                color: var(--button-menu-disabled-fg);
            }

            :host([selected]) button.menu {
                background: var(--button-menu-disabled-bg);
                color: var(--button--menu-disabled-fg);
                outline: none;
            }
        `]}static get observedAttributes(){return["disabled","icon"]}attributeChangedCallback(t,n,r){if(this.button)switch(t){case"disabled":this.button.disabled=r!=null;break;case"icon":this.button_icon.innerText=r??"";break}}initialContentCallback(){this.variant&&this.button.classList.add(this.variant),this.button.disabled=this.disabled}render(){let t=this.icon?re`<kc-ui-icon part="icon">${this.icon}</kc-ui-icon>`:void 0;return re`<button part="base">
            ${t}
            <slot part="contents"></slot>
        </button>`}};Me([Tt("button",!0)],Ji.prototype,"button",2),Me([Tt("button_icon",!0)],Ji.prototype,"button_icon",2),Me([Ye({type:String})],Ji.prototype,"name",2),Me([Ye({type:String})],Ji.prototype,"icon",2),Me([Ye({type:String})],Ji.prototype,"variant",2),Me([Ye({type:Boolean})],Ji.prototype,"disabled",2),Me([Ye({type:Boolean})],Ji.prototype,"selected",2);window.customElements.define("kc-ui-button",Ji);var vo=class extends de{static{a(this,"KCUIActivitySideBarElement")}static{this.styles=[...de.styles,Je`
            :host {
                flex-shrink: 0;
                display: flex;
                flex-direction: row;
                height: 100%;
                overflow: hidden;
                min-width: calc(max(20%, 200px));
                max-width: calc(max(20%, 200px));
            }

            div {
                display: flex;
                overflow: hidden;
                flex-direction: column;
            }

            div.bar {
                flex-grow: 0;
                flex-shrink: 0;
                height: 100%;
                z-index: 1;
                display: flex;
                flex-direction: column;
                background: var(--activity-bar-bg);
                color: var(--activity-bar-fg);
                padding: 0.2em;
                user-select: none;
            }

            div.start {
                flex: 1;
            }

            div.activities {
                flex-grow: 1;
            }

            kc-ui-button {
                --button-bg: transparent;
                --button-fg: var(--activity-bar-fg);
                --button-hover-bg: var(--activity-bar-active-bg);
                --button-hover-fg: var(--activity-bar-active-fg);
                --button-selected-bg: var(--activity-bar-active-bg);
                --button-selected-fg: var(--activity-bar-active-fg);
                --button-focus-outline: none;
                margin-bottom: 0.25em;
            }

            kc-ui-button:last-child {
                margin-bottom: 0;
            }

            ::slotted(kc-ui-activity) {
                display: none;
                height: 100%;
            }

            ::slotted(kc-ui-activity[active]) {
                display: block;
            }
        `]}#e;get#t(){return this.querySelectorAll("kc-ui-activity")}get#i(){return Array.from(this.#t).map(t=>(t.getAttribute("name")??"").toLowerCase())}get#n(){return(this.#t[0]?.getAttribute("name")??"").toLowerCase()}render(){let t=[],n=[];for(let r of this.#t){let s=r.getAttribute("name"),o=r.getAttribute("icon");(r.getAttribute("button-location")=="bottom"?n:t).push(re`
                    <kc-ui-button
                        type="button"
                        tooltip-left="${s}"
                        name="${s?.toLowerCase()}"
                        title="${s}"
                        icon=${o}>
                    </kc-ui-button>
                `)}return re`<div class="bar">
                <div class="start">${t}</div>
                <div class="end">${n}</div>
            </div>
            <div class="activities">
                <slot name="activities"></slot>
            </div>`}initialContentCallback(){this.collapsed?this.change_activity(null):this.change_activity(this.#n),Bi(this.renderRoot,"kc-ui-button","click",(n,r)=>{this.change_activity(r.name,!0)}),new MutationObserver(async n=>{await this.update(),this.#e&&!this.#i.includes(this.#e)&&this.change_activity(this.#n)}).observe(this,{childList:!0})}static get observedAttributes(){return["collapsed"]}attributeChangedCallback(t,n,r){switch(t){case"collapsed":r==null?this.show_activities():this.hide_activities();break;default:break}}get activity(){return this.#e}set activity(t){this.change_activity(t,!1)}hide_activities(){this.activities_container&&(this.style.width="unset",this.style.minWidth="unset",this.style.maxWidth="",this.activities_container.style.width="0px")}show_activities(){this.activities_container&&(this.#e||this.change_activity(this.#n),this.style.minWidth="",this.activities_container.style.width="")}change_activity(t,n=!1){t=t?.toLowerCase(),this.#e==t&&n?this.#e=null:this.#e=t,this.#e?this.collapsed=!1:this.collapsed=!0,this.update_state()}update_state(){for(let t of this.buttons)t.selected=t.name==this.#e;for(let t of this.#t)t.getAttribute("name")?.toLowerCase()==this.#e?t.setAttribute("active",""):t.removeAttribute("active")}};Me([Tt(".activities",!0)],vo.prototype,"activities_container",2),Me([xR("kc-ui-button")],vo.prototype,"buttons",2),Me([Ye({type:Boolean})],vo.prototype,"collapsed",2);window.customElements.define("kc-ui-activity-side-bar",vo);var Yf=class extends Qr{static{a(this,"KCUIAppElement")}static{this.useShadowRoot=!1}};window.customElements.define("kc-ui-app",Yf);var Br=class extends de{static{a(this,"KCUISelectElement")}static{this.styles=[...de.styles,Je`
            .alter_src_selections {
                border: solid 1px rgb(202, 216, 218);
                width: 100%;
            }

            .alter_src_selections option {
                text-align: center;
                border: none;
            }
            .alter_src_selections:hover {
                border: solid 1px rgb(202, 216, 218);
            }
            .alter_src_selections:focus {
                border: solid 1px rgb(202, 216, 218);
            }
            .alter_src_selections:active {
                border: solid 1px rgb(202, 216, 218);
            }
            .alter_src_selections option:checked {
                border: solid 1px rgb(202, 216, 218);
            }
            .alter_src_selections option:disabled {
                border: solid 1px rgb(202, 216, 218);
            }
            .alter_src_selections option:focus {
                border: solid 1px rgb(202, 216, 218);
            }
            .alter_src_selections option:active {
                border: solid 1px rgb(202, 216, 218);
            }
        `]}static get observedAttributes(){return["disabled","icon"]}attributeChangedCallback(t,n,r){if(this.select)switch(t){case"disabled":this.select.disabled=r!=null;break}}initialContentCallback(){}render(){return re`<select class="alter_src_selections"></select>`}addSelections(t){for(let n of t)this.select.appendChild(re`<option value=${n}>${n.split(".")[0]}</option>`)}};Me([Tt("select",!0)],Br.prototype,"select",2),Me([Ye({type:String})],Br.prototype,"name",2),Me([Ye({type:String})],Br.prototype,"icon",2),Me([Ye({type:Boolean})],Br.prototype,"disabled",2),Me([Ye({type:Boolean})],Br.prototype,"selected",2);window.customElements.define("kc-ui-select",Br);var Kf=class extends de{static{a(this,"KCUIControlListElement")}static{this.styles=[...de.styles,Je`
            :host {
                display: flex;
                flex-direction: column;
                flex-wrap: nowrap;
                background: var(--list-item-bg);
                color: var(--list-item-fg);
                padding-top: 0.2em;
            }
        `]}render(){return re`<slot></slot>`}};window.customElements.define("kc-ui-control-list",Kf);var Qf=class extends de{static{a(this,"KCUIControlListItemElement")}static{this.styles=[...de.styles,Je`
            :host {
                margin-top: 0.2em;
                display: flex;
                flex-direction: column;
                flex-wrap: nowrap;
                user-select: none;
                background-color: transparent;
                transition:
                    color var(--transition-time-short) ease,
                    background-color var(--transition-time-short) ease;
            }

            ::slotted(label) {
                flex: 1 1 100%;
                display: block;
                margin: 0;
                text-overflow: ellipsis;
                white-space: nowrap;
                overflow: hidden;
            }

            ::slotted(input),
            ::slotted(select) {
                margin: 0;
                padding-left: 0;
                padding-right: 0;
            }
        `]}render(){return re`<slot></slot>`}};window.customElements.define("kc-ui-control-list-item",Qf);function Zs(i,e,t){let n=t.value,r=!1;t.value=function(...s){if(!r){r=!0;try{n.apply(this,s)}finally{r=!1}}}}a(Zs,"no_self_recursion");var du=class extends de{static{a(this,"KCUIMenuElement")}static{this.styles=[...de.styles,Je`
            :host {
                width 100%;
                display: flex;
                flex-direction: column;
                flex-wrap: nowrap;
                background: var(--list-item-bg);
                color: var(--list-item-fg);
            }

            :host(.outline) ::slotted(kc-ui-menu-item) {
                border-bottom: 1px solid var(--grid-outline);
            }

            :host(.dropdown) {
                --list-item-padding: 0.3em 0.6em;
                --list-item-bg: var(--dropdown-bg);
                --list-item-fg: var(--dropdown-fg);
                --list-item-hover-bg: var(--dropdown-hover-bg);
                --list-item-hover-fg: var(--dropdown-hover-fg);
                --list-item-active-bg: var(--dropdown-active-bg);
                --list-item-active-fg: var(--dropdown-active-fg);
                max-height: 50vh;
                overflow-y: auto;
            }
        `]}constructor(){super(),this.role="menu"}items(){return this.querySelectorAll("kc-ui-menu-item")}item_by_name(e){for(let t of this.items())if(t.name==e)return t;return null}deselect(){for(let e of this.items())e.selected=!1}get selected(){for(let e of this.items())if(e.selected)return e;return null}set selected(e){let t;Vn(e)?t=this.item_by_name(e):t=e,this.deselect(),!(!t||!(t instanceof Jr))&&(t.selected=!0,this.send_selected_event(t))}send_selected_event(e){this.dispatchEvent(new CustomEvent("kc-ui-menu:select",{detail:e,bubbles:!0,composed:!0}))}initialContentCallback(){super.initialContentCallback(),Bi(this,"kc-ui-menu-item","click",(e,t)=>{e.target.tagName!="KC-UI-BUTTON"&&(e.stopPropagation(),this.selected=t)})}render(){return re`<slot></slot>`}};Me([Zs],du.prototype,"send_selected_event",1);window.customElements.define("kc-ui-menu",du);var Jr=class extends de{constructor(){super();this.role="menuitem"}static{a(this,"KCUIMenuItemElement")}static{this.styles=[...de.styles,Je`
            :host {
                display: flex;
                align-items: center;
                flex-wrap: nowrap;
                padding: var(--list-item-padding, 0.2em 0.3em);
                user-select: none;
                background: transparent;
                transition:
                    color var(--transition-time-short) ease,
                    background-color var(--transition-time-short) ease;
                cursor: pointer;
            }

            :host(:hover) {
                background: var(--list-item-hover-bg);
                color: var(--list-item-hover-fg);
            }

            :host([selected]) {
                background: var(--list-item-active-bg);
                color: var(--list-item-active-fg);
            }

            :host([disabled]) {
                background: var(--list-item-disabled-bg);
                color: var(--list-item-disabled-fg);
            }

            ::slotted(*) {
                flex: 1 1 100%;
                display: block;
                text-overflow: ellipsis;
                white-space: nowrap;
                overflow: hidden;
            }

            ::slotted(.narrow) {
                max-width: 100px;
            }

            ::slotted(.very-narrow) {
                max-width: 50px;
            }

            kc-ui-icon {
                margin-right: 0.5em;
                margin-left: -0.1em;
            }
        `]}render(){let t=this.icon?re`<kc-ui-icon>${this.icon}</kc-ui-icon>`:void 0;return re`${t}<slot></slot>`}};Me([Ye({type:String})],Jr.prototype,"name",2),Me([Ye({type:String})],Jr.prototype,"icon",2),Me([Ye({type:Boolean})],Jr.prototype,"selected",2),Me([Ye({type:Boolean})],Jr.prototype,"disabled",2);window.customElements.define("kc-ui-menu-item",Jr);var Bf=class extends de{static{a(this,"KCUIMenuLabelElement")}static{this.styles=[...de.styles,Je`
            :host {
                width: 100%;
                display: flex;
                flex-wrap: nowrap;
                padding: 0.2em 0.3em;
                background: var(--panel-subtitle-bg);
                color: var(--panel-subtitle-fg);
            }
        `]}render(){return re`<slot></slot>`}};window.customElements.define("kc-ui-menu-label",Bf);var Nl=class extends de{constructor(){super();this.mouseout_padding??=50}static{a(this,"KCUIDropdownElement")}static{this.styles=[...de.styles,Je`
            :host {
                border-radius: 5px;
                border: 1px solid transparent;
                display: none;
                flex-direction: column;
                overflow: hidden;
                user-select: none;
                background: var(--dropdown-bg);
                color: var(--dropdown-fg);
                font-weight: 300;
            }

            :host([visible]) {
                display: flex;
            }
        `]}show(){this.visible||(this.visible=!0,this.dispatchEvent(new CustomEvent("kc-ui-dropdown:show",{bubbles:!0,composed:!0})))}hide(){this.visible&&(this.visible=!1,this.dispatchEvent(new CustomEvent("kc-ui-dropdown:hide",{bubbles:!0,composed:!0})))}toggle(){this.visible?this.hide():this.show()}get menu(){return this.querySelector("kc-ui-menu")}initialContentCallback(){super.initialContentCallback(),this.hasAttribute("auto-hide")&&this.setup_leave_event(),this.menu.classList.add("invert-scrollbar")}setup_leave_event(){this.addEventListener("mouseleave",t=>{if(!this.visible)return;let n=this.mouseout_padding,r=this.getBoundingClientRect(),s=yn(window,"mousemove",o=>{this.visible||s.dispose(),o.clientX>r.left-n&&o.clientX<r.right+n&&o.clientY>r.top-n&&o.clientY<r.bottom+n||(this.hide(),s.dispose())})})}render(){return re`<slot></slot>`}};Me([Ye({type:Boolean})],Nl.prototype,"visible",2),Me([Ye({type:Number})],Nl.prototype,"mouseout_padding",2);window.customElements.define("kc-ui-dropdown",Nl);var Jf=class extends de{static{a(this,"KCUIFilteredListElement")}static{this.styles=[...de.styles,Je`
            :host {
                display: contents;
            }
        `]}render(){return re`<slot></slot>`}#e;set filter_text(e){this.#e=e?.toLowerCase()??null,this.apply_filter()}get filter_text(){return this.#e}get item_selector(){return this.getAttribute("item-selector")??"[data-match-text]"}*items(){for(let e of this.queryAssignedElements())yield*e.querySelectorAll(this.item_selector)}apply_filter(){Ki(()=>{for(let e of this.items())this.#e==null||e.dataset.matchText?.toLowerCase().includes(this.#e)?e.style.removeProperty("display"):e.style.display="none"})}};window.customElements.define("kc-ui-filtered-list",Jf);var zf=class extends de{static{a(this,"KCUIFloatingToolbarElement")}static{this.styles=[...de.styles,Je`
            :host {
                z-index: 10;
                user-select: none;
                pointer-events: none;
                position: absolute;
                left: 0;
                width: 100%;
                padding: 0.5em;
                display: flex;
                flex-direction: row;
                align-items: center;
                justify-content: flex-start;
            }

            :host([location="top"]) {
                top: 0;
            }

            :host([location="bottom"]) {
                bottom: 0;
            }

            ::slotted(*) {
                user-select: initial;
                pointer-events: initial;
            }

            slot[name="left"] {
                flex-grow: 999;
                display: flex;
            }

            slot[name="right"] {
                display: flex;
            }

            ::slotted(kc-ui-button) {
                margin-left: 0.25em;
            }
        `]}render(){return re`<slot></slot>`}};window.customElements.define("kc-ui-floating-toolbar",zf);var $f=class extends de{static{a(this,"KCUIFocusOverlay")}static{this.styles=[...de.styles,Je`
            :host {
                z-index: 10;
                user-select: none;
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
                pointer-events: initial;
                background: transparent;
                contain: paint;
            }

            :host(.has-focus) {
                z-index: -10;
                pointer-events: none;
            }

            .bg {
                background: var(--focus-overlay-bg);
                opacity: 0;
                transition: opacity var(--transition-time-short);
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                pointer-events: none;
            }

            :host(:hover) .bg {
                opacity: var(--focus-overlay-opacity);
            }

            :host(.has-focus) .bg {
                opacity: 0;
            }

            .fg {
                position: absolute;
                font-size: 1.5rem;
                color: var(--focus-overlay-fg);
                text-shadow: rgba(0, 0, 0, 0.5) 0px 0px 15px;
                opacity: 0;
                pointer-events: none;
            }

            :host(:hover) .fg {
                opacity: 1;
            }

            :host(.has-focus) .fg {
                opacity: 0;
            }
        `]}#e;initialContentCallback(){this.addEventListener("click",()=>{this.classList.add("has-focus")}),this.addDisposable(yn(document,"click",e=>{!e.composedPath().includes(this.parentElement)&&this.classList.remove("has-focus")})),this.#e=new IntersectionObserver(e=>{for(let t of e)console.log(t),t.isIntersecting||this.classList.remove("has-focus")}),this.#e.observe(this),this.addDisposable({dispose:()=>{this.#e.disconnect()}})}render(){return re`
            <div class="bg"></div>
            <div class="fg">Click or tap to interact</div>
        `}};window.customElements.define("kc-ui-focus-overlay",$f);var jf=class extends de{static{a(this,"KCUIPanelElement")}static{this.styles=[...de.styles,Je`
            :host {
                width: 100%;
                height: 100%;
                overflow: hidden;
                display: flex;
                flex-direction: column;
                background: var(--panel-bg);
                color: var(--panel-fg);
                --bg: var(--panel-bg);
            }

            :host(:last-child) {
                flex-grow: 1;
            }
        `]}render(){return re`<slot></slot>`}};window.customElements.define("kc-ui-panel",jf);var qf=class extends de{static{a(this,"KCUIPanelTitleElement")}static{this.styles=[...de.styles,Je`
            :host {
                flex: 0;
                width: 100%;
                text-align: left;
                padding: 0.2em 0.8em 0.2em 0.4em;
                display: flex;
                align-items: center;
                background: var(--panel-title-bg);
                color: var(--panel-title-fg);
                border-top: var(--panel-title-border);
                user-select: none;
            }

            div.title {
                flex: 1;
            }

            div.actions {
                flex: 0 1;
                display: flex;
                flex-direction: row;
                /* cheeky hack to work around scrollbar causing placement to be off. */
                padding-right: 6px;
            }
        `]}render(){return re`<div class="title">${this.title}</div>
            <div class="actions">
                <slot name="actions"></slot>
            </div>`}};window.customElements.define("kc-ui-panel-title",qf);var e2=class extends de{static{a(this,"KCUIPanelBodyElement")}static{this.styles=[...de.styles,Je`
            :host {
                width: 100%;
                min-height: 0;
                overflow-y: auto;
                overflow-x: hidden;
                flex: 1 0;
                font-weight: 300;
                font-size: 1em;
            }

            :host([padded]) {
                padding: 0.1em 0.8em 0.1em 0.4em;
            }
        `]}render(){return re`<slot></slot>`}};window.customElements.define("kc-ui-panel-body",e2);var t2=class extends de{static{a(this,"KCUIPanelLabelElement")}static{this.styles=[...de.styles,Je`
            :host {
                width: 100%;
                display: flex;
                flex-wrap: nowrap;
                padding: 0.2em 0.3em;
                background: var(--panel-subtitle-bg);
                color: var(--panel-subtitle-fg);
            }
        `]}render(){return re`<slot></slot>`}};window.customElements.define("kc-ui-panel-label",t2);var n2=class extends de{static{a(this,"KCUIPropertyList")}static{this.styles=[...de.styles,Je`
            :host {
                display: grid;
                gap: 1px;
                grid-template-columns: fit-content(50%) 1fr;
                background: var(--grid-outline);
                border-bottom: 1px solid var(--grid-outline);
            }
        `]}render(){return re`<slot></slot>`}};window.customElements.define("kc-ui-property-list",n2);var fu=class extends de{static{a(this,"KCUIPropertyListItemElement")}static{this.styles=[...de.styles,Je`
            :host {
                display: contents;
            }

            span {
                padding: 0.2em;
                background: var(--bg);
                text-overflow: ellipsis;
                white-space: nowrap;
                overflow: hidden;
                user-select: all;
            }

            :host(.label) span:first-child {
                user-select: none;
                grid-column-end: span 2;
                background: var(--panel-subtitle-bg);
                color: var(--panel-subtitle-fg);
            }

            :host(.label) span:last-child {
                display: none;
            }

            ::slotted(*) {
                vertical-align: middle;
            }
        `]}render(){return re`<span title="${this.name}">${this.name}</span
            ><span><slot></slot></span>`}};Me([Ye({type:String})],fu.prototype,"name",2);window.customElements.define("kc-ui-property-list-item",fu);var mr=class extends de{static{a(this,"KCUIRangeElement")}static{this.styles=[...de.styles,Je`
            :host {
                display: block;
                width: 100%;
                user-select: none;
            }

            input[type="range"] {
                all: unset;
                box-sizing: border-box;
                display: block;
                width: 100%;
                max-width: 100%;
                padding-top: 0.25em;
                padding-bottom: 0.25em;
                -webkit-appearance: none;
                appearance: none;
                font: inherit;
                cursor: grab;
                background: transparent;
                transition:
                    color var(--transition-time-medium) ease,
                    box-shadow var(--transition-time-medium) ease,
                    outline var(--transition-time-medium) ease,
                    background var(--transition-time-medium) ease,
                    border var(--transition-time-medium) ease;
            }

            input[type="range"]:hover {
                z-index: 10;
                box-shadow: var(--input-range-hover-shadow);
            }

            input[type="range"]:focus {
                box-shadow: none;
                outline: none;
            }

            input[type="range"]:disabled:hover {
                cursor: unset;
            }

            input[type="range"]::-webkit-slider-runnable-track {
                box-sizing: border-box;
                height: 0.5em;
                border: 1px solid transparent;
                border-radius: 0.5em;
                background: var(--input-range-bg);
            }

            input[type="range"]:hover::-webkit-slider-runnable-track,
            input[type="range"]:focus::-webkit-slider-runnable-track {
                border: 1px solid var(--input-range-hover-bg);
            }

            input[type="range"]:disabled::-webkit-slider-runnable-track {
                background: var(--input-range-disabled-bg);
            }

            input[type="range"]::-webkit-slider-thumb {
                -webkit-appearance: none;
                appearance: none;
                height: 1em;
                width: 1em;
                border-radius: 0.5em;
                margin-top: -0.3em;
                background: var(--input-range-fg);
            }

            input[type="range"]:focus::-webkit-slider-thumb {
                box-shadow: var(--input-range-handle-shadow);
            }
        `]}static get observedAttributes(){return["disabled","min","max","step","value"]}get value(){return this.input.value}set value(t){this.input.value=t}get valueAsNumber(){return this.input.valueAsNumber}attributeChangedCallback(t,n,r){if(this.input)switch(t){case"disabled":this.input.disabled=r!=null;break;case"min":this.input.min=r??"";break;case"max":this.input.max=r??"";break;case"step":this.input.step=r??"";break;case"value":this.value=r??"";break}}initialContentCallback(){this.input.disabled=this.disabled,this.input.addEventListener("input",t=>{t.stopPropagation(),this.dispatchEvent(new CustomEvent("kc-ui-range:input",{composed:!0,bubbles:!0}))})}render(){return re`<input
            type="range"
            min="${this.min}"
            max="${this.max}"
            step="${this.step}"
            value="${this.getAttribute("value")}">
        </input>`}};Me([Ye({type:String})],mr.prototype,"name",2),Me([Ye({type:String})],mr.prototype,"min",2),Me([Ye({type:String})],mr.prototype,"max",2),Me([Ye({type:String})],mr.prototype,"step",2),Me([Ye({type:Boolean})],mr.prototype,"disabled",2),Me([Tt("input",!0)],mr.prototype,"input",2);window.customElements.define("kc-ui-range",mr);var i2=class extends de{static{a(this,"KCUIResizerElement")}static{this.styles=[...de.styles,Je`
            :host {
                z-index: 999;
                user-select: none;
                display: block;
                width: 6px;
                margin-left: -6px;
                cursor: col-resize;
                background: transparent;
                opacity: 0;
                transition: opacity var(--transition-time-medium, 500) ease;
            }

            :host(:hover) {
                background: var(--resizer-bg, rebeccapurple);
                opacity: 1;
                transition: opacity var(--transition-time-short) ease;
            }

            :host(:hover.active),
            :host(.active) {
                background: var(--resizer-active-bg, rebeccapurple);
            }
        `]}initialContentCallback(){let e=this.previousElementSibling,t=this.nextElementSibling;this.addEventListener("mousedown",n=>{let r=n.clientX,s=t.getBoundingClientRect().width;document.body.style.cursor="col-resize",e.style.pointerEvents="none",e.style.userSelect="none",t.style.pointerEvents="none",t.style.userSelect="none",t.style.width=`${s}px`,t.style.maxWidth="unset",this.classList.add("active"),t.hasAttribute("collapsed")&&(console.log("removing collapsed"),t.removeAttribute("collapsed"));let o=a(u=>{let h=r-u.clientX,d=(s+h)*100/this.parentElement.getBoundingClientRect().width;t.style.width=`${d}%`},"mouse_move"),l=this.addDisposable(yn(window,"mousemove",o)),c=a(u=>{document.body.style.cursor="",e.style.pointerEvents="",e.style.userSelect="",t.style.pointerEvents="",t.style.userSelect="",this.classList.remove("active"),l.dispose()},"mouse_up");window.addEventListener("mouseup",c,{once:!0})})}};window.customElements.define("kc-ui-resizer",i2);var vR=Je`
    :host(.grow) {
        flex-basis: unset;
        flex-grow: 999;
    }

    :host(.shrink) {
        flex-grow: 0;
        flex-shrink: 1;
        width: unset;
    }

    :host:(.fixed) {
        flex-grow: 0;
        flex-shrink: 0;
    }
`,r2=class extends de{static{a(this,"KCUIView")}static{this.styles=[...de.styles,vR,Je`
            :host {
                flex-grow: 1;
                display: flex;
                overflow: hidden;
                flex-direction: column;
                position: relative;
            }
        `]}render(){return re`<slot></slot>`}};window.customElements.define("kc-ui-view",r2);var s2=class extends de{static{a(this,"KCUISplitView")}static{this.styles=[...de.styles,vR,Je`
            :host {
                display: flex;
                height: 100%;
                overflow: hidden;
            }

            :host([horizontal]) {
                flex-direction: column;
                max-height: 100%;
            }

            :host([vertical]) {
                flex-direction: row;
                max-width: 100%;
            }
        `]}render(){return re`<slot></slot>`}};window.customElements.define("kc-ui-split-view",s2);var Pl=class extends de{static{a(this,"KCUITextFilterInputElement")}static{this.styles=[...de.styles,Je`
            :host {
                display: flex;
                align-items: center;
                align-content: center;
                position: relative;
                border-bottom: 1px solid var(--grid-outline);
            }

            kc-ui-icon.before {
                pointer-events: none;
                position: absolute;
                left: 0;
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
                padding-left: 0.25em;
            }

            input {
                all: unset;
                display: block;
                width: 100%;
                max-width: 100%;
                border-radius: 0;
                padding: 0.4em;
                padding-left: 1.5em;
                text-align: left;
                font: inherit;
                background: var(--input-bg);
                color: var(--input-fg);
            }

            input:placeholder-shown + button {
                display: none;
            }

            button {
                all: unset;
                box-sizing: border-box;
                display: flex;
                align-items: center;
                color: var(--input-fg);
                padding: 0.25em;
            }

            button:hover {
                cursor: pointer;
                color: var(--input-accent);
            }
        `]}get value(){return this.input.value}set value(t){this.input.value=t,this.input.dispatchEvent(new Event("input",{bubbles:!0,composed:!0}))}initialContentCallback(){super.initialContentCallback(),this.button.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),this.value=""})}render(){return re`<kc-ui-icon class="flex before">search</kc-ui-icon>
            <input style="" type="text" placeholder="search" name="search" />
            <button type="button">
                <kc-ui-icon>close</kc-ui-icon>
            </button>`}};Me([Tt("input",!0)],Pl.prototype,"input",2),Me([Tt("button",!0)],Pl.prototype,"button",2);window.customElements.define("kc-ui-text-filter-input",Pl);var El=class extends de{static{a(this,"KCUIToggleMenuElement")}static{this.styles=[...de.styles,Je`
            * {
                box-sizing: border-box;
            }

            button {
                all: unset;
                box-sizing: border-box;
                user-select: none;
                width: 100%;
                max-width: 100%;
                margin: unset;
                font: inherit;
                padding: 0.3em 0.6em 0.3em 0.6em;
                display: flex;
                align-items: flex-end;
                justify-content: left;
                border: 1px solid transparent;
                border-radius: 0.25em;
                font-weight: 300;
                font-size: 1em;
                background: var(--dropdown-bg);
                color: var(--dropdown-fg);
                transition:
                    color var(--transition-time-medium, 500) ease,
                    background var(--transition-time-medium, 500) ease;
            }

            button:hover {
                background: var(--dropdown-hover-bg);
                color: var(--dropdown-hover-fg);
                box-shadow: none;
                outline: none;
            }

            button kc-ui-icon {
                font-size: 1em;
                margin-top: 0.1em;
                margin-bottom: 0.1em;
            }

            button span {
                display: none;
                margin-left: 0.5em;
            }

            :host([visible]) button {
                border-bottom-left-radius: 0;
                border-bottom-right-radius: 0;
            }

            :host([visible]) button span {
                display: revert;
            }

            ::slotted(kc-ui-dropdown) {
                border-top-left-radius: 0;
                border-top-right-radius: 0;
            }
        `]}get dropdown(){return this.queryAssignedElements("dropdown","kc-ui-dropdown")[0]}get button(){return this.renderRoot.querySelector("button")}initialContentCallback(){this.button.addEventListener("click",t=>{this.dropdown.toggle()}),this.addEventListener("kc-ui-dropdown:show",()=>{this.visible=!0}),this.addEventListener("kc-ui-dropdown:hide",()=>{this.visible=!1})}render(){return re`<button name="toggle" type="button" title="${this.title}">
                <kc-ui-icon>${this.icon??"question-mark"}</kc-ui-icon>
                <span>${this.title}</span>
            </button>
            <slot name="dropdown"></slot>`}};Me([Ye({type:String})],El.prototype,"icon",2),Me([Ye({type:Boolean})],El.prototype,"visible",2);window.customElements.define("kc-ui-toggle-menu",El);var NR=`<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs/><symbol id="pcb_file" viewBox="0 0 48 48">\r
    <path d="M11,44C10.2,44 9.5,43.7 8.9,43.1C8.3,42.5 8,41.8 8,41L8,7C8,6.2 8.3,5.5 8.9,4.9C9.5,4.3 10.2,4 11,4L29.05,4L40,14.95L40,41C40,41.8 39.7,42.5 39.1,43.1C38.5,43.7 37.8,44 37,44L11,44ZM27.55,16.3L27.55,7L11,7L11,41L37,41L37,16.3L27.55,16.3ZM11,7L11,16.3L11,7L11,41L11,7Z"/>\r
    <path d="M20.231,37.681C20.231,37.681 20.231,36.001 20.231,36.001L18.007,36.001C17.437,36.001 16.936,35.792 16.509,35.365C16.081,34.937 15.872,34.437 15.872,33.867L15.872,31.643L13.693,31.643L13.693,29.008C13.693,29.008 15.872,29.008 15.872,29.008L15.872,26.63L13.693,26.63L13.693,23.995C13.693,23.995 15.872,23.995 15.872,23.995L15.872,21.771C15.872,21.201 16.081,20.701 16.509,20.273C16.936,19.846 17.437,19.636 18.007,19.636C18.007,19.636 20.231,19.636 20.231,19.636L20.231,17.566L22.865,17.566C22.865,17.566 22.865,19.636 22.865,19.636C22.865,19.636 25.244,19.636 25.244,19.636L25.244,17.566L27.878,17.566C27.878,17.566 27.878,19.636 27.878,19.636L30.102,19.636C30.672,19.636 31.173,19.846 31.6,20.273C32.028,20.701 32.237,21.201 32.237,21.771C32.237,21.771 32.237,23.995 32.237,23.995L34.307,23.995L34.307,26.63C34.307,26.63 32.237,26.63 32.237,26.63C32.237,26.63 32.237,29.008 32.237,29.008L34.307,29.008L34.307,31.643C34.307,31.643 32.237,31.643 32.237,31.643L32.237,33.867C32.237,34.437 32.028,34.937 31.6,35.365C31.173,35.792 30.672,36.001 30.102,36.001L27.878,36.001L27.878,38.181L25.244,38.181C25.244,38.181 25.244,36.001 25.244,36.001L22.865,36.001L22.865,38.181L20.231,38.181L20.231,37.681ZM29.602,33.367L29.602,22.271L18.507,22.271L18.507,33.367L29.602,33.367ZM20.694,24.595L27.279,24.595L27.279,31.179L20.694,31.179L20.694,24.595ZM23.329,28.545C23.329,28.545 24.644,28.545 24.644,28.545C24.644,28.545 24.644,27.229 24.644,27.229C24.644,27.229 23.329,27.229 23.329,27.229L23.329,28.545Z"/>\r
</symbol><symbol id="reset" viewBox="0 0 1024 1024">\r
    <path d="M16 960.608L63.392 1008l323.232-323.232v146.048h66.688v-260.128H193.184v66.688h146.048L16 960.608z m621.376-621.376V193.184h-66.688v260.128h260.128v-66.688h-146.048L1008 63.392 960.608 16 637.376 339.232z m193.44 298.144v-66.688h-260.128v260.128h66.688v-146.048L960.608 1008l47.392-47.392-323.232-323.232h146.048zM16 63.392l323.232 323.232H193.184v66.688h260.128V193.184h-66.688v146.048L63.392 16 16 63.392z" p-id="33295" fill="#ffffff"/>\r
</symbol><symbol id="schematic_file" viewBox="0 0 48 48">\r
    <path d="M11,44C10.2,44 9.5,43.7 8.9,43.1C8.3,42.5 8,41.8 8,41L8,7C8,6.2 8.3,5.5 8.9,4.9C9.5,4.3 10.2,4 11,4L29.05,4L40,14.95L40,41C40,41.8 39.7,42.5 39.1,43.1C38.5,43.7 37.8,44 37,44L11,44ZM27.55,16.3L27.55,7L11,7L11,41L37,41L37,16.3L27.55,16.3ZM11,7L11,16.3L11,7L11,41L11,7Z"/>\r
    <path d="M18.256,26.367L15.377,26.367L15.377,23.367L18.256,23.367L18.256,23.184C18.256,22.155 18.784,21.198 19.654,20.648C20.524,20.098 21.615,20.033 22.544,20.475L24.69,21.494L24.69,19.353L27.69,19.353L27.69,22.92L32.411,25.164C33.457,25.661 34.123,26.715 34.123,27.873C34.123,29.031 33.457,30.086 32.411,30.583L27.69,32.827L27.69,36.394L24.69,36.394L24.69,34.252L22.544,35.272C21.615,35.714 20.524,35.648 19.654,35.099C18.784,34.549 18.256,33.592 18.256,32.563L18.256,32.38L15.377,32.38L15.377,29.38L18.256,29.38L18.256,26.367ZM21.256,32.563L31.123,27.873L21.256,23.184L21.256,32.563Z"/>\r
</symbol><symbol id="zoom_footprint" viewBox="0 0 48 48">\r
    <g>\r
        <path d="M33,38.5C34.567,38.5 35.875,37.975 36.925,36.925C37.975,35.875 38.5,34.567 38.5,33C38.5,31.433 37.975,30.125 36.925,29.075C35.875,28.025 34.567,27.5 33,27.5C31.433,27.5 30.125,28.025 29.075,29.075C28.025,30.125 27.5,31.433 27.5,33C27.5,34.567 28.025,35.875 29.075,36.925C30.125,37.975 31.433,38.5 33,38.5ZM43.2,45.3L37.842,39.95C37.147,40.417 36.392,40.792 35.575,41.075C34.758,41.358 33.9,41.5 33,41.5C30.639,41.5 28.632,40.673 26.979,39.019C25.326,37.365 24.5,35.357 24.5,32.994C24.5,30.631 25.327,28.625 26.981,26.975C28.635,25.325 30.643,24.5 33.006,24.5C35.369,24.5 37.375,25.326 39.025,26.979C40.675,28.632 41.5,30.639 41.5,33C41.5,33.9 41.358,34.758 41.075,35.575C40.792,36.392 40.417,37.147 39.95,37.842L45.3,43.2L43.2,45.3Z"/>\r
        <path d="M22.597,38L21,38L21,42L18,42L18,38L13,38C12.2,38 11.5,37.7 10.9,37.1C10.3,36.5 10,35.8 10,35L10,30L6,30L6,27L10,27L10,20.8L6,20.8L6,17.8L10,17.8L10,12.8C10,12 10.3,11.3 10.9,10.7C11.5,10.1 12.2,9.8 13,9.8L18,9.8L18,6L21,6L21,9.8L27.2,9.8L27.2,6L30.2,6L30.2,9.8L35.2,9.8C36,9.8 36.7,10.1 37.3,10.7C37.9,11.3 38.2,12 38.2,12.8L38.2,17.8L42,17.8L42,20.8L38.2,20.8L38.2,22.691C37.262,22.214 36.262,21.88 35.2,21.69L35.2,12.8L13,12.8L13,35L21.657,35C21.83,36.06 22.143,37.06 22.597,38ZM22.119,29.15L18.85,29.15L18.85,18.9L29.1,18.9L29.1,22.139C28.029,22.515 27.029,23.058 26.1,23.767L26.1,21.9L21.85,21.9L21.85,26.15L23.727,26.15C23.025,27.079 22.489,28.079 22.119,29.15Z"/>\r
    </g>\r
</symbol><symbol id="zoom_in" viewBox="0 0 1024 1024">\r
    <path d="M801.171 547.589H222.83c-17.673 0-32-14.327-32-32s14.327-32 32-32h578.341c17.673 0 32 14.327 32 32s-14.327 32-32 32z" fill="#e6e6e6" p-id="45748"/>\r
</symbol><symbol id="zoom_out" viewBox="0 0 1024 1024"><path d="M469.333333 469.333333V170.666667h85.333334v298.666666h298.666666v85.333334h-298.666666v298.666666h-85.333334v-298.666666H170.666667v-85.333334h298.666666z" fill="#ffffff" p-id="44249"/></symbol><symbol id="zoom_page" viewBox="0 0 48 48">\r
    <g>\r
        <path d="M9,41L24.75,41C25.417,41.7 26.158,42.3 26.975,42.8C27.792,43.3 28.683,43.7 29.65,44L9,44C8.2,44 7.5,43.7 6.9,43.1C6.3,42.5 6,41.8 6,41L6.02,9.006C6.02,8.206 6.32,7.506 6.92,6.906C7.52,6.306 8.22,6.006 9.02,6.006L27.07,6.006L38,14.95L38,22.65C37.533,22.417 37.05,22.217 36.55,22.05C36.05,21.883 35.533,21.75 35,21.65L35,16.3L25.55,16.3L25.57,9.006L9.02,9.006L9,16.3L9,41Z"/>\r
        <path d="M43.2,45.3L37.842,39.95C37.147,40.417 36.392,40.792 35.575,41.075C34.758,41.358 33.9,41.5 33,41.5C30.639,41.5 28.632,40.673 26.979,39.019C25.326,37.365 24.5,35.357 24.5,32.994C24.5,30.631 25.327,28.625 26.981,26.975C28.635,25.325 30.643,24.5 33.006,24.5C35.369,24.5 37.375,25.326 39.025,26.979C40.675,28.632 41.5,30.639 41.5,33C41.5,33.9 41.358,34.758 41.075,35.575C40.792,36.392 40.417,37.147 39.95,37.842L45.3,43.2L43.2,45.3ZM33,38.5C34.567,38.5 35.875,37.975 36.925,36.925C37.975,35.875 38.5,34.567 38.5,33C38.5,31.433 37.975,30.125 36.925,29.075C35.875,28.025 34.567,27.5 33,27.5C31.433,27.5 30.125,28.025 29.075,29.075C28.025,30.125 27.5,31.433 27.5,33C27.5,34.567 28.025,35.875 29.075,36.925C30.125,37.975 31.433,38.5 33,38.5Z"/>\r
    </g>\r
</symbol></svg>`;var PR=URL.createObjectURL(new Blob([NR],{type:"image/svg+xml"}));vl.sprites_url=PR;var No="";function pu(i){return i[Symbol.iterator]().next().value}a(pu,"first");function wl(i){let e=0;for(let t of i)e++;return e}a(wl,"length");var Ai=class{constructor(e,t=1){this.name=e;this.level=t}static{a(this,"Logger")}#e(e,...t){e(`%c${this.name}:%c`,"color: ButtonText","color: inherit",...t)}debug(...e){this.level>=2&&this.#e(console.debug,...e)}info(...e){this.level>=1&&this.#e(console.info.bind(window.console),...e)}warn(...e){this.level>=0&&this.#e(console.warn,...e)}error(...e){this.level>=0&&this.#e(console.error,...e)}},US=new Ai("kicanvas");function Ll(...i){US.warn(...i)}a(Ll,"warn");var dt=class i{static{a(this,"Matrix3")}constructor(e){if(e.length!=9)throw new Error(`Matrix3 requires 9 elements, got ${e}`);this.elements=new Float32Array(e)}static from_DOMMatrix(e){return new i([e.m11,e.m12,e.m14,e.m21,e.m22,e.m24,e.m41,e.m42,e.m44])}to_DOMMatrix(){let e=this.elements;return new DOMMatrix([e[0],e[3],e[1],e[4],e[6],e[7]])}to_4x4_DOMMatrix(){let e=this.elements;return new DOMMatrix([e[0],e[1],0,e[2],e[3],e[4],0,e[5],0,0,1,0,e[6],e[7],0,1])}static identity(){return new i([1,0,0,0,1,0,0,0,1])}static orthographic(e,t){return new i([2/e,0,0,0,-2/t,0,-1,1,1])}copy(){return new i(this.elements)}set(e){if(e.length!=9)throw new Error(`Matrix3 requires 9 elements, got ${e}`);this.elements.set(e)}transform(e){let t=this.elements[0],n=this.elements[0*3+1],r=this.elements[1*3+0],s=this.elements[1*3+1],o=this.elements[2*3+0],l=this.elements[2*3+1],c=e.x,u=e.y,h=c*t+u*r+o,d=c*n+u*s+l;return new A(h,d)}*transform_all(e){for(let t of e)yield this.transform(t)}static transform_all(e,t){return e?Array.from(e.transform_all(t)):t}multiply_self(e){let t=this.elements[0],n=this.elements[0*3+1],r=this.elements[0*3+2],s=this.elements[1*3+0],o=this.elements[1*3+1],l=this.elements[1*3+2],c=this.elements[2*3+0],u=this.elements[2*3+1],h=this.elements[2*3+2],d=e.elements[0*3+0],f=e.elements[0*3+1],m=e.elements[0*3+2],_=e.elements[1*3+0],M=e.elements[1*3+1],g=e.elements[1*3+2],R=e.elements[2*3+0],y=e.elements[2*3+1],b=e.elements[2*3+2];return this.elements[0]=d*t+f*s+m*c,this.elements[1]=d*n+f*o+m*u,this.elements[2]=d*r+f*l+m*h,this.elements[3]=_*t+M*s+g*c,this.elements[4]=_*n+M*o+g*u,this.elements[5]=_*r+M*l+g*h,this.elements[6]=R*t+y*s+b*c,this.elements[7]=R*n+y*o+b*u,this.elements[8]=R*r+y*l+b*h,this}multiply(e){return this.copy().multiply_self(e)}inverse(){let e=this.elements[0],t=this.elements[0*3+1],n=this.elements[0*3+2],r=this.elements[1*3+0],s=this.elements[1*3+1],o=this.elements[1*3+2],l=this.elements[2*3+0],c=this.elements[2*3+1],u=this.elements[2*3+2],h=u*s-o*c,d=-u*r+o*l,f=c*r-s*l,_=1/(e*h+t*d+n*f);return new i([h*_,(-u*t+n*c)*_,(o*t-n*s)*_,d*_,(u*e-n*l)*_,(-o*e+n*r)*_,f*_,(-c*e+t*l)*_,(s*e-t*r)*_])}static translation(e,t){return new i([1,0,0,0,1,0,e,t,1])}translate_self(e,t){return this.multiply_self(i.translation(e,t))}translate(e,t){return this.copy().translate_self(e,t)}static scaling(e,t){return new i([e,0,0,0,t,0,0,0,1])}scale_self(e,t){return this.multiply_self(i.scaling(e,t))}scale(e,t){return this.copy().scale_self(e,t)}static rotation(e){let t=new Ve(e).radians,n=Math.cos(t),r=Math.sin(t);return new i([n,-r,0,r,n,0,0,0,1])}rotate_self(e){return this.multiply_self(i.rotation(e))}rotate(e){return this.copy().rotate_self(e)}get absolute_translation(){return this.transform(new A(0,0))}get absolute_rotation(){let e=this.transform(new A(0,0));return this.transform(new A(1,0)).sub(e).angle.normalize()}};var A=class i{static{a(this,"Vec2")}constructor(e=0,t){this.set(e,t)}copy(){return new i(...this)}set(e,t){let n=null;if(Li(e)&&Li(t)?n=e:e instanceof i?(n=e.x,t=e.y):e instanceof Array?(n=e[0],t=e[1]):e instanceof Object&&Object.hasOwn(e,"x")?(n=e.x,t=e.y):e==0&&t==null&&(n=0,t=0),n==null||t==null)throw new Error(`Invalid parameters x: ${e}, y: ${t}.`);this.x=n,this.y=t}*[Symbol.iterator](){yield this.x,yield this.y}get magnitude(){return Math.sqrt(this.x**2+this.y**2)}get squared_magnitude(){return this.x**2+this.y**2}get normal(){return new i(-this.y,this.x)}get angle(){return new Ve(Math.atan2(this.y,this.x))}get kicad_angle(){return this.x==0&&this.y==0?new Ve(0):this.y==0?this.x>=0?new Ve(0):Ve.from_degrees(-180):this.x==0?this.y>=0?Ve.from_degrees(90):Ve.from_degrees(-90):this.x==this.y?this.x>=0?Ve.from_degrees(45):Ve.from_degrees(-135):this.x==-this.y?this.x>=0?Ve.from_degrees(-45):Ve.from_degrees(135):this.angle}normalize(){if(this.x==0&&this.y==0)return new i(0,0);let e=this.magnitude,t=this.x/=e,n=this.y/=e;return new i(t,n)}equals(e){return this.x==e?.x&&this.y==e?.y}add(e){return new i(this.x+e.x,this.y+e.y)}sub(e){return new i(this.x-e.x,this.y-e.y)}scale(e){return new i(this.x*e.x,this.y*e.y)}rotate(e){return dt.rotation(e).transform(this)}multiply(e){return Li(e)?new i(this.x*e,this.y*e):new i(this.x*e.x,this.y*e.y)}resize(e){return this.normalize().multiply(e)}cross(e){return this.x*e.y-this.y*e.x}static segment_intersect(e,t,n,r){let s=t.sub(e),o=r.sub(n),l=n.sub(e),c=o.cross(s),u=o.cross(l),h=s.cross(l);return c==0||c>0&&(h<0||h>c||u<0||u>c)||c<0&&(h<c||u<c||u>0||h>0)?null:new i(n.x+h/c*o.x,n.y+h/c*o.y)}};var Ve=class i{static{a(this,"Angle")}#e;#t;static rad_to_deg(e){return e/Math.PI*180}static deg_to_rad(e){return e/180*Math.PI}static round(e){return Math.round((e+Number.EPSILON)*100)/100}constructor(e){if(e instanceof i)return e;this.radians=e}copy(){return new i(this.radians)}get radians(){return this.#e}set radians(e){this.#e=e,this.#t=i.round(i.rad_to_deg(e))}get degrees(){return this.#t}set degrees(e){this.#t=e,this.#e=i.deg_to_rad(e)}static from_degrees(e){return new i(i.deg_to_rad(e))}add(e){let t=this.radians+new i(e).radians;return new i(t)}sub(e){let t=this.radians-new i(e).radians;return new i(t)}normalize(){let e=i.round(this.degrees);for(;e<0;)e+=360;for(;e>=360;)e-=360;return i.from_degrees(e)}normalize180(){let e=i.round(this.degrees);for(;e<=-180;)e+=360;for(;e>180;)e-=360;return i.from_degrees(e)}normalize720(){let e=i.round(this.degrees);for(;e<-360;)e+=360;for(;e>=360;)e-=360;return i.from_degrees(e)}negative(){return new i(-this.radians)}get is_vertical(){return this.degrees==90||this.degrees==270}get is_horizontal(){return this.degrees==0||this.degrees==180}rotate_point(e,t=new A(0,0)){let n=e.x-t.x,r=e.y-t.y,s=this.normalize();if(s.degrees!=0)if(s.degrees==90)[n,r]=[r,-n];else if(s.degrees==180)[n,r]=[-n,-r];else if(s.degrees==270)[n,r]=[-r,n];else{let o=Math.sin(s.radians),l=Math.cos(s.radians),[c,u]=[n,r];n=u*o+c*l,r=u*l-c*o}return n+=t.x,r+=t.y,new A(n,r)}};var je=class i{constructor(e=0,t=0,n=0,r=0,s){this.x=e;this.y=t;this.w=n;this.h=r;this.context=s;this.w<0&&(this.w*=-1,this.x-=this.w),this.h<0&&(this.h*=-1,this.y-=this.h)}static{a(this,"BBox")}copy(){return new i(this.x,this.y,this.w,this.h,this.context)}static from_corners(e,t,n,r,s){return n<e&&([e,n]=[n,e]),r<t&&([t,r]=[r,t]),new i(e,t,n-e,r-t,s)}static from_points(e,t){if(e.length==0)return new i(0,0,0,0);let n=e[0],r=n.copy(),s=n.copy();for(let o of e)r.x=Math.min(r.x,o.x),r.y=Math.min(r.y,o.y),s.x=Math.max(s.x,o.x),s.y=Math.max(s.y,o.y);return i.from_corners(r.x,r.y,s.x,s.y,t)}static combine(e,t){let n=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,o=Number.NEGATIVE_INFINITY;for(let l of e)l.valid&&(n=Math.min(n,l.x),r=Math.min(r,l.y),s=Math.max(s,l.x2),o=Math.max(o,l.y2));return n==Number.POSITIVE_INFINITY||r==Number.POSITIVE_INFINITY||s==Number.NEGATIVE_INFINITY||o==Number.NEGATIVE_INFINITY?new i(0,0,0,0,t):i.from_corners(n,r,s,o,t)}get valid(){return(this.w!==0||this.h!==0)&&this.w!==void 0&&this.h!==void 0}get start(){return new A(this.x,this.y)}set start(e){this.x=e.x,this.y=e.y}get end(){return new A(this.x+this.w,this.y+this.h)}set end(e){this.x2=e.x,this.y2=e.y}get top_left(){return this.start}get top_right(){return new A(this.x+this.w,this.y)}get bottom_left(){return new A(this.x,this.y+this.h)}get bottom_right(){return this.end}get x2(){return this.x+this.w}set x2(e){this.w=e-this.x,this.w<0&&(this.w*=-1,this.x-=this.w)}get y2(){return this.y+this.h}set y2(e){this.h=e-this.y,this.h<0&&(this.h*=-1,this.y-=this.h)}get center(){return new A(this.x+this.w/2,this.y+this.h/2)}transform(e){let t=e.transform(this.start),n=e.transform(this.end);return i.from_corners(t.x,t.y,n.x,n.y,this.context)}grow(e,t){return t??=e,new i(this.x-e,this.y-t,this.w+e*2,this.h+t*2,this.context)}scale(e){return i.from_points([this.start.multiply(e),this.end.multiply(e)],this.context)}mirror_vertical(){return new i(this.x,-this.y,this.w,-this.h)}contains(e){return this.contains_point(e.start)&&this.contains_point(e.end)}contains_point(e){return e.x>=this.x&&e.x<=this.x2&&e.y>=this.y&&e.y<=this.y2}constrain_point(e){let t=Math.min(Math.max(e.x,this.x),this.x2),n=Math.min(Math.max(e.y,this.y),this.y2);return new A(t,n)}intersect_segment(e,t){if(this.contains_point(e))return null;let n=[this.top_left,this.bottom_left],r=[this.top_right,this.bottom_right],s=[this.top_left,this.top_right],o=[this.bottom_left,this.bottom_right],l=e,c=t;for(let u of[n,r,s,o]){let h=A.segment_intersect(e,t,...u);h&&h.sub(l).squared_magnitude<c.sub(l).squared_magnitude&&c.set(h)}return l.equals(c)?null:c}};var Un=class i{constructor(e,t,n,r,s){this.center=e;this.radius=t;this.start_angle=n;this.end_angle=r;this.width=s}static{a(this,"Arc")}static from_three_points(e,t,n,r=1){let o=IS(new A(e.x*1e6,e.y*1e6),new A(t.x*1e6,t.y*1e6),new A(n.x*1e6,n.y*1e6));o.x/=1e6,o.y/=1e6;let l=o.sub(t).magnitude,c=e.sub(o),u=t.sub(o),h=n.sub(o),d=c.angle,f=u.angle,m=h.angle,_=f.sub(d).normalize180(),M=m.sub(f).normalize180(),g=_.add(M);return m=d.add(g),new i(o,l,d,m,r)}static from_center_start_end(e,t,n,r){let s=t.sub(e).magnitude,o=t.sub(e),l=n.sub(e),c=o.kicad_angle,u=l.kicad_angle;return u.degrees==c.degrees&&(u.degrees=c.degrees+360),c.degrees>u.degrees&&(u.degrees<0?u=u.normalize():c=c.normalize().sub(Ve.from_degrees(-360))),new i(e,s,c,u,r)}get start_radial(){return this.start_angle.rotate_point(new A(this.radius,0))}get start_point(){return this.center.add(this.start_radial)}get end_radial(){return this.end_angle.rotate_point(new A(this.radius,0))}get end_point(){return this.center.add(this.end_radial)}get mid_angle(){return new Ve((this.start_angle.radians+this.end_angle.radians)/2)}get mid_radial(){return this.mid_angle.rotate_point(new A(this.radius,0))}get mid_point(){return this.center.add(this.mid_radial)}get arc_angle(){return this.end_angle.sub(this.start_angle)}to_polyline(){let e=[],t=this.start_angle.radians,n=this.end_angle.radians;t>n&&([n,t]=[t,n]);for(let s=t;s<n;s+=Math.PI/32)e.push(new A(this.center.x+Math.cos(s)*this.radius,this.center.y+Math.sin(s)*this.radius));let r=new A(this.center.x+Math.cos(n)*this.radius,this.center.y+Math.sin(n)*this.radius);return r.equals(e[e.length-1])||e.push(r),e}to_polygon(){let e=this.to_polyline();return e.push(this.center),e}get bbox(){let e=[this.start_point,this.mid_point,this.end_point];return this.start_angle.degrees<0&&this.end_angle.degrees>=0&&e.push(this.center.add(new A(this.radius,0))),this.start_angle.degrees<90&&this.end_angle.degrees>=90&&e.push(this.center.add(new A(0,this.radius))),this.start_angle.degrees<180&&this.end_angle.degrees>=180&&e.push(this.center.add(new A(-this.radius,0))),this.start_angle.degrees<270&&this.end_angle.degrees>=270&&e.push(this.center.add(new A(0,this.radius))),this.start_angle.degrees<360&&this.end_angle.degrees>=360&&e.push(this.center.add(new A(0,this.radius))),je.from_points(e)}};function IS(i,e,t){let n=Math.SQRT1_2,r=new A(0,0),s=e.y-i.y,o=e.x-i.x,l=t.y-e.y,c=t.x-e.x;if(o==0&&l==0||s==0&&c==0)return r.x=(i.x+t.x)/2,r.y=(i.y+t.y)/2,r;o==0&&(o=Number.EPSILON),c==0&&(c=-Number.EPSILON);let u=s/o,h=l/c,d=u*new A(.5/s,.5/o).magnitude,f=h*new A(.5/l,.5/c).magnitude;if(u==h){if(i==t)return r.x=(i.x+e.x)/2,r.y=(i.y+e.y)/2,r;u+=Number.EPSILON,h-=Number.EPSILON}u==0&&(u=Number.EPSILON);let m=u*h*(i.y-t.y),_=m*Math.sqrt(d/u*d/u+f/h*f/h+n/(i.y-t.y)*(n/(i.y-t.y))),M=h*(i.x+e.x),g=M*Math.sqrt(f/h*f/h+n/(i.x+e.x)*n/(i.x+e.x)),R=u*(e.x+t.x),y=R*Math.sqrt(d/u*d/u+n/(e.x+t.x)*n/(e.x+t.x)),b=2*(h-u),S=2*Math.sqrt(f*f+d*d),C=m+M-R,W=Math.sqrt(_*_+g*g+y*y),F=(m+M-R)/b,ee=F*Math.sqrt(W/C*W/C+S/b*S/b),P=(i.x+e.x)/2-F,U=Math.sqrt(1/8+ee*ee),j=P/u,ae=j*Math.sqrt(U/P*U/P+d/u*d/u),_e=j+(i.y+e.y)/2,D=Math.sqrt(ae*ae+1/8),z=Math.floor((F+50)/100)*100,se=Math.floor((_e+50)/100)*100,fe=Math.floor((F+5)/10)*10,le=Math.floor((_e+5)/10)*10;return Math.abs(z-F)<ee&&Math.abs(se-_e)<D?(r.x=z,r.y=se):Math.abs(fe-F)<ee&&Math.abs(le-_e)<D?(r.x=fe,r.y=le):(r.x=F,r.y=_e),r}a(IS,"arc_center_from_three_points");var mu=class{constructor(e=new A(0,0),t=new A(0,0),n=1,r=new Ve(0)){this.viewport_size=e;this.center=t;this.zoom=n;this.rotation=r}static{a(this,"Camera2")}translate(e){this.center.x+=e.x,this.center.y+=e.y}rotate(e){this.rotation=this.rotation.add(e)}get matrix(){let e=this.viewport_size.x/2,t=this.viewport_size.y/2,n=this.center.x-this.center.x*this.zoom,r=this.center.y-this.center.y*this.zoom,s=-(this.center.x-e)+n,o=-(this.center.y-t)+r;return dt.translation(s,o).rotate_self(this.rotation).scale_self(this.zoom,this.zoom)}get bbox(){let e=this.matrix.inverse(),t=e.transform(new A(0,0)),n=e.transform(new A(this.viewport_size.x,this.viewport_size.y));return new je(t.x,t.y,n.x-t.x,n.y-t.y)}set bbox(e){let t=this.viewport_size.x/e.w,n=this.viewport_size.y/e.h,r=e.x+e.w/2,s=e.y+e.h/2;this.zoom=Math.min(t,n),this.center.set(r,s)}get top(){return this.bbox.y}get bottom(){return this.bbox.y2}get left(){return this.bbox.x}get right(){return this.bbox.x2}apply_to_canvas(e){this.viewport_size.set(e.canvas.clientWidth,e.canvas.clientHeight);let t=dt.from_DOMMatrix(e.getTransform());t.multiply_self(this.matrix),e.setTransform(t.to_DOMMatrix())}screen_to_world(e){return this.matrix.inverse().transform(e)}world_to_screen(e){return this.matrix.transform(e)}};var w=class i{constructor(e,t,n,r=1){this.r=e;this.g=t;this.b=n;this.a=r}static{a(this,"Color")}copy(){return new i(this.r,this.g,this.b,this.a)}static get transparent_black(){return new i(0,0,0,0)}static get black(){return new i(0,0,0,1)}static get white(){return new i(1,1,1,1)}static from_css(e){let t,n,r,s;if(e[0]=="#")e=e.slice(1),e.length==3&&(e=`${e[0]}${e[0]}${e[1]}${e[1]}${e[2]}${e[2]}`),e.length==6&&(e=`${e}FF`),[t,n,r,s]=[parseInt(e.slice(0,2),16)/255,parseInt(e.slice(2,4),16)/255,parseInt(e.slice(4,6),16)/255,parseInt(e.slice(6,8),16)/255];else if(e.startsWith("rgb")){e.startsWith("rgba")||(e=`rgba(${e.slice(4,-1)}, 1)`),e=e.trim().slice(5,-1);let o=e.split(",");if(o.length!=4)throw new Error(`Invalid color ${e}`);[t,n,r,s]=[parseFloat(o[0])/255,parseFloat(o[1])/255,parseFloat(o[2])/255,parseFloat(o[3])]}else throw new Error(`Unable to parse CSS color string ${e}`);return new i(t,n,r,s)}to_css(){return`rgba(${this.r_255}, ${this.g_255}, ${this.b_255}, ${this.a})`}to_array(){return[this.r,this.g,this.b,this.a]}get r_255(){return Math.round(this.r*255)}set r_255(e){this.r=e/255}get g_255(){return Math.round(this.g*255)}set g_255(e){this.g=e/255}get b_255(){return Math.round(this.b*255)}set b_255(e){this.b=e/255}get is_transparent_black(){return this.r==0&&this.g==0&&this.b==0&&this.a==0}with_alpha(e){let t=this.copy();return t.a=e,t}desaturate(){if(this.r==this.g&&this.r==this.b)return this;let[e,t,n]=FS(this.r,this.g,this.b);return new i(...WS(e,0,n))}mix(e,t){return new i(e.r*(1-t)+this.r*t,e.g*(1-t)+this.g*t,e.b*(1-t)+this.b*t,this.a)}};function FS(i,e,t){let n=Math.max(i,e,t),r=Math.min(i,e,t),s=(r+n)/2,o=n-r,[l,c]=[NaN,0];if(o!==0){switch(c=s===0||s===1?0:(n-s)/Math.min(s,1-s),n){case i:l=(e-t)/o+(e<t?6:0);break;case e:l=(t-i)/o+2;break;case t:l=(i-e)/o+4}l=l*60}return[l,c*100,s*100]}a(FS,"rgb_to_hsl");function WS(i,e,t){i=i%360,i<0&&(i+=360),e/=100,t/=100;function n(r){let s=(r+i/30)%12,o=e*Math.min(t,1-t);return t-o*Math.max(-1,Math.min(s-3,9-s,1))}return a(n,"f"),[n(0),n(8),n(4)]}a(WS,"hsl_to_rgb");var In=class{constructor(e,t,n){this.center=e;this.radius=t;this.color=n}static{a(this,"Circle")}},zr=class{constructor(e,t,n,r,s,o){this.center=e;this.radius=t;this.start_angle=n;this.end_angle=r;this.width=s;this.color=o}static{a(this,"Arc")}},bt=class i{constructor(e,t,n){this.points=e;this.width=t;this.color=n}static{a(this,"Polyline")}static from_BBox(e,t,n){return new i([e.top_left,e.top_right,e.bottom_right,e.bottom_left,e.top_left],t,n)}},fn=class i{constructor(e,t){this.points=e;this.color=t}static{a(this,"Polygon")}static from_BBox(e,t){return new i([e.top_left,e.top_right,e.bottom_right,e.bottom_left],t)}};var $r=class{constructor(e){this.canvas_size=new A(0,0);this.state=new Al;this.#t=w.white.copy();this.canvas=e,this.background_color=this.#t}static{a(this,"Renderer")}#e;#t;get background_color(){return this.#t}set background_color(e){this.#t=e,this.canvas.style.backgroundColor=this.background_color.to_css()}start_bbox(){this.#e=new je(0,0,0,0)}add_bbox(e){this.#e&&(this.#e=je.combine([this.#e,e],e.context))}end_bbox(e){let t=this.#e;if(t==null)throw new Error("No current bbox");return t.context=e,this.#e=null,t}prep_circle(e,t,n){let r;e instanceof In?r=e:r=new In(e,t,n??this.state.fill),(!r.color||r.color.is_transparent_black)&&(r.color=this.state.fill??w.transparent_black),r.center=this.state.matrix.transform(r.center);let s=new A(r.radius,r.radius);return this.add_bbox(je.from_points([r.center.add(s),r.center.sub(s)])),r}prep_arc(e,t,n,r,s,o){let l;e instanceof zr?l=e:l=new zr(e,t,n??new Ve(0),r??new Ve(Math.PI*2),s??this.state.stroke_width,o??this.state.stroke),(!l.color||l.color.is_transparent_black)&&(l.color=this.state.stroke??w.transparent_black);let u=new Un(l.center,l.radius,l.start_angle,l.end_angle,l.width).to_polyline();return this.line(new bt(u,l.width,l.color)),l}prep_line(e,t,n){let r;e instanceof bt?r=e:r=new bt(e,t??this.state.stroke_width,n??this.state.stroke),(!r.color||r.color.is_transparent_black)&&(r.color=this.state.stroke??w.transparent_black),r.points=Array.from(this.state.matrix.transform_all(r.points));let s=je.from_points(r.points);return s=s.grow(r.width),this.add_bbox(s),r}prep_polygon(e,t){let n;return e instanceof fn?n=e:n=new fn(e,t??this.state.fill),(!n.color||n.color.is_transparent_black)&&(n.color=this.state.fill??w.transparent_black),n.points=Array.from(this.state.matrix.transform_all(n.points)),this.add_bbox(je.from_points(n.points)),n}glyphs(e){}},jr=class{constructor(e,t){this.renderer=e;this.name=t;this.composite_operation="source-over"}static{a(this,"RenderLayer")}dispose(){this.renderer.remove_layer(this)}},o2=class i{constructor(e=dt.identity(),t=w.black,n=w.black,r=0){this.matrix=e;this.fill=t;this.stroke=n;this.stroke_width=r}static{a(this,"RenderState")}copy(){return new i(this.matrix.copy(),this.fill?.copy(),this.stroke?.copy(),this.stroke_width)}},Al=class{static{a(this,"RenderStateStack")}#e;constructor(){this.#e=[new o2]}get top(){return this.#e.at(-1)}get matrix(){return this.top.matrix}set matrix(e){this.top.matrix=e}get stroke(){return this.top.stroke}set stroke(e){this.top.stroke=e}get fill(){return this.top.fill}set fill(e){this.top.fill=e}get stroke_width(){return this.top.stroke_width}set stroke_width(e){this.top.stroke_width=e}multiply(e){this.top.matrix.multiply_self(e)}push(){this.#e.push(this.top.copy())}pop(){this.#e.pop()}};var wR="",pn=class{constructor(e,t=null){this.type=e;this.value=t}static{a(this,"Token")}static{this.OPEN=Symbol("opn")}static{this.CLOSE=Symbol("clo")}static{this.ATOM=Symbol("atm")}static{this.NUMBER=Symbol("num")}static{this.STRING=Symbol("str")}};function gu(i){return i>="0"&&i<="9"}a(gu,"is_digit");function LR(i){return i>="A"&&i<="Z"||i>="a"&&i<="z"}a(LR,"is_alpha");function Ru(i){return i===wR||i===" "||i===`
`||i==="\r"||i==="	"}a(Ru,"is_whitespace");function a2(i){return LR(i)||gu(i)||["_","-",":","!",".","[","]","{","}","@","*","/","&","#","%","+","=","~","$"].includes(i)}a(a2,"is_atom");function Ol(i,e){let t=i.slice(0,e).lastIndexOf(`
`);t<0&&(t=0);let n=i.slice(e).indexOf(`
`);return n<0&&(n=20),i.slice(t,e+n)}a(Ol,"error_context");function*CS(i){let e=new pn(pn.OPEN),t=new pn(pn.CLOSE),n=0,r=0,s=!1;for(let o=0;o<i.length+1;o++){let l=o<i.length?i[o]:wR;if(n==0)if(l==="("){yield e;continue}else if(l===")"){yield t;continue}else if(l==='"'){n=1,r=o;continue}else if(l==="-"||l=="+"||gu(l)){n=2,r=o;continue}else if(LR(l)||["*","&","$","/","%"].includes(l)){n=3,r=o;continue}else{if(Ru(l))continue;throw new Error(`Unexpected character at index ${o}: ${l}
Context: ${Ol(i,o)}`)}else if(n==3){if(a2(l))continue;if(l===")"||Ru(l))yield new pn(pn.ATOM,i.substring(r,o)),n=0,l===")"&&(yield t);else throw new Error(`Unexpected character while tokenizing atom at index ${o}: ${l}
Context: ${Ol(i,o)}`)}else if(n==2){if(l==="."||gu(l))continue;if(l.toLowerCase()==="x"){n=4;continue}else if(["+","-","a","b","c","d","e","f"].includes(l.toLowerCase())){n=3;continue}else if(a2(l)){n=3;continue}else if(l===")"||Ru(l)){yield new pn(pn.NUMBER,parseFloat(i.substring(r,o))),n=0,l===")"&&(yield t);continue}else throw new Error(`Unexpected character at index ${o}: ${l}, expected numeric.
Context: ${Ol(i,o)}`)}else if(n==4){if(gu(l)||["a","b","c","d","e","f","_"].includes(l.toLowerCase()))continue;if(l===")"||Ru(l)){let c=i.substring(r,o).replace("_","");yield new pn(pn.NUMBER,Number.parseInt(c,16)),n=0,l===")"&&(yield t);continue}else if(a2(l)){n=3;continue}else throw new Error(`Unexpected character at index ${o}: ${l}, expected hexadecimal.
Context: ${Ol(i,o)}`)}else if(n==1)if(!s&&l==='"'){yield new pn(pn.STRING,i.substring((r??0)+1,o).replaceAll("\\n",`
`).replaceAll("\\\\","\\")),n=0,s=!1;continue}else if(!s&&l==="\\"){s=!0;continue}else{s=!1;continue}else throw new Error(`Unknown tokenizer state ${n}
Context: ${Ol(i,o)}`)}}a(CS,"tokenize");function*AR(i){let e,t;for(;;)switch(t=i.next(),e=t.value,e?.type){case pn.ATOM:case pn.STRING:case pn.NUMBER:yield e.value;break;case pn.OPEN:yield Array.from(AR(i));break;case pn.CLOSE:case void 0:return}}a(AR,"listify_tokens");function OR(i){let e=CS(i);return Array.from(AR(e))}a(OR,"listify");var l2=new Ai("kicanvas:parser");var x={any(i,e,t){return t},boolean(i,e,t){switch(t){case"false":case"no":return!1;case"true":case"yes":return!0;default:return!!t}},string(i,e,t){if(Vn(t))return t},number(i,e,t){if(Li(t))return t},item(i,...e){return(t,n,r)=>new i(r,...e)},object(i,...e){return(t,n,r)=>{let s={};return i!==null&&(s=t[n]??i??{}),{...s,...Te(r,p.start(n),...e)}}},vec2(i,e,t){let n=t;return new A(n[1],n[2])},color(i,e,t){let n=t;return new w(n[1]/255,n[2]/255,n[3]/255,n[4])}},p={start(i){return{kind:0,name:i,fn:x.string}},positional(i,e=x.any){return{kind:1,name:i,fn:e}},pair(i,e=x.any){return{kind:2,name:i,accepts:[i],fn:(t,n,r)=>e(t,n,r[1])}},list(i,e=x.any){return{kind:3,name:i,accepts:[i],fn:(t,n,r)=>r.slice(1).map(s=>e(t,n,s))}},collection(i,e,t=x.any){return{kind:5,name:i,accepts:[e],fn:(n,r,s)=>{let o=n[r]??[];return o.push(t(n,r,s)),o}}},mapped_collection(i,e,t,n=x.any){return{kind:5,name:i,accepts:[e],fn:(r,s,o)=>{let l=r[s]??new Map,c=n(r,s,o),u=t(c);return l.set(u,c),l}}},dict(i,e,t=x.any){return{kind:5,name:i,accepts:[e],fn:(n,r,s)=>{let o=s,l=n[r]??{};return l[o[1]]=t(n,r,o[2]),l}}},atom(i,e){let t;return e?t=x.string:(t=x.boolean,e=[i]),{kind:4,name:i,accepts:e,fn(n,r,s){return Array.isArray(s)&&s.length==1&&(s=s[0]),t(n,r,s)}}},expr(i,e=x.any){return{kind:6,name:i,accepts:[i],fn:e}},object(i,e,...t){return p.expr(i,x.object(e,...t))},item(i,e,...t){return p.expr(i,x.item(e,...t))},vec2(i){return p.expr(i,x.vec2)},color(i="color"){return p.expr(i,x.color)}};function Te(i,...e){Vn(i)&&(l2.info(`Parsing expression with ${i.length} chars`),i=OR(i),i.length==1&&Array.isArray(i[0])&&(i=i[0]));let t=new Map,n,r=0;for(let o of e)if(o.kind==0)n=o;else if(o.kind==1)t.set(r,o),r++;else for(let l of o.accepts)t.set(l,o);if(n){let o=cu(n.name),l=i.at(0);if(!o.includes(l))throw new Error(`Expression must start with ${n.name} found ${l} in ${i}`);i=i.slice(1)}let s={};r=0;for(let o of i){let l=null;if(Vn(o)&&(l=t.get(o)),!l&&(Vn(o)||Li(o))){if(l=t.get(r),!l){l2.warn(`no def for bare element ${o} at position ${r} in expression ${i}`);continue}r++}if(!l&&Array.isArray(o)&&(l=t.get(o[0])),!l){l2.warn(`No def found for element ${o} in expression ${i}`);continue}let c=l.fn(s,l.name,o);s[l.name]=c}return s}a(Te,"parse_expr");function c2(i){let e={dblquote:'"',quote:"'",lt:"<",gt:">",backslash:"\\",slash:"/",bar:"|",comma:",",colon:":",space:" ",dollar:"$",tab:"	",return:`
`,brace:"{"};for(let[t,n]of Object.entries(e))i=i.replaceAll("{"+t+"}",n);return i}a(c2,"unescape_string");function ks(i,e){return i=c2(i),e===void 0||(i=i.replaceAll(/(\$\{(.+?)\})/g,(t,n,r)=>{let s=e.resolve_text_var(r);return s===void 0?n:s})),i}a(ks,"expand_text_vars");var Ht=class i{constructor(e){this.position=new A(0,0);this.rotation=0;this.unlocked=!1;if(e){let t=Te(e,p.start("at"),p.positional("x",x.number),p.positional("y",x.number),p.positional("rotation",x.number),p.atom("unlocked"));this.position.set(t.x,t.y),this.rotation=t.rotation??this.rotation,this.unlocked=t.unlocked??this.unlocked}}static{a(this,"At")}copy(){let e=new i;return e.position=this.position.copy(),e.rotation=this.rotation,e.unlocked=this.unlocked,e}},VR={User:[431.8,279.4],A0:[1189,841],A1:[841,594],A2:[594,420],A3:[420,297],A4:[297,210],A5:[210,148],A:[279.4,215.9],B:[431.8,279.4],C:[558.8,431.8],D:[863.6,558.8],E:[1117.6,863.6],USLetter:[279.4,215.9],USLegal:[355.6,215.9],USLedger:[431.8,279.4]},Po=class{constructor(e){this.portrait=!1;Object.assign(this,Te(e,p.start("paper"),p.atom("size",Object.keys(VR)),p.positional("width",x.number),p.positional("height",x.number),p.atom("portrait")));let t=VR[this.size];!this.width&&t&&(this.width=t[0]),!this.height&&t&&(this.height=t[1]),this.size!="User"&&this.portrait&&([this.width,this.height]=[this.height,this.width])}static{a(this,"Paper")}},qr=class{constructor(e){this.title="";this.date="";this.rev="";this.company="";this.comment={};e&&Object.assign(this,Te(e,p.start("title_block"),p.pair("title",x.string),p.pair("date",x.string),p.pair("rev",x.string),p.pair("company",x.string),p.expr("comment",(t,n,r)=>{let s=r,o=t[n]??{};return o[s[1]]=s[2],o})))}static{a(this,"TitleBlock")}resolve_text_var(e){return new Map([["ISSUE_DATE",this.date],["REVISION",this.rev],["TITLE",this.title],["COMPANY",this.company],["COMMENT1",this.comment[1]??""],["COMMENT2",this.comment[2]??""],["COMMENT3",this.comment[3]??""],["COMMENT4",this.comment[4]??""],["COMMENT5",this.comment[5]??""],["COMMENT6",this.comment[6]??""],["COMMENT7",this.comment[7]??""],["COMMENT8",this.comment[8]??""],["COMMENT9",this.comment[9]??""]]).get(e)}},mn=class i{constructor(e){this.font=new _u;this.justify=new bu;this.hide=!1;e&&Object.assign(this,Te(e,p.start("effects"),p.item("font",_u),p.item("justify",bu),p.atom("hide"),p.color()))}static{a(this,"Effects")}copy(){let e=new i;return e.font=this.font.copy(),e.justify=this.justify.copy(),e.hide=this.hide,e}},_u=class i{constructor(e){this.size=new A(1.27,1.27);this.thickness=0;this.bold=!1;this.italic=!1;this.color=w.transparent_black;e&&(Object.assign(this,Te(e,p.start("font"),p.pair("face",x.string),p.vec2("size"),p.pair("thickness",x.number),p.atom("bold"),p.atom("italic"),p.pair("line_spacing",x.number),p.color())),[this.size.x,this.size.y]=[this.size.y,this.size.x])}static{a(this,"Font")}copy(){let e=new i;return e.face=this.face,e.size=this.size.copy(),e.thickness=this.thickness,e.bold=this.bold,e.italic=this.italic,e}},bu=class i{constructor(e){this.horizontal="center";this.vertical="center";this.mirror=!1;e&&Object.assign(this,Te(e,p.start("justify"),p.atom("horizontal",["left","right"]),p.atom("vertical",["top","bottom"]),p.atom("mirror")))}static{a(this,"Justify")}copy(){let e=new i;return e.horizontal=this.horizontal,e.vertical=this.vertical,e.mirror=this.mirror,e}},qn=class{constructor(e){this.type="default";Object.assign(this,Te(e,p.start("stroke"),p.pair("width",x.number),p.pair("type",x.string),p.color()))}static{a(this,"Stroke")}};var Jt={dangling_symbol_size:.3048,unselected_end_size:.1016,pin_length:2.54,pinsymbol_size:.635,pinnum_size:1.27,pinname_size:1.27,selection_thickness:.0762,line_width:.1524,wire_width:.1524,bus_width:.3048,noconnect_size:1.2192,junction_diameter:.9144,target_pin_radius:.381,sch_entry_size:2.54,text_size:1.27,text_offset_ratio:.15,label_size_ratio:.375,pin_name_offset:.508},Oi=class{constructor(e,t){this.filename=e;this.title_block=new qr;this.wires=[];this.buses=[];this.bus_entries=[];this.bus_aliases=[];this.junctions=[];this.net_labels=[];this.global_labels=[];this.hierarchical_labels=[];this.symbols=new Map;this.no_connects=[];this.drawings=[];this.images=[];this.sheets=[];Object.assign(this,Te(t,p.start("kicad_sch"),p.pair("version",x.number),p.pair("generator",x.string),p.pair("uuid",x.string),p.item("paper",Po),p.item("title_block",qr),p.item("lib_symbols",d2,this),p.collection("wires","wire",x.item(Vl)),p.collection("buses","bus",x.item(Ul)),p.collection("bus_entries","bus_entry",x.item(Il)),p.collection("bus_aliases","bus_alias",x.item(u2)),p.collection("junctions","junction",x.item(Fl)),p.collection("no_connects","no_connect",x.item(Wl)),p.collection("net_labels","label",x.item(Xl)),p.collection("global_labels","global_label",x.item(Hl,this)),p.collection("hierarchical_labels","hierarchical_label",x.item(Hs,this)),p.mapped_collection("symbols","symbol",n=>n.uuid,x.item(ui,this)),p.collection("drawings","polyline",x.item(es,this)),p.collection("drawings","rectangle",x.item(ts,this)),p.collection("drawings","arc",x.item(Eo,this)),p.collection("drawings","text",x.item(wo,this)),p.collection("images","image",x.item(h2)),p.item("sheet_instances",R2),p.item("symbol_instances",_2),p.collection("sheets","sheet",x.item(bi,this))))}static{a(this,"KicadSch")}*items(){yield*this.wires,yield*this.buses,yield*this.bus_entries,yield*this.junctions,yield*this.net_labels,yield*this.global_labels,yield*this.hierarchical_labels,yield*this.no_connects,yield*this.symbols.values(),yield*this.drawings,yield*this.images,yield*this.sheets}find_symbol(e){if(this.symbols.has(e))return this.symbols.get(e);for(let t of this.symbols.values())if(t.uuid==e||t.reference==e)return t;return null}find_sheet(e){for(let t of this.sheets)if(t.uuid==e)return t;return null}resolve_text_var(e){if(e=="FILENAME")return this.filename;if(e.includes(":")){let[t,n]=e.split(":"),r=this.symbols.get(t);if(r)return r.resolve_text_var(n)}return this.title_block.resolve_text_var(e)}},Mu=class{static{a(this,"Fill")}constructor(e){Object.assign(this,Te(e,p.start("fill"),p.pair("type",x.string),p.color()))}},ei=class{constructor(e){this.private=!1;this.parent=e}static{a(this,"GraphicItem")}static{this.common_expr_defs=[p.atom("private"),p.item("stroke",qn),p.item("fill",Mu),p.pair("uuid",x.string)]}},Vl=class{static{a(this,"Wire")}constructor(e){Object.assign(this,Te(e,p.start("wire"),p.list("pts",x.vec2),p.item("stroke",qn),p.pair("uuid",x.string)))}},Ul=class{static{a(this,"Bus")}constructor(e){Object.assign(this,Te(e,p.start("bus"),p.list("pts",x.vec2),p.item("stroke",qn),p.pair("uuid",x.string)))}},Il=class{static{a(this,"BusEntry")}constructor(e){Object.assign(this,Te(e,p.start("bus_entry"),p.item("at",Ht),p.vec2("size"),p.item("stroke",qn),p.pair("uuid",x.string)))}},u2=class{constructor(e){this.members=[];Object.assign(this,Te(e,p.start("bus_alias"),p.list("members",x.string)))}static{a(this,"BusAlias")}},Fl=class{static{a(this,"Junction")}constructor(e){Object.assign(this,Te(e,p.start("junction"),p.item("at",Ht),p.pair("diameter",x.number),p.color(),p.pair("uuid",x.string)))}},Wl=class{static{a(this,"NoConnect")}constructor(e){Object.assign(this,Te(e,p.start("no_connect"),p.item("at",Ht),p.pair("uuid",x.string)))}},Eo=class extends ei{constructor(t,n){super(n);let r=Te(t,p.start("arc"),p.vec2("start"),p.vec2("mid"),p.vec2("end"),p.object("radius",{},p.start("radius"),p.vec2("at"),p.pair("length"),p.vec2("angles")),...ei.common_expr_defs);if(r.radius?.length){let s=Un.from_center_start_end(r.radius.at,r.end,r.start,1);s.arc_angle.degrees>180&&([s.start_angle,s.end_angle]=[s.end_angle,s.start_angle]),r.start=s.start_point,r.mid=s.mid_point,r.end=s.end_point}delete r.radius,Object.assign(this,r)}static{a(this,"Arc")}},Cl=class extends ei{constructor(t,n){super(n);Object.assign(this,Te(t,p.start("bezier"),p.list("pts",x.vec2),...ei.common_expr_defs))}static{a(this,"Bezier")}get start(){return this.pts[0]}get c1(){return this.pts[1]}get c2(){return this.pts[2]}get end(){return this.pts[3]}},Xs=class extends ei{constructor(t,n){super(n);Object.assign(this,Te(t,p.start("circle"),p.vec2("center"),p.pair("radius",x.number),...ei.common_expr_defs))}static{a(this,"Circle")}},es=class extends ei{constructor(t,n){super(n);Object.assign(this,Te(t,p.start("polyline"),p.list("pts",x.vec2),...ei.common_expr_defs))}static{a(this,"Polyline")}},ts=class extends ei{constructor(t,n){super(n);Object.assign(this,Te(t,p.start("rectangle"),p.vec2("start"),p.vec2("end"),...ei.common_expr_defs))}static{a(this,"Rectangle")}},h2=class{static{a(this,"Image")}constructor(e){Object.assign(this,Te(e,p.start("image"),p.item("at",Ht),p.pair("data",x.string),p.pair("uuid",x.string)))}},wo=class{constructor(e,t){this.parent=t;this.private=!1;this.effects=new mn;Object.assign(this,Te(e,p.start("text"),p.positional("text"),p.item("at",Ht),p.item("effects",mn),p.pair("uuid",x.string))),this.text.endsWith(`
`)&&(this.text=this.text.slice(0,this.text.length-1))}static{a(this,"Text")}get shown_text(){return ks(this.text,this.parent)}},Zl=class extends wo{constructor(t,n){super(t,n);this.parent=n;(n instanceof is||n instanceof ui)&&(this.at.rotation/=10)}static{a(this,"LibText")}},kl=class extends ei{constructor(t,n){super(n);this.effects=new mn;Object.assign(this,Te(t,p.start("text"),p.positional("text"),p.item("at",Ht),p.vec2("size"),p.item("effects",mn),...ei.common_expr_defs))}static{a(this,"TextBox")}},ns=class{constructor(){this.private=!1;this.at=new Ht;this.effects=new mn;this.fields_autoplaced=!1}static{a(this,"Label")}static{this.common_expr_defs=[p.positional("text"),p.item("at",Ht),p.item("effects",mn),p.atom("fields_autoplaced"),p.pair("uuid",x.string)]}get shown_text(){return c2(this.text)}},Xl=class extends ns{static{a(this,"NetLabel")}constructor(e){super(),Object.assign(this,Te(e,p.start("label"),...ns.common_expr_defs))}},Hl=class extends ns{constructor(t){super();this.shape="input";this.properties=[];Object.assign(this,Te(t,p.start("global_label"),...ns.common_expr_defs,p.pair("shape",x.string),p.collection("properties","property",x.item(rs))))}static{a(this,"GlobalLabel")}},Hs=class extends ns{constructor(t){super();this.shape="input";t&&Object.assign(this,Te(t,p.start("hierarchical_label"),...ns.common_expr_defs,p.pair("shape",x.string)))}static{a(this,"HierarchicalLabel")}},d2=class{constructor(e,t){this.parent=t;this.symbols=[];this.#e=new Map;Object.assign(this,Te(e,p.start("lib_symbols"),p.collection("symbols","symbol",x.item(is,t))));for(let n of this.symbols)this.#e.set(n.name,n)}static{a(this,"LibSymbols")}#e;by_name(e){return this.#e.get(e)}},is=class i{constructor(e,t){this.parent=t;this.power=!1;this.pin_numbers={hide:!1};this.pin_names={offset:Jt.pin_name_offset,hide:!1};this.in_bom=!1;this.on_board=!1;this.properties=new Map;this.children=[];this.drawings=[];this.pins=[];this.units=new Map;this.libPins=[];this.#e=new Map;this.#t=new Map;console.log(t),Object.assign(this,Te(e,p.start("symbol"),p.positional("name"),p.atom("power"),p.object("pin_numbers",this.pin_numbers,p.atom("hide")),p.object("pin_names",this.pin_names,p.pair("offset",x.number),p.atom("hide")),p.pair("exclude_from_sim",x.boolean),p.pair("in_bom",x.boolean),p.pair("on_board",x.boolean),p.mapped_collection("properties","property",n=>n.name,x.item(rs,this)),p.collection("pins","pin",x.item(f2,this)),p.collection("children","symbol",x.item(i,this)),p.collection("drawings","arc",x.item(Eo,this)),p.collection("drawings","bezier",x.item(Cl,this)),p.collection("drawings","circle",x.item(Xs,this)),p.collection("drawings","polyline",x.item(es,this)),p.collection("drawings","rectangle",x.item(ts,this)),p.collection("drawings","text",x.item(Zl,this)),p.collection("drawings","textbox",x.item(kl,this))));for(let n of this.pins)this.#e.set(n.number.text,n);for(let n of this.properties.values())this.#t.set(n.id,n);for(let n of this.children){let r=n.unit;if(r!==null){let s=this.units.get(r)??[];s.push(n),this.units.set(r,s)}}for(let n of this.pins)this.libPins.push(new Lo(n.number.text,`${this.name}:${n.number}`,"",n,n.unit,this))}static{a(this,"LibSymbol")}#e;#t;get root(){return this.parent instanceof i?this.parent.root:this}has_pin(e){return this.#e.has(e)}pin_by_number(e,t=1){if(this.has_pin(e))return this.#e.get(e);for(let n of this.children)if((n.style==0||n.style==t)&&n.has_pin(e))return n.pin_by_number(e);throw new Error(`No pin numbered ${e} on library symbol ${this.name}`)}has_property_with_id(e){return this.#t.has(e)}property_by_id(e){if(this.#t.has(e))return this.#t.get(e);for(let t of this.children)if(t.has_property_with_id(e))return t.property_by_id(e);return null}get library_name(){return this.name.includes(":")?this.name.split(":").at(0):""}get library_item_name(){return this.name.includes(":")?this.name.split(":").at(1):""}get unit_count(){let e=this.units.size;return this.units.has(0)&&(e-=1),e==0&&(e=1),e}get unit(){let e=this.name.split("_");return e.length<3?0:parseInt(e.at(-2),10)}get style(){let e=this.name.split("_");return e.length<3?0:parseInt(e.at(-1),10)}get description(){return this.properties.get("ki_description")?.text??""}get keywords(){return this.properties.get("ki_keywords")?.text??""}get footprint_filters(){return this.properties.get("ki_fp_filters")?.text??""}get units_interchangable(){return!this.properties.get("ki_locked")?.text}resolve_text_var(e){return this.parent?.resolve_text_var(e)}},rs=class{constructor(e,t){this.parent=t;this.show_name=!1;this.do_not_autoplace=!1;let n=Te(e,p.start("property"),p.positional("name",x.string),p.positional("text",x.string),p.pair("id",x.number),p.item("at",Ht),p.item("effects",mn),p.atom("show_name"),p.atom("do_not_autoplace"));this.#e=n.effects,delete n.effects,Object.assign(this,n)}static{a(this,"Property")}#e;get effects(){return this.#e?this.#e:(this.parent instanceof ui?this.#e=new mn:Ll(`Couldn't determine Effects for Property ${this.name}`),this.#e)}set effects(e){this.#e=e}get shown_text(){return ks(this.text,this.parent)}},f2=class{constructor(e,t){this.parent=t;this.hide=!1;this.name={text:"",effects:new mn};this.number={text:"",effects:new mn};Object.assign(this,Te(e,p.start("pin"),p.positional("type",x.string),p.positional("shape",x.string),p.atom("hide"),p.item("at",Ht),p.pair("length",x.number),p.object("name",this.name,p.positional("text",x.string),p.item("effects",mn)),p.object("number",this.number,p.positional("text",x.string),p.item("effects",mn)),p.collection("alternates","alternate",x.item(p2))))}static{a(this,"PinDefinition")}get unit(){return this.parent.unit}},p2=class{static{a(this,"PinAlternate")}constructor(e){Object.assign(this,Te(e,p.start("alternate"),p.positional("name"),p.positional("type",x.string),p.positional("shaped",x.string)))}},ui=class{constructor(e,t){this.parent=t;this.in_bom=!1;this.on_board=!1;this.dnp=!1;this.fields_autoplaced=!1;this.properties=new Map;this.pins=[];this.instances=new Map;let n=Te(e,p.start("symbol"),p.pair("lib_name",x.string),p.pair("lib_id",x.string),p.item("at",Ht),p.pair("mirror",x.string),p.pair("unit",x.number),p.pair("convert",x.number),p.pair("in_bom",x.boolean),p.pair("on_board",x.boolean),p.pair("dnp",x.boolean),p.atom("fields_autoplaced"),p.pair("uuid",x.string),p.mapped_collection("properties","property",s=>s.name,x.item(rs,this)),p.collection("pins","pin",x.item(Gl,this)),p.object("default_instance",this.default_instance,p.pair("reference",x.string),p.pair("unit",x.string),p.pair("value",x.string),p.pair("footprint",x.string)),p.object("instances",{},p.collection("projects","project",x.object(null,p.start("project"),p.positional("name",x.string),p.collection("paths","path",x.object(null,p.start("path"),p.positional("path"),p.pair("reference",x.string),p.pair("value",x.string),p.pair("unit",x.number),p.pair("footprint",x.string))))))),r=n.instances;delete n.instances,Object.assign(this,n);for(let s of r?.projects??[])for(let o of s?.paths??[]){let l=new m2;l.path=o.path,l.reference=o.reference,l.value=o.value,l.unit=o.unit,l.footprint=o.footprint,this.instances.set(l.path,l)}this.get_property_text("Value")==null&&this.set_property_text("Value",this.default_instance.value),!this.get_property_text("Footprint")==null&&this.set_property_text("Footprint",this.default_instance.footprint)}static{a(this,"SchematicSymbol")}get lib_symbol(){return this.parent.lib_symbols.by_name(this.lib_name??this.lib_id)}get_property_text(e){return this.properties.get(e)?.text}set_property_text(e,t){let n=this.properties.get(e);n&&(n.text=t)}get reference(){return this.get_property_text("Reference")??"?"}set reference(e){this.set_property_text("Reference",e)}get value(){return this.get_property_text("Value")??""}set value(e){this.set_property_text("Value",e)}get footprint(){return this.get_property_text("Footprint")??""}set footprint(e){this.set_property_text("Footprint",e)}get unit_suffix(){if(!this.unit||this.lib_symbol.unit_count<=1)return"";let e="A".charCodeAt(0),t=this.unit,n="";do{let r=(t-1)%26;n=String.fromCharCode(e+r)+n,t=Math.trunc((t-r)/26)}while(t>0);return n}get unit_pins(){return this.pins.filter(e=>!(this.unit&&e.unit&&this.unit!=e.unit))}resolve_text_var(e){if(this.properties.has(e))return this.properties.get(e)?.shown_text;switch(e){case"REFERENCE":return this.reference;case"VALUE":return this.value;case"FOOTPRINT":return this.footprint;case"DATASHEET":return this.properties.get("Datasheet")?.name;case"FOOTPRINT_LIBRARY":return this.footprint.split(":").at(0);case"FOOTPRINT_NAME":return this.footprint.split(":").at(-1);case"UNIT":return this.unit_suffix;case"SYMBOL_LIBRARY":return this.lib_symbol.library_name;case"SYMBOL_NAME":return this.lib_symbol.library_item_name;case"SYMBOL_DESCRIPTION":return this.lib_symbol.description;case"SYMBOL_KEYWORDS":return this.lib_symbol.keywords;case"EXCLUDE_FROM_BOM":return this.in_bom?"":"Excluded from BOM";case"EXCLUDE_FROM_BOARD":return this.on_board?"":"Excluded from board";case"DNP":return this.dnp?"DNP":""}return this.parent.resolve_text_var(e)}},m2=class{static{a(this,"SchematicSymbolInstance")}constructor(){}},Gl=class{constructor(e,t){this.parent=t;this.highlighted=!1;Object.assign(this,Te(e,p.start("pin"),p.positional("number",x.string),p.pair("uuid",x.string),p.pair("alternate",x.string)))}static{a(this,"PinInstance")}get definition(){return this.parent.lib_symbol.pin_by_number(this.number,this.parent.convert)}get unit(){return this.definition.unit}get highlightColor(){return Lo.MyHighlightColor}get index(){return`symbol_pin_${this.number}`}};function ZS(i){switch(i){case 0:return"right";case 90:return"up";case 180:return"left";case 270:return"down";default:throw new Error(`Unexpected pin angle ${i}`)}}a(ZS,"angle_to_orientation");var Lo=class i{constructor(e,t,n,r,s,o){this.number=e;this.uuid=t;this.alternate=n;this.definition=r;this.unit=s;this.parent=o;this.highlighted=!1;this.orientation=ZS(r.at.rotation)}static{a(this,"LibSymbolPin")}static{this.MyHighlightColor=new w(0,100,100)}get boundingBox(){switch(this.orientation){case"up":return new je(this.definition.at.position.x-1/2,this.definition.at.position.y-1,1,this.definition.length);case"down":return new je(this.definition.at.position.x-1/2,this.definition.at.position.y-this.definition.length+1,1,this.definition.length);case"left":return new je(this.definition.at.position.x-this.definition.length,this.definition.at.position.y-1/2,this.definition.length,1);case"right":return new je(this.definition.at.position.x-1,this.definition.at.position.y-1/2,this.definition.length,1)}}get highlightColor(){return i.MyHighlightColor}get index(){return`symbol_pin_${this.number}`}get cross_index(){return`pad_${this.number}`}},R2=class{constructor(e){this.sheet_instances=new Map;Object.assign(this,Te(e,p.start("sheet_instances"),p.mapped_collection("sheet_instances","path",t=>t.path,x.item(g2))))}static{a(this,"SheetInstances")}get(e){return this.sheet_instances.get(e)}},g2=class{static{a(this,"SheetInstance")}constructor(e){Object.assign(this,Te(e,p.start("path"),p.positional("path",x.string),p.pair("page",x.string)))}},_2=class{constructor(e){this.symbol_instances=new Map;Object.assign(this,Te(e,p.start("symbol_instances"),p.mapped_collection("symbol_instances","path",t=>t.path,x.item(b2))))}static{a(this,"SymbolInstances")}get(e){return this.symbol_instances.get(e)}},b2=class{static{a(this,"SymbolInstance")}constructor(e){Object.assign(this,Te(e,p.start("path"),p.positional("path",x.string),p.pair("reference",x.string),p.pair("unit",x.number),p.pair("value",x.string),p.pair("footprint",x.string)))}},bi=class{constructor(e,t){this.parent=t;this.properties=new Map;this.pins=[];this.instances=new Map;let n=Te(e,p.start("sheet"),p.item("at",Ht),p.vec2("size"),p.item("stroke",qn),p.item("fill",Mu),p.pair("fields_autoplaced",x.boolean),p.pair("uuid",x.string),p.mapped_collection("properties","property",s=>s.name,x.item(rs,this)),p.collection("pins","pin",x.item(M2,this)),p.object("instances",{},p.collection("projects","project",x.object(null,p.start("project"),p.positional("name",x.string),p.collection("paths","path",x.object(null,p.start("path"),p.positional("path"),p.pair("page",x.string))))))),r=n.instances;delete n.instances,Object.assign(this,n);for(let s of r?.projects??[])for(let o of s?.paths??[]){let l=new x2;l.path=o.path,l.page=o.page,this.instances.set(l.path,l)}}static{a(this,"SchematicSheet")}get_property_text(e){return this.properties.get(e)?.text}get sheetname(){return this.get_property_text("Sheetname")??this.get_property_text("Sheet name")}get sheetfile(){return this.get_property_text("Sheetfile")??this.get_property_text("Sheet file")}resolve_text_var(e){return this.parent?.resolve_text_var(e)}},M2=class{constructor(e,t){this.parent=t;Object.assign(this,Te(e,p.start("pin"),p.positional("name",x.string),p.positional("shape",x.string),p.item("at",Ht),p.item("effects",mn),p.pair("uuid",x.string)))}static{a(this,"SchematicSheetPin")}},x2=class{static{a(this,"SchematicSheetInstance")}};var UR=`(kicad_wks (version 20210606) (generator pl_editor)\r
  (setup\r
    (textsize 1.5 1.5) (linewidth 0.15) (textlinewidth 0.15)\r
    (left_margin 10) (right_margin 10) (top_margin 10) (bottom_margin 10))\r
  (rect (name "") (start 110 34) (end 2 2) (comment "rect around the title block"))\r
  (rect (name "") (start 0 0 ltcorner) (end 0 0) (repeat 2) (incrx 2) (incry 2))\r
  (line (name "") (start 50 2 ltcorner) (end 50 0 ltcorner) (repeat 30) (incrx 50))\r
  (tbtext "1" (name "") (pos 25 1 ltcorner) (font (size 1.3 1.3)) (repeat 100) (incrx 50))\r
  (line (name "") (start 50 2 lbcorner) (end 50 0 lbcorner) (repeat 30) (incrx 50))\r
  (tbtext "1" (name "") (pos 25 1 lbcorner) (font (size 1.3 1.3)) (repeat 100) (incrx 50))\r
  (line (name "") (start 0 50 ltcorner) (end 2 50 ltcorner) (repeat 30) (incry 50))\r
  (tbtext "A" (name "") (pos 1 25 ltcorner) (font (size 1.3 1.3)) (justify center) (repeat 100) (incry 50))\r
  (line (name "") (start 0 50 rtcorner) (end 2 50 rtcorner) (repeat 30) (incry 50))\r
  (tbtext "A" (name "") (pos 1 25 rtcorner) (font (size 1.3 1.3)) (justify center) (repeat 100) (incry 50))\r
  (tbtext "Date: \${ISSUE_DATE}" (name "") (pos 87 6.9))\r
  (line (name "") (start 110 5.5) (end 2 5.5))\r
  (tbtext "\${KICAD_VERSION}" (name "") (pos 109 4.1) (comment "Kicad version"))\r
  (line (name "") (start 110 8.5) (end 2 8.5))\r
  (tbtext "Rev: \${REVISION}" (name "") (pos 24 6.9) (font bold))\r
  (tbtext "Size: \${PAPER}" (name "") (pos 109 6.9) (comment "Paper format name"))\r
  (tbtext "Id: \${#}/\${##}" (name "") (pos 24 4.1) (comment "Sheet id"))\r
  (line (name "") (start 110 12.5) (end 2 12.5))\r
  (tbtext "Title: \${TITLE}" (name "") (pos 109 10.7) (font (size 2 2) bold italic))\r
  (tbtext "File: \${FILENAME}" (name "") (pos 109 14.3))\r
  (line (name "") (start 110 18.5) (end 2 18.5))\r
  (tbtext "Sheet: \${SHEETPATH}" (name "") (pos 109 17))\r
  (tbtext "\${COMPANY}" (name "") (pos 109 20) (font bold) (comment "Company name"))\r
  (tbtext "\${COMMENT1}" (name "") (pos 109 23) (comment "Comment 0"))\r
  (tbtext "\${COMMENT2}" (name "") (pos 109 26) (comment "Comment 1"))\r
  (tbtext "\${COMMENT3}" (name "") (pos 109 29) (comment "Comment 2"))\r
  (tbtext "\${COMMENT4}" (name "") (pos 109 32) (comment "Comment 3"))\r
  (line (name "") (start 90 8.5) (end 90 5.5))\r
  (line (name "") (start 26 8.5) (end 26 2))\r
)\r
`;var Yl=class i{constructor(e){this.setup=new xu;this.drawings=[];Object.assign(this,Te(e,p.start("kicad_wks"),p.pair("version",x.number),p.pair("generator",x.string),p.item("setup",xu),p.collection("drawings","line",x.item(y2,this)),p.collection("drawings","rect",x.item(yu,this)),p.collection("drawings","polygon",x.item(S2,this)),p.collection("drawings","bitmap",x.item(T2,this)),p.collection("drawings","tbtext",x.item(v2,this))))}static{a(this,"DrawingSheet")}static default(){return new i(UR)}*items(){yield new yu(`(rect (name "") (start ${-this.setup.left_margin} ${-this.setup.right_margin} ltcorner) (end ${-this.setup.right_margin} ${-this.setup.bottom_margin} rbcorner) (comment "page outline"))`,this),yield*this.drawings}get paper(){return this.document?.paper}get width(){return this.paper?.width??88}get height(){return this.paper?.height??88}get size(){return new A(this.width,this.height)}get top_left(){return new A(this.setup.left_margin,this.setup.top_margin)}get top_right(){return new A(this.width-this.setup.right_margin,this.setup?.top_margin)}get bottom_right(){return new A(this.width-this.setup.right_margin,this.height-this.setup.bottom_margin)}get bottom_left(){return new A(this.setup.left_margin,this.height-this.setup.bottom_margin)}get margin_bbox(){return je.from_points([this.top_left,this.bottom_right])}get page_bbox(){return je.from_corners(0,0,this.width,this.height)}resolve_text_var(e){switch(e){case"PAPER":return this.paper?.size||"";case"#":return"1";case"##":return"1";case"SHEETPATH":return"/";case"KICAD_VERSION":return"KiCanvas Alpha"}return this.document?.resolve_text_var(e)}},xu=class{constructor(e){this.linewidth=.15;this.textsize=new A(1.5,1.5);this.textlinewidth=.15;this.top_margin=0;this.left_margin=0;this.bottom_margin=0;this.right_margin=0;e&&Object.assign(this,Te(e,p.start("setup"),p.pair("linewidth",x.number),p.vec2("textsize"),p.pair("textlinewidth",x.number),p.pair("top_margin",x.number),p.pair("left_margin",x.number),p.pair("bottom_margin",x.number),p.pair("right_margin",x.number)))}static{a(this,"Setup")}},Rr=class{constructor(e){this.position=new A(0,0);this.anchor="rbcorner";let t=Te(e,p.positional("start_token"),p.positional("x",x.number),p.positional("y",x.number),p.positional("anchor",x.string));this.position.x=t.x,this.position.y=t.y,this.anchor=t.anchor??this.anchor}static{a(this,"Coordinate")}},Mi=class{constructor(e){this.repeat=1;this.incry=0;this.incrx=0;this.parent=e}static{a(this,"DrawingSheetItem")}static{this.common_expr_defs=[p.pair("name",x.string),p.pair("comment",x.string),p.pair("option",x.string),p.pair("repeat",x.number),p.pair("incrx",x.number),p.pair("incry",x.number),p.pair("linewidth",x.number)]}},y2=class extends Mi{constructor(t,n){super(n);Object.assign(this,Te(t,p.start("line"),p.item("start",Rr),p.item("end",Rr),...Mi.common_expr_defs))}static{a(this,"Line")}},yu=class extends Mi{constructor(t,n){super(n);Object.assign(this,Te(t,p.start("rect"),p.item("start",Rr),p.item("end",Rr),...Mi.common_expr_defs))}static{a(this,"Rect")}},S2=class extends Mi{constructor(t,n){super(n);Object.assign(this,Te(t,p.start("polygon"),p.item("pos",Rr),p.pair("rotate",x.number),p.list("pts",x.vec2),...Mi.common_expr_defs))}static{a(this,"Polygon")}},T2=class extends Mi{constructor(t,n){super(n);Object.assign(this,Te(t,p.start("bitmap"),p.item("pos",Rr),p.pair("scale",x.number),p.pair("pngdata",x.string),...Mi.common_expr_defs))}static{a(this,"Bitmap")}},v2=class extends Mi{constructor(t,n){super(n);this.incrlabel=1;this.rotate=0;Object.assign(this,Te(t,p.start("tbtext"),p.positional("text"),p.item("pos",Rr),p.pair("incrlabel",x.number),p.pair("maxlen",x.number),p.pair("maxheight",x.number),p.item("font",N2),p.pair("rotate",x.number),p.pair("justify",x.string),...Mi.common_expr_defs))}static{a(this,"TbText")}get shown_text(){return ks(this.text,this.parent)}},N2=class{constructor(e){this.color=w.transparent_black;this.size=new A(1.27,1.27);Object.assign(this,Te(e,p.start("font"),p.pair("face",x.string),p.atom("bold"),p.atom("italic"),p.vec2("size"),p.pair("linewidth",x.number)))}static{a(this,"Font")}};function P2(i,e){if(!(e==null||e==null))for(let t of Object.keys(e))mR(i[t])?P2(i[t],e[t]):i[t]=e[t]}a(P2,"merge");var Gs=class i{constructor(){this.board=new E2;this.boards=[];this.libraries={pinned_footprint_libs:[],pinned_symbol_libs:[]};this.meta={filename:"unknown.kicad_pro",version:1};this.pcbnew={page_layout_descr_file:""};this.schematic=new A2;this.sheets=[];this.text_variables={}}static{a(this,"ProjectSettings")}static load(e){let t=new i;return P2(t,e),t}},E2=class{constructor(){this.design_settings=new w2}static{a(this,"BoardSettings")}},w2=class{constructor(){this.defaults=new L2}static{a(this,"BoardDesignSettings")}},L2=class{constructor(){this.board_outline_line_width=.1;this.copper_line_width=.2;this.copper_text_size_h=1.5;this.copper_text_size_v=1.5;this.copper_text_thickness=.3;this.other_line_width=.15;this.silk_line_width=.15;this.silk_text_size_h=1;this.silk_text_size_v=1;this.silk_text_thickness=.15}static{a(this,"BoardDesignSettingsDefaults")}},A2=class{constructor(){this.drawing=new O2;this.meta={version:1}}static{a(this,"SchematicSettings")}},O2=class{constructor(){this.dashed_lines_dash_length_ratio=12;this.dashed_lines_gap_length_ratio=3;this.default_line_thickness=6;this.default_text_size=50;this.intersheets_ref_own_page=!1;this.intersheets_ref_prefix="";this.intersheets_ref_short=!1;this.intersheets_ref_show=!1;this.intersheets_ref_suffix="";this.junction_size_choice=3;this.label_size_ratio=.375;this.pin_symbol_size=25;this.text_offset_ratio=.15}static{a(this,"SchematicDrawingSettings")}};var yi=class{constructor(e,t,n=!0,r=!1,s=w.white){this.highlighted=!1;this.interactive=!1;this.bboxes=new Map;this.#e=n,this.layer_set=e,this.name=t,this.color=s,this.interactive=r,this.items=[]}static{a(this,"ViewLayer")}#e;dispose(){this.clear()}clear(){this.graphics?.dispose(),this.graphics=void 0,this.items=[],this.bboxes.clear()}get visible(){return this.#e instanceof Function?this.#e():this.#e}set visible(e){this.#e=e}get bbox(){return je.combine(this.bboxes.values())}*query_point(e){for(let t of this.bboxes.values())t.contains_point(e)&&(yield t)}},Ao=class{static{a(this,"ViewLayerSet")}#e=[];#t=new Map;#i;constructor(){this.#i=new yi(this,":Overlay",!0,!1,w.white)}dispose(){this.#i.dispose();for(let e of this.#e)e.dispose();this.#e.length=0,this.#t.clear()}add(...e){for(let t of e)this.#e.push(t),this.#t.set(t.name,t)}*in_order(){for(let e of this.#e)yield e}*in_display_order(){for(let e=this.#e.length-1;e>=0;e--){let t=this.#e[e];t.highlighted||(yield t)}for(let e=this.#e.length-1;e>=0;e--){let t=this.#e[e];t.highlighted&&(yield t)}yield this.#i}by_name(e){return this.#t.get(e)}*query(e){for(let t of this.#e)e(t)&&(yield t)}get overlay(){return this.#i}highlight(e){let t=[];e&&(t=RR(e).map(n=>n instanceof yi?n.name:n));for(let n of this.#e)t.includes(n.name)?n.highlighted=!0:n.highlighted=!1}is_any_layer_highlighted(){for(let e of this.#e)if(e.highlighted)return!0;return!1}*grid_layers(){yield this.by_name(":Grid")}*interactive_layers(){for(let e of this.in_order())e.interactive&&e.visible&&(yield e)}*query_point(e){for(let t of this.interactive_layers())for(let n of t.query_point(e))yield{layer:t,bbox:n}}*query_item_bboxes(e){for(let t of this.interactive_layers()){let n=t.bboxes.get(e);n&&(yield n)}}get bbox(){let e=[];for(let t of this.in_order())e.push(t.bbox);return je.combine(e)}};var ss=(H=>(H.dwgs_user="Dwgs.User",H.cmts_user="Cmts.User",H.eco1_user="Eco1.User",H.eco2_user="Eco2.User",H.edge_cuts="Edge.Cuts",H.margin="Margin",H.user_1="User.1",H.user_2="User.2",H.user_3="User.3",H.user_4="User.4",H.user_5="User.5",H.user_6="User.6",H.user_7="User.7",H.user_8="User.8",H.user_9="User.9",H.anchors=":Anchors",H.non_plated_holes=":NonPlatedHoles",H.via_holes=":Via:Holes",H.pad_num=":Pad:Num",H.pad_holes=":Pad:Holes",H.pad_holewalls=":Pad:HoleWalls",H.via_holewalls=":Via:HoleWalls",H.pads_front=":Pads:Front",H.f_cu="F.Cu",H.f_mask="F.Mask",H.f_silks="F.SilkS",H.f_adhes="F.Adhes",H.f_paste="F.Paste",H.f_crtyd="F.CrtYd",H.f_fab="F.Fab",H.in1_cu="In1.Cu",H.in2_cu="In2.Cu",H.in3_cu="In3.Cu",H.in4_cu="In4.Cu",H.in5_cu="In5.Cu",H.in6_cu="In6.Cu",H.in7_cu="In7.Cu",H.in8_cu="In8.Cu",H.in9_cu="In9.Cu",H.in10_cu="In10.Cu",H.in11_cu="In11.Cu",H.in12_cu="In12.Cu",H.in13_cu="In13.Cu",H.in14_cu="In14.Cu",H.in15_cu="In15.Cu",H.in16_cu="In16.Cu",H.in17_cu="In17.Cu",H.in18_cu="In18.Cu",H.in19_cu="In19.Cu",H.in20_cu="In20.Cu",H.in21_cu="In21.Cu",H.in22_cu="In22.Cu",H.in23_cu="In23.Cu",H.in24_cu="In24.Cu",H.in25_cu="In25.Cu",H.in26_cu="In26.Cu",H.in27_cu="In27.Cu",H.in28_cu="In28.Cu",H.in29_cu="In29.Cu",H.in30_cu="In30.Cu",H.pads_back=":Pads:Back",H.b_cu="B.Cu",H.b_mask="B.Mask",H.b_silks="B.SilkS",H.b_adhes="B.Adhes",H.b_paste="B.Paste",H.b_crtyd="B.CrtYd",H.b_fab="B.Fab",H[H.drawing_sheet=":DrawingSheet"]="drawing_sheet",H[H.grid=":Grid"]="grid",H))(ss||{}),XS=[":NonPlatedHoles",":Via:Holes",":Pad:Holes",":Pad:HoleWalls",":Via:HoleWalls"],Ds=["F.Cu","In1.Cu","In2.Cu","In3.Cu","In4.Cu","In5.Cu","In6.Cu","In7.Cu","In8.Cu","In9.Cu","In10.Cu","In11.Cu","In12.Cu","In13.Cu","In14.Cu","In15.Cu","In16.Cu","In17.Cu","In18.Cu","In19.Cu","In20.Cu","In21.Cu","In22.Cu","In23.Cu","In24.Cu","In25.Cu","In26.Cu","In27.Cu","In28.Cu","In29.Cu","In30.Cu","B.Cu"];function gr(i,e){return`:${i}:${e}`}a(gr,"virtual_layer_for");function FR(i){return i.startsWith(":")}a(FR,"is_virtual");function HS(i,e){return FR(e)&&e.startsWith(`:${i}:`)}a(HS,"is_virtual_for");function GS(i){return i.endsWith(".Cu")}a(GS,"is_copper");function*WR(i,e){let t=!1;for(let n of Ds)if(n==i&&(t=!0),t&&(yield n),n==e)return}a(WR,"copper_layers_between");var Su=class extends Ao{constructor(t,n){super();this.theme=n;let r=new Map;for(let s of t.layers)r.set(s.canonical_name,s);for(let s of Object.values(ss)){if(!FR(s)&&!r.has(s))continue;let o=!0,l=!1;XS.includes(s)&&(o=a(()=>this.is_any_copper_layer_visible(),"visible"),l=!0),s==":Pads:Front"&&(o=a(()=>!0,"visible"),l=!0),s==":Pads:Back"&&(o=a(()=>!0,"visible"),l=!0),GS(s)&&(l=!0,this.add(new yi(this,gr(s,"BBViaHoles"),()=>this.by_name(s).visible,!1,this.color_for(":Via:Holes"))),this.add(new yi(this,gr(s,"BBViaHoleWalls"),()=>this.by_name(s).visible,!1,this.color_for(":Via:HoleWalls"))),this.add(new yi(this,gr(s,"Zones"),()=>this.by_name(s).visible,!1,this.color_for(s)))),this.add(new yi(this,s,o,l,this.color_for(s)))}}static{a(this,"LayerSet")}color_for(t){switch(t){case ss.drawing_sheet:return this.theme.worksheet??w.white;case":Pads:Front":return this.theme.copper?.f??w.white;case":Pads:Back":return this.theme.copper?.b??w.white;case":NonPlatedHoles":return this.theme.non_plated_hole??w.white;case":Via:Holes":return this.theme.via_hole??w.white;case":Via:HoleWalls":return this.theme.via_through??w.white;case":Pad:Holes":return this.theme.background??w.white;case":Pad:HoleWalls":return this.theme.pad_through_hole??w.white}let n=t;return n=n.replace(":Zones:","").replace(".","_").toLowerCase(),n.endsWith("_cu")?(n=n.replace("_cu",""),this.theme.copper[n]??w.white):this.theme[n]??w.white}*in_ui_order(){let t=[...Ds,"F.Adhes","B.Adhes","F.Paste","B.Paste","F.SilkS","B.SilkS","F.Mask","B.Mask","Dwgs.User","Cmts.User","Eco1.User","Eco2.User","Edge.Cuts","Margin","F.CrtYd","B.CrtYd","F.Fab","B.Fab","User.1","User.2","User.3","User.4","User.5","User.6","User.7","User.8","User.9"];for(let n of t){let r=this.by_name(n);r&&(yield r)}}*copper_layers(){for(let t of Ds){let n=this.by_name(t);n&&(yield n)}}*via_layers(){yield this.by_name(":Via:Holes"),yield this.by_name(":Via:HoleWalls");for(let t of Ds)for(let n of["BBViaHoleWalls","BBViaHoles"]){let r=this.by_name(gr(t,n));r&&(yield r)}}*zone_layers(){for(let t of Ds){let n=gr(t,"Zones"),r=this.by_name(n);r&&(yield r)}}*pad_layers(){yield this.by_name(":Pads:Front"),yield this.by_name(":Pads:Back")}*pad_hole_layers(){yield this.by_name(":Pad:Holes"),yield this.by_name(":Pad:HoleWalls")}is_any_copper_layer_visible(){for(let t of this.copper_layers())if(t.visible)return!0;return!1}highlight(t){let n="";t instanceof yi?n=t.name:Vn(t)&&(n=t);let r=this.query(s=>s.name==n||HS(n,s.name));super.highlight(r)}};var xi=class{constructor(e,t){this.filename=e;this.title_block=new qr;this.properties=new Map;this.layers=[];this.nets=[];this.footprints=[];this.zones=[];this.segments=[];this.vias=[];this.drawings=[];this.groups=[];Object.assign(this,Te(t,p.start("kicad_pcb"),p.pair("version",x.number),p.pair("generator",x.string),p.object("general",{},p.pair("thickness",x.number)),p.item("paper",Po),p.item("title_block",qr),p.list("layers",x.item(F2)),p.item("setup",W2),p.mapped_collection("properties","property",n=>n.name,x.item(V2,this)),p.collection("nets","net",x.item(Tu)),p.collection("footprints","footprint",x.item(_r,this)),p.collection("zones","zone",x.item(Oo)),p.collection("segments","segment",x.item(Kl)),p.collection("segments","arc",x.item(Ql)),p.collection("vias","via",x.item(Bl)),p.collection("drawings","dimension",x.item(Jl,this)),p.collection("drawings","gr_line",x.item(Vo)),p.collection("drawings","gr_circle",x.item(Uo)),p.collection("drawings","gr_arc",x.item(Io)),p.collection("drawings","gr_poly",x.item(Fo)),p.collection("drawings","gr_rect",x.item(Wo)),p.collection("drawings","gr_text",x.item(Zo,this)),p.collection("groups","group",x.item(B2))))}static{a(this,"KicadPCB")}*items(){yield*this.drawings,yield*this.vias,yield*this.segments,yield*this.zones,yield*this.footprints}resolve_text_var(e){return e=="FILENAME"?this.filename:this.properties.has(e)?this.properties.get(e).value:this.title_block.resolve_text_var(e)}get edge_cuts_bbox(){let e=new je(0,0,0,0);for(let t of this.drawings)t.layer!="Edge.Cuts"||!(t instanceof os)||(e=je.combine([e,t.bbox]));return e}find_footprint(e){for(let t of this.footprints)if(t.uuid==e||t.reference==e)return t;return null}},V2=class{static{a(this,"Property")}constructor(e){Object.assign(this,Te(e,p.start("property"),p.positional("name",x.string),p.positional("value",x.string)))}},Kl=class{constructor(e){this.locked=!1;Object.assign(this,Te(e,p.start("segment"),p.vec2("start"),p.vec2("end"),p.pair("width",x.number),p.pair("layer",x.string),p.pair("net",x.number),p.atom("locked"),p.pair("tstamp",x.string)))}static{a(this,"LineSegment")}},Ql=class{constructor(e){this.locked=!1;Object.assign(this,Te(e,p.start("arc"),p.vec2("start"),p.vec2("mid"),p.vec2("end"),p.pair("width",x.number),p.pair("layer",x.string),p.pair("net",x.number),p.atom("locked"),p.pair("tstamp",x.string)))}static{a(this,"ArcSegment")}},Bl=class{constructor(e){this.type="through-hole";this.remove_unused_layers=!1;this.keep_end_layers=!1;this.locked=!1;this.free=!1;Object.assign(this,Te(e,p.start("via"),p.atom("type",["blind","micro","through-hole"]),p.item("at",Ht),p.pair("size",x.number),p.pair("drill",x.number),p.list("layers",x.string),p.pair("net",x.number),p.atom("locked"),p.atom("free"),p.atom("remove_unused_layers"),p.atom("keep_end_layers"),p.pair("tstamp",x.string)))}static{a(this,"Via")}},Oo=class{constructor(e,t){this.parent=t;this.locked=!1;Object.assign(this,Te(e,p.start("zone"),p.atom("locked"),p.pair("net",x.number),p.pair("net_name",x.string),p.pair("net_name",x.string),p.pair("name",x.string),p.pair("layer",x.string),p.list("layers",x.string),p.object("hatch",{},p.positional("style",x.string),p.positional("pitch",x.number)),p.pair("priority",x.number),p.object("connect_pads",{},p.positional("type",x.string),p.pair("clearance",x.number)),p.pair("min_thickness",x.number),p.pair("filled_areas_thickness",x.boolean),p.item("keepout",U2),p.item("fill",I2),p.collection("polygons","polygon",x.item(br)),p.collection("filled_polygons","filled_polygon",x.item(G2)),p.pair("tstamp",x.string)))}static{a(this,"Zone")}},U2=class{static{a(this,"ZoneKeepout")}constructor(e){Object.assign(this,Te(e,p.start("keepout"),p.pair("tracks",x.string),p.pair("vias",x.string),p.pair("pads",x.string),p.pair("copperpour",x.string),p.pair("footprints",x.string)))}},I2=class{constructor(e){this.fill=!1;this.mode="solid";Object.assign(this,Te(e,p.start("fill"),p.positional("fill",x.boolean),p.pair("mode",x.string),p.pair("thermal_gap",x.number),p.pair("thermal_bridge_width",x.number),p.expr("smoothing",x.object({},p.positional("style",x.string),p.pair("radius",x.number))),p.pair("radius",x.number),p.pair("island_removal_mode",x.number),p.pair("island_area_min",x.number),p.pair("hatch_thickness",x.number),p.pair("hatch_gap",x.number),p.pair("hatch_orientation",x.number),p.pair("hatch_smoothing_level",x.number),p.pair("hatch_smoothing_value",x.number),p.pair("hatch_border_algorithm",x.string),p.pair("hatch_min_hole_area",x.number)))}static{a(this,"ZoneFill")}},F2=class{constructor(e){this.ordinal=0;this.canonical_name="F.Cu";this.type="signal";e&&Object.assign(this,Te(e,p.positional("ordinal",x.number),p.positional("canonical_name",x.string),p.positional("type",x.string),p.positional("user_name",x.string)))}static{a(this,"Layer")}},W2=class{static{a(this,"Setup")}constructor(e){Object.assign(this,Te(e,p.start("setup"),p.pair("pad_to_mask_clearance",x.number),p.pair("solder_mask_min_width",x.number),p.pair("pad_to_paste_clearance",x.number),p.pair("pad_to_paste_clearance_ratio",x.number),p.vec2("aux_axis_origin"),p.vec2("grid_origin"),p.item("pcbplotparams",C2),p.item("stackup",Z2)))}},C2=class{constructor(e){this.disableapertmacros=!1;this.usegerberextensions=!1;this.usegerberattributes=!1;this.usegerberadvancedattributes=!1;this.creategerberjobfile=!1;this.svguseinch=!1;this.excludeedgelayer=!1;this.plotframeref=!1;this.viasonmask=!1;this.useauxorigin=!1;this.dxfpolygonmode=!1;this.dxfimperialunits=!1;this.dxfusepcbnewfont=!1;this.psnegative=!1;this.psa4output=!1;this.plotreference=!1;this.plotvalue=!1;this.plotinvisibletext=!1;this.sketchpadsonfab=!1;this.subtractmaskfromsilk=!1;this.mirror=!1;Object.assign(this,Te(e,p.start("pcbplotparams"),p.pair("layerselection",x.number),p.pair("disableapertmacros",x.boolean),p.pair("usegerberextensions",x.boolean),p.pair("usegerberattributes",x.boolean),p.pair("usegerberadvancedattributes",x.boolean),p.pair("creategerberjobfile",x.boolean),p.pair("gerberprecision",x.number),p.pair("svguseinch",x.boolean),p.pair("svgprecision",x.number),p.pair("excludeedgelayer",x.boolean),p.pair("plotframeref",x.boolean),p.pair("viasonmask",x.boolean),p.pair("mode",x.number),p.pair("useauxorigin",x.boolean),p.pair("hpglpennumber",x.number),p.pair("hpglpenspeed",x.number),p.pair("hpglpendiameter",x.number),p.pair("dxfpolygonmode",x.boolean),p.pair("dxfimperialunits",x.boolean),p.pair("dxfusepcbnewfont",x.boolean),p.pair("psnegative",x.boolean),p.pair("psa4output",x.boolean),p.pair("plotreference",x.boolean),p.pair("plotvalue",x.boolean),p.pair("plotinvisibletext",x.boolean),p.pair("sketchpadsonfab",x.boolean),p.pair("subtractmaskfromsilk",x.boolean),p.pair("outputformat",x.number),p.pair("mirror",x.boolean),p.pair("drillshape",x.number),p.pair("scaleselection",x.number),p.pair("outputdirectory",x.string),p.pair("plot_on_all_layers_selection",x.number),p.pair("dashed_line_dash_ratio",x.number),p.pair("dashed_line_gap_ratio",x.number)))}static{a(this,"PCBPlotParams")}},Z2=class{constructor(e){this.dielectric_constraints=!1;this.castellated_pads=!1;this.edge_plating=!1;Object.assign(this,Te(e,p.start("stackup"),p.pair("copper_finish",x.string),p.pair("dielectric_constraints",x.boolean),p.pair("edge_connector",x.string),p.pair("castellated_pads",x.boolean),p.pair("edge_plating",x.boolean),p.collection("layers","layer",x.item(k2))))}static{a(this,"Stackup")}},k2=class{static{a(this,"StackupLayer")}constructor(e){Object.assign(this,Te(e,p.start("layer"),p.positional("name",x.string),p.pair("type",x.string),p.pair("color",x.string),p.pair("thickness",x.number),p.pair("material",x.string),p.pair("epsilon_r",x.number),p.pair("loss_tangent",x.number)))}},Tu=class{static{a(this,"Net")}constructor(e){Object.assign(this,Te(e,p.start("net"),p.positional("number",x.number),p.positional("name",x.string)))}},Jl=class{constructor(e,t){this.parent=t;this.locked=!1;Object.assign(this,Te(e,p.start("dimension"),p.atom("locked"),p.pair("type",x.string),p.pair("layer",x.string),p.pair("tstamp",x.string),p.list("pts",x.vec2),p.pair("height",x.number),p.pair("orientation",x.number),p.pair("leader_length",x.number),p.item("gr_text",Zo,this),p.item("format",X2),p.item("style",H2)))}static{a(this,"Dimension")}resolve_text_var(e){return this.parent.resolve_text_var(e)}get start(){return this.pts.at(0)??new A(0,0)}get end(){return this.pts.at(-1)??new A(0,0)}};var X2=class{constructor(e){this.suppress_zeroes=!1;Object.assign(this,Te(e,p.start("format"),p.pair("prefix",x.string),p.pair("suffix",x.string),p.pair("units",x.number),p.pair("units_format",x.number),p.pair("precision",x.number),p.pair("override_value",x.string),p.atom("suppress_zeroes")))}static{a(this,"DimensionFormat")}};var H2=class{static{a(this,"DimensionStyle")}constructor(e){Object.assign(this,Te(e,p.start("style"),p.pair("thickness",x.number),p.pair("arrow_length",x.number),p.pair("text_position_mode",x.number),p.pair("extension_height",x.number),p.pair("text_frame",x.number),p.pair("extension_offset",x.number),p.atom("keep_text_aligned")))}},_r=class{constructor(e,t){this.parent=t;this.locked=!1;this.placed=!1;this.attr={through_hole:!1,smd:!1,virtual:!1,board_only:!1,exclude_from_pos_files:!1,exclude_from_bom:!1,allow_solder_mask_bridges:!1,allow_missing_courtyard:!1};this.properties={};this.drawings=[];this.pads=[];this.#e=new Map;this.zones=[];this.models=[];Object.assign(this,Te(e,p.start("footprint"),p.positional("library_link",x.string),p.pair("version",x.number),p.pair("generator",x.string),p.atom("locked"),p.atom("placed"),p.pair("layer",x.string),p.pair("tedit",x.string),p.pair("tstamp",x.string),p.item("at",Ht),p.pair("descr",x.string),p.pair("tags",x.string),p.pair("path",x.string),p.pair("autoplace_cost90",x.number),p.pair("autoplace_cost180",x.number),p.pair("solder_mask_margin",x.number),p.pair("solder_paste_margin",x.number),p.pair("solder_paste_ratio",x.number),p.pair("clearance",x.number),p.pair("zone_connect",x.number),p.pair("thermal_width",x.number),p.pair("thermal_gap",x.number),p.object("attr",this.attr,p.atom("through_hole"),p.atom("smd"),p.atom("virtual"),p.atom("board_only"),p.atom("exclude_from_pos_files"),p.atom("exclude_from_bom"),p.atom("allow_solder_mask_bridges"),p.atom("allow_missing_courtyard")),p.dict("properties","property",x.string),p.collection("drawings","fp_line",x.item(zl,this)),p.collection("drawings","fp_circle",x.item($l,this)),p.collection("drawings","fp_arc",x.item(jl,this)),p.collection("drawings","fp_poly",x.item(ql,this)),p.collection("drawings","fp_rect",x.item(ec,this)),p.collection("fp_texts","fp_text",x.item(Ys,this)),p.collection("zones","zone",x.item(Oo,this)),p.collection("models","model",x.item(Q2)),p.collection("pads","pad",x.item(tc,this))));for(let n of this.pads)this.#e.set(n.number,n);for(let n of this.drawings)n instanceof Ys&&(n.type=="reference"&&(this.reference=n.text),n.type=="value"&&(this.value=n.text))}static{a(this,"Footprint")}#e;#t;get uuid(){return this.tstamp}*items(){yield*this.drawings??[],yield*this.zones??[],yield*this.pads.values()??[]}resolve_text_var(e){switch(e){case"REFERENCE":return this.reference;case"VALUE":return this.value;case"LAYER":return this.layer;case"FOOTPRINT_LIBRARY":return this.library_link.split(":").at(0);case"FOOTPRINT_NAME":return this.library_link.split(":").at(-1)}let t=/^(NET_NAME|NET_CLASS|PIN_NAME)\(.+?\)$/.exec(e);if(t?.length==3){let[n,r,s]=t;switch(r){case"NET_NAME":return this.pad_by_number(s)?.net.number.toString();case"NET_CLASS":return this.pad_by_number(s)?.net.name;case"PIN_NAME":return this.pad_by_number(s)?.pinfunction}}if(this.properties[e]!==void 0)return this.properties[e];if(this.parent)return this.parent.resolve_text_var(e)}pad_by_number(e){return this.#e.get(e)}get bbox(){if(!this.#t){let e=new je(this.at.position.x-.25,this.at.position.y-.25,.5,.5),t=dt.translation(this.at.position.x,this.at.position.y).rotate_self(Ve.deg_to_rad(this.at.rotation));for(let n of this.drawings)n instanceof Ys||(e=je.combine([e,n.bbox.transform(t)]));e.context=this,this.#t=e}return this.#t}},os=class{constructor(){this.locked=!1}static{a(this,"GraphicItem")}get bbox(){return new je(0,0,0,0)}},vu=class extends os{constructor(t,n){super();this.parent=n;let r=this.constructor;Object.assign(this,Te(t,p.start(r.expr_start),p.atom("locked"),p.pair("layer",x.string),p.vec2("start"),p.vec2("end"),p.pair("width",x.number),p.pair("tstamp",x.string),p.item("stroke",qn))),this.width??=this.stroke?.width||0}static{a(this,"Line")}static{this.expr_start="unset"}get bbox(){return je.from_points([this.start,this.end])}},Vo=class extends vu{static{a(this,"GrLine")}static{this.expr_start="gr_line"}},zl=class extends vu{static{a(this,"FpLine")}static{this.expr_start="fp_line"}},Nu=class extends os{constructor(t,n){super();this.parent=n;let r=this.constructor;Object.assign(this,Te(t,p.start(r.expr_start),p.atom("locked"),p.vec2("center"),p.vec2("end"),p.pair("width",x.number),p.pair("fill",x.string),p.pair("layer",x.string),p.pair("tstamp",x.string),p.item("stroke",qn))),this.width??=this.stroke?.width||0}static{a(this,"Circle")}static{this.expr_start="unset"}get bbox(){let t=this.center.sub(this.end).magnitude,n=new A(t,t);return je.from_points([this.center.sub(n),this.center.add(n)])}},Uo=class extends Nu{static{a(this,"GrCircle")}static{this.expr_start="gr_circle"}},$l=class extends Nu{static{a(this,"FpCircle")}static{this.expr_start="fp_circle"}},Pu=class extends os{constructor(t,n){super();this.parent=n;let r=this.constructor,s=Te(t,p.start(r.expr_start),p.atom("locked"),p.pair("layer",x.string),p.vec2("start"),p.vec2("mid"),p.vec2("end"),p.pair("angle",x.number),p.pair("width",x.number),p.pair("tstamp",x.string),p.item("stroke",qn));if(s.angle!==void 0){let o=Ve.from_degrees(s.angle).normalize720(),l=s.start,c=s.end,u=o.negative().rotate_point(c,l);o.degrees<0&&([c,u]=[u,c]),this.#e=Un.from_center_start_end(l,c,u,s.width),s.start=this.#e.start_point,s.mid=this.#e.mid_point,s.end=this.#e.end_point,delete s.angle}else this.#e=Un.from_three_points(s.start,s.mid,s.end,s.width);Object.assign(this,s),this.width??=this.stroke?.width??this.#e.width,this.#e.width=this.width}static{a(this,"Arc")}static{this.expr_start="unset"}#e;get arc(){return this.#e}get bbox(){return this.arc.bbox}},Io=class extends Pu{static{a(this,"GrArc")}static{this.expr_start="gr_arc"}},jl=class extends Pu{static{a(this,"FpArc")}static{this.expr_start="fp_arc"}},br=class extends os{constructor(t,n){super();this.parent=n;let r=this.constructor;Object.assign(this,Te(t,p.start(r.expr_start),p.atom("locked"),p.pair("layer",x.string),p.atom("island"),p.list("pts",x.vec2),p.pair("width",x.number),p.pair("fill",x.string),p.pair("tstamp",x.string),p.item("stroke",qn))),this.width??=this.stroke?.width||0}static{a(this,"Poly")}static{this.expr_start="polygon"}get bbox(){return je.from_points(this.pts)}},G2=class extends br{static{a(this,"FilledPolygon")}static{this.expr_start="filled_polygon"}},Fo=class extends br{static{a(this,"GrPoly")}static{this.expr_start="gr_poly"}},ql=class extends br{static{a(this,"FpPoly")}static{this.expr_start="fp_poly"}},Eu=class extends os{constructor(t,n){super();this.parent=n;let r=this.constructor;Object.assign(this,Te(t,p.start(r.expr_start),p.atom("locked"),p.vec2("start"),p.vec2("end"),p.pair("layer",x.string),p.pair("width",x.number),p.pair("fill",x.string),p.pair("tstamp",x.string),p.item("stroke",qn))),this.width??=this.stroke?.width||0}static{a(this,"Rect")}static{this.expr_start="rect"}get bbox(){return je.from_points([this.start,this.end])}},Wo=class extends Eu{static{a(this,"GrRect")}static{this.expr_start="gr_rect"}},ec=class extends Eu{static{a(this,"FpRect")}static{this.expr_start="fp_rect"}},D2=class{static{a(this,"TextRenderCache")}constructor(e){Object.assign(this,Te(e,p.start("render_cache"),p.positional("text",x.string),p.positional("angle",x.number),p.collection("polygons","polygon",x.item(br))));for(let t of this.polygons)t.fill="solid"}},Co=class{constructor(){this.unlocked=!1;this.hide=!1;this.effects=new mn}static{a(this,"Text")}static{this.common_expr_defs=[p.item("at",Ht),p.atom("hide"),p.atom("unlocked"),p.object("layer",{},p.positional("name",x.string),p.atom("knockout")),p.pair("tstamp",x.string),p.item("effects",mn),p.item("render_cache",D2)]}get shown_text(){return ks(this.text,this.parent)}},Ys=class extends Co{constructor(t,n){super();this.parent=n;this.locked=!1;Object.assign(this,Te(t,p.start("fp_text"),p.atom("locked"),p.positional("type",x.string),p.positional("text",x.string),...Co.common_expr_defs))}static{a(this,"FpText")}},Zo=class extends Co{constructor(t,n){super();this.parent=n;this.locked=!1;Object.assign(this,Te(t,p.start("gr_text"),p.atom("locked"),p.positional("text",x.string),...Co.common_expr_defs))}static{a(this,"GrText")}},tc=class i{constructor(e,t){this.parent=t;this.type="thru_hole";this.locked=!1;this.highlighted=!1;let n=Te(e,p.start("pad"),p.positional("number",x.string),p.positional("type",x.string),p.positional("shape",x.string),p.item("at",Ht),p.atom("locked"),p.vec2("size"),p.vec2("rect_delta"),p.list("layers",x.string),p.pair("roundrect_rratio",x.number),p.pair("chamfer_ratio",x.number),p.expr("chamfer",x.object({},p.atom("top_right"),p.atom("top_left"),p.atom("bottom_right"),p.atom("bottom_left"))),p.pair("pinfunction",x.string),p.pair("pintype",x.string),p.pair("solder_mask_margin",x.number),p.pair("solder_paste_margin",x.number),p.pair("solder_paste_margin_ratio",x.number),p.pair("clearance",x.number),p.pair("thermal_width",x.number),p.pair("thermal_gap",x.number),p.pair("thermal_bridge_angle",x.number),p.pair("zone_connect",x.number),p.pair("tstamp",x.string),p.item("drill",Y2),p.item("net",Tu),p.item("options",K2),p.expr("primitives",(r,s,o)=>Te(o,p.start("primitives"),p.collection("items","gr_line",x.item(Vo,this)),p.collection("items","gr_circle",x.item(Uo,this)),p.collection("items","gr_arc",x.item(Io,this)),p.collection("items","gr_rect",x.item(Wo,this)),p.collection("items","gr_poly",x.item(Fo,this)))?.items));Object.assign(this,n)}static{a(this,"Pad")}static{this.MyHighlightColor=new w(0,100,100)}get boundingBox(){return new je(this.at.position.x-this.size.x/2,this.at.position.y-this.size.y/2,this.size.x,this.size.y)}get highlightColor(){return i.MyHighlightColor}get index(){return`pad_${this.number}`}get cross_index(){return`symbol_pin_${this.number}`}},Y2=class{constructor(e){this.oval=!1;this.diameter=0;this.width=0;this.offset=new A(0,0);Object.assign(this,Te(e,p.start("drill"),p.atom("oval"),p.positional("diameter",x.number),p.positional("width",x.number),p.vec2("offset")))}static{a(this,"PadDrill")}},K2=class{static{a(this,"PadOptions")}constructor(e){Object.assign(this,Te(e,p.start("options"),p.pair("clearance",x.string),p.pair("anchor",x.string)))}},Q2=class{constructor(e){this.hide=!1;this.opacity=1;Object.assign(this,Te(e,p.start("model"),p.positional("filename",x.string),p.atom("hide"),p.pair("opacity",x.number),p.object("offset",{},p.list("xyz",x.number)),p.object("scale",{},p.list("xyz",x.number)),p.object("rotate",{},p.list("xyz",x.number))))}static{a(this,"Model")}},B2=class{constructor(e){this.locked=!1;Object.assign(this,Te(e,p.start("group"),p.positional("name",x.string),p.atom("locked"),p.pair("id",x.string),p.list("members",x.string)))}static{a(this,"Group")}};var Mr=class extends _r{constructor(t,n,r){super(n,r);this.fileName=t;this.parent=r;this.layers=JSON.parse('[{"ordinal":0,"canonical_name":"F.Cu","type":"signal"},{"ordinal":31,"canonical_name":"B.Cu","type":"signal"},{"ordinal":32,"canonical_name":"B.Adhes","type":"user","user_name":"B.Adhesive"},{"ordinal":33,"canonical_name":"F.Adhes","type":"user","user_name":"F.Adhesive"},{"ordinal":34,"canonical_name":"B.Paste","type":"user"},{"ordinal":35,"canonical_name":"F.Paste","type":"user"},{"ordinal":36,"canonical_name":"B.SilkS","type":"user","user_name":"B.Silkscreen"},{"ordinal":37,"canonical_name":"F.SilkS","type":"user","user_name":"F.Silkscreen"},{"ordinal":38,"canonical_name":"B.Mask","type":"user"},{"ordinal":39,"canonical_name":"F.Mask","type":"user"},{"ordinal":40,"canonical_name":"Dwgs.User","type":"user","user_name":"User.Drawings"},{"ordinal":41,"canonical_name":"Cmts.User","type":"user","user_name":"User.Comments"},{"ordinal":42,"canonical_name":"Eco1.User","type":"user","user_name":"User.Eco1"},{"ordinal":43,"canonical_name":"Eco2.User","type":"user","user_name":"User.Eco2"},{"ordinal":44,"canonical_name":"Edge.Cuts","type":"user"},{"ordinal":45,"canonical_name":"Margin","type":"user"},{"ordinal":46,"canonical_name":"B.CrtYd","type":"user","user_name":"B.Courtyard"},{"ordinal":47,"canonical_name":"F.CrtYd","type":"user","user_name":"F.Courtyard"},{"ordinal":48,"canonical_name":"B.Fab","type":"user"},{"ordinal":49,"canonical_name":"F.Fab","type":"user"},{"ordinal":50,"canonical_name":"User.1","type":"user"},{"ordinal":51,"canonical_name":"User.2","type":"user"},{"ordinal":52,"canonical_name":"User.3","type":"user"},{"ordinal":53,"canonical_name":"User.4","type":"user"},{"ordinal":54,"canonical_name":"User.5","type":"user"},{"ordinal":55,"canonical_name":"User.6","type":"user"},{"ordinal":56,"canonical_name":"User.7","type":"user"},{"ordinal":57,"canonical_name":"User.8","type":"user"},{"ordinal":58,"canonical_name":"User.9","type":"user"}]');this.fileName=t,this.at=new Ht}static{a(this,"KicadFootprint")}};function DS(i,e,t,n,r){let s=1-i,o=i*i,l=s*s,c=l*s,u=o*i,h=c*e.x+3*l*i*t.x+3*s*o*n.x+u*r.x,d=c*e.y+3*l*i*t.y+3*s*o*n.y+u*r.y;return new A(h,d)}a(DS,"bezier");function ZR(i,e,t,n){let s=1/0,o=1/0,l=-1/0,c=-1/0;for(let u=0;u<=100;++u){let h=u/100,d=DS(h,i,e,t,n);s=Math.min(s,d.x),o=Math.min(o,d.y),l=Math.max(l,d.x),c=Math.max(c,d.y)}return{minX:s,minY:o,maxX:l,maxY:c}}a(ZR,"calculateBoundingBox");function YS(i,e){let t=i.x,n=i.y,r=e.x-i.x,s=e.y-i.y;return new je(t,n,r,s)}a(YS,"Vect2dToBBox");function kR(i,e){{let t,n,r,s;for(let o of e.pins){{let l=o.at.position;if(t===void 0){t=n=l.x,r=s=l.y;continue}t=t<l.x?t:l.x,n=n<l.x?l.x:n,r=r>l.y?l.y:r,s=s<l.y?l.y:s}i.push(new je(t,r,n-t,s-r))}}for(let t of e.drawings)if(t instanceof ts)i.push(YS(t.start,t.end));else if(t instanceof kl)i.push(KS(t.at.position,t.size));else if(t instanceof Un)i.push(t.bbox);else if(t instanceof Xs)i.push(new je(t.center.x-t.radius,t.center.y-t.radius,t.radius*2,t.radius*2));else if(t instanceof Cl){let n,r,s,o;for(let c of t.pts){if(n===void 0){n=r=c.x,s=o=c.y;continue}n=n<c.x?n:c.x,r=r<c.x?c.x:r,s=s>c.y?c.y:s,o=o<c.y?c.y:o}let l=ZR(t.start,t.c1,t.c2,t.end);i.push(new je(l.minX,l.minY,l.maxX-l.minX,l.maxY-l.minY))}else if(t instanceof es){let n,r,s,o;for(let l of t.pts){if(n===void 0){n=r=l.x,s=o=l.y;continue}n=n<l.x?n:l.x,r=r<l.x?l.x:r,s=s>l.y?l.y:s,o=o<l.y?l.y:o}i.push(new je(n,s,r-n,o-s))}for(let t of e.children)kR(i,t)}a(kR,"GetLibSymbolBBoxs");function KS(i,e){return new je(i.x,i.y,e.x,e.y)}a(KS,"PosSizeToBBox");var hi=class{constructor(e,t,n){this.filename=e;this.parent=n;this._active_unit_index=0;this.#e=new Map;Object.assign(this,Te(t,p.start("kicad_symbol_lib"),p.pair("version",x.number),p.pair("generator",x.string),p.pair("generator_version",x.string),p.collection("symbols","symbol",x.item(is,this)))),this.uuid=e;for(let r of this.symbols)this.#e.set(r.name,r)}static{a(this,"KicadSymbolLib")}get alter_symbol_parts(){return this.symbols.length?this.symbols[0].unit_count:1}get active_unit_index(){return this._active_unit_index}set_active_unit_index(e){this._active_unit_index=e}#e;*items(){yield*this.symbols}resolve_text_var(e){return e}by_name(e){return this.#e.get(e)}get bbox(){let e=[];for(let t of this.symbols)kR(e,t);return je.combine(e)}};var J2=new Ai("kicanvas:project"),ko=class extends EventTarget{constructor(){super(...arguments);this.#t=new Map;this.loaded=new pr;this.settings=new Gs}static{a(this,"Project")}#e;#t;get filesByIndex(){return this.#t}dispose(){this.#t.clear()}async load(t){J2.info(`Loading project from ${t.constructor.name}`),this.settings=new Gs,this.#t.clear(),this.#e=t;let n=[];for(let r of this.#e.list())n.push(this.#i(r));await Promise.all(n),this.loaded.open(),this.dispatchEvent(new CustomEvent("load",{detail:this}))}async#i(t){if(J2.info(`Loading file ${t}`),t.endsWith(".kicad_sch"))return await this.#n(Oi,t);if(t.endsWith(".kicad_pcb"))return await this.#n(xi,t);if(t.endsWith(".kicad_sym"))return await this.#n(hi,t);if(t.endsWith(".kicad_mod"))return await this.#n(Mr,t);if(t.endsWith(".kicad_pro"))return this.#r(t);J2.warn(`Couldn't load ${t}: unknown file type`)}async#n(t,n){if(this.#t.has(n))return this.#t.get(n);let r=await this.#s(n),s=new t(n,r);s.project=this,this.#t.set(n,s)}async#r(t){let n=await this.#s(t),r=JSON.parse(n);this.settings=Gs.load(r)}async#s(t){return await(await this.#e.get(t)).text()}*files(){yield*this.#t.values()}file_by_name(t){for(let[,n]of this.#t)if(n)return n;return this.#t.get(t)}*boards(){for(let t of this.#t.values())(t instanceof xi||t instanceof Mr)&&(yield t)}get has_boards(){return wl(this.boards())>0}*schematics(){for(let t of this.#t.values())(t instanceof Oi||t instanceof hi)&&(yield t)}get has_schematics(){return wl(this.schematics())>0}*pages(){yield*this.#t.values()}get first_page(){return pu(this.pages())}page_by_path(t){return this.#t.get(t)}async download(t){return this.#t.has(t)&&(t=this.#t.get(t).filename),await this.#e.download(t)}set_active_page(t){this.active_page_name=t,this.dispatchEvent(new CustomEvent("change",{detail:this}))}};function wu(i){return i instanceof URL&&(i=i.pathname),i.split("/").at(-1)}a(wu,"basename");function XR(i){let e,t;i instanceof File?(e=URL.createObjectURL(i),t=i.name):(e=i.href,t=wu(e));let n=document.createElement("a");n.href=e,n.download=t,n.target="_blank",console.log(n),n.click(),i instanceof File&&URL.revokeObjectURL(e)}a(XR,"initiate_download");var z2=class{static{a(this,"VirtualFileSystem")}*list_matches(e){for(let t of this.list())t.match(e)&&(yield t)}*list_ext(e){e.startsWith(".")||(e=`.${e}`);for(let t of this.list())t.endsWith(e)&&(yield t)}},Xo=class extends z2{constructor(t){super();this.urls=new Map;for(let n of t){let r=new URL(n,window.location.toString()),s=wu(r);this.urls.set(s,r)}}static{a(this,"FetchFileSystem")}*list(){yield*this.urls.keys()}async has(t){return Promise.resolve(this.urls.has(t))}async get(t){let n=this.urls.get(t);if(!n)throw new Error(`File ${t} not found!`);let r=new Request(n,{method:"GET"}),s=await fetch(r);if(!s.ok)throw new Error(`Unable to load ${n}: ${s.status} ${s.statusText}`);let o=await s.blob();return new File([o],t)}async download(t){XR(await this.get(t))}};var Ho=class extends CustomEvent{static{a(this,"KiCanvasEvent")}constructor(e,t,n=!1){super(e,{detail:t,composed:!0,bubbles:n})}},di=class i extends Ho{static{a(this,"KiCanvasLoadEvent")}static{this.type="kicanvas:load"}constructor(){super(i.type,null)}},ti=class i extends Ho{static{a(this,"KiCanvasSelectEvent")}static{this.type="kicanvas:select"}constructor(e){super(i.type,e,!0)}},Go=class i extends Ho{static{a(this,"KiCanvasMouseMoveEvent")}static{this.type="kicanvas:mousemove"}constructor(e){super(i.type,e,!0)}},HR=class i extends Ho{static{a(this,"KicadSyncHoverEvent")}static{this.type="kicanvas:sync_hover"}constructor(e){super(i.type,e,!0)}};var Lu=class extends $r{constructor(t){super(t);this.#e=[];this.state=new Al}static{a(this,"Canvas2DRenderer")}#e;#t;async setup(){let t=this.canvas.getContext("2d",{alpha:!1,desynchronized:!0});if(t==null)throw new Error("Unable to create Canvas2d context");this.ctx2d=t,this.update_canvas_size()}dispose(){this.ctx2d=void 0;for(let t of this.#e)t.dispose()}update_canvas_size(){let n=this.canvas.getBoundingClientRect(),r=Math.round(n.width*1),s=Math.round(n.height*1);(this.canvas.width!=r||this.canvas.height!=s)&&(this.canvas.width=r,this.canvas.height=s)}clear_canvas(){this.update_canvas_size(),this.ctx2d.setTransform(),this.ctx2d.fillStyle=this.background_color.to_css(),this.ctx2d.fillRect(0,0,this.canvas.width,this.canvas.height),this.ctx2d.lineCap="round",this.ctx2d.lineJoin="round"}start_layer(t){this.#t=new $2(this,t)}end_layer(){if(!this.#t)throw new Error("No active layer");return this.#e.push(this.#t),this.#t=null,this.#e.at(-1)}arc(t,n,r,s,o,l){super.prep_arc(t,n,r,s,o,l)}circle(t,n,r){let s=super.prep_circle(t,n,r);if(!s.color||s.color.is_transparent_black)return;let o=s.color.to_css(),l=new Path2D;l.arc(s.center.x,s.center.y,s.radius,0,Math.PI*2),this.#t.commands.push(new Do(l,o,null,0))}line(t,n,r){let s=super.prep_line(t,n,r);if(!s.color||s.color.is_transparent_black)return;let o=s.color.to_css(),l=new Path2D,c=!1;for(let u of s.points)c?l.lineTo(u.x,u.y):(l.moveTo(u.x,u.y),c=!0);this.#t.commands.push(new Do(l,null,o,s.width))}polygon(t,n){let r=super.prep_polygon(t,n);if(!r.color||r.color.is_transparent_black)return;let s=r.color.to_css(),o=new Path2D,l=!1;for(let c of r.points)l?o.lineTo(c.x,c.y):(o.moveTo(c.x,c.y),l=!0);o.closePath(),this.#t.commands.push(new Do(o,s,null,0))}get layers(){let t=this.#e;return{*[Symbol.iterator](){for(let n of t)yield n}}}remove_layer(t){let n=this.#e.indexOf(t);n!=-1&&this.#e.splice(n,1)}},Do=class{constructor(e,t,n,r){this.path=e;this.fill=t;this.stroke=n;this.stroke_width=r;this.path_count=1}static{a(this,"DrawCommand")}render(e){e.fillStyle=this.fill??"black",e.strokeStyle=this.stroke??"black",e.lineWidth=this.stroke_width,this.fill&&e.fill(this.path),this.stroke&&e.stroke(this.path)}},$2=class extends jr{constructor(t,n,r=[]){super(t,n);this.renderer=t;this.name=n;this.commands=r}static{a(this,"Canvas2dRenderLayer")}dispose(){this.clear()}clear(){this.commands=[]}push_path(t,n,r,s){let o=this.commands.at(-1);o&&(o.path_count<20,o.fill==n&&o.stroke==r&&o.stroke_width==s)?(o.path.addPath(t),o.path_count++):this.commands.push(new Do(t,n,r,s))}render(t,n,r=1){let s=this.renderer.ctx2d;if(!s)throw new Error("No CanvasRenderingContext2D!");s.save(),s.globalCompositeOperation=this.composite_operation,s.globalAlpha=r;let o=dt.from_DOMMatrix(s.getTransform());o.multiply_self(t),s.setTransform(o.to_DOMMatrix());for(let l of this.commands)l.render(s);s.globalCompositeOperation="source-over",s.globalAlpha=1,s.restore()}};var GR=8,Au=24,QS=.005,DR=1,Ou=class{constructor(e,t,n,r=.5,s=10,o){this.target=e;this.camera=t;this.callback=n;this.min_zoom=r;this.max_zoom=s;this.bounds=o;this.target.addEventListener("wheel",l=>this.#t(l),{passive:!1})}static{a(this,"MoveAndZoom")}#e;#t(e){e.preventDefault();let t=e.deltaX,n=e.deltaY;t==0&&e.shiftKey&&([t,n]=[n,t]),e.deltaMode===WheelEvent.DOM_DELTA_LINE?(t*=GR,n*=GR):e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=Au,n*=Au),t=Math.sign(t)*Math.min(Au,Math.abs(t)),n=Math.sign(n)*Math.min(Au,Math.abs(n)),this.#e=this.target.getBoundingClientRect(),this.#r(n,this.#i(e)),this.target.dispatchEvent(new MouseEvent("panzoom",{clientX:e.clientX,clientY:e.clientY}))}#i(e){return new A(e.clientX-this.#e.left,e.clientY-this.#e.top)}#n(e,t){let n=new A(e*DR,t*DR).multiply(1/this.camera.zoom),r=this.camera.center.add(n);this.bounds&&(r=this.bounds.constrain_point(r)),this.camera.center.set(r),this.callback&&this.callback()}#r(e,t){let n=this.camera.screen_to_world(t);this.camera.zoom*=Math.exp(e*-QS),this.camera.zoom=Math.min(this.max_zoom,Math.max(this.camera.zoom,this.min_zoom));let r=this.camera.screen_to_world(t),s=n.sub(r);this.camera.translate(s),this.callback&&this.callback()}};var Vu=class{constructor(e,t){this.target=e;this.callback=t;this.#e=new ResizeObserver(()=>{this.callback(this.target)}),this.#e.observe(e)}static{a(this,"SizeObserver")}#e;dispose(){this.#e?.disconnect(),this.#e=void 0}};var Uu=class{constructor(e,t){this.renderer=e;this.callback=t;this.ready=new pr;this.camera=new mu(new A(0,0),new A(0,0),1,new Ve(0)),this.#e=new Vu(this.renderer.canvas,()=>{this.#i(),this.callback()}),this.#i()}static{a(this,"Viewport")}#e;#t;dispose(){this.#e.dispose()}#i(){let e=this.renderer.canvas;e.clientWidth>0&&e.clientHeight>0&&(this.width!=e.clientWidth||this.height!=e.clientHeight)&&(this.width=e.clientWidth,this.height=e.clientHeight,this.camera.viewport_size=new A(this.width,this.height),this.width&&this.height&&this.ready.open())}enable_pan_and_zoom(e,t){this.#t=new Ou(this.renderer.canvas,this.camera,()=>{this.callback()},e,t)}get view_matrix(){return this.camera.matrix}set bounds(e){this.#t&&(this.#t.bounds=e)}};var YR=[],Yo=class Yo extends EventTarget{constructor(t,n=!0){super();this.canvas=t;this.interactive=n;this.mouse_position=new A(0,0);this.hover_position=new A(0,0);this.loaded=new pr;this.disposables=new To;this.setup_finished=new pr;this._cross_hightedItem=null;YR.push(this)}static{a(this,"Viewer")}static{this.MinZoom=.5}static{this.MaxZoom=190}#e;dispose(){this.disposables.dispose()}addEventListener(t,n,r){return super.addEventListener(t,n,r),{dispose:()=>{this.removeEventListener(t,n,r)}}}async setup(){this.renderer=this.disposables.add(this.create_renderer(this.canvas)),await this.renderer.setup(),this.viewport=this.disposables.add(new Uu(this.renderer,()=>{this.on_viewport_change()})),this.interactive&&(this.viewport.enable_pan_and_zoom(Yo.MinZoom,Yo.MaxZoom),this.disposables.add(yn(this.canvas,"mousemove",t=>{this.on_mouse_change(t)})),this.disposables.add(yn(this.canvas,"panzoom",t=>{this.on_mouse_change(t)})),this.disposables.add(yn(this.canvas,"click",t=>{let n=this.layers.query_point(this.mouse_position);this.on_pick(this.mouse_position,n)}))),this.setup_finished.open()}on_viewport_change(){this.interactive&&this.draw()}on_mouse_change(t){let n=this.canvas.getBoundingClientRect(),r=this.viewport.camera.screen_to_world(new A(t.clientX-n.left,t.clientY-n.top));this.hover_position=this.viewport.camera.screen_to_world(new A(t.clientX-n.left,t.clientY-n.top)),(this.mouse_position.x!=r.x||this.mouse_position.y!=r.y)&&(this.mouse_position.set(r),this.dispatchEvent(new Go(this.mouse_position))),this.on_hover()}resolve_loaded(t){t&&(this.loaded.open(),this.dispatchEvent(new di))}on_draw(){if(this.renderer.clear_canvas(),!this.layers)return;let t=.01,n=this.viewport.camera.matrix,r=this.layers.is_any_layer_highlighted();for(let s of this.layers.in_display_order())if(s.visible&&s.graphics){let o=s.opacity;r&&!s.highlighted&&(o=.25),s.graphics.render(n,t,o),t+=.01}}draw(){this.viewport&&window.requestAnimationFrame(()=>{this.on_draw()})}on_pick(t,n){let r=null;for(let{bbox:s}of n){r=s;break}this.select(r)}select(t){this.selected=t}get selected(){return this.#e}set selected(t){this._set_selected(t)}_set_selected(t){let n=this.#e;this.#e=t?.copy()||null,this.dispatchEvent(new ti({item:this.#e?.context,previous:n?.context})),Ki(()=>this.paint_selected())}sync_hover(t){let n=t?this.locateItemForCrossHight(t.cross_index):null,r=!1;this._cross_hightedItem&&(this._cross_hightedItem.highlighted=!1,r=!0),this._cross_hightedItem=n,this._cross_hightedItem&&(this._cross_hightedItem.highlighted=!0,r=!0),r&&(this.paint(),this.draw())}get selection_color(){return w.white}paint_selected(){let t=this.layers.overlay;if(t.clear(),this.#e){let n=this.#e.copy().grow(this.#e.w*.1);this.renderer.start_layer(t.name),this.renderer.line(bt.from_BBox(n,.254,this.selection_color)),this.renderer.polygon(fn.from_BBox(n,this.selection_color)),t.graphics=this.renderer.end_layer(),t.graphics.composite_operation="overlay"}this.draw()}zoom_to_selection(){this.selected&&(this.viewport.camera.bbox=this.selected.grow(10),this.draw())}on_hover(){let t=!1,n=this.findHighlightItem(this.hover_position);this._cross_hightedItem&&(this._cross_hightedItem.highlighted=!1,t=!0),this._cross_hightedItem=n,this._cross_hightedItem&&(this._cross_hightedItem.highlighted=!0,t=!0),t&&(this.paint(),this.draw());for(let r of YR)r!==this&&r.sync_hover(this._cross_hightedItem??null)}};Me([Zs],Yo.prototype,"_set_selected",1),Me([Zs],Yo.prototype,"sync_hover",1);var Ko=Yo;var j2=new Ai("kicanvas:viewer"),BS=.005,KR=3,Qo=class i extends Ko{constructor(t,n,r){super(t,n);this.theme=r}static{a(this,"DocumentViewer")}static{this.FACTOR_zoom_fit_top_item=1.6}get grid_origin(){return new A(0,0)}async load(t){await this.setup_finished,this.document!=t&&(j2.info(`Loading ${t.filename} into viewer`),this.document=t,this.paint(),Ki(async()=>{j2.info("Waiting for viewport"),await this.viewport.ready;let n=this.document;this.viewport.bounds=n.bbox.grow(11),j2.info("Positioning camera"),this.zoom_fit_top_item(),this.resolve_loaded(!0),this.selected&&(this.selected=null),this.draw()}))}paint(){this.document&&(this.renderer.background_color=this.theme.background,this.drawing_sheet||(this.drawing_sheet=Yl.default()),this.drawing_sheet.document=this.document,this.disposables.disposeAndRemove(this.layers),this.layers=this.disposables.add(this.create_layer_set()),this.painter=this.create_painter(),this.painter.paint(this.document))}zoom_to_page(){this.viewport.camera.bbox=this.drawing_sheet.page_bbox.grow(10),this.draw()}zoom_in(){this.genericZoom(!0)}genericZoom(t){this.viewport.camera.zoom*=Math.exp((t?KR:-KR)*-BS),this.viewport.camera.zoom=Math.min(Ko.MaxZoom,Math.max(this.viewport.camera.zoom,Ko.MinZoom)),this.draw()}zoom_out(){this.genericZoom(!1)}move(t){}zoom_fit_top_item(){let t=this.document;this.viewport.camera.bbox=t.bbox.grow(i.FACTOR_zoom_fit_top_item),this.draw()}draw(){this.viewport&&(this.grid?.update(),super.draw())}select(t){if(t!=null&&!(t instanceof je))throw new Error(`Unable to select item ${t}, could not find an object that matched.`);this.selected=t??null}};var Vi=(m=>(m.interactive=":Interactive",m.marks=":Marks",m.symbol_field=":Symbol:Field",m.label=":Label",m.junction=":Junction",m.wire=":Wire",m.symbol_foreground=":Symbol:Foreground",m.notes=":Notes",m.bitmap=":Bitmap",m.symbol_pin=":Symbol:Pin",m.symbol_background=":Symbol:Background",m[m.drawing_sheet=":DrawingSheet"]="drawing_sheet",m[m.grid=":Grid"]="grid",m))(Vi||{}),Bo=class extends Ao{constructor(t){super();this.theme=t;for(let n of Object.values(Vi))this.add(new yi(this,n));this.by_name(":Interactive").visible=!1,this.by_name(":Interactive").interactive=!0,this.by_name(Vi.drawing_sheet).color=this.theme.worksheet??w.white}static{a(this,"LayerSet")}*interactive_layers(){yield this.by_name(":Interactive")}};var q2=class{static{a(this,"Glyph")}},nc=class i extends q2{constructor(t,n){super();this.strokes=t;this.bbox=n}static{a(this,"StrokeGlyph")}transform(t,n,r,s,o,l){let c=this.bbox.copy();c.x=n.x+c.x*t.x,c.y=n.y+c.y*t.y,c.w=c.w*t.x,c.h=c.h*t.y,r&&(c.w+=c.h*r);let u=[];for(let h of this.strokes){let d=[];for(let f of h){let m=f.multiply(t);r>0&&(m.x-=m.y*r),m=m.add(n),o&&(m.x=l.x-(m.x-l.x)),s.degrees!=0&&(m=s.rotate_point(m,l)),d.push(m)}u.push(d)}return new i(u,c)}};var ic=class{constructor(e){this.text=e;this.root=QR(JS(e)),this.root.is_root=!0}static{a(this,"Markup")}},Iu=class{constructor(){this.is_root=!1;this.subscript=!1;this.superscript=!1;this.overbar=!1;this.text="";this.children=[]}static{a(this,"MarkupNode")}};function*JS(i){let e="",t=0,n=null,r=0;for(let s=0;s<i.length+1;s++){let o=s<i.length?i[s]:e;switch(o){case"_":case"^":case"~":n=o;break;case"{":n&&(r++,yield{text:i.slice(t,s-1)},yield{open:r,control:n},n=null,t=s+1);break;case"}":r&&(yield{text:i.slice(t,s)},yield{close:r},t=s+1,r--);break;case e:yield{text:i.slice(t,s)};break;default:n=null;break}}}a(JS,"tokenize");function QR(i){let e,t=new Iu;for(;e=i.next().value;){if(e.text){let n=new Iu;n.text=e.text,t.children.push(n);continue}if(e.open){let n=QR(i);switch(e.control){case"^":n.superscript=!0;break;case"_":n.subscript=!0;break;case"~":n.overbar=!0;break}t.children.push(n);continue}if(e.close)return t}return t}a(QR,"parse");var Jo=class{constructor(e){this.name=e}static{a(this,"Font")}static{this.italic_tilt=1/8}static{this.interline_pitch_ratio=1.62}draw(e,t,n,r){if(!e||!t)return;let s=this.get_line_positions(t,n,r);e.state.stroke_width=r.stroke_width;for(let o of s)this.draw_line(e,o.text,o.position,n,r)}get_line_extents(e,t,n,r,s){let o=new as;o.bold=r,o.italic=s;let{bbox:l}=this.get_markup_as_glyphs(e,new A(0,0),t,new Ve(0),!1,new A(0,0),o);return new A(l.w,l.h)}break_lines(e,t,n,r,s,o){let l=new as;l.bold=s,l.italic=o;let c=this.get_text_as_glyphs(" ",n,new A(0,0),new Ve(0),!1,new A(0,0),l).cursor.x,u=e.split(`
`),h="";for(let d=0;d<u.length;d++){let f=u[d],m=!0,_=0,M=this.wordbreak_markup(f,n,l);for(let{word:g,width:R}of M)m?(h+=g,_+=R,m=!1):_+c+R<t-r?(h+=" "+g,_+=c+R):(h+=`
`,_=0,m=!0);d!=u.length-1&&(h+=`
`)}return h}draw_line(e,t,n,r,s){if(!e)return new je(0,0,0,0);let o=new as;o.italic=s.italic,o.underline=s.underlined;let{glyphs:l,bbox:c}=this.get_markup_as_glyphs(t,n,s.size,s.angle,s.mirrored,r,o),u=dt.scaling(1e-4,1e-4);for(let h of l)for(let d of h.strokes){let f=Array.from(u.transform_all(d));e.line(new bt(f,s.stroke_width/1e4,s.color))}return c}get_line_bbox(e,t,n,r){let s=new as;s.italic=r;let{bbox:o,next_position:l}=this.get_markup_as_glyphs(e,t,n,new Ve(0),!1,new A(0,0),s);return{bbox:o,cursor:l}}get_line_positions(e,t,n){let r=[],s=[],o=e.split(`
`),l=o.length,c=this.get_interline(n.size.y,n.line_spacing),u=0;for(let f=0;f<l;f++){let m=o[f],_=new A(t.x,t.y+f*c),{cursor:M}=this.get_line_bbox(m,_,n.size,n.italic),g=M.sub(_);r.push(g),f==0?u+=n.size.y*1.17:u+=c}let h=new A(0,n.size.y);switch(n.v_align){case"top":break;case"center":h.y-=u/2;break;case"bottom":h.y-=u;break}for(let f=0;f<l;f++){let m=r[f],_=h.copy();switch(_.y+=f*c,n.h_align){case"left":break;case"center":_.x=-m.x/2;break;case"right":_.x=-m.x;break}s.push(t.add(_))}let d=[];for(let f=0;f<l;f++)d.push({text:o[f],position:s[f],extents:r[f]});return d}get_markup_as_glyphs(e,t,n,r,s,o,l){let c=new ic(e);return this.get_markup_node_as_glyphs(c.root,t,n,r,s,o,l)}get_markup_node_as_glyphs(e,t,n,r,s,o,l){let c=[],u=[],h=t.copy(),d=l.copy();if(!e.is_root&&(e.subscript&&(d=new as,d.subscript=!0),e.superscript&&(d=new as,d.superscript=!0),d.overbar||=e.overbar,e.text)){let{glyphs:f,cursor:m,bbox:_}=this.get_text_as_glyphs(e.text,n,t,r,s,o,d);c=f,u.push(_),h.set(m)}for(let f of e.children){let{next_position:m,bbox:_,glyphs:M}=this.get_markup_node_as_glyphs(f,h,n,r,s,o,d);h.set(m),u.push(_),c=c.concat(M)}return{next_position:h,bbox:je.combine(u),glyphs:c}}wordbreak_markup(e,t,n){let r=new ic(e);return this.wordbreak_markup_node(r.root,t,n)}wordbreak_markup_node(e,t,n){let r=n.copy(),s=[];if(!e.is_root){let o="";if(e.subscript&&(o="_",r.subscript=!0),e.superscript&&(o="^",r.superscript=!0),e.overbar&&(o="~",r.overbar=!0),o){let l=`${o}{`,c=0;if(e.text){let{cursor:u}=this.get_text_as_glyphs(e.text,t,new A(0,0),new Ve(0),!1,new A(0,0),r);l+=e.text,c+=u.x}for(let u of e.children){let h=this.wordbreak_markup_node(u,t,r);for(let{word:d,width:f}of h)l+=d,c+=f}return l+="}",[{word:l,width:c}]}else{let l=e.text.trim().split(" ");e.text.endsWith(" ")&&l.push(" ");for(let c of l){let{cursor:u}=this.get_text_as_glyphs(c,t,new A(0,0),new Ve(0),!1,new A(0,0),r);s.push({word:c,width:u.x})}}}for(let o of e.children)s=s.concat(this.wordbreak_markup_node(o,t,n));return s}},as=class i{constructor(e=!1,t=!1,n=!1,r=!1,s=!1,o=!1){this.bold=e;this.italic=t;this.subscript=n;this.superscript=r;this.overbar=s;this.underline=o}static{a(this,"TextStyle")}copy(){return new i(this.bold,this.italic,this.subscript,this.superscript,this.overbar,this.underline)}},Fu=class i{constructor(){this.font=null;this.h_align="center";this.v_align="center";this.angle=new Ve(0);this.line_spacing=1;this.stroke_width=0;this.italic=!1;this.bold=!1;this.underlined=!1;this.color=w.transparent_black;this.visible=!0;this.mirrored=!1;this.multiline=!0;this.size=new A(0,0);this.keep_upright=!1}static{a(this,"TextAttributes")}copy(){let e=new i;return e.font=this.font,e.h_align=this.h_align,e.v_align=this.v_align,e.angle=this.angle.copy(),e.line_spacing=this.line_spacing,e.stroke_width=this.stroke_width,e.italic=this.italic,e.bold=this.bold,e.underlined=this.underlined,e.color=this.color.copy(),e.visible=this.visible,e.mirrored=this.mirrored,e.multiline=this.multiline,e.size=this.size.copy(),e}};var BR=["E_JSZS","G][EI`","H\\KFXFQNTNVOWPXRXWWYVZT[N[LZKY","I[MUWU RK[RFY[","G\\SPVQWRXTXWWYVZT[L[LFSFUGVHWJWLVNUOSPLP","F[WYVZS[Q[NZLXKVJRJOKKLINGQFSFVGWH","H[MPTP RW[M[MFWF","G]L[LF RLPXP RX[XF","MWR[RF","G\\L[LF RX[OO RXFLR","F^K[KFRUYFY[","G]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF","G\\L[LFTFVGWHXJXMWOVPTQLQ","JZLFXF RR[RF","H\\KFY[ RYFK[","I[RQR[ RKFRQYF","NVPESH","HZVZT[P[NZMYLWLQMONNPMTMVN","MWRMR_QaObNb RRFQGRHSGRFRH","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[","JZMMR[WM","G]JMN[RQV[ZM","H\\RbRD","F^K[KFYFY[K[","RR","NVTEQH","JZRRQSRTSSRRRT","MWR[RF RN?O@NAM@N?NA RV?W@VAU@V?VA","G\\L[LFQFTGVIWKXOXRWVVXTZQ[L[ RIPQP","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RTEQH","I[MUWU RK[RFY[ RN>O@QASAU@V>","IZNMN[ RPSV[ RVMNU","G]KPYP RPFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF","I[NNPMTMVNWPWXVZT[P[NZMXMVWT","H]YMVWUYTZR[P[NZMYLVLRMONNPMRMTNUOVQWXXZZ[","IZPTNUMWMXNZP[T[VZ RRTPTNSMQMPNNPMTMVN","MXRMRXSZU[","H[LTWT RP[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[","G]RFRb RPMTMVNXPYRYVXXVZT[P[NZLXKVKRLPNNPM","H]YMVWUYTZR[P[NZMYLVLRMONNPMRMTNUOVQWXXZZ[ RTEQH","IZPTNUMWMXNZP[T[VZ RRTPTNSMQMPNNPMTMVN RTEQH","I\\NMN[ RNOONQMTMVNWPWb RTEQH","MXRMRXSZU[ RTEQH","G]RTRX RMMLNKPKXLZN[O[QZRXSZU[V[XZYXYPXNWM","H[MMMXNZP[S[UZVYWWWPVNUM RTEQH","G]RTRX RMMLNKPKXLZN[O[QZRXSZU[V[XZYXYPXNWM RTEQH","LXOTUT","E_PKTKXMZQZUXYT[P[LYJUJQLMPK RPQRPTQUSTURVPUOSPQ","Pf"],Wu=["JZ","MWRYSZR[QZRYR[ RRSQGRFSGRSRF","JZNFNJ RVFVJ","H]LM[M RRDL_ RYVJV RS_YD","H\\LZO[T[VZWYXWXUWSVRTQPPNOMNLLLJMHNGPFUFXG RRCR^","F^J[ZF RMFOGPIOKMLKKJIKGMF RYZZXYVWUUVTXUZW[YZ","E_[[Z[XZUWPQNNMKMINGPFQFSGTITJSLRMLQKRJTJWKYLZN[Q[SZTYWUXRXP","MWSFQJ","KYVcUbS_R]QZPUPQQLRISGUDVC","KYNcObQ_R]SZTUTQSLRIQGODNC","JZRFRK RMIRKWI ROORKUO","E_JSZS RR[RK","MWSZS[R]Q^",0,"MWRYSZR[QZRYR[",1,"H\\QFSFUGVHWJXNXSWWVYUZS[Q[OZNYMWLSLNMJNHOGQF","H\\X[L[ RR[RFPINKLL","H\\LHMGOFTFVGWHXJXLWOK[X[",2,"H\\VMV[ RQELTYT","H\\WFMFLPMOONTNVOWPXRXWWYVZT[O[MZLY","H\\VFRFPGOHMKLOLWMYNZP[T[VZWYXWXRWPVOTNPNNOMPLR","H\\KFYFP[","H\\PONNMMLKLJMHNGPFTFVGWHXJXKWMVNTOPONPMQLSLWMYNZP[T[VZWYXWXSWQVPTO","H\\N[R[TZUYWVXRXJWHVGTFPFNGMHLJLOMQNRPSTSVRWQXO","MWRYSZR[QZRYR[ RRNSORPQORNRP","MWSZS[R]Q^ RRNSORPQORNRP","E_ZMJSZY","E_JPZP RZVJV","E_JMZSJY","I[QYRZQ[PZQYQ[ RMGOFTFVGWIWKVMUNSORPQRQS","D_VQUPSOQOOPNQMSMUNWOXQYSYUXVW RVOVWWXXXZW[U[PYMVKRJNKKMIPHTIXK[N]R^V]Y[",3,4,5,"G\\L[LFQFTGVIWKXOXRWVVXTZQ[L[",6,"HZTPMP RM[MFWF","F[VGTFQFNGLIKKJOJRKVLXNZQ[S[VZWYWRSR",7,8,"JZUFUUTXRZO[M[",9,"HYW[M[MF",10,"G]L[LFX[XF",11,12,"G]Z]X\\VZSWQVOV RP[NZLXKTKMLINGPFTFVGXIYMYTXXVZT[P[","G\\X[QQ RL[LFTFVGWHXJXMWOVPTQLQ","H\\LZO[T[VZWYXWXUWSVRTQPPNOMNLLLJMHNGPFUFXG",13,"G]LFLWMYNZP[T[VZWYXWXF","I[KFR[YF","F^IFN[RLV[[F",14,15,"H\\KFYFK[Y[","KYVbQbQDVD","KYID[_","KYNbSbSDND","LXNHREVH","JZJ]Z]",16,"I\\W[WPVNTMPMNN RWZU[P[NZMXMVNTPSUSWR","H[M[MF RMNOMSMUNVOWQWWVYUZS[O[MZ",17,"I\\W[WF RWZU[Q[OZNYMWMQNOONQMUMWN","I[VZT[P[NZMXMPNNPMTMVNWPWRMT","MYOMWM RR[RISGUFWF","I\\WMW^V`UaSbPbNa RWZU[Q[OZNYMWMQNOONQMUMWN","H[M[MF RV[VPUNSMPMNNMO","MWR[RM RRFQGRHSGRFRH",18,"IZN[NF RPSV[ RVMNU","MXU[SZRXRF","D`I[IM RIOJNLMOMQNRPR[ RRPSNUMXMZN[P[[","I\\NMN[ RNOONQMTMVNWPW[",19,"H[MMMb RMNOMSMUNVOWQWWVYUZS[O[MZ","I\\WMWb RWZU[Q[OZNYMWMQNOONQMUMWN","KXP[PM RPQQORNTMVM","J[NZP[T[VZWXWWVUTTQTOSNQNPONQMTMVN","MYOMWM RRFRXSZU[W[","H[VMV[ RMMMXNZP[S[UZVY",20,21,"IZL[WM RLMW[","JZMMR[ RWMR[P`OaMb","IZLMWML[W[","KYVcUcSbR`RVQTOSQRRPRFSDUCVC",22,"KYNcOcQbR`RVSTUSSRRPRFQDOCNC","KZMSNRPQTSVRWQ",23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,"JZ","MWROQNRMSNRORM RRUSaRbQaRURb","HZVZT[P[NZMYLWLQMONNPMTMVN RRJR^","H[LMTM RL[W[ RO[OIPGRFUFWG","H]LYOV RLLOO RVVYY RVOYL RVVTWQWOVNTNQOOQNTNVOWQWTVV","F^JTZT RJMZM RRQR[ RKFRQYF","MWRbRW RRFRQ","I[N]P^S^U]V[UYOSNQNPONQM RVGTFQFOGNIOKUQVSVTUVSW","LXNFOGNHMGNFNH RVFWGVHUGVFVH","@dVKTJPJNKLMKOKSLUNWPXTXVW RRCMDHGELDQEVH[M^R_W^\\[_V`Q_L\\GWDRC","KZOEQDSDUEVGVN RVMTNQNOMNKOIQHVH","H\\RMLSRY RXWTSXO","E_JQZQZV",24,"@dWXRR RNXNJTJVKWMWOVQTRNR RRCMDHGELDQEVH[M^R_W^\\[_V`Q_L\\GWDRC","LXMGWG","JZRFPGOIPKRLTKUITGRF","E_JOZO RRWRG RZ[J[","JZNAP@S@UAVCVEUGNNVN","JZN@V@RESEUFVHVKUMSNPNNM",25,"H^MMMb RWXXZZ[ RMXNZP[T[VZWXWM","F]VMV[ ROMOXNZL[ RZMMMKNJP",26,"MWR\\T]U_TaRbOb","JZVNNN RNCPBR@RN","KYQNOMNKNGOEQDSDUEVGVKUMSNQN","H\\RMXSRY RLWPSLO","G]KQYQ RVNNN RNCPBR@RN RUYUa RQSN]W]","G]KQYQ RVNNN RNCPBR@RN RNTPSSSUTVVVXUZNaVa","G]KQYQ RN@V@RESEUFVHVKUMSNPNNM RUYUa RQSN]W]","I[SORNSMTNSOSM RWaUbPbNaM_M]N[OZQYRXSVSU","I[MUWU RK[RFY[ RP>SA","I[MUWU RK[RFY[ RT>QA","I[MUWU RK[RFY[ RNAR>VA","I[MUWU RK[RFY[ RMAN@P?TAV@W?","I[MUWU RK[RFY[ RN?O@NAM@N?NA RV?W@VAU@V?VA","I[MUWU RK[RFY[ RRFPEOCPAR@TAUCTERF","F`JURU RRPYP RH[OF\\F RRFR[\\[","F[WYVZS[Q[NZLXKVJRJOKKLINGQFSFVGWH RR\\T]U_TaRbOb","H[MPTP RW[M[MFWF RP>SA","H[MPTP RW[M[MFWF RT>QA","H[MPTP RW[M[MFWF RNAR>VA","H[MPTP RW[M[MFWF RN?O@NAM@N?NA RV?W@VAU@V?VA","MWR[RF RP>SA","MWR[RF RT>QA","MWR[RF RNAR>VA",27,28,"G]L[LFX[XF RMAN@P?TAV@W?","G]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RP>SA","G]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RT>QA","G]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RNAR>VA","G]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RMAN@P?TAV@W?","G]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RN?O@NAM@N?NA RV?W@VAU@V?VA","E_LMXY RXMLY","G]ZFJ[ RP[NZLXKTKMLINGPFTFVGXIYMYTXXVZT[P[","G]LFLWMYNZP[T[VZWYXWXF RP>SA","G]LFLWMYNZP[T[VZWYXWXF RT>QA","G]LFLWMYNZP[T[VZWYXWXF RNAR>VA","G]LFLWMYNZP[T[VZWYXWXF RN?O@NAM@N?NA RV?W@VAU@V?VA","I[RQR[ RKFRQYF RT>QA","G\\LFL[ RLKTKVLWMXOXRWTVUTVLV","F]K[KJLHMGOFRFTGUHVJVMSMQNPPPQQSSTVTXUYWYXXZV[R[PZ","I\\W[WPVNTMPMNN RWZU[P[NZMXMVNTPSUSWR RPESH","I\\W[WPVNTMPMNN RWZU[P[NZMXMVNTPSUSWR RTEQH","I\\W[WPVNTMPMNN RWZU[P[NZMXMVNTPSUSWR RNHREVH","I\\W[WPVNTMPMNN RWZU[P[NZMXMVNTPSUSWR RMHNGPFTHVGWF","I\\W[WPVNTMPMNN RWZU[P[NZMXMVNTPSUSWR RNFOGNHMGNFNH RVFWGVHUGVFVH","I\\W[WPVNTMPMNN RWZU[P[NZMXMVNTPSUSWR RRHPGOEPCRBTCUETGRH","D`INKMOMQNRP R[ZY[U[SZRXRPSNUMYM[N\\P\\RRSKSITHVHXIZK[O[QZRX","HZVZT[P[NZMYLWLQMONNPMTMVN RR\\T]U_TaRbOb","I[VZT[P[NZMXMPNNPMTMVNWPWRMT RPESH","I[VZT[P[NZMXMPNNPMTMVNWPWRMT RTEQH","I[VZT[P[NZMXMPNNPMTMVNWPWRMT RNHREVH","I[VZT[P[NZMXMPNNPMTMVNWPWRMT RNFOGNHMGNFNH RVFWGVHUGVFVH","MWR[RM RPESH","MWR[RM RTEQH","LXNHREVH RR[RM","LXNFOGNHMGNFNH RVFWGVHUGVFVH RR[RM","I\\SCQI RWNUMQMONNOMQMXNZP[T[VZWXWLVITGRFNE","I\\NMN[ RNOONQMTMVNWPW[ RMHNGPFTHVGWF","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RPESH",29,"H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RNHREVH","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RMHNGPFTHVGWF","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RNFOGNHMGNFNH RVFWGVHUGVFVH","E_ZSJS RRXSYRZQYRXRZ RRLSMRNQMRLRN","H[XMK[ RP[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[","H[VMV[ RMMMXNZP[S[UZVY RPESH","H[VMV[ RMMMXNZP[S[UZVY RTEQH","H[VMV[ RMMMXNZP[S[UZVY RNHREVH","H[VMV[ RMMMXNZP[S[UZVY RNFOGNHMGNFNH RVFWGVHUGVFVH","JZMMR[ RWMR[P`OaMb RTEQH","H[MFMb RMNOMSMUNVOWQWWVYUZS[O[MZ","JZMMR[ RWMR[P`OaMb RNFOGNHMGNFNH RVFWGVHUGVFVH","I[MUWU RK[RFY[ RM@W@","I\\W[WPVNTMPMNN RWZU[P[NZMXMVNTPSUSWR RMGWG",30,"I\\W[WPVNTMPMNN RWZU[P[NZMXMVNTPSUSWR RNEOGQHSHUGVE","I[MUWU RK[RFY[ RY[W]V_WaYb[b","I\\W[WPVNTMPMNN RWZU[P[NZMXMVNTPSUSWR RW[U]T_UaWbYb","F[WYVZS[Q[NZLXKVJRJOKKLINGQFSFVGWH RT>QA","HZVZT[P[NZMYLWLQMONNPMTMVN RTEQH","F[WYVZS[Q[NZLXKVJRJOKKLINGQFSFVGWH RNAR>VA","HZVZT[P[NZMYLWLQMONNPMTMVN RNHREVH","F[WYVZS[Q[NZLXKVJRJOKKLINGQFSFVGWH RR?Q@RAS@R?RA","HZVZT[P[NZMYLWLQMONNPMTMVN RRFQGRHSGRFRH","F[WYVZS[Q[NZLXKVJRJOKKLINGQFSFVGWH RN>RAV>","HZVZT[P[NZMYLWLQMONNPMTMVN RNERHVE","G\\L[LFQFTGVIWKXOXRWVVXTZQ[L[ RN>RAV>","IfW[WF RWZU[Q[OZNYMWMQNOONQMUMWN RbF`J",28,"I\\W[WF RWZU[Q[OZNYMWMQNOONQMUMWN RRHZH","H[MPTP RW[M[MFWF RM@W@","I[VZT[P[NZMXMPNNPMTMVNWPWRMT RMGWG","H[MPTP RW[M[MFWF RN>O@QASAU@V>","I[VZT[P[NZMXMPNNPMTMVNWPWRMT RNEOGQHSHUGVE","H[MPTP RW[M[MFWF RR?Q@RAS@R?RA","I[VZT[P[NZMXMPNNPMTMVNWPWRMT RRFQGRHSGRFRH","H[MPTP RW[M[MFWF RR[P]O_PaRbTb","I[VZT[P[NZMXMPNNPMTMVNWPWRMT RR[P]O_PaRbTb","H[MPTP RW[M[MFWF RN>RAV>","I[VZT[P[NZMXMPNNPMTMVNWPWRMT RNERHVE","F[VGTFQFNGLIKKJOJRKVLXNZQ[S[VZWYWRSR RNAR>VA","I\\WMW^V`UaSbPbNa RWZU[Q[OZNYMWMQNOONQMUMWN RNHREVH","F[VGTFQFNGLIKKJOJRKVLXNZQ[S[VZWYWRSR RN>O@QASAU@V>","I\\WMW^V`UaSbPbNa RWZU[Q[OZNYMWMQNOONQMUMWN RNEOGQHSHUGVE","F[VGTFQFNGLIKKJOJRKVLXNZQ[S[VZWYWRSR RR?Q@RAS@R?RA","I\\WMW^V`UaSbPbNa RWZU[Q[OZNYMWMQNOONQMUMWN RRFQGRHSGRFRH","F[VGTFQFNGLIKKJOJRKVLXNZQ[S[VZWYWRSR RR\\T]U_TaRbOb","I\\WMW^V`UaSbPbNa RWZU[Q[OZNYMWMQNOONQMUMWN RRGPFODPBRAUA","G]L[LF RLPXP RX[XF RNAR>VA","H[M[MF RV[VPUNSMPMNNMO RIAM>QA","G]IJ[J RL[LF RLPXP RX[XF","H[M[MF RV[VPUNSMPMNNMO RJHRH","MWR[RF RMAN@P?TAV@W?","MWR[RM RMHNGPFTHVGWF","MWR[RF RM@W@","MWR[RM RMGWG","MWR[RF RN>O@QASAU@V>","MWR[RM RNEOGQHSHUGVE","MWR[RF RR[P]O_PaRbTb","MWR[RM RR[P]O_PaRbTb","MWR[RF RR?Q@RAS@R?RA","MWR[RM","MgR[RF RbFbUaX_Z\\[Z[","MaR[RM RRFQGRHSGRFRH R\\M\\_[aYbXb R\\F[G\\H]G\\F\\H","JZUFUUTXRZO[M[ RQAU>YA","MWRMR_QaObNb RNHREVH","G\\L[LF RX[OO RXFLR RR\\T]U_TaRbOb","IZN[NF RPSV[ RVMNU RR\\T]U_TaRbOb",31,"HYW[M[MF RO>LA","MXU[SZRXRF RTEQH","HYW[M[MF RR\\T]U_TaRbOb","MXU[SZRXRF RR\\T]U_TaRbOb","HYW[M[MF RVHSK","M^U[SZRXRF RZFXJ","HYW[M[MF RUNTOUPVOUNUP","M\\U[SZRXRF RYOZPYQXPYOYQ","HYW[M[MF RJQPM","MXU[SZRXRF ROQUM","G]L[LFX[XF RT>QA","I\\NMN[ RNOONQMTMVNWPW[ RTEQH","G]L[LFX[XF RR\\T]U_TaRbOb","I\\NMN[ RNOONQMTMVNWPW[ RR\\T]U_TaRbOb","G]L[LFX[XF RN>RAV>","I\\NMN[ RNOONQMTMVNWPW[ RNERHVE","MjSFQJ R\\M\\[ R\\O]N_MbMdNePe[","G]LFL[ RLINGPFTFVGWHXJX^W`VaTbQb","I\\NMN[ RNOONQMTMVNWPW_VaTbRb","G]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RM@W@","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RMGWG","G]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RN>O@QASAU@V>","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RNEOGQHSHUGVE","G]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RQ>NA RX>UA","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RQENH RXEUH","E`RPYP RRFR[ R\\FNFLGJIIMITJXLZN[\\[","C`[ZY[U[SZRXRPSNUMYM[N\\P\\RRT RRQQOPNNMKMINHOGQGWHYIZK[N[PZQYRW","G\\X[QQ RL[LFTFVGWHXJXMWOVPTQLQ RT>QA","KXP[PM RPQQORNTMVM RTEQH","G\\X[QQ RL[LFTFVGWHXJXMWOVPTQLQ RR\\T]U_TaRbOb","KXP[PM RPQQORNTMVM RR\\T]U_TaRbOb","G\\X[QQ RL[LFTFVGWHXJXMWOVPTQLQ RN>RAV>","KXP[PM RPQQORNTMVM RNERHVE","H\\LZO[T[VZWYXWXUWSVRTQPPNOMNLLLJMHNGPFUFXG RT>QA","J[NZP[T[VZWXWWVUTTQTOSNQNPONQMTMVN RTEQH","H\\LZO[T[VZWYXWXUWSVRTQPPNOMNLLLJMHNGPFUFXG RNAR>VA","J[NZP[T[VZWXWWVUTTQTOSNQNPONQMTMVN RNHREVH","H\\LZO[T[VZWYXWXUWSVRTQPPNOMNLLLJMHNGPFUFXG RR\\T]U_TaRbOb","J[NZP[T[VZWXWWVUTTQTOSNQNPONQMTMVN RR\\T]U_TaRbOb","H\\LZO[T[VZWYXWXUWSVRTQPPNOMNLLLJMHNGPFUFXG RN>RAV>","J[NZP[T[VZWXWWVUTTQTOSNQNPONQMTMVN RNERHVE","JZLFXF RR[RF RR\\T]U_TaRbOb","MYOMWM RRFRXSZU[W[ RR\\T]U_TaRbOb","JZLFXF RR[RF RN>RAV>","M[OMWM RYFXI RRFRXSZU[W[","JZLFXF RR[RF RNQVQ","MYOMWM RRFRXSZU[W[ ROSUS","G]LFLWMYNZP[T[VZWYXWXF RMAN@P?TAV@W?","H[VMV[ RMMMXNZP[S[UZVY RMHNGPFTHVGWF","G]LFLWMYNZP[T[VZWYXWXF RM@W@","H[VMV[ RMMMXNZP[S[UZVY RMGWG","G]LFLWMYNZP[T[VZWYXWXF RN>O@QASAU@V>","H[VMV[ RMMMXNZP[S[UZVY RNEOGQHSHUGVE","G]LFLWMYNZP[T[VZWYXWXF RRAP@O>P<R;T<U>T@RA","H[VMV[ RMMMXNZP[S[UZVY RRHPGOEPCRBTCUETGRH","G]LFLWMYNZP[T[VZWYXWXF RQ>NA RX>UA","H[VMV[ RMMMXNZP[S[UZVY RQENH RXEUH","G]LFLWMYNZP[T[VZWYXWXF RR[P]O_PaRbTb","H[VMV[ RMMMXNZP[S[UZVY RV[T]S_TaVbXb","F^IFN[RLV[[F RNAR>VA","G]JMN[RQV[ZM RNHREVH","I[RQR[ RKFRQYF RNAR>VA","JZMMR[ RWMR[P`OaMb RNHREVH","JZLFXF RR[RF RN?O@NAM@N?NA RV?W@VAU@V?VA","H\\KFYFK[Y[ RT>QA","IZLMWML[W[ RTEQH","H\\KFYFK[Y[ RR?Q@RAS@R?RA","IZLMWML[W[ RRFQGRHSGRFRH","H\\KFYFK[Y[ RN>RAV>","IZLMWML[W[ RNERHVE","MYR[RISGUFWF","H[M[MF RMNOMSMUNVOWQWWVYUZS[O[MZ RJHRH","C\\LFL[T[VZWYXWXTWRVQSPLP RFKFIGGIFSFUGVHWJWLVNUOSP","G\\VFLFL[R[UZWXXVXSWQUORNLN","H[WFMFM[ RMNOMSMUNVOWQWWVYUZS[O[MZ","H]MFM[S[VZXXYVYSXQVOSNMN","IZNMN[S[UZVXVUUSSRNR","I^MHNGQFSFVGXIYKZOZRYVXXVZS[Q[NZMY","F[WYVZS[Q[NZLXKVJRJOKKLINGQFSFVGWH RMHKGJEKCLB","HZVZT[P[NZMYLWLQMONNPMTMVN RTMTIUGWFYF",28,"C\\FKFIGGIFQFTGVIWKXOXRWVVXTZQ[L[LF","H]NFXFX[R[OZMXLVLSMQOORNXN","I\\MFWFW[ RWNUMQMONNOMQMWNYOZQ[U[WZ","I\\Q[T[VZWYXWXQWOVNTMQMONNOMQMWNYOZQ[T\\V]W_VaTbPbNa","I\\WPPP RM[W[WFMF","F^MHNGQFSFVGXIYKZOZRYVXXVZS[Q[NZLXKVJRZP","G[PPTP RWGUFPFNGMHLJLLMNNOPPMQLRKTKWLYMZO[U[WZ","HZTPMP RM[MFWF RM[M_LaJbHb","MYOMWM RR[RISGUFWF RR[R_QaObMb","F[VGTFQFNGLIKKJOJRKVLXNZQ[S[VZWYWRSR RMHKGJEKCLB","I[KFU[U_TaRbPaO_O[YF","D`I[IF RIOJNLMOMQNRPRXSZU[X[ZZ[Y\\W\\P[NZM","MZRFRWSYTZV[X[","MWR[RF RNPVP","G_L[LF RX[OO RLRWGYF[G\\I\\K","IZNMN[ RPSV[ RVMNU RNMNIOGQFSF","MXU[SZRXRF RNOVO","JZRMM[ RMFOFPGRMW[ RNLTH","Ca\\F\\[ R\\XZZX[V[TZSYRWRF RRWQYPZN[L[JZIYHWHF","G]L[LFX[XF RL[L_KaIbGb","I\\NMN[ RNOONQMTMVNWPWb",32,"G]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RVGXFYDXBWA","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RUNWMXKWIVH","DaSGQFMFKGIIHMHTIXKZM[Q[SZUXVTVMUISGUFYF[G\\I\\b","E^RNPMMMKNJOIQIWJYKZM[P[RZSYTWTQSORNTMVMXNYPYb","C\\LFL[ RFKFIGGIFTFVGWHXJXMWOVPTQLQ","H[MMMb RMNOMSMUNVOWQWWVYUZS[O[MZ RRMRISGUFWF","G\\LFL[ RQVXb RLKTKVLWMXOXRWTVUTVLV","H\\XZU[P[NZMYLWLUMSNRPQTPVOWNXLXJWHVGTFOFLG","IZVZT[P[NZMXMWNUPTSTUSVQVPUNSMPMNN","H[W[L[SPLFWF","JYWbUbSaR_RIQGOFMGLIMKOLQKRI","MYOMWM RRFRXSZU[W[ RW[W_VaTbRb","HZR[RF RKKKILGNFXF","MYOMWM RWFUFSGRIRXSZU[W[","JZLFXF RR[RF RR[R_SaUbWb","G]LFLWMYNZP[T[VZWYXWXF RXFZE[CZAY@","H[VMV[ RMMMXNZP[S[UZVY RVMXLYJXHWG","F^ZFUFUJWKYMZPZUYXWZT[P[MZKXJUJPKMMKOJOFJF","G]LFLWMYNZP[T[VZXXYVYIXGWF","I`RQR[ RKFRQXGZF\\G]I]K","J^MMR[ RMbOaP`R[VNXMZN[P[R","H\\KFYFK[Y[ RNPVP","IZLMWML[W[ RNTVT",2,"H\\YFLFSNPNNOMPLRLWMYNZP[V[XZYY","JZWMNMUVRVPWOXNZN^O`PaRbUbWa","JZMMVMOTSTUUVWVXUZS[Q[O\\N^N_OaQbVb","H\\LHMGOFTFVGWHXJXLWOK[X[ RNSVS","H\\WFMFLPMOONTNVOWPXRXWWYVZT[O[MZLY","JZVMOMNSPRSRUSVUVXUZS[P[NZ","J^MZP[T[WZYXZVZSYQWOTNPNPF RLITI","H[MMMb RMONNPMTMVNWPWSVUM^","MWRFRb","JZOFOb RUFUb","MWRFRb ROWUW ROQUQ","MWRYSZR[QZRYR[ RRSQGRFSGRSRF","GpL[LFQFTGVIWKXOXRWVVXTZQ[L[ R_FmF_[m[ Rb>fAj>","GmL[LFQFTGVIWKXOXRWVVXTZQ[L[ R_MjM_[j[ RaEeHiE","ImW[WF RWZU[Q[OZNYMWMQNOONQMUMWN R_MjM_[j[ RaEeHiE","HiW[M[MF RdFdUcXaZ^[\\[","HcW[M[MF R^M^_]a[bZb R^F]G^H_G^F^H","MbU[SZRXRF R]M]_\\aZbYb R]F\\G]H^G]F]H","GmL[LFX[XF RhFhUgXeZb[`[","GgL[LFX[XF RbMb_aa_b^b RbFaGbHcGbFbH","IfNMN[ RNOONQMTMVNWPW[ RaMa_`a^b]b RaF`GaHbGaFaH","I[MUWU RK[RFY[ RN>RAV>","I\\W[WPVNTMPMNN RWZU[P[NZMXMVNTPSUSWR RNERHVE","MWR[RF RN>RAV>","MWR[RM RNERHVE","G]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RN>RAV>","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RNERHVE","G]LFLWMYNZP[T[VZWYXWXF RN>RAV>","H[VMV[ RMMMXNZP[S[UZVY RNERHVE","G]LFLWMYNZP[T[VZWYXWXF RN?O@NAM@N?NA RV?W@VAU@V?VA RM;W;","H[VMV[ RMMMXNZP[S[UZVY RNFOGNHMGNFNH RVFWGVHUGVFVH RM@W@","G]LFLWMYNZP[T[VZWYXWXF RN?O@NAM@N?NA RV?W@VAU@V?VA RT9Q<","H[VMV[ RMMMXNZP[S[UZVY RNFOGNHMGNFNH RVFWGVHUGVFVH RT>QA","G]LFLWMYNZP[T[VZWYXWXF RN?O@NAM@N?NA RV?W@VAU@V?VA RN9R<V9","H[VMV[ RMMMXNZP[S[UZVY RNFOGNHMGNFNH RVFWGVHUGVFVH RN>RAV>","G]LFLWMYNZP[T[VZWYXWXF RN?O@NAM@N?NA RV?W@VAU@V?VA RP9S<","H[VMV[ RMMMXNZP[S[UZVY RNFOGNHMGNFNH RVFWGVHUGVFVH RP>SA",33,"I[MUWU RK[RFY[ RN?O@NAM@N?NA RV?W@VAU@V?VA RM;W;","I\\W[WPVNTMPMNN RWZU[P[NZMXMVNTPSUSWR RNFOGNHMGNFNH RVFWGVHUGVFVH RM@W@","I[MUWU RK[RFY[ RR?Q@RAS@R?RA RM;W;","I\\W[WPVNTMPMNN RWZU[P[NZMXMVNTPSUSWR RRFQGRHSGRFRH RM@W@","F`JURU RRPYP RH[OF\\F RRFR[\\[ RO@Y@","D`INKMOMQNRP R[ZY[U[SZRXRPSNUMYM[N\\P\\RRSKSITHVHXIZK[O[QZRX RMGWG","F[VGTFQFNGLIKKJOJRKVLXNZQ[S[VZWYWRSR RSV[V","I\\WMW^V`UaSbPbNa RWZU[Q[OZNYMWMQNOONQMUMWN RS^[^","F[VGTFQFNGLIKKJOJRKVLXNZQ[S[VZWYWRSR RN>RAV>","I\\WMW^V`UaSbPbNa RWZU[Q[OZNYMWMQNOONQMUMWN RNERHVE","G\\L[LF RX[OO RXFLR RN>RAV>","IZN[NF RPSV[ RVMNU RJANDRA","G]R[P]O_PaRbTb RPFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF","H[R[P]O_PaRbTb RP[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[","G]R[P]O_PaRbTb RPFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RM@W@","H[R[P]O_PaRbTb RP[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RMGWG","H\\KFXFQNTNVOWPXRXWWYVZT[N[LZKY RN>RAV>","JZMMVMOVRVTWUXVZV^U`TaRbObMa RNERHVE","MWRMR_QaObNb RNERHVE","GpL[LFQFTGVIWKXOXRWVVXTZQ[L[ R_FmF_[m[","GmL[LFQFTGVIWKXOXRWVVXTZQ[L[ R_MjM_[j[","ImW[WF RWZU[Q[OZNYMWMQNOONQMUMWN R_MjM_[j[","F[VGTFQFNGLIKKJOJRKVLXNZQ[S[VZWYWRSR RT>QA","I\\WMW^V`UaSbPbNa RWZU[Q[OZNYMWMQNOONQMUMWN RTEQH","CaH[HF RHPTP RTFTXUZW[Z[\\Z]X]M","G\\LFLb RLINGPFTFVGWHXJXOWRUUL^","G]L[LFX[XF RP>SA","I\\NMN[ RNOONQMTMVNWPW[ RPESH","I[MUWU RK[RFY[ RZ9X< RR;P<O>P@RAT@U>T<R;","I\\W[WPVNTMPMNN RWZU[P[NZMXMVNTPSUSWR RZ@XC RRBPCOEPGRHTGUETCRB","F`JURU RRPYP RH[OF\\F RRFR[\\[ RV>SA","D`INKMOMQNRP R[ZY[U[SZRXRPSNUMYM[N\\P\\RRSKSITHVHXIZK[O[QZRX RTEQH","G]ZFJ[ RP[NZLXKTKMLINGPFTFVGXIYMYTXXVZT[P[ RT>QA","H[XMK[ RP[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RTEQH","I[MUWU RK[RFY[ ROAL> RVAS>","I\\W[WPVNTMPMNN RWZU[P[NZMXMVNTPSUSWR ROHLE RVHSE","I[MUWU RK[RFY[ RNAO?Q>S>U?VA","I\\W[WPVNTMPMNN RWZU[P[NZMXMVNTPSUSWR RNHOFQESEUFVH","H[MPTP RW[M[MFWF ROAL> RVAS>","I[VZT[P[NZMXMPNNPMTMVNWPWRMT ROHLE RVHSE","H[MPTP RW[M[MFWF RNAO?Q>S>U?VA","I[VZT[P[NZMXMPNNPMTMVNWPWRMT RNHOFQESEUFVH","MWR[RF ROAL> RVAS>","MWR[RM ROHLE RVHSE","MWR[RF RNAO?Q>S>U?VA","MWR[RM RNHOFQESEUFVH","G]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF ROAL> RVAS>","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ ROHLE RVHSE","G]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RNAO?Q>S>U?VA","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RNHOFQESEUFVH","G\\X[QQ RL[LFTFVGWHXJXMWOVPTQLQ ROAL> RVAS>","KXP[PM RPQQORNTMVM RPHME RWHTE","G\\X[QQ RL[LFTFVGWHXJXMWOVPTQLQ RNAO?Q>S>U?VA","KXP[PM RPQQORNTMVM ROHPFRETEVFWH","G]LFLWMYNZP[T[VZWYXWXF ROAL> RVAS>","H[VMV[ RMMMXNZP[S[UZVY ROHLE RVHSE","G]LFLWMYNZP[T[VZWYXWXF RNAO?Q>S>U?VA","H[VMV[ RMMMXNZP[S[UZVY RNHOFQESEUFVH","H\\LZO[T[VZWYXWXUWSVRTQPPNOMNLLLJMHNGPFUFXG RS`SaRcQd","J[NZP[T[VZWXWWVUTTQTOSNQNPONQMTMVN RS`SaRcQd","JZLFXF RR[RF RS`SaRcQd","MYOMWM RRFRXSZU[W[ RU`UaTcSd","I]VRXTYVY[X]V_T`Lb RLHMGOFUFWGXHYJYNXPVRTSNU","J[UWVXWZW]V_U`SaMb RMNOMSMUNVOWQWTVVUWSXOY","G]L[LF RLPXP RX[XF RN>RAV>","H[M[MF RV[VPUNSMPMNNMO RI>MAQ>","G]L[LFX[XF RX[Xb","IbWFWXXZZ[\\[^Z_X^V\\UZVV^ RWNUMQMONNOMQMWNYOZQ[T[VZWX","G]NFLGKIKKLMMNOO RVFXGYIYKXMWNUO ROOUOWPXQYSYWXYWZU[O[MZLYKWKSLQMPOO","J[MJMMNORQVOWMWJ RPQTQVRWTWXVZT[P[NZMXMTNRPQ","H\\KFYFK[Y[ RY[Y_XaVbTb","IZLMWML[W[ RW[W_VaTbRb","I[MUWU RK[RFY[ RR?Q@RAS@R?RA","I\\W[WPVNTMPMNN RWZU[P[NZMXMVNTPSUSWR RRFQGRHSGRFRH","H[MPTP RW[M[MFWF RR\\T]U_TaRbOb","I[VZT[P[NZMXMPNNPMTMVNWPWRMT RR\\T]U_TaRbOb","G]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RN?O@NAM@N?NA RV?W@VAU@V?VA RM;W;","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RNFOGNHMGNFNH RVFWGVHUGVFVH RM@W@","G]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RMAN@P?TAV@W? RM;W;","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RMHNGPFTHVGWF RM@W@","G]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RR?Q@RAS@R?RA","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RRFQGRHSGRFRH","G]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RR?Q@RAS@R?RA RM;W;","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RRFQGRHSGRFRH RM@W@","I[RQR[ RKFRQYF RM@W@","JZMMR[ RWMR[P`OaMb RMGWG","M]RFRXSZU[W[YZZXYVWUUVQ^","IbNMN[ RNOONQMTMVNWPWXXZZ[\\[^Z_X^V\\UZVV^","M]OMWM RRFRXSZU[W[YZZXYVWUUVQ^","MWRMR_QaObNb","D`R[RF RRZP[L[JZIYHWHQIOJNLMPMRN RTMXMZN[O\\Q\\W[YZZX[T[RZ","D`RMRb RRZP[L[JZIYHWHQIOJNLMPMRN RTMXMZN[O\\Q\\W[YZZX[T[RZ","I[MUWU RK[RFY[ RXCL`","F[WYVZS[Q[NZLXKVJRJOKKLINGQFSFVGWH RXCL`","HZVZT[P[NZMYLWLQMONNPMTMVN RWHM`","HYW[M[MF RIOQO","JZLFXF RR[RF RXCL`","J[P[R^T_W_ RNZP[T[VZWXWWVUTTQTOSNQNPONQMTMVN","IZLMWML[N[P\\R^T_W_","J^MGPFTFWGYIZKZNYPWRTSPSP[","J^NNPMTMVNWOXQXSWUVVTWPWP[","G\\SPVQWRXTXWWYVZT[L[LFSFUGVHWJWLVNUOSPLP RIUOU","G]IM[M RLFLWMYNZP[T[VZWYXWXF","I[Y[RFK[","H[MPTP RW[M[MFWF RXCL`","I[VZT[P[NZMXMPNNPMTMVNWPWRMT RWHM`","JZUFUUTXRZO[M[ RQPYP","MWRMR_QaObNb ROTUT RRFQGRHSGRFRH","G]XFX^Y`Za\\b^b RXIVGTFPFNGLIKMKTLXNZP[T[VZXX","I\\WMW^X`Ya[b]b RWZU[Q[OZNYMWMQNOONQMUMWN","G\\X[QQ RL[LFTFVGWHXJXMWOVPTQLQ RIQOQ","KXP[PM RPQQORNTMVM RMTUT","I[KIYI RRQR[ RKFRQYF","JZLQXQ RMMR[ RWMR[P`OaMb","H[MMMXNZP[T[VZ RMNOMTMVNWPWRVTTUOUMV",34,"G\\K[NQOOPNRMTMVNWOXRXVWYVZT[R[PZOYNWMPLNJM","H[RFPFNGMIM[ RMNOMSMUNVOWQWWVYUZS[O[MZ","J\\NNPMTMVNWOXQXWWYVZT[P[NZ","HZVNTMPMNNMOLQLWMYNZP[S[UZVXUVSUQVM^","I\\W[WF RWZU[Q[OZNYMWMQNOONQMUMWN RW[W_XaZb\\b","I\\\\FZFXGWIW[ RWZU[Q[OZNYMWMQNOONQMUMWN","I[NZP[T[VZWXWPVNTMPMNNMPMRWT",33,"IbNNPMTMVNWPWXVZT[P[NZMXMV\\S\\U]W_X`X",35,"J[TTVSWQWPVNTMPMNN RRTTTVUWWWXVZT[P[NZ","JaRTTTVUWWWXVZT[P[NZ RNNPMTMVNWPWQVSTT[S[U\\W^X_X","H[TTVSWQWPVNTMPMNNMOLRLVMYNZP[T[VZWXWWVUTTRT","MWRMR_QaObNb ROTUT","I\\WMW^V`UaSbPbNa RWZU[Q[OZNYMWMQNOONQMUMWN RWMWIXGZF\\F","I\\WYVZT[P[NZMXMQNOONQMWMW^V`UaSbMb","HZUNSMPMNNMOLQLWMYNZP[T[VZVUSU","JZMMU[U_TaRbPaO_O[WM","JZMMTVUXTZR[PZOXPVWM","I\\WMWb RNMNXOZQ[T[VZWY","H[RFPFNGMIM[ RV[VPUNSMPMNNMO","H[RFPFNGMIM[ RV[VPUNSMPMNNMO RV[V_UaSbQb","MWR[RM ROTUT RRFQGRHSGRFRH",36,"MWR[RM RU[O[ RUMOM","MXU[SZRXRF RMONNPMTOVNWM","IYU[SZRXRF RRQQOONMOLQMSOTWT","MXRFR_SaUbWb","GZLFLXMZO[ RLMVMOVRVTWUXVZV^U`TaRbObMa","D`[M[[ R[YZZX[U[SZRXRM RRXQZO[L[JZIXIM","D`[M[[ R[YZZX[U[SZRXRM RRXQZO[L[JZIXIM R[[[b","D`I[IM RIOJNLMOMQNRPR[ RRPSNUMXMZN[P[[ R[[[_ZaXbVb","I\\NMN[ RNOONQMTMVNWPW[ RN[N_MaKbIb","I\\NMN[ RNOONQMTMVNWPW[ RW[W_XaZb\\b","H[M[MMV[VM",37,"E]RTXT RRMR[ RZMMMKNJOIQIWJYKZM[Z[","G]RTRXSZU[V[XZYXYQXOWNUMOMMNLOKQKXLZN[O[QZRX",38,"LYTMT[ RTWSYRZP[N[","LYTMT[ RTWSYRZP[N[ RTMTF","LYTMT[ RTWSYRZP[N[ RT[T_UaWbYb","KXP[PM RPQQORNTMVM RP[Pb","KXP[PM RPQQORNTMVM RP[P_QaSbUb","KXM[S[ RVMTMRNQOPRP[","LYW[Q[ RNMPMRNSOTRT[","I[RUW[ RN[NMTMVNWPWRVTTUNU","I[RSWM RNMN[T[VZWXWVVTTSNS","J[NZP[T[VZWXWWVUTTQTOSNQNPONQMTMVN RN[N_OaQbSb","KYWFUFSGRIR_QaObMb","MWRMR_QaObNb ROTUT RRMRISGUFWF","KYMFOFQGRIRXSZU[W[","KYWFUFSGRIR_QaObMaL_M]O\\V\\","KWU[M[ RRbRPQNOMMM","MYOMWM RRFR_SaUbWb","H[JRYR RVMV[ RMMMXNZP[S[UZVY","I\\XMUMUPWRXTXWWYVZT[Q[OZNYMWMTNRPPPMMM","H[MMMXNZP[S[UZVYWWWPVNUM","JZW[RMM[","G]Z[VMRWNMJ[","JZW[RM RM[RMTHUGWF","KYRTR[ RMMRTWM","IZLMWML[W[ RW[W_XaZb\\b","IZLMWML[T[VZWXVVTURVN^","JZMMVMOVRVTWUXVZV^U`TaRbObMa","JZMMVMOVRVTWUXVZV^U`TaRbPbNaM_N]P\\R]Uc","J^MGPFTFWGYIZKZNYPWRTSPSP[","FZWGTFPFMGKIJKJNKPMRPSTST[","J^MZP[T[WZYXZVZSYQWOTNPNPF","F[WHVGSFQFNGLIKKJOJYK]L_NaQbSbVaW`","G]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RROQPRQSPRORQ","I[STVUWWWXVZT[N[NMSMUNVPVQUSSTNT","I\\PTNUMWMXNZP[T[VZWYXVXRWOVNTMPMNNMPMQNSPTRT","HZUNSMPMNNMOLQLWMYNZP[T[VZVUSU RUMUIVGXFZF","H[MTVT RMMM[ RVMV[","LXRMR_QaObMaL_M]O\\V\\ RRFQGRHSGRFRH","J[VMVb RTUNM RN[VS","JYOMO[V[","I\\WMWb RWZU[Q[OZNYMWMQNOONQMUMWN RWMWIXGZF\\F","J^MGPFTFWGYIZKZNYPWRTSPSP[ RLXTX","FZWGTFPFMGKIJKJNKPMRPSTST[ RPXXX","D`R[RF RRM]MR[][ RRZP[L[JZIYHWHQIOJNLMPMRN","E`RFR[ RRNPMMMKNJOIQIWJYKZM[P[RZ RRM\\MUVXVZW[X\\Z\\^[`ZaXbUbSa","D`R[RF RRM]MR[Z[\\Z]X\\VZUXVT^ RRZP[L[JZIYHWHQIOJNLMPMRN","G^IMQM RLFLXMZO[QZS[W[YZZXZWYUWTTTRSQQQPRNTMWMYN","I[KMTM RNFNXOZQ[T[ RYFWFUGTIT_SaQbOb","F^HMPM RKFKXLZN[P[RZ RZNXMTMRNQOPQPWQYRZT[W[YZZXYVWUUVQ^","F]HMPMP[ RK[KILGNFPF RPOQNSMVMXNYPY_XaVbTb","G^LFLXMZO[QZS[W[YZZXZWYUWTTTRSQQQPRNTMWMYN","H^MM[MP[ RMFMXNZP[[[","G]JSN[RUV[ZS RJFNNRHVNZF","G]XXXSLSLX RXKXFLFLK","I\\WMWb RNMNXOZQ[T[VZWY RNMNIMGKFIF","I\\\\bZbXaW_WM RNMNXOZQ[T[VZWY RNMNIMGKFIF",23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,"H[MFM[ RXPMP","IZNTVT RNMN[","G]R[RF RKOKFYFYO","I[R[RF RMOMFWFWO","MWSFQJ","MWS[Q_","G]LFL[XFX[","H\\MMM[WMW[",23,23,"NVR`RcSdTd","J\\NZP[T[VZWYXWXQWOVNTMPMNN","HZVZT[P[NZMYLWLQMONNPMTMVN RRSQTRUSTRSRU","J\\NZP[T[VZWYXWXQWOVNTMPMNN RRSQTRUSTRSRU","MWSZS[R]Q^ RRNSORPQORNRP",23,23,23,23,23,25,"LXNFOGNHMGNFNH RVFWGVHUGVFVH RT>QA","G[MUWU RK[RFY[ RMEJH",26,"B[MPTP RW[M[MFWF RHEEH","A]L[LF RLPXP RX[XF RGEDH","GWR[RF RMEJH",24,"B]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RHEEH",24,"@[RQR[ RKFRQYF RFECH","@^J[O[OWMVKTJQJLKIMGPFTFWGYIZLZQYTWVUWU[Z[ RFECH","MXRMRXSZU[ RNFOGNHMGNFNH RVFWGVHUGVFVH RT>QA",3,4,"HZM[MFXF","I[K[RFY[K[",6,"H\\KFYFK[Y[",7,"F^OPUP RPFTFVGXIYKZNZSYVXXVZT[P[NZLXKVJSJNKKLINGPF",8,9,"I[K[RFY[",10,"G]L[LFX[XF","H[L[W[ RLFWF RUPNP",11,"G]L[LFXFX[",12,24,"H[W[L[SPLFWF",13,15,"G]R[RF RPITIWJYLZNZRYTWVTWPWMVKTJRJNKLMJPI",14,"G]R[RF RHFJGKIKNLQMROSUSWRXQYNYIZG\\F","F^J[O[OWMVKTJQJLKIMGPFTFWGYIZLZQYTWVUWU[Z[",27,"I[RQR[ RKFRQYF RN?O@NAM@N?NA RV?W@VAU@V?VA",39,40,41,42,"H[MMMXNZP[S[UZVYWWWPVNUM RNFOGNHMGNFNH RVFWGVHUGVFVH RT>QA",34,"H[SOUPVQWSWWVYUZS[P[NZMY RKbLaM_MINGPFSFUGVIVLUNSOQO","JZRYRb RLMMMNNRYWM","H[SMPMNNMOLQLWMYNZP[S[UZVYWWWQVOUNSMPLNKMINGPFTFVG",35,"HZMFWFPMNPMSMWNYOZQ[S[U\\V^V_UaSbRb","I\\NMN[ RNOONQMTMVNWPWb","H[LPWP RPFSFUGVHWKWVVYUZS[P[NZMYLVLKMHNGPF",36,31,"JZRMM[ RMFOFPGRMW[","H^MMMb RWXXZZ[ RMXNZP[T[VZWXWM","J[MMR[WPWOVM","HZMFWF RQFOGNINLONQOUO RQOOPNQMSMWNYOZQ[S[U\\V^V_UaSbRb",19,"F]VMV[ ROMOXNZL[ RZMMMKNJP","H\\MbMQNOONQMTMVNWOXQXWWYVZT[Q[OZMX","HZVNTMPMNNMOLQLWMYNZP[S[U\\V^V_UaSb","H\\YMPMNNMOLQLWMYNZP[S[UZVYWWWQVOUNSM","H\\LPMNOMXM RRMRXSZU[","H[MMMXNZP[S[UZVYWWWPVNUM","G]MMLNKPKVLXNZP[T[VZXXYVYPXNVMUMSNRPRb","IZWMLb RLMNNOPT_UaWb","G]RMRb RKMKVLXNZP[T[VZXXYVYM",43,"LXNFOGNHMGNFNH RVFWGVHUGVFVH RRMRXSZU[","H[MMMXNZP[S[UZVYWWWPVNUM RNFOGNHMGNFNH RVFWGVHUGVFVH",29,44,45,"G\\L[LF RXFLR ROOX[Qb","H[SOUPVQWSWWVYUZS[P[NZMXMINGPFSFUGVIVLUNSOQO","H[JPKQLSLVMYNZP[S[UZVYWVWKVHUGSFPFNGMHLJLLMNNOPPWP","I\\KFMFOGQIRKR[ RRKSHTGVFWFYGZI","NiTEQH RXFZF\\G^I_K_[ R_K`HaGcFdFfGgI","I\\KFMFOGQIRKR[ RRKSHTGVFWFYGZI RN?O@NAM@N?NA RV?W@VAU@V?VA",38,"F^RTRX R[MIM RMMLNKPKXLZN[O[QZRXSZU[V[XZYXYPXNWM","IZLMNNOPOXNZM[LZLXMVVRWPWNVMUNTPTXUZW[V^U`TaRb","G]R[Rb RPFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF","H[R[Rb RP[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[","FZWFQFNGLIKKJOJRKVLXNZQ[R[T\\U^U_TaSbQb","HZVMPMNNMOLQLWMYNZP[R[T\\U^U_TaRbPb","HZTPMP RM[MFWF","MZVPRP RWFUFSGRIR_QaOb","H\\MFOGPILSXNTXUZW[","I[RFMPWPR[","H\\NGNL RXIULTNTW RKIMGPFTFVGXIYKZOZUYYX[","H\\L[UR RR[WV RLMPNSPURWVXZXb","CaRWRR R\\XY]V`SaMa RLFJGHIGLGUHXJZL[N[PZQYRWSYTZV[X[ZZ\\X]U]L\\IZGXF","G]RTRX RXZW\\S`PaOa RMMLNKPKXLZN[O[QZRXSZU[V[XZYXYPXNWM","G]XFXb RPFNGLIKMKTLXNZP[T[VZXX","I\\WMWb RQMONNOMQMWNYOZQ[T[VZWY","F]KFK[ RKQMOPNTNVOXQYTYWXZW\\U^R`Nb","I[WLWMVPTRRSPSNRMPMONMPLRLTMVPWSWWVYUZS[M[","F]KHLGOFTFWGXHYJYLXOVQJ[N^Q_V_Y^","J[NNPMTMVNWPWRVTTVN[P]R^U^W]","G]I[[[ RIFJFLGXZZ[ R[FZFXGLZJ[","H[KMMNVZX[K[MZVNXM","G\\XEVFOFMGLHKJKWLYMZO[T[VZWYXWXPWNVMTLNLLMKN","H[WEVFTGPGNHMILKLWMYNZP[S[UZVYWWWQVOUNSMOMMNLO","G]RFRb RKQKMYMYQ","I[MMWM RRFRb","IZLMNNOPOXNZM[LZLXMVVRWPWNVMUNTPTXUZW[","H\\WbQbOaN`M^MQNOONQMTMVNWOXQXWWYVZT[Q[OZMX",17,18,32,"HZLTST RVZT[P[NZMYLWLQMONNPMTMVN","J\\XTQT RNZP[T[VZWYXWXQWOVNTMPMNN","G\\LFL[ RLKTKVLWMXOXRWTVUTVLV","H[MFMb RMNOMSMUNVOWQWWVYUZS[O[MZ",5,"F^K[KFRMYFY[","G]LbLMRSXMX[","G\\J`S` RMbMQNOONQMTMVNWOXQXWWYVZT[Q[OZMX","I^MYNZQ[S[VZXXYVZRZOYKXIVGSFQFNGMH","F[WYVZS[Q[NZLXKVJRJOKKLINGQFSFVGWH RROQPRQSPRORQ","I^MYNZQ[S[VZXXYVZRZOYKXIVGSFQFNGMH RROQPRQSPRORQ","H[MPTP RW[M[MFWF RP>SA","H[MPTP RW[M[MFWF RN?O@NAM@N?NA RV?W@VAU@V?VA","JbLFXF RR[RF RRMXM[N]P^S^\\]_[aXbVb","HZM[MFXF RT>QA","F[JPTP RWYVZS[Q[NZLXKVJRJOKKLINGQFSFVGWH","H\\LZO[T[VZWYXWXUWSVRTQPPNOMNLLLJMHNGPFUFXG",8,27,"JZUFUUTXRZO[M[","AbC[D[FZGXILJILGOFRFR[X[[Z]X^V^S]Q[OXNRN","AbF[FF RRFR[X[[Z]X^V^S]Q[OXNFN","JbLFXF RR[RF RRMXM[N]P^S^[","G\\L[LF RX[OO RXFLR RT>QA","G]LFL[XFX[ RP>SA","G[KFRT RYFPXNZL[K[ RN>O@QASAU@V>","G]R[R` RLFL[X[XF",3,"G\\VFLFL[R[UZWXXVXSWQUORNLN",4,"HZM[MFXF","F^[`[[I[I` RW[WFRFPGOHNJL[",6,"BbOOF[ RR[RF RRRFF R^[UO R^FRR","I]PPTP RMGOFTFVGWHXJXLWNVOTPWQXRYTYWXYWZU[O[MZ","G]LFL[XFX[","G]LFL[XFX[ RN>O@QASAU@V>",9,"F\\W[WFTFQGOINLLXKZI[H[",10,7,11,"G]L[LFXFX[",12,5,13,"G[KFRT RYFPXNZL[K[","G]R[RF RPITIWJYLZNZRYTWVTWPWMVKTJRJNKLMJPI",14,"G]XFX[ RLFL[Z[Z`","H\\WFW[ RLFLNMPNQPRWR","CaRFR[ RHFH[\\[\\F","CaRFR[ RHFH[\\[\\F R\\[^[^`","F]HFMFM[S[VZXXYVYSXQVOSNMN","Da\\F\\[ RIFI[O[RZTXUVUSTQROONIN","H]MFM[S[VZXXYVYSXQVOSNMN","I^ZQPQ RMHNGQFSFVGXIYKZOZRYVXXVZS[Q[NZMY","CaHFH[ ROPHP RTFXFZG\\I]M]T\\XZZX[T[RZPXOTOMPIRGTF","G\\RQK[ RW[WFOFMGLHKJKMLOMPOQWQ","I\\W[WPVNTMPMNN RWZU[P[NZMXMVNTPSUSWR","H[WEVFTGPGNHMILKLWMYNZP[S[UZVYWWWQVOUNSMOMMNLO","I[STVUWWWXVZT[N[NMSMUNVPVQUSSTNT","JYO[OMWM","H[WOVNTMPMNNMOLQLWMYNZP[S[UZVYWWWJVHUGSFOFMG","I[VZT[P[NZMXMPNNPMTMVNWPWRMT","F^QTJ[ RRUJM RRMR[ RZ[ST RZMRU","K[RTTT RNNPMTMVNWPWQVSTTVUWWWXVZT[P[NZ","H\\MMM[WMW[","H\\MMM[WMW[ RNEOGQHSHUGVE",31,"I[V[VMSMQNPPOXNZL[","G]L[LMRXXMX[","H[MTVT RMMM[ RVMV[",19,"H[M[MMVMV[","H[MMMb RMNOMSMUNVOWQWWVYUZS[O[MZ",17,"KYMMWM RRMR[","JZMMR[ RWMR[P`OaMb",38,"IZL[WM RLMW[","I\\WMW[ RNMN[Y[Y`","J\\VMV[ RNMNROTQUVU","F^RMR[ RKMK[Y[YM","F^RMR[ RKMK[Y[YM RY[[[[`","HZJMNMN[S[UZVXVUUSSRNR","F^YMY[ RKMK[P[RZSXSURSPRKR","IZNMN[S[UZVXVUUSSRNR","J\\XTQT RNNPMTMVNWOXQXWWYVZT[P[NZ","E_JTPT RJMJ[ RT[RZQYPWPQQORNTMWMYNZO[Q[WZYYZW[T[","I[RUM[ RV[VMPMNNMPMRNTPUVU","I[VZT[P[NZMXMPNNPMTMVNWPWRMT RPESH","I[VZT[P[NZMXMPNNPMTMVNWPWRMT RNFOGNHMGNFNH RVFWGVHUGVFVH","M^OKXK RRFR[ RRSSRUQWQYRZTZ[Y^WaVb","JYO[OMWM RTEQH","HZLTST RVZT[P[NZMYLWLQMONNPMTMVN","J[NZP[T[VZWXWWVUTTQTOSNQNPONQMTMVN","MWR[RM RRFQGRHSGRFRH","LXNFOGNHMGNFNH RVFWGVHUGVFVH RR[RM",18,"E^H[JZKXLPMNOMRMR[W[YZZXZUYSWRRR","D^IMI[ RRMR[W[YZZXZVYTWSIS","M^OKXK RRFR[ RRSSRUQWQYRZTZ[","IZNMN[ RPSV[ RVMNU RTEQH","H\\MMM[WMW[ RPESH","JZMMR[ RWMR[P`OaMb RNEOGQHSHUGVE","H]R[R` RMMM[W[WM","CaRWRR RLFJGHIGLGUHXJZL[N[PZQYRWSYTZV[X[ZZ\\X]U]L\\IZGXF",43,"F]IIVI RMFM[S[VZXXYVYSXQVOSNMN","HZJMTM RNFN[S[UZVXVUUSSRNR","D`IFI[ RYPIP R\\Y[ZX[V[SZQXPVOROOPKQISGVFXF[G\\H","F^KMK[ RWTKT RZZX[T[RZQYPWPQQORNTMXMZN","F^LSXS RRSR[ RH[RF\\[","I[NUVU RRUR[ RK[RMY[","AbF[FF RFS\\S RVSV[ RL[VF`[","E_J[JM RVUV[ RZUJU RO[VM][","E_R[RPJFZFRP RI[IVJSLQOPUPXQZS[V[[","G]R[RTLMXMRT RK[KXLVMUOTUTWUXVYXY[","AcF[FF RFPSP RV[VPNF^FVP RM[MVNSPQSPYP\\Q^S_V_[","DaI[IM RITST RV[VTPM\\MVT RO[OXPVQUSTYT[U\\V]X][","H\\OPSP RNAQFSBTAUA RLGNFSFUGVHWJWLVNUOSPVQWRXTXWWYVZT[O[M\\L^L_MaObWb","J[RTTT ROHRMTIUHVH RNNPMTMVNWPWQVSTTVUWWWXVZT[Q[O\\N^N_OaQbVb","G]R[RF RHFJGKIKNLQMROSUSWRXQYNYIZG\\F","G]RMRb RKMKVLXNZP[T[VZXXYVYM",32,37,"I[KFR[YF",20,"I[KFR[YF ROAL> RVAS>","JZMMR[WM ROHLE RVHSE","GmPFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF R`Me[ RjMe[c`ba`b","HkP[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ R^Mc[ RhMc[a``a^b","CaRXR^ RRCRI RMFJGHIGLGUHXJZM[W[ZZ\\X]U]L\\IZGWFMF","G]RYR] RRKRO ROMMNLOKQKWLYMZO[U[WZXYYWYQXOWNUMOM","CaRWRR RLFJGHIGLGUHXJZL[N[PZQYRWSYTZV[X[ZZ\\X]U]L\\IZGXF RLBM@O?R?U@X@","G]RTRX RMMLNKPKXLZN[O[QZRXSZU[V[XZYXYPXNWM RLIMGOFRFUGXG","CaRWRR RLFJGHIGLGUHXJZL[N[PZQYRWSYTZV[X[ZZ\\X]U]L\\IZGXF RM<W< RR<R?","G]RTRX RMMLNKPKXLZN[O[QZRXSZU[V[XZYXYPXNWM RMEWE RRERH","FZWGTFPFMGKIJKJNKPMRPSTST[","FZVNTMPMNNMOLQLSMUNVPWTWT[","H[N]UO ROQWU RT[LW","JZMHMFWGWE","JZMHUEVH",16,25,"KZLIMGOFRFUGXG",":j>R?PAOCPDR RC^D\\F[H\\I^ RCFDDFCHDIF ROcPaR`TaUc ROAP?R>T?UA R[^\\\\^[`\\a^ R[F\\D^C`DaF R`RaPcOePfR",":jDQ>Q RH[D_ RHGDC RR_Re RRCR= R\\[`_ R\\G`C R`QfQ","G]LFL[XFX[ RX[[[Ub RN>O@QASAU@V>","H\\MMM[WMW[ RW[Z[Tb RNEOGQHSHUGVE","H]MFM[S[VZXXYVYSXQVOSNMN RJIPI","IZKMQM RNFN[S[UZVXVUUSSRNR","G\\L[LFTFVGWHXJXMWOVPTQLQ RTMXS","H[MMMb RMNOMSMUNVOWQWWVYUZS[O[MZ RSWW]","HZM[MFXFXA","JYO[OMWMWH","HZM[MFXF RJQRQ","JYO[OMWM RLTTT","H]M[MFXF RMMSMVNXPYSY\\X_VaSbQb","J\\O[OMWM ROTTTVUWVXXX[W^UaTb","BbOOF[ RR[RF RRRFF R^[UO R^FRR R^[`[``","F^QTJ[ RRUJM RRMR[ RZ[ST RZMRU RZ[\\[\\`","I]PPTP RMGOFTFVGWHXJXLWNVOTPWQXRYTYWXYWZU[O[MZ RR\\T]U_TaRbOb","K[RTTT RNNPMTMVNWPWQVSTTVUWWWXVZT[P[NZ RR\\T]U_TaRbOb","G\\L[LF RX[OO RXFLR RX[Z[Z`","IZNMN[ RPSV[ RVMNU RV[X[X`","G\\L[LF RX[OO RXFLR RPKPS","IZNMN[ RPSV[ RVMNU RRORW","G\\L[LF RX[OO RXFLR RIJOJ","IZN[NF RPSV[ RVMNU RKJQJ","E\\X[OO RXFLR RGFLFL[","HZPSV[ RVMNU RJMNMN[","G]L[LF RLPXP RX[XF RX[Z[Z`","H[MTVT RMMM[ RVMV[ RV[X[X`","GeL[LF RLPXP RX[XFcF","H`MTVT RMMM[ RV[VM^M","GhL[LFXFX[ RXM^MaNcPdSd\\c_aa^b\\b","HcM[MMVMV[ RVT[T]U^V_X_[^^\\a[b","F^QFNGLIKKJOJRKVLXNZQ[S[VZXXYVZRZMYJWIVITJSMSRTVUXWZY[[[","H\\QMPMNNMOLQLWMYNZP[T[VZWYXWXRWPUOSPRRRWSYTZV[Y[","F[WYVZS[Q[NZLXKVJRJOKKLINGQFSFVGWH RR\\T]U_TaRbOb","HZVZT[P[NZMYLWLQMONNPMTMVN RR\\T]U_TaRbOb","JZLFXF RR[RF RR[T[T`","KYMMWM RRMR[ RR[T[T`",15,"JZR[Rb RMMR[WM","I[RQR[ RKFRQYF RNUVU","JZR[Rb RMMR[WM RN]V]","H\\KFY[ RYFK[ RX[Z[Z`","IZL[WM RLMW[ RV[X[X`","D]FFRF RXFX[ RLFL[Z[Z`","G\\RMIM RWMW[ RNMN[Y[Y`","H\\WFW[ RLFLNMPNQPRWR RW[Y[Y`","J\\VMV[ RNMNROTQUVU RV[X[X`","H\\WFW[ RLFLNMPNQPRWR RRNRV","J\\VMV[ RNMNROTQUVU RRQRY","G]L[LF RL[ RLPRPUQWSXVX[","H[M[MF RV[VPUNSMPMNNMO","@^WYVZS[Q[NZLXKVJRJOKKLINGQFSFVGXIYKZOJQGQEPDOCMCK","E[VZT[P[NZMXMPNNPMTMVNWPWRMTKTISHQHO","@^WYVZS[Q[NZLXKVJRJOKKLINGQFSFVGXIYKZOJQGQEPDOCMCK RR[P]O_PaRbTb","E[VZT[P[NZMXMPNNPMTMVNWPWRMTKTISHQHO RR[P]O_PaRbTb",8,"BbOOF[ RR[RF RRRFF R^[UO R^FRR RN>O@QASAU@V>","F^QTJ[ RRUJM RRMR[ RZ[ST RZMRU RNEOGQHSHUGVE","G\\L[LF RX[OO RXFLR RX[X_WaUbSb","IZNMN[ RPSV[ RVMNU RV[V_UaSbQb","F\\W[WFTFQGOINLLXKZI[H[ RW[Z[Tb","I[V[VMSMQNPPOXNZL[ RV[Y[Sb","G]L[LF RLPXP RX[XF RX[X_WaUbSb","H[MTVT RMMM[ RVMV[ RV[V_UaSbQb","G]L[LF RLPXP RX[XF RX[[[Ub","H[MTVT RMMM[ RVMV[ RV[Y[Sb","H\\WFW[ RLFLNMPNQPRWR RW[U[U`","J\\VMV[ RNMNROTQUVU RV[T[T`","F^K[KFRUYFY[ RY[\\[Vb","G]L[LMRXXMX[ RX[[[Ub",8,30,"I\\W[WPVNTMPMNN RWZU[P[NZMXMVNTPSUSWR RNEOGQHSHUGVE","I[MUWU RK[RFY[ RN?O@NAM@N?NA RV?W@VAU@V?VA","I\\W[WPVNTMPMNN RWZU[P[NZMXMVNTPSUSWR RNFOGNHMGNFNH RVFWGVHUGVFVH","F`JURU RRPYP RH[OF\\F RRFR[\\[","D`INKMOMQNRP R[ZY[U[SZRXRPSNUMYM[N\\P\\RRSKSITHVHXIZK[O[QZRX","H[MPTP RW[M[MFWF RN>O@QASAU@V>","I[VZT[P[NZMXMPNNPMTMVNWPWRMT RNEOGQHSHUGVE","F^MHNGQFSFVGXIYKZOZRYVXXVZS[Q[NZLXKVJRZP",33,"F^MHNGQFSFVGXIYKZOZRYVXXVZS[Q[NZLXKVJRZP RNBOCNDMCNBND RVBWCVDUCVBVD","I[NNPMTMVNWPWXVZT[P[NZMXMVWT RNFOGNHMGNFNH RVFWGVHUGVFVH","BbOOF[ RR[RF RRRFF R^[UO R^FRR RN?O@NAM@N?NA RV?W@VAU@V?VA","F^QTJ[ RRUJM RRMR[ RZ[ST RZMRU RNFOGNHMGNFNH RVFWGVHUGVFVH","I]PPTP RMGOFTFVGWHXJXLWNVOTPWQXRYTYWXYWZU[O[MZ RN?O@NAM@N?NA RV?W@VAU@V?VA","K[RTTT RNNPMTMVNWPWQVSTTVUWWWXVZT[P[NZ RNFOGNHMGNFNH RVFWGVHUGVFVH",2,"JZMMVMOVRVTWUXVZV^U`TaRbObMa","G]LFL[XFX[ RM@W@","H\\MMM[WMW[ RMGWG","G]LFL[XFX[ RN?O@NAM@N?NA RV?W@VAU@V?VA","H\\MMM[WMW[ RNFOGNHMGNFNH RVFWGVHUGVFVH","G]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RN?O@NAM@N?NA RV?W@VAU@V?VA","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RNFOGNHMGNFNH RVFWGVHUGVFVH",32,37,"G]KPYP RPFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RN?O@NAM@N?NA RV?W@VAU@V?VA","H[LTWT RP[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RNFOGNHMGNFNH RVFWGVHUGVFVH","I^ZPPP RMYNZQ[S[VZXXYVZRZOYKXIVGSFQFNGMH RN?O@NAM@N?NA RV?W@VAU@V?VA","J\\XTQT RNZP[T[VZWYXWXQWOVNTMPMNN RNFOGNHMGNFNH RVFWGVHUGVFVH","G[KFRT RYFPXNZL[K[ RM@W@","JZMMR[ RWMR[P`OaMb RMGWG","G[KFRT RYFPXNZL[K[ RN?O@NAM@N?NA RV?W@VAU@V?VA","JZMMR[ RWMR[P`OaMb RNFOGNHMGNFNH RVFWGVHUGVFVH","G[KFRT RYFPXNZL[K[ RQ>NA RX>UA","JZMMR[ RWMR[P`OaMb RQENH RXEUH","H\\WFW[ RLFLNMPNQPRWR RN?O@NAM@N?NA RV?W@VAU@V?VA","J\\VMV[ RNMNROTQUVU RNFOGNHMGNFNH RVFWGVHUGVFVH","HZM[MFXF RM[O[O`","JYO[OMWM RO[Q[Q`","Da\\F\\[ RIFI[O[RZTXUVUSTQROONIN RN?O@NAM@N?NA RV?W@VAU@V?VA","F^YMY[ RKMK[P[RZSXSURSPRKR RNFOGNHMGNFNH RVFWGVHUGVFVH","HZWFMFM[Q[Q_PaNbLb RJQRQ","JYWMOMO[S[S_RaPbNb RLTTT","H\\KFY[ RYFK[ RX[X_WaUbSb","IZL[WM RLMW[ RV[V_UaSbQb","H\\KFY[ RYFK[ RNPVP","IZL[WM RLMW[ RNTVT","G\\WFW[Q[NZLXKVKSLQNOQNWN","J[VMV[Q[OZNXNUOSQRVR","B_RXSZU[X[ZZ[X[M RRFRXQZO[L[IZGXFVFSGQIOLNRN","E]RXSZU[V[XZYXYQ RRMRXQZO[M[KZJXJUKSMRRR","IePPTP RMGOFTFVGWHXJXLWNVOTPVQWRXTXXYZ[[^[`ZaXaM","KbRTTT RNNPMTMVNWPWQVSTTVUWWWXXZZ[[[]Z^X^Q","I\\PPTP RMGOFTFVGWHXJXLWNVOTPVQWRXTX[Z[Z`","K[RTTT RNNPMTMVNWPWQVSTTVUWWW[Y[Y`","FdH[I[KZLXNLOIQGTFWFWXXZZ[][_Z`X`M","IaL[NZOXPPQNSMVMVXWZY[Z[\\Z]X]Q","CaH[HF RHPTP RTFTXUZW[Z[\\Z]X]M","F^KTTT RKMK[ RTMTXUZW[X[ZZ[X[R","F[VGTFQFNGLIKKJOJRKVLXNZQ[S[VZWYWRSR","HZUNSMPMNNMOLQLWMYNZP[T[VZVUSU","J_LFXF RRFRXSZU[X[ZZ[X[M","K]MMWM RRMRXSZU[V[XZYXYS","G[PPTP RWGUFPFNGMHLJLLMNNOPPMQLRKTKWLYMZO[U[WZ",35,"F\\W[WFTFQGOINLLXKZI[H[ RW[W_VaTbRb","I[V[VMSMQNPPOXNZL[ RV[V_UaSbQb","BaP[^F RD[E[GZHXJLKIMGPF^[","E^[MO[ RH[JZKXLPMNOM[[","E_\\FUO\\[ RJ[JFRFTGUHVJVMUOTPRQJQ","F^KMKb R[MUT[[ RKNMMQMSNTOUQUWTYSZQ[M[KZ","DaOQH[ RTFT[^[ R[QLQJPIOHMHJIHJGLF^F","D`H[MU RRPRMKMINHPHRITKURU R[ZY[U[SZRXRPSNUMYM[N\\P\\RRT","G]Z]X\\VZSWQVOV RP[NZLXKTKMLINGPFTFVGXIYMYTXXVZT[P[","I\\WMWb RWZU[Q[OZNYMWMQNOONQMUMWN","F^IFN[RLV[[F",21,"G\\L[LF RX[OO RXFLR RXKRG","IZNMN[ RPSV[ RVMNU RWQQM","FgW[WFTFQGOINLLXKZI[H[ RWM]M`NbPcSc\\b_`a]b[b","IcV[VMSMQNPPOXNZL[ RVT[T]U^V_X_[^^\\a[b","GhL[LF RLPXP RX[XF RXM^MaNcPdSd\\c_aa^b\\b","HcMTVT RMMM[ RVMV[ RVT[T]U^V_X_[^^\\a[b",23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,"JZNXVX RM[RMW[","H\\LXRX RRTWT RRMR[Y[ RYMPMK[","D`[ZY[U[SZRX RINKMOMQNRPRXQZO[K[IZHXHVRUYU[T\\R\\P[NYMUMSNRP","I[STVUWWWXVZT[N[NMSMUNVPVQUSSTNT RKWQW",17,"J[SMOMO[S[UZVYWVWRVOUNSM","J[SMOMO[S[UZVYWVWRVOUNSM RLTRT","JYOTTT RVMOMO[V[","J[TTVSWQWPVNTMPMNN RRTTTVUWWWXVZT[P[NZ","MWRMR[ RRbSaR`QaRbR`","LYTMTWSYRZP[O[",31,"JYOMO[V[ RLVRR","G]L[LMRXXMX[","I\\W[WMN[NM",19,"J\\NNPMTMVNWOXQXWWYVZT[P[NZ","G]YSYVXXWYUZOZMYLXKVKSLQMPOOUOWPXQYS","G]XYYWYSXQWPUOOOMPLQKSKWLY","G]YNK[ RYSYVXXWYUZOZMYLXKVKSLQMPOOUOWPXQYS","DaINKMOMQNRPRXQZO[K[IZHXHVRT RRWSYTZV[Y[[Z\\Y]W]Q\\O[NYMVMTNSORQ","G]OMNNMPNRPS RTSVRWPVNUM RPSTSVTWVWXVZT[P[NZMXMVNTPS","I\\XTXQWOVNTMQMONNOMQMT","H[LTLWMYNZP[S[UZVYWWWT","I[N[NMTMVNWPWRVTTUNU","I[RUM[ RV[VMPMNNMPMRNTPUVU","I[RSMM RVMV[P[NZMXMVNTPSVS","KYMMWM RRMR[","H[MMMXNZP[S[UZVXVM","G]KPYP RKYVYXXYVYSXQWP","@]KPYP RKYVYXXYVYSXQWP REWFXEYDXEWEY REOFPEQDPEOEQ","G]KKYK RWKXLYNYQXSVTKT RVTXUYWYZX\\V]K]",20,21,"IZLMWML[W[","JZNMVMRRSRUSVUVXUZS[P[NZ","H\\XNUMPMNNMOLQLSMUNVPWTXVYWZX\\X^W`VaTbObLa RRTR\\","JZW[PROPPNRMTNUPTRM[","JYO[OMWM","JZM[RMW[","H[M[MMVMV[","I[N[NMTMVNWPWRVTTUNU","I[RMR[ RLMMNMRNTPUTUVTWRWNXM","I[V[VMSMQNPPOXNZL[","JZNKVK RMNR@WN","H\\LKRK RRGWG RR@RNYN RY@P@KN","I[SGVHWJWKVMTNNNN@S@UAVCVDUFSGNG","I[SGVHWJWKVMTNNNN@S@UAVCVDUFSGNG RKGQG","J[S@O@ONSNUMVLWIWEVBUAS@","JYOGTG RV@O@ONVN","KZUGPG RN@U@UNNN","HZUAS@P@NAMBLDLJMLNMPNTNVMVHSH","H[MGVG RM@MN RV@VN","MWRNR@ RUNON RU@O@","LYT@TJSLRMPNON","IZN@NN RPFVN RV@NH","JYO@ONVN","G]LNL@RKX@XN","H[MNM@VNV@","I\\WNW@NNN@","H[PNNMMLLJLDMBNAP@S@UAVBWDWJVLUMSNPN","G]O@NAMCNEPF RTFVEWCVAU@ RPFTFVGWIWKVMTNPNNMMKMINGPF","I[NNN@T@VAWCWEVGTHNH","I[RHWN RNNN@T@VAWCWEVGTHNH","KYM@W@ RR@RN","H[M@MKNMPNSNUMVKV@","G]J@NNRDVNZ@","KZOEQDSDUEVGVN RVMTNQNOMNKOIQHVH","JYNDNKOMQNSNUM RNEPDSDUEVGUISJNJ","H]WDUKTMRNPNNMMKMGNEPDRDTEVMWN","H\\XMVNUNSMRK RLDODQERHRKQMONNNLMKKKJVJXIYGXEVDUDSERH","KYO@ON ROMQNSNUMVKVGUESDQDOE","KYU@UN RUESDQDOENGNKOMQNSNUM","LYVMTNRNPMOKOGPERDSDUEVGVHOI","LYOEQDSDUEVGVKUMSNRNPMOKOJVI","LXPIRI RUETDPDOEOHPIOJOMPNTNUM","LXRITI ROEPDTDUEUHTIUJUMTNPNOM","KYUDUPTRRSOS RUESDQDOENGNKOMQNSNUM","NVRDRN RRUSTRSQTRURS","IZO@ON RUNQH RUDOJ","G]KNKD RKEMDODQERGRN RRGSEUDVDXEYGYN","KZODON ROEQDSDUEVGVPURSSRS","KYQNOMNKNGOEQDSDUEVGVKUMSNQN","LYOEQDSDUEVGVKUMSNQNOM","KYNINGOEQDSDUEVGVI","KYNINKOMQNSNUMVKVI","KYOSOD ROEQDSDUEVGVKUMSNQNOM","NXPDVD RR@RKSMUNVN","KYUDUN RNDNKOMQNSNUM","I[MFWF RMMTMVLWJWHVF","G]YDYN RYMWNUNSMRKRD RRKQMONNNLMKKKD","LXNDRNVD","LXVNPGPEQDSDTETGNN","KYSFRF RNSOQOCPAR@S@UAVCUESFUGVIVKUMSNQNOM","KXRMRS RMDOERMVD","KYSDQDOENGNKOMQNSNUMVKVGUESDPCOBOAP@U@","I[MDLFLJMLNMPNTNVMWLXJXGWEUDSERGRS","LXVDNS RNDPETRVS","NVRWRa RRPQQRRSQRPRR","LWPWPa RPZQXSWUW","KYUWUa RNWN^O`QaSaU`","LXNWRaVW","KYSYRY RNfOdOVPTRSSSUTVVUXSYUZV\\V^U`SaQaO`","KXR`Rf RMWOXR`VW","KYOfOZPXRWSWUXVZV^U`SaQaO`","I[MWLYL]M_N`PaTaV`W_X]XZWXUWSXRZRf","LXVWNf RNWPXTeVf","D`IMIXJZL[O[QZRX R[ZY[U[SZRXRPSNUMYM[N\\P\\RRT","H[M[MF RMNOMSMUNVOWQWWVYUZS[O[MZ RIHJGLFPHRGSF","I\\W[WF RWZU[Q[OZNYMWMQNOONQMUMWN RQHRGTFXHZG[F","MYOMWM RR[RISGUFWF RMTNSPRTTVSWR","D`I[IM RIOJNLMOMQNRPR[ RRPSNUMXMZN[P[[ RMTNSPRTTVSWR","I\\NMN[ RNOONQMTMVNWPW[ RMTNSPRTTVSWR","H[MMMb RMNOMSMUNVOWQWWVYUZS[O[MZ RI`J_L^P`R_S^","KXP[PM RPQQORNTMVM RLTMSORSTUSVR","KXM[S[ RVMTMRNQOPRP[ RLTMSORSTUSVR","J[NZP[T[VZWXWWVUTTQTOSNQNPONQMTMVN RNTOSQRUTWSXR","MYOMWM RRFRXSZU[W[ RMSNRPQTSVRWQ","IZLMWML[W[ RMTNSPRTTVSWR","H[M[MJNHOGQFTFVG RMNOMSMUNVOWQWWVYUZS[O[MZ","H[MGVG RM@MN RV@VN","JZMMVMOURUTVUWVYV^U`TaRbPbNaM_M^N\\P[V[","MlOMWM RRFRXSZU[W[ R^[^F Rg[gPfNdMaM_N^O RiC]`","MWR[RM RU[O[ RUMOM ROTUT","MXRMRXSZU[ ROTUT","H[MMMb RMNOMSMUNVOWQWWVYUZS[O[MZ RHT\\T","H[MMMXNZP[S[UZVXVM RHT\\T","I\\XMUMUPWRXTXWWYVZT[Q[OZNYMWMTNRPPPMMM RHU\\U",23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,"I[MUWU RK[RFY[ RR`TaUcTeRfPeOcPaR`","I\\W[WPVNTMPMNN RWZU[P[NZMXMVNTPSUSWR RR`TaUcTeRfPeOcPaR`","G\\SPVQWRXTXWWYVZT[L[LFSFUGVHWJWLVNUOSPLP RR?Q@RAS@R?RA","H[M[MF RMNOMSMUNVOWQWWVYUZS[O[MZ RN?M@NAO@N?NA","G\\SPVQWRXTXWWYVZT[L[LFSFUGVHWJWLVNUOSPLP RRbSaR`QaRbR`","H[M[MF RMNOMSMUNVOWQWWVYUZS[O[MZ RRbSaR`QaRbR`","G\\SPVQWRXTXWWYVZT[L[LFSFUGVHWJWLVNUOSPLP RWaMa","H[M[MF RMNOMSMUNVOWQWWVYUZS[O[MZ RWaMa","F[WYVZS[Q[NZLXKVJRJOKKLINGQFSFVGWH RR\\T]U_TaRbOb RT>QA","HZVZT[P[NZMYLWLQMONNPMTMVN RR\\T]U_TaRbOb RTEQH","G\\L[LFQFTGVIWKXOXRWVVXTZQ[L[ RR?Q@RAS@R?RA","I\\W[WF RWZU[Q[OZNYMWMQNOONQMUMWN RV?U@VAW@V?VA","G\\L[LFQFTGVIWKXOXRWVVXTZQ[L[ RRbSaR`QaRbR`","I\\W[WF RWZU[Q[OZNYMWMQNOONQMUMWN RSbTaS`RaSbS`","G\\L[LFQFTGVIWKXOXRWVVXTZQ[L[ RWaMa","I\\W[WF RWZU[Q[OZNYMWMQNOONQMUMWN RXaNa","G\\L[LFQFTGVIWKXOXRWVVXTZQ[L[ RQ\\S]T_SaQbNb","I\\W[WF RWZU[Q[OZNYMWMQNOONQMUMWN RS\\U]V_UaSbPb","G\\L[LFQFTGVIWKXOXRWVVXTZQ[L[ RVcR`Nc","I\\W[WF RWZU[Q[OZNYMWMQNOONQMUMWN RWcS`Oc","H[MPTP RW[M[MFWF RM@W@ RP9S<","I[VZT[P[NZMXMPNNPMTMVNWPWRMT RMGWG RP>SA","H[MPTP RW[M[MFWF RM@W@ RT9Q<","I[VZT[P[NZMXMPNNPMTMVNWPWRMT RMGWG RT>QA","H[MPTP RW[M[MFWF RVcR`Nc","I[VZT[P[NZMXMPNNPMTMVNWPWRMT RVcR`Nc","H[MPTP RW[M[MFWF RW`VaTbP`NaMb","I[VZT[P[NZMXMPNNPMTMVNWPWRMT RW`VaTbP`NaMb","H[MPTP RW[M[MFWF RR\\T]U_TaRbOb RN>O@QASAU@V>","I[VZT[P[NZMXMPNNPMTMVNWPWRMT RR\\T]U_TaRbOb RNEOGQHSHUGVE","HZTPMP RM[MFWF RR?Q@RAS@R?RA","MYOMWM RR[RISGUFWF RT?S@TAU@T?TA","F[VGTFQFNGLIKKJOJRKVLXNZQ[S[VZWYWRSR RM@W@","I\\WMW^V`UaSbPbNa RWZU[Q[OZNYMWMQNOONQMUMWN RMGWG","G]L[LF RLPXP RX[XF RR?Q@RAS@R?RA","H[M[MF RV[VPUNSMPMNNMO RM?L@MAN@M?MA","G]L[LF RLPXP RX[XF RRbSaR`QaRbR`","H[M[MF RV[VPUNSMPMNNMO RRbSaR`QaRbR`","G]L[LF RLPXP RX[XF RN?O@NAM@N?NA RV?W@VAU@V?VA","H[M[MF RV[VPUNSMPMNNMO RI?J@IAH@I?IA RQ?R@QAP@Q?QA","G]L[LF RLPXP RX[XF RL\\N]O_NaLbIb","H[M[MF RV[VPUNSMPMNNMO RM\\O]P_OaMbJb","G]L[LF RLPXP RX[XF RV`UbScQcObN`","H[M[MF RV[VPUNSMPMNNMO RV`UbScQcObN`","MWR[RF RW`VaTbP`NaMb","MWR[RM RRFQGRHSGRFRH RW`VaTbP`NaMb","MWR[RF RN?O@NAM@N?NA RV?W@VAU@V?VA RT9Q<","MWR[RM RNFOGNHMGNFNH RVFWGVHUGVFVH RT>QA","G\\L[LF RX[OO RXFLR RT>QA","IZN[NF RPSV[ RVMNU RPAMD","G\\L[LF RX[OO RXFLR RRbSaR`QaRbR`","IZN[NF RPSV[ RVMNU RRbSaR`QaRbR`","G\\L[LF RX[OO RXFLR RWaMa","IZN[NF RPSV[ RVMNU RWaMa","HYW[M[MF RRbSaR`QaRbR`","MXU[SZRXRF RSbTaS`RaSbS`","HYW[M[MF RH@R@ RRbSaR`QaRbR`","MXU[SZRXRF RM@W@ RSbTaS`RaSbS`","HYW[M[MF RWaMa","MXU[SZRXRF RXaNa","HYW[M[MF RVcR`Nc","MXU[SZRXRF RWcS`Oc","F^K[KFRUYFY[ RT>QA","D`I[IM RIOJNLMOMQNRPR[ RRPSNUMXMZN[P[[ RTEQH","F^K[KFRUYFY[ RR?Q@RAS@R?RA","D`I[IM RIOJNLMOMQNRPR[ RRPSNUMXMZN[P[[ RRFQGRHSGRFRH","F^K[KFRUYFY[ RRbSaR`QaRbR`","D`I[IM RIOJNLMOMQNRPR[ RRPSNUMXMZN[P[[ RRbSaR`QaRbR`","G]L[LFX[XF RR?Q@RAS@R?RA","I\\NMN[ RNOONQMTMVNWPW[ RRFQGRHSGRFRH","G]L[LFX[XF RRbSaR`QaRbR`","I\\NMN[ RNOONQMTMVNWPW[ RRbSaR`QaRbR`","G]L[LFX[XF RWaMa","I\\NMN[ RNOONQMTMVNWPW[ RWaMa","G]L[LFX[XF RVcR`Nc","I\\NMN[ RNOONQMTMVNWPW[ RVcR`Nc","G]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RMAN@P?TAV@W? RT9Q<","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RMHNGPFTHVGWF RT>QA","G]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RMAN@P?TAV@W? RN:O;N<M;N:N< RV:W;V<U;V:V<","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RMHNGPFTHVGWF RN?O@NAM@N?NA RV?W@VAU@V?VA","G]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RM@W@ RP9S<","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RMGWG RP>SA","G]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RM@W@ RT9Q<","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RMGWG RT>QA","G\\L[LFTFVGWHXJXMWOVPTQLQ RT>QA","H[MMMb RMNOMSMUNVOWQWWVYUZS[O[MZ RTEQH","G\\L[LFTFVGWHXJXMWOVPTQLQ RR?Q@RAS@R?RA","H[MMMb RMNOMSMUNVOWQWWVYUZS[O[MZ RRFQGRHSGRFRH","G\\X[QQ RL[LFTFVGWHXJXMWOVPTQLQ RR?Q@RAS@R?RA","KXP[PM RPQQORNTMVM RSFRGSHTGSFSH","G\\X[QQ RL[LFTFVGWHXJXMWOVPTQLQ RRbSaR`QaRbR`","KXP[PM RPQQORNTMVM RPbQaP`OaPbP`","G\\X[QQ RL[LFTFVGWHXJXMWOVPTQLQ RM@W@ RRbSaR`QaRbR`","KXP[PM RPQQORNTMVM RNGXG RPbQaP`OaPbP`","G\\X[QQ RL[LFTFVGWHXJXMWOVPTQLQ RWaMa","KXP[PM RPQQORNTMVM RUaKa","H\\LZO[T[VZWYXWXUWSVRTQPPNOMNLLLJMHNGPFUFXG RR?Q@RAS@R?RA","J[NZP[T[VZWXWWVUTTQTOSNQNPONQMTMVN RRFQGRHSGRFRH","H\\LZO[T[VZWYXWXUWSVRTQPPNOMNLLLJMHNGPFUFXG RRbSaR`QaRbR`","J[NZP[T[VZWXWWVUTTQTOSNQNPONQMTMVN RRbSaR`QaRbR`","H\\LZO[T[VZWYXWXUWSVRTQPPNOMNLLLJMHNGPFUFXG RU>RA RM>N?M@L?M>M@","J[NZP[T[VZWXWWVUTTQTOSNQNPONQMTMVN RUERH RMENFMGLFMEMG","H\\LZO[T[VZWYXWXUWSVRTQPPNOMNLLLJMHNGPFUFXG RN>RAV> RR:Q;R<S;R:R<","J[NZP[T[VZWXWWVUTTQTOSNQNPONQMTMVN RNERHVE RR?Q@RAS@R?RA","H\\LZO[T[VZWYXWXUWSVRTQPPNOMNLLLJMHNGPFUFXG RR?Q@RAS@R?RA RRbSaR`QaRbR`","J[NZP[T[VZWXWWVUTTQTOSNQNPONQMTMVN RRFQGRHSGRFRH RRbSaR`QaRbR`","JZLFXF RR[RF RR?Q@RAS@R?RA","MYOMWM RRFRXSZU[W[ RR?Q@RAS@R?RA","JZLFXF RR[RF RRbSaR`QaRbR`","MYOMWM RRFRXSZU[W[ RTbUaT`SaTbT`","JZLFXF RR[RF RWaMa","MYOMWM RRFRXSZU[W[ RYaOa","JZLFXF RR[RF RVcR`Nc","MYOMWM RRFRXSZU[W[ RXcT`Pc","G]LFLWMYNZP[T[VZWYXWXF RVbUaV`WaVbV` RNbMaN`OaNbN`","H[VMV[ RMMMXNZP[S[UZVY RVbUaV`WaVbV` RNbMaN`OaNbN`","G]LFLWMYNZP[T[VZWYXWXF RW`VaTbP`NaMb","H[VMV[ RMMMXNZP[S[UZVY RW`VaTbP`NaMb","G]LFLWMYNZP[T[VZWYXWXF RVcR`Nc","H[VMV[ RMMMXNZP[S[UZVY RVcR`Nc","G]LFLWMYNZP[T[VZWYXWXF RMAN@P?TAV@W? RT9Q<","H[VMV[ RMMMXNZP[S[UZVY RMHNGPFTHVGWF RT>QA","G]LFLWMYNZP[T[VZWYXWXF RM@W@ RN:O;N<M;N:N< RV:W;V<U;V:V<","H[VMV[ RMMMXNZP[S[UZVY RMGWG RN?O@NAM@N?NA RV?W@VAU@V?VA","I[KFR[YF RMAN@P?TAV@W?","JZMMR[WM RMHNGPFTHVGWF","I[KFR[YF RRbSaR`QaRbR`","JZMMR[WM RRbSaR`QaRbR`","F^IFN[RLV[[F RP>SA","G]JMN[RQV[ZM RPESH","F^IFN[RLV[[F RT>QA","G]JMN[RQV[ZM RTEQH","F^IFN[RLV[[F RN?O@NAM@N?NA RV?W@VAU@V?VA","G]JMN[RQV[ZM RNFOGNHMGNFNH RVFWGVHUGVFVH","F^IFN[RLV[[F RR?Q@RAS@R?RA","G]JMN[RQV[ZM RRFQGRHSGRFRH","F^IFN[RLV[[F RRbSaR`QaRbR`","G]JMN[RQV[ZM RRbSaR`QaRbR`","H\\KFY[ RYFK[ RR?Q@RAS@R?RA","IZL[WM RLMW[ RRFQGRHSGRFRH","H\\KFY[ RYFK[ RN?O@NAM@N?NA RV?W@VAU@V?VA","IZL[WM RLMW[ RNFOGNHMGNFNH RVFWGVHUGVFVH","I[RQR[ RKFRQYF RR?Q@RAS@R?RA","JZMMR[ RWMR[P`OaMb RRFQGRHSGRFRH","H\\KFYFK[Y[ RNAR>VA","IZLMWML[W[ RNHREVH","H\\KFYFK[Y[ RRbSaR`QaRbR`","IZLMWML[W[ RRbSaR`QaRbR`","H\\KFYFK[Y[ RWaMa","IZLMWML[W[ RWaMa","H[M[MF RV[VPUNSMPMNNMO RWaMa","MYOMWM RRFRXSZU[W[ RN?O@NAM@N?NA RV?W@VAU@V?VA","G]JMN[RQV[ZM RRHPGOEPCRBTCUETGRH","JZMMR[ RWMR[P`OaMb RRHPGOEPCRBTCUETGRH","I\\W[WPVNTMPMNN RWZU[P[NZMXMVNTPSUSWR RWJYIZGYEWD","MYR[RISGUFWF RT?S@TAU@T?TA","MYR[RISGUFWF ROSUO","MYR[RISGUFWF ROLUL","E^J[JLKIMGPFZFSNVNXOYPZRZWYYXZV[R[PZOY","H[SMPMNNMOLQLWMYNZP[S[UZVYWWWQVOUNSMPLNKMINGPFTFVG","I[MUWU RK[RFY[ RRbSaR`QaRbR`","I\\W[WPVNTMPMNN RWZU[P[NZMXMVNTPSUSWR RRbSaR`QaRbR`","I[MUWU RK[RFY[ RRAT?U=T;R:P:","I\\W[WPVNTMPMNN RWZU[P[NZMXMVNTPSUSWR RRHTFUDTBRAPA","I[MUWU RK[RFY[ RU>X; RNAR>VA","I\\W[WPVNTMPMNN RWZU[P[NZMXMVNTPSUSWR RUEXB RNHREVH","I[MUWU RK[RFY[ RO>L; RNAR>VA","I\\W[WPVNTMPMNN RWZU[P[NZMXMVNTPSUSWR ROELB RNHREVH","I[MUWU RK[RFY[ RNAR>VA RXAZ?[=Z;X:V:","I\\W[WPVNTMPMNN RWZU[P[NZMXMVNTPSUSWR RNHREVH RXHZF[DZBXAVA","I[MUWU RK[RFY[ RNAR>VA RM<N;P:T<V;W:","I\\W[WPVNTMPMNN RWZU[P[NZMXMVNTPSUSWR RNHREVH RMAN@P?TAV@W?","I[MUWU RK[RFY[ RNAR>VA RRbSaR`QaRbR`","I\\W[WPVNTMPMNN RWZU[P[NZMXMVNTPSUSWR RNHREVH RRbSaR`QaRbR`","I[MUWU RK[RFY[ RN>O@QASAU@V> RT9Q<","I\\W[WPVNTMPMNN RWZU[P[NZMXMVNTPSUSWR RNEOGQHSHUGVE RT>QA","I[MUWU RK[RFY[ RN>O@QASAU@V> RP9S<","I\\W[WPVNTMPMNN RWZU[P[NZMXMVNTPSUSWR RNEOGQHSHUGVE RP>SA","I[MUWU RK[RFY[ RN>O@QASAU@V> RP>R<S:R8P7N7","I\\W[WPVNTMPMNN RWZU[P[NZMXMVNTPSUSWR RNEOGQHSHUGVE RPERCSAR?P>N>","I[MUWU RK[RFY[ RN>O@QASAU@V> RM<N;P:T<V;W:","I\\W[WPVNTMPMNN RWZU[P[NZMXMVNTPSUSWR RNEOGQHSHUGVE RMAN@P?TAV@W?","I[MUWU RK[RFY[ RN>O@QASAU@V> RRbSaR`QaRbR`","I\\W[WPVNTMPMNN RWZU[P[NZMXMVNTPSUSWR RNEOGQHSHUGVE RRbSaR`QaRbR`","H[MPTP RW[M[MFWF RRbSaR`QaRbR`","I[VZT[P[NZMXMPNNPMTMVNWPWRMT RRbSaR`QaRbR`","H[MPTP RW[M[MFWF RRAT?U=T;R:P:","I[VZT[P[NZMXMPNNPMTMVNWPWRMT RRHTFUDTBRAPA","H[MPTP RW[M[MFWF RMAN@P?TAV@W?","I[VZT[P[NZMXMPNNPMTMVNWPWRMT RMHNGPFTHVGWF","H[MPTP RW[M[MFWF RU>X; RNAR>VA","I[VZT[P[NZMXMPNNPMTMVNWPWRMT RUEXB RNHREVH","H[MPTP RW[M[MFWF RO>L; RNAR>VA","I[VZT[P[NZMXMPNNPMTMVNWPWRMT ROELB RNHREVH","H[MPTP RW[M[MFWF RNAR>VA RXAZ?[=Z;X:V:","I[VZT[P[NZMXMPNNPMTMVNWPWRMT RNHREVH RXHZF[DZBXAVA","H[MPTP RW[M[MFWF RNAR>VA RM<N;P:T<V;W:","I[VZT[P[NZMXMPNNPMTMVNWPWRMT RNHREVH RMAN@P?TAV@W?","H[MPTP RW[M[MFWF RNAR>VA RRbSaR`QaRbR`","I[VZT[P[NZMXMPNNPMTMVNWPWRMT RNHREVH RRbSaR`QaRbR`","MWR[RF RRAT?U=T;R:P:","MWR[RM RRHTFUDTBRAPA","MWR[RF RRbSaR`QaRbR`","MWR[RM RRFQGRHSGRFRH RRbSaR`QaRbR`","G]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RRbSaR`QaRbR`","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RRbSaR`QaRbR`","G]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RRAT?U=T;R:P:","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RRHTFUDTBRAPA","G]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RU>X; RNAR>VA","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RUEXB RNHREVH","G]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RO>L; RNAR>VA","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ ROELB RNHREVH","G]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RNAR>VA RXAZ?[=Z;X:V:","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RNHREVH RXHZF[DZBXAVA","G]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RNAR>VA RM<N;P:T<V;W:","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RNHREVH RMAN@P?TAV@W?","G]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RNAR>VA RRbSaR`QaRbR`","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RNHREVH RRbSaR`QaRbR`","G]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RVGXFYDXBWA RT>QA","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RUNWMXKWIVH RTEQH","G]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RVGXFYDXBWA RP>SA","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RUNWMXKWIVH RPESH","G]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RVGXFYDXBWA RRAT?U=T;R:P:","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RUNWMXKWIVH RRHTFUDTBRAPA","G]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RVGXFYDXBWA RWAVBTCPANBMC","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RUNWMXKWIVH RWHVITJPHNIMJ","G]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RVGXFYDXBWA RRbSaR`QaRbR`","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RUNWMXKWIVH RRbSaR`QaRbR`","G]LFLWMYNZP[T[VZWYXWXF RRbSaR`QaRbR`","H[VMV[ RMMMXNZP[S[UZVY RRbSaR`QaRbR`","G]LFLWMYNZP[T[VZWYXWXF RRAT?U=T;R:P:","H[VMV[ RMMMXNZP[S[UZVY RRHTFUDTBRAPA","G]LFLWMYNZP[T[VZWYXWXF RXFZE[CZAY@ RT>QA","H[VMV[ RMMMXNZP[S[UZVY RVMXLYJXHWG RTEQH","G]LFLWMYNZP[T[VZWYXWXF RXFZE[CZAY@ RP>SA","H[VMV[ RMMMXNZP[S[UZVY RVMXLYJXHWG RPESH","G]LFLWMYNZP[T[VZWYXWXF RXFZE[CZAY@ RRAT?U=T;R:P:","H[VMV[ RMMMXNZP[S[UZVY RVMXLYJXHWG RRHTFUDTBRAPA","G]LFLWMYNZP[T[VZWYXWXF RXFZE[CZAY@ RWAVBTCPANBMC","H[VMV[ RMMMXNZP[S[UZVY RVMXLYJXHWG RWHVITJPHNIMJ","G]LFLWMYNZP[T[VZWYXWXF RXFZE[CZAY@ RRbSaR`QaRbR`","H[VMV[ RMMMXNZP[S[UZVY RVMXLYJXHWG RRbSaR`QaRbR`","I[RQR[ RKFRQYF RP>SA","JZMMR[ RWMR[P`OaMb RPESH","I[RQR[ RKFRQYF RRbSaR`QaRbR`","JZMMR[ RWMR[P`OaMb RVbWaV`UaVbV`","I[RQR[ RKFRQYF RRAT?U=T;R:P:","JZMMR[ RWMR[P`OaMb RRHTFUDTBRAPA","I[RQR[ RKFRQYF RMAN@P?TAV@W?","JZMMR[ RWMR[P`OaMb RMHNGPFTHVGWF","E\\PFP[ RJFJ[Z[","J[MMWM ROFOXPZR[ RX[VZUXUF","G]QFOGMJLMLWMYNZP[T[VZXXYVYTXPVMUL","H[QMONNOMQMWNYOZQ[S[UZVYWWWUVSURSQ","G[KFRT RYFRTPXOZM[KZJXKVMUOVPX","JZMMR[ RWMR[Q_PaNbLaK_L]N\\P]Q_","H]YMVWUYTZR[P[NZMYLVLRMONNPMRMTNUOVQWXXZZ[ RQHRHSGSE","H]YMVWUYTZR[P[NZMYLVLRMONNPMRMTNUOVQWXXZZ[ RQEQGRHSH","H]YMVWUYTZR[P[NZMYLVLRMONNPMRMTNUOVQWXXZZ[ RTEWH RMHNHOGOE","H]YMVWUYTZR[P[NZMYLVLRMONNPMRMTNUOVQWXXZZ[ RTEWH RMEMGNHOH","H]YMVWUYTZR[P[NZMYLVLRMONNPMRMTNUOVQWXXZZ[ RXEUH RMHNHOGOE","H]YMVWUYTZR[P[NZMYLVLRMONNPMRMTNUOVQWXXZZ[ RXEUH RMEMGNHOH","H]YMVWUYTZR[P[NZMYLVLRMONNPMRMTNUOVQWXXZZ[ RQHRHSGSE RMAN@P?TAV@W?","H]YMVWUYTZR[P[NZMYLVLRMONNPMRMTNUOVQWXXZZ[ RQEQGRHSH RMAN@P?TAV@W?","G[MUWU RK[RFY[ RJHKHLGLE","G[MUWU RK[RFY[ RJEJGKHLH","?[MUWU RK[RFY[ RIELH RBHCHDGDE","?[MUWU RK[RFY[ RIELH RBEBGCHDH","?[MUWU RK[RFY[ RMEJH RBHCHDGDE","?[MUWU RK[RFY[ RMEJH RBEBGCHDH","D[MUWU RK[RFY[ RFAG@I?MAO@P? RJHKHLGLE","D[MUWU RK[RFY[ RFAG@I?MAO@P? RJEJGKHLH","IZPTNUMWMXNZP[T[VZ RRTPTNSMQMPNNPMTMVN RQHRHSGSE","IZPTNUMWMXNZP[T[VZ RRTPTNSMQMPNNPMTMVN RQEQGRHSH","IZPTNUMWMXNZP[T[VZ RRTPTNSMQMPNNPMTMVN RTEWH RMHNHOGOE","IZPTNUMWMXNZP[T[VZ RRTPTNSMQMPNNPMTMVN RTEWH RMEMGNHOH","IZPTNUMWMXNZP[T[VZ RRTPTNSMQMPNNPMTMVN RXEUH RMHNHOGOE","IZPTNUMWMXNZP[T[VZ RRTPTNSMQMPNNPMTMVN RXEUH RMEMGNHOH",23,23,"B[MPTP RW[M[MFWF REHFHGGGE","B[MPTP RW[M[MFWF REEEGFHGH",":[MPTP RW[M[MFWF RDEGH R=H>H?G?E",":[MPTP RW[M[MFWF RDEGH R=E=G>H?H",":[MPTP RW[M[MFWF RHEEH R=H>H?G?E",":[MPTP RW[M[MFWF RHEEH R=E=G>H?H",23,23,"I\\NMN[ RNOONQMTMVNWPWb RQHRHSGSE","I\\NMN[ RNOONQMTMVNWPWb RQEQGRHSH","I\\NMN[ RNOONQMTMVNWPWb RTEWH RMHNHOGOE","I\\NMN[ RNOONQMTMVNWPWb RTEWH RMEMGNHOH","I\\NMN[ RNOONQMTMVNWPWb RXEUH RMHNHOGOE","I\\NMN[ RNOONQMTMVNWPWb RXEUH RMEMGNHOH","I\\NMN[ RNOONQMTMVNWPWb RQHRHSGSE RMAN@P?TAV@W?","I\\NMN[ RNOONQMTMVNWPWb RQEQGRHSH RMAN@P?TAV@W?","A]L[LF RLPXP RX[XF RDHEHFGFE","A]L[LF RLPXP RX[XF RDEDGEHFH","9]L[LF RLPXP RX[XF RCEFH R<H=H>G>E","9]L[LF RLPXP RX[XF RCEFH R<E<G=H>H","9]L[LF RLPXP RX[XF RGEDH R<H=H>G>E","9]L[LF RLPXP RX[XF RGEDH R<E<G=H>H",">]L[LF RLPXP RX[XF R@AA@C?GAI@J? RDHEHFGFE",">]L[LF RLPXP RX[XF R@AA@C?GAI@J? RDEDGEHFH","MXRMRXSZU[ RQHRHSGSE","MXRMRXSZU[ RQEQGRHSH","MXRMRXSZU[ RTEWH RMHNHOGOE","MXRMRXSZU[ RTEWH RMEMGNHOH","MXRMRXSZU[ RXEUH RMHNHOGOE","MXRMRXSZU[ RXEUH RMEMGNHOH","MXRMRXSZU[ RQHRHSGSE RMAN@P?TAV@W?","MXRMRXSZU[ RQEQGRHSH RMAN@P?TAV@W?","GWR[RF RJHKHLGLE","GWR[RF RJEJGKHLH","?WR[RF RIELH RBHCHDGDE","?WR[RF RIELH RBEBGCHDH","?WR[RF RMEJH RBHCHDGDE","?WR[RF RMEJH RBEBGCHDH","DWR[RF RFAG@I?MAO@P? RJHKHLGLE","DWR[RF RFAG@I?MAO@P? RJEJGKHLH","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RQHRHSGSE","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RQEQGRHSH","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RTEWH RMHNHOGOE","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RTEWH RMEMGNHOH","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RXEUH RMHNHOGOE","H[P[NZMYLWLQMONNPMSMUNVOWQWWVYUZS[P[ RXEUH RMEMGNHOH",23,23,"B]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF REHFHGGGE","B]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF REEEGFHGH",":]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RDEGH R=H>H?G?E",":]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RDEGH R=E=G>H?H",":]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RHEEH R=H>H?G?E",":]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RHEEH R=E=G>H?H",23,23,"H[MMMXNZP[S[UZVYWWWPVNUM RQHRHSGSE","H[MMMXNZP[S[UZVYWWWPVNUM RQEQGRHSH","H[MMMXNZP[S[UZVYWWWPVNUM RTEWH RMHNHOGOE","H[MMMXNZP[S[UZVYWWWPVNUM RTEWH RMEMGNHOH","H[MMMXNZP[S[UZVYWWWPVNUM RXEUH RMHNHOGOE","H[MMMXNZP[S[UZVYWWWPVNUM RXEUH RMEMGNHOH","H[MMMXNZP[S[UZVYWWWPVNUM RQHRHSGSE RMAN@P?TAV@W?","H[MMMXNZP[S[UZVYWWWPVNUM RQEQGRHSH RMAN@P?TAV@W?",23,"@[RQR[ RKFRQYF RCECGDHEH",23,"8[RQR[ RKFRQYF RBEEH R;E;G<H=H",23,"8[RQR[ RKFRQYF RFECH R;E;G<H=H",23,"=[RQR[ RKFRQYF R?A@@B?FAH@I? RCECGDHEH","G]RTRX RMMLNKPKXLZN[O[QZRXSZU[V[XZYXYPXNWM RQHRHSGSE","G]RTRX RMMLNKPKXLZN[O[QZRXSZU[V[XZYXYPXNWM RQEQGRHSH","G]RTRX RMMLNKPKXLZN[O[QZRXSZU[V[XZYXYPXNWM RTEWH RMHNHOGOE","G]RTRX RMMLNKPKXLZN[O[QZRXSZU[V[XZYXYPXNWM RTEWH RMEMGNHOH","G]RTRX RMMLNKPKXLZN[O[QZRXSZU[V[XZYXYPXNWM RXEUH RMHNHOGOE","G]RTRX RMMLNKPKXLZN[O[QZRXSZU[V[XZYXYPXNWM RXEUH RMEMGNHOH","G]RTRX RMMLNKPKXLZN[O[QZRXSZU[V[XZYXYPXNWM RQHRHSGSE RMAN@P?TAV@W?","G]RTRX RMMLNKPKXLZN[O[QZRXSZU[V[XZYXYPXNWM RQEQGRHSH RMAN@P?TAV@W?","@^J[O[OWMVKTJQJLKIMGPFTFWGYIZLZQYTWVUWU[Z[ RCHDHEGEE","@^J[O[OWMVKTJQJLKIMGPFTFWGYIZLZQYTWVUWU[Z[ RCECGDHEH","8^J[O[OWMVKTJQJLKIMGPFTFWGYIZLZQYTWVUWU[Z[ RBEEH R;H<H=G=E","8^J[O[OWMVKTJQJLKIMGPFTFWGYIZLZQYTWVUWU[Z[ RBEEH R;E;G<H=H","8^J[O[OWMVKTJQJLKIMGPFTFWGYIZLZQYTWVUWU[Z[ RFECH R;H<H=G=E","8^J[O[OWMVKTJQJLKIMGPFTFWGYIZLZQYTWVUWU[Z[ RFECH R;E;G<H=H","=^J[O[OWMVKTJQJLKIMGPFTFWGYIZLZQYTWVUWU[Z[ R?A@@B?FAH@I? RCHDHEGEE","=^J[O[OWMVKTJQJLKIMGPFTFWGYIZLZQYTWVUWU[Z[ R?A@@B?FAH@I? RCECGDHEH",39,39,40,40,41,41,42,42,29,29,44,44,45,45,23,23,"H]YMVWUYTZR[P[NZMYLVLRMONNPMRMTNUOVQWXXZZ[ RQHRHSGSE RR`RcSdTd","H]YMVWUYTZR[P[NZMYLVLRMONNPMRMTNUOVQWXXZZ[ RQEQGRHSH RR`RcSdTd","H]YMVWUYTZR[P[NZMYLVLRMONNPMRMTNUOVQWXXZZ[ RTEWH RMHNHOGOE RR`RcSdTd","H]YMVWUYTZR[P[NZMYLVLRMONNPMRMTNUOVQWXXZZ[ RTEWH RMEMGNHOH RR`RcSdTd","H]YMVWUYTZR[P[NZMYLVLRMONNPMRMTNUOVQWXXZZ[ RXEUH RMHNHOGOE RR`RcSdTd","H]YMVWUYTZR[P[NZMYLVLRMONNPMRMTNUOVQWXXZZ[ RXEUH RMEMGNHOH RR`RcSdTd","H]YMVWUYTZR[P[NZMYLVLRMONNPMRMTNUOVQWXXZZ[ RQHRHSGSE RMAN@P?TAV@W? RR`RcSdTd","H]YMVWUYTZR[P[NZMYLVLRMONNPMRMTNUOVQWXXZZ[ RQEQGRHSH RMAN@P?TAV@W? RR`RcSdTd","G[MUWU RK[RFY[ RJHKHLGLE RR`RcSdTd","G[MUWU RK[RFY[ RJEJGKHLH RR`RcSdTd","?[MUWU RK[RFY[ RIELH RBHCHDGDE RR`RcSdTd","?[MUWU RK[RFY[ RIELH RBEBGCHDH RR`RcSdTd","?[MUWU RK[RFY[ RMEJH RBHCHDGDE RR`RcSdTd","?[MUWU RK[RFY[ RMEJH RBEBGCHDH RR`RcSdTd","D[MUWU RK[RFY[ RFAG@I?MAO@P? RJHKHLGLE RR`RcSdTd","D[MUWU RK[RFY[ RFAG@I?MAO@P? RJEJGKHLH RR`RcSdTd","I\\NMN[ RNOONQMTMVNWPWb RQHRHSGSE RN`NcOdPd","I\\NMN[ RNOONQMTMVNWPWb RQEQGRHSH RN`NcOdPd","I\\NMN[ RNOONQMTMVNWPWb RTEWH RMHNHOGOE RN`NcOdPd","I\\NMN[ RNOONQMTMVNWPWb RTEWH RMEMGNHOH RN`NcOdPd","I\\NMN[ RNOONQMTMVNWPWb RXEUH RMHNHOGOE RN`NcOdPd","I\\NMN[ RNOONQMTMVNWPWb RXEUH RMEMGNHOH RN`NcOdPd","I\\NMN[ RNOONQMTMVNWPWb RQHRHSGSE RMAN@P?TAV@W? RN`NcOdPd","I\\NMN[ RNOONQMTMVNWPWb RQEQGRHSH RMAN@P?TAV@W? RN`NcOdPd","N]L[LF RLPXP RX[XF RR`RcSdTd","A]L[LF RLPXP RX[XF RDEDGEHFH RR`RcSdTd","9]L[LF RLPXP RX[XF RCEFH R<H=H>G>E RR`RcSdTd","9]L[LF RLPXP RX[XF RCEFH R<E<G=H>H RR`RcSdTd","9]L[LF RLPXP RX[XF RGEDH R<H=H>G>E RR`RcSdTd","9]L[LF RLPXP RX[XF RGEDH R<E<G=H>H RR`RcSdTd",">]L[LF RLPXP RX[XF R@AA@C?GAI@J? RDHEHFGFE RR`RcSdTd",">]L[LF RLPXP RX[XF R@AA@C?GAI@J? RDEDGEHFH RR`RcSdTd","G]RTRX RMMLNKPKXLZN[O[QZRXSZU[V[XZYXYPXNWM RQHRHSGSE RR`RcSdTd","G]RTRX RMMLNKPKXLZN[O[QZRXSZU[V[XZYXYPXNWM RQEQGRHSH RR`RcSdTd","G]RTRX RMMLNKPKXLZN[O[QZRXSZU[V[XZYXYPXNWM RTEWH RMHNHOGOE RR`RcSdTd","G]RTRX RMMLNKPKXLZN[O[QZRXSZU[V[XZYXYPXNWM RTEWH RMEMGNHOH RR`RcSdTd","G]RTRX RMMLNKPKXLZN[O[QZRXSZU[V[XZYXYPXNWM RXEUH RMHNHOGOE RR`RcSdTd","G]RTRX RMMLNKPKXLZN[O[QZRXSZU[V[XZYXYPXNWM RXEUH RMEMGNHOH RR`RcSdTd","G]RTRX RMMLNKPKXLZN[O[QZRXSZU[V[XZYXYPXNWM RQHRHSGSE RMAN@P?TAV@W? RR`RcSdTd","G]RTRX RMMLNKPKXLZN[O[QZRXSZU[V[XZYXYPXNWM RQEQGRHSH RMAN@P?TAV@W? RR`RcSdTd","@^J[O[OWMVKTJQJLKIMGPFTFWGYIZLZQYTWVUWU[Z[ RCHDHEGEE RR`RcSdTd","@^J[O[OWMVKTJQJLKIMGPFTFWGYIZLZQYTWVUWU[Z[ RCECGDHEH RR`RcSdTd","8^J[O[OWMVKTJQJLKIMGPFTFWGYIZLZQYTWVUWU[Z[ RBEEH R;H<H=G=E RR`RcSdTd","8^J[O[OWMVKTJQJLKIMGPFTFWGYIZLZQYTWVUWU[Z[ RBEEH R;E;G<H=H RR`RcSdTd","8^J[O[OWMVKTJQJLKIMGPFTFWGYIZLZQYTWVUWU[Z[ RFECH R;H<H=G=E RR`RcSdTd","8^J[O[OWMVKTJQJLKIMGPFTFWGYIZLZQYTWVUWU[Z[ RFECH R;E;G<H=H RR`RcSdTd","=^J[O[OWMVKTJQJLKIMGPFTFWGYIZLZQYTWVUWU[Z[ R?A@@B?FAH@I? RCHDHEGEE RR`RcSdTd","=^J[O[OWMVKTJQJLKIMGPFTFWGYIZLZQYTWVUWU[Z[ R?A@@B?FAH@I? RCECGDHEH RR`RcSdTd","H]YMVWUYTZR[P[NZMYLVLRMONNPMRMTNUOVQWXXZZ[ RNEOGQHSHUGVE","H]YMVWUYTZR[P[NZMYLVLRMONNPMRMTNUOVQWXXZZ[ RMGWG","H]YMVWUYTZR[P[NZMYLVLRMONNPMRMTNUOVQWXXZZ[ RPESH RR`RcSdTd","H]YMVWUYTZR[P[NZMYLVLRMONNPMRMTNUOVQWXXZZ[ RR`RcSdTd","H]YMVWUYTZR[P[NZMYLVLRMONNPMRMTNUOVQWXXZZ[ RTEQH RR`RcSdTd",23,"H]YMVWUYTZR[P[NZMYLVLRMONNPMRMTNUOVQWXXZZ[ RMHNGPFTHVGWF","H]YMVWUYTZR[P[NZMYLVLRMONNPMRMTNUOVQWXXZZ[ RMHNGPFTHVGWF RR`RcSdTd",30,"I[MUWU RK[RFY[ RM@W@","G[MUWU RK[RFY[ RIELH","G[MUWU RK[RFY[ RMEJH","I[MUWU RK[RFY[ RR`RcSdTd","NVQHRHSGSE","NVR`RcSdTd","NVQHRHSGSE","KZMHNGPFTHVGWF","LXMCNBPATCVBWA RNFOGNHMGNFNH RVFWGVHUGVFVH","I\\NMN[ RNOONQMTMVNWPWb RPESH RN`NcOdPd","I\\NMN[ RNOONQMTMVNWPWb RN`NcOdPd","I\\NMN[ RNOONQMTMVNWPWb RTEQH RN`NcOdPd",23,"I\\NMN[ RNOONQMTMVNWPWb RMHNGPFTHVGWF","I\\NMN[ RNOONQMTMVNWPWb RMHNGPFTHVGWF RN`NcOdPd","B[MPTP RW[M[MFWF RDEGH","B[MPTP RW[M[MFWF RHEEH","A]L[LF RLPXP RX[XF RCEFH","A]L[LF RLPXP RX[XF RGEDH","G]L[LF RLPXP RX[XF RR`RcSdTd","JZTEWH RMHNHOGOE","JZXEUH RMHNHOGOE","NVQHRHSGSE RMAN@P?TAV@W?","MXRMRXSZU[ RNEOGQHSHUGVE","MXRMRXSZU[ RMGWG","MXRMRXSZU[ RNFOGNHMGNFNH RVFWGVHUGVFVH RP>SA","MXRMRXSZU[ RNFOGNHMGNFNH RVFWGVHUGVFVH RT>QA",23,23,"MXRMRXSZU[ RMHNGPFTHVGWF","MXRMRXSZU[ RMCNBPATCVBWA RNFOGNHMGNFNH RVFWGVHUGVFVH","MWR[RF RN>O@QASAU@V>","MWR[RF RM@W@","GWR[RF RIELH","GWR[RF RMEJH",23,"JZTEWH RMEMGNHOH","JZXEUH RMEMGNHOH","NVQEQGRHSH RMAN@P?TAV@W?","H[MMMXNZP[S[UZVYWWWPVNUM RNEOGQHSHUGVE","H[MMMXNZP[S[UZVYWWWPVNUM RMGWG","H[MMMXNZP[S[UZVYWWWPVNUM RNFOGNHMGNFNH RVFWGVHUGVFVH RP>SA","H[MMMXNZP[S[UZVYWWWPVNUM RNFOGNHMGNFNH RVFWGVHUGVFVH RT>QA","H\\MbMQNOONQMTMVNWOXQXWWYVZT[Q[OZMX RQHRHSGSE","H\\MbMQNOONQMTMVNWOXQXWWYVZT[Q[OZMX RQEQGRHSH","H[MMMXNZP[S[UZVYWWWPVNUM RMHNGPFTHVGWF","H[MMMXNZP[S[UZVYWWWPVNUM RMCNBPATCVBWA RNFOGNHMGNFNH RVFWGVHUGVFVH","I[RQR[ RKFRQYF RN>O@QASAU@V>","I[RQR[ RKFRQYF RM@W@","@[RQR[ RKFRQYF RBEEH","@[RQR[ RKFRQYF RFECH","A\\L[LFTFVGWHXJXMWOVPTQLQ RDEDGEHFH","LXNFOGNHMGNFNH RVFWGVHUGVFVH RP>SA","LXNFOGNHMGNFNH RVFWGVHUGVFVH RT>QA",16,23,23,"G]RTRX RMMLNKPKXLZN[O[QZRXSZU[V[XZYXYPXNWM RPESH RR`RcSdTd","G]RTRX RMMLNKPKXLZN[O[QZRXSZU[V[XZYXYPXNWM RR`RcSdTd","G]RTRX RMMLNKPKXLZN[O[QZRXSZU[V[XZYXYPXNWM RTEQH RR`RcSdTd",23,"G]RTRX RMMLNKPKXLZN[O[QZRXSZU[V[XZYXYPXNWM RMHNGPFTHVGWF","G]RTRX RMMLNKPKXLZN[O[QZRXSZU[V[XZYXYPXNWM RMHNGPFTHVGWF RR`RcSdTd","B]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RDEGH","B]PFTFVGXIYMYTXXVZT[P[NZLXKTKMLINGPF RHEEH","@^J[O[OWMVKTJQJLKIMGPFTFWGYIZLZQYTWVUWU[Z[ RBEEH","@^J[O[OWMVKTJQJLKIMGPFTFWGYIZLZQYTWVUWU[Z[ RFECH","F^J[O[OWMVKTJQJLKIMGPFTFWGYIZLZQYTWVUWU[Z[ RR`RcSdTd",25,"NVQEQGRHSH",23,"F^","LX","F^","LX","NV","OU","PT","H\\","MW","PT","QS",24,24,24,24,24,46,46,"H\\JRZR","LXVTNT","F^IT[T","F^IT[T","H\\ODOb RUDUb","JZJbZb RJ]Z]","MWQGQFRDSC","MWSFSGRIQJ","MWSZS[R]Q^","MWQFQGRISJ","JZUGUFVDWC RMGMFNDOC","JZOFOGNIMJ RWFWGVIUJ","JZOZO[N]M^ RWZW[V]U^","JZUFUGVIWJ RMFMGNIOJ","I[MMWM RRFRb","I[M[W[ RMMWM RRFRb","E_PQPU RQUQQ RRPRV RSUSQ RTQTU RPTRVTT RPRRPTR RPQRPTQUSTURVPUOSPQ","E_PPPV RQQQU RRQRU RSSUS RSRST ROPUSOV RVSOWOOVS","MWRYSZR[QZRYR[","MaRYSZR[QZRYR[ R\\Y]Z\\[[Z\\Y\\[","MkRYSZR[QZRYR[ R\\Y]Z\\[[Z\\Y\\[ RfYgZf[eZfYf[",26,24,24,24,24,24,24,24,24,"FjJ[ZF RMFOGPIOKMLKKJIKGMF RcUeVfXeZc[aZ`XaVcU RYZZXYVWUUVTXUZW[YZ","FvJ[ZF RMFOGPIOKMLKKJIKGMF RcUeVfXeZc[aZ`XaVcU RoUqVrXqZo[mZlXmVoU RYZZXYVWUUVTXUZW[YZ","MWTFQL","JZQFNL RWFTL","G]NFKL RTFQL RZFWL","MWPFSL","JZSFVL RMFPL","G]VFYL RPFSL RJFML","LXVcR`Nc","KYUMOSUY","KYOMUSOY","E_LMXY RXMLY RKRLSKTJSKRKT RRYSZR[QZRYR[ RRKSLRMQLRKRM RYRZSYTXSYRYT","MaRYSZR[QZRYR[ RRSQGRFSGRSRF R\\Y]Z\\[[Z\\Y\\[ R\\S[G\\F]G\\S\\F","I[QFQS RQYRZQ[PZQYQ[ RQYRZQ[PZQYQ[ RMGOFTFVGWIWKVMUNSORPQRQS RMGOFTFVGWIWKVMUNSORPQRQS","E_JGZG","OUb`aa^c\\dYeTfPfKeHdFcCaB`","OUBFCEFCHBKAP@T@YA\\B^CaEbF","E_N_VW RV_R[","CaKRKW RRFRK RYRYW RFUKWPU RH[KWN[ RMIRKWI ROORKUO RTUYW^U RV[YW\\[",46,1,"KYQSVS RVbQbQDVD","KYSSNS RNbSbSDND","ImQYRZQ[PZQYQ[ RMGOFTFVGWIWKVMUNSORPQRQS RcYdZc[bZcYc[ R_GaFfFhGiIiKhMgNeOdPcRcS","IeQYRZQ[PZQYQ[ RMGOFTFVGWIWKVMUNSORPQRQS R`YaZ`[_Z`Y`[ R`S_G`FaG`S`F","MiRYSZR[QZRYR[ RRSQGRFSGRSRF R_Y`Z_[^Z_Y_[ R[G]FbFdGeIeKdMcNaO`P_R_S","KYNMVMPb","G^NMN[ RUMUXVZX[ RJMWMYNZP","H\\NQNU RWPWV RPVPPOQOUPV RQPPPNQMSNUPVQVQP","H\\VQVU RMPMV RTVTPUQUUTV RSPTPVQWSVUTVSVSP","JZR[RV RWXRVMX RURRVOR","MWQZQ[R]S^ RRNQORPSORNRP","OUBFCEFCHBKAP@T@YA\\B^CaEbF Rb`aa^c\\dYeTfPfKeHdFcCaB`","JZRFRK RMIRKWI ROORKUO RRFRK RWIRKMI RUORKOO","JZM^WB RNFOGNHMGNFNH RVYWZV[UZVYV[","E_JSKRNQQRSTVUYTZS",">fB^B]C[EZOZQYRWSYUZ_Za[b]b^","E_JSZS RR[RK RLMXY RXMLY","E_LRMSLTKSLRLT RXYYZX[WZXYX[ RXKYLXMWLXKXM","D`KFHL RQFNL RWFTL R]FZL","E_KRLSKTJSKRKT RRYSZR[QZRYR[ RRKSLRMQLRKRM RYRZSYTXSYRYT","E_LXMYLZKYLXLZ RLLMMLNKMLLLN RRRSSRTQSRRRT RXXYYXZWYXXXZ RXLYMXNWMXLXN","MWRYSZR[QZRYR[ RRNSORPQORNRP","E_KRLSKTJSKRKT RRYSZR[QZRYR[ RRKSLRMQLRKRM RYRZSYTXSYRYT","E_JSZS RR[RK RLXMYLZKYLXLZ RLLMMLNKMLLLN RXXYYXZWYXXXZ RXLYMXNWMXLXN","CaR\\S]R^Q]R\\R^ RRRSSRTQSRRRT RRHSIRJQIRHRJ","CaR^S_R`Q_R^R` RRVSWRXQWRVRX RRNSORPQORNRP RRFSGRHQGRFRH","OU",24,24,24,24,24,23,23,23,23,23,24,24,24,24,24,24,"JZQ@S@UAVDVJUMSNQNOMNJNDOAQ@","NVRDRN RR=Q>R?S>R=R?",23,23,"JZUFUN RQ@NJWJ","JZV@O@NFPESEUFVHVKUMSNPNNM","JZNHOFQESEUFVHVKUMSNQNOMNKNFOCPAR@U@","JZM@W@PN","JZQFOENCOAQ@S@UAVCUESFQFOGNINKOMQNSNUMVKVIUGSF","JZVFUHSIQIOHNFNCOAQ@S@UAVCVHUKTMRNON","I[LHXH RRBRN","I[LHXH","I[LJXJ RLFXF","MWT=S>RAQFQJROSRTS","MWP=Q>RASFSJROQRPS","KZODON ROEQDSDUEVGVN","JZQSSSUTVWV]U`SaQaO`N]NWOTQS","JZVaNa RNVPURSRa","JZNTPSSSUTVVVXUZNaVa","JZNSVSRXSXUYV[V^U`SaPaN`","JZUYUa RQSN]W]","JZVSOSNYPXSXUYV[V^U`SaPaN`","JZN[OYQXSXUYV[V^U`SaQaO`N^NYOVPTRSUS","JZMSWSPa","JZQYOXNVOTQSSSUTVVUXSYQYOZN\\N^O`QaSaU`V^V\\UZSY","JZVYU[S\\Q\\O[NYNVOTQSSSUTVVV[U^T`RaOa","I[L[X[ RRURa","I[L[X[","I[L]X] RLYXY","MWTPSQRTQYQ]RbSeTf","MWPPQQRTSYS]RbQePf",24,"KZOXQWSWUXVZVa RV`TaQaO`N^O\\Q[V[","LYV`TaRaP`O^OZPXRWSWUXVZV[O\\","KYQaO`N^NZOXQWSWUXVZV^U`SaQa","KYNWVa RVWNa","LYOXQWSWUXVZV^U`SaRaP`O^O]V\\",23,23,23,23,23,23,23,23,23,23,23,"F[XMPMP[X[ RTGRFNFLGKHJJJPKRLSNTUT","F[WYVZS[Q[NZLXKVJRJOKKLINGQFSFVGWH RSBG_ RZBN_","F[WYVZS[Q[NZLXKVJRJOKKLINGQFSFVGWH RR[RM RRQSOTNVMXM","HZTPMP RM[MFWF RJVRV","H[LMTM RL[W[ RO[OIPGRFUFWG RLSTS","D`I[IM RIOJNLMOMQNRPR[ RRPSNUMXMZN[P[[ RWHM`","G]L[LFX[XF RHV\\V RHP\\P","GyL[LFTFVGWHXJXMWOVPTQLQ R^MfM RaFaXbZd[f[ RlZn[r[tZuXuWtUrToTmSlQlPmNoMrMtN","GmX[QQ RL[LFTFVGWHXJXMWOVPTQLQ R`Zb[f[hZiXiWhUfTcTaS`Q`PaNcMfMhN","F^IFN[RLV[[F RHV\\V RHP\\P","D`I[IFOFRGTIULUR RONOUPXRZU[[[[F","I\\W[WF RWZU[Q[OZNYMWMQNOONQMUMWN RRHZH RXaNa","F[HSQS RHNTN RWYVZS[Q[NZLXKVJRJOKKLINGQFSFVGWH","G\\L[LF RX[OO RXFLR RLOTO","JZLFXF RR[RF ROVUR ROPUL","IoK[RFY[K[ R`b`QaObNdMgMiNjOkQkWjYiZg[d[bZ`X","G]ITJSLRNSOTQUSTXOYLYIXGVFUFSGRIRLSOXTYVYWXYWZT[","G\\L[LFTFVGWHXJXMWOVPTQLQ RHL\\L","F[VGTFQFNGLIKKJOJRKVLXNZQ[S[VZWYWRSR RRCR^","I[K[RFY[ RHV\\V RHP\\P","H\\XZU[P[NZMYLWLUMSNRPQTPVOWNXLXJWHVGTFOFLG RRCR^","HZVZT[P[NZMYLWLQMONNPMTMVN RRJR^",23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,"F^J[O[OWMVKTJQJLKIMGPFTFWGYIZLZQYTWVUWU[Z[",23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,"E_ZSJS RNWJSNO","E_R[RK RNORKVO","E_JSZS RVWZSVO","E_RKR[ RVWR[NW","E_JSZS RVWZSVO RNOJSNW","E_R[RK RNORKVO RVWR[NW","E_KLYZ RRLKLKS","E_YLKZ RRLYLYS","E_YZKL RRZYZYS","E_KZYL RRZKZKS","E_ZSJS RRWVO RNOJSNW","E_JSZS RRONW RVWZSVO","E_JWJQPQ RJQMTOUQTSRUQWRZU","E_ZWZQTQ RZQWTUUSTQROQMRJU","E_ZSJS RTOPSTW RNWJSNO","E_R[RK RNURQVU RNORKVO","E_JSZS RPOTSPW RVWZSVO","E_RKR[ RVQRUNQ RVWR[NW","E_JSVS RZOVSZW RNWJSNO","E_ZSNS RJONSJW RVWZSVO","E_ZOZW RJSZS RNWJSNO","E_R[RK RV[N[ RNORKVO","E_JOJW RZSJS RVWZSVO","E_RKR[ RNKVK RVWR[NW","E_N[V[ RR[RK RNWR[VW RNORKVO","E_NWJSNO RJSWSYRZPYNWM","E_VWZSVO RZSMSKRJPKNMM","E_NWJSNO RJSWSYRZPYNWMUNTPTW","E_VWZSVO RZSMSKRJPKNMMONPPPW","E_PUJUJO RZWZQTQ RZQWTUUSTQROQMRJU","E_JSZS RTOPW RNOJSNW RVWZSVO","E_PWR[VY ROKLTVOR[","E_V[VOJO RNSJONK","E_N[NOZO RVSZOVK","E_VKVWJW RNSJWN[","E_NKNWZW RVSZWV[","E_JOVOV[ RZWV[RW","E_VKVWJW RNSJWN[","E_OQKUGQ RYRYQXNVLSKQKNLLNKQKU","E_UQYU]Q RKRKQLNNLQKSKVLXNYQYU","E_KLYZ RKHYH RRLKLKS","E_JWZW RJKJS RZSZ[ RZOJO RNSJONK RV[ZWVS","E_[KUKUQ RMMLNKQKSLVNXQYSYVXXVYSYQXNUK","E_IKOKOQ RWMXNYQYSXVVXSYQYNXLVKSKQLNOK","E_ZSJSNO","E_ZSJSNW","E_R[RKVO","E_R[RKNO","E_JSZSVO","E_JSZSVW","E_RKR[VW","E_RKR[NW","E_ZWJW RJOZO RVSZOVK RN[JWNS","E_N[NK RVKV[ RJONKRO RRWV[ZW","E_JWZW RZOJO RNSJONK RV[ZWVS","E_ZWJW RJOZO RN[JWNSJONK","E_N[NK RVKV[ RJONKROVKZO","E_JWZW RZOJO RV[ZWVSZOVK","E_VKV[ RN[NK RZWV[RWN[JW","E_JVZVVZ RZPJPNL","E_ZVJVNZ RJPZPVL","E_ZPMP RZVMV RRXVN ROXJSON","E_MVWV RMPWP RSNQX ROXJSON RUNZSUX","E_JVWV RJPWP RRNNX RUNZSUX","E_ZPMP RZVMV ROXJSON","E_ONO[ RUNU[ RWPRKMP","E_JVWV RJPWP RUNZSUX","E_UXUK ROXOK RMVR[WV","E_MVWV RMPWP ROXJSON RUNZSUX","E_OXON RUXUN RMVR[WV RWPRKMP","E_[XOL RW\\KP RSLKLKT","E_IXUL RM\\YP RQLYLYT","E_INUZ RMJYV RQZYZYR","E_[NOZ RWJKV RSZKZKR","E_ZXOX RZSJS RZNON RQLJSQZ","E_JXUX RJSZS RJNUN RSLZSSZ","E_NWJSNO RZUWQTUQQNULSJS","E_VWZSVO RJUMQPUSQVUXSZS","E_NXVX RNSVS RR[RK RNORKVO","E_VNNN RVSNS RRKR[ RVWR[NW","E_ZSWS RSSQS RMSJS RNOJSNW","E_R[RX RRTRR RRNRK RNORKVO","E_JSMS RQSSS RWSZS RVWZSVO","E_RKRN RRRRT RRXR[ RVWR[NW","E_ZSJS RJWJO RNOJSNW","E_JSZS RZOZW RVWZSVO","E_ZPZVOVOXJSONOPZP","E_U[O[OPMPRKWPUPU[","E_JVJPUPUNZSUXUVJV","E_OKUKUVWVR[MVOVOK","E_U[O[OWUWU[ RUSOSOPMPRKWPUPUS","E_W[M[MWOWOPMPRKWPUPUWWWW[","E_ONUN RW[M[MWOWOPMPRKWPUPUWWWW[","E_RKR[ RW[M[MWOWOPMPRKWPUPUWWWW[","E_PPMPRKWPTP RU[O[OSMSRNWSUSU[","E_PPMPRKWPTP RW[M[MWOWOSMSRNWSUSUWWWW[","E_JNNNNPUPUNZSUXUVNVNXJXJN","E_Z[NO RZKJKJ[ RUONONV","E_JKVW RJ[Z[ZK ROWVWVP","E_MPRKWPUPUVWVR[MVOVOPMP","E_JSZS RVWZSVO RTRTTSVQWOWMVLTLRMPOOQOSPTR","E_V[VK RNKN[ RZOVKRO RRWN[JW","E_J[Z[ RJKZK RZSJS RVGZKVOZSVWZ[V_","E_ZSJS RTWTO RNOJSNW","E_JSZS RPOPW RVWZSVO","E_JSZS RRORW RNOJSNW RVWZSVO","E_ZSJS RWWWO RRWRO RNOJSNW","E_JSZS RMOMW RRORW RVWZSVO","E_JSZS RPOPW RTOTW RNWJSNO RVWZSVO","E_NSZS RNWNOJSNW","E_VSJS RVWVOZSVW","E_NSVS RNWJSNONW RVWVOZSVW","I[MLWL RKFR[YF","HZVHUGSFPFNGMHLKLVMYNZP[S[UZVY","H[WOVNTMPMNNMOLQLWMYNZP[S[UZVYWWWJVHUGSFOFMG","I\\WPPP RM[W[WFMF","I\\WQPQ RMFWFW[M[ RXCL`","C`G[\\F ROFTFXHZJ\\N\\SZWXYT[O[KYIWGSGNIJKHOF","I[K[RFY[K[","I[YFR[KFYF","C`\\QGQ R\\GOGKIIKGOGSIWKYO[\\[","C`[CH^ R\\QGQ R\\GOGKIIKGOGSIWKYO[\\[","E_JSZS RZZPZMYKWJTJRKOMMPLZL","DaHP]P RHZUZYX[V]R]N[JYHUFHF","DaI^\\C RHP]P RHZUZYX[V]R]N[JYHUFHF","E_ZSJS RJZTZWYYWZTZRYOWMTLJL","E_M[WQ RMZWP RMYWO RMXWN RMWWM RMVWL RMUWK RMTVK RMSUK RMRTK RMQSK RMPRK RMOQK RMNPK RMMOK RMLNK RN[WR RO[WS RP[WT RQ[WU RR[WV RS[WW RT[WX RU[WY RV[WZ RM[MKWKW[M[","E_Z`ZFJFJ`","E_ZFZ`J`JF","E_Z`I`TSIF[F",0,"E_ZWJW RROR_ RJKZK","E_JSZS RR[RK RRDQERFSERDRF",1,"KYID[_","E_KOYW RR[RK RYOKW","E_PQRPTQUSTURVPUOSPQ","E_PQPU RQUQQ RRPRV RSUSQ RTQTU RPTRVTT RPRRPTR RPQRPTQUSTURVPUOSPQ","IbMTQSS[bB","IbMTQSS[bB RN@V@RESEUFVHVKUMSNPNNM","IbMTQSS[bB RUFUN RQ@NJWJ","E_XPWPUQQUOVMULSMQOPQQUUWVXV","E_TQVPXQYSXUVVTUPQNPLQKSLUNVPUTQ","E_JKJ[Z[","E_ZKJ[Z[","E_ZKJ[Z[ RPSRUTZT]","E_Z[JSZK RSYTWUSTOSM",22,"H\\NUVQ RRDRb","H\\ODOb RUDUb","H\\LVXP RODOb RUDUb","E_[[RKI[","E_IKR[[K","E_Z[ZQXMTKPKLMJQJ[","E_JKJULYP[T[XYZUZK","H\\L]M_O`Q_R]RISGUFWGXI","D`H]I_K`M_N]NIOGQFSGTI RP]Q_S`U_V]VIWGYF[G\\I","@dD]E_G`I_J]JIKGMFOGPI RL]M_O`Q_R]RISGUFWGXI RT]U_W`Y_Z]ZI[G]F_G`I","H\\L]M_O`Q_R]RISGUFWGXI RRMUNWPXSWVUXRYOXMVLSMPONRM","D`H]I_K`M_N]NIOGQFSGTI RP]Q_S`U_V]VIWGYF[G\\I RVMYN[P\\S[VYXVYNYKXIVHSIPKNNMVM","@dD]E_G`I_J]JIKGMFOGPI RL]M_O`Q_R]RISGUFWGXI RT]U_W`Y_Z]ZI[G]F_G`I RZM]N_P`S_V]XZYJYGXEVDSEPGNJMZM","H\\URXU[R RLSMPONRMUNWPXSXU RL]M_O`Q_R]RISGUFWGXI","H\\UQXT[Q RL]M_O`Q_R]RISGUFWGXI RLSMPONRMUNWPXSWVUXRYOXMVLS","H\\UUXR[U RL]M_O`Q_R]RISGUFWGXI RLSMPONRMUNWPXSWVUXRYOXMVLS","E_KXLYKZJYKXKZ RRLSMRNQMRLRN RYXZYYZXYYXYZ","E_YNXMYLZMYNYL RRZQYRXSYRZRX RKNJMKLLMKNKL","JZRXSYRZQYRXRZ RRLSMRNQMRLRN","E_LXMYLZKYLXLZ RLLMMLNKMLLLN RXXYYXZWYXXXZ RXLYMXNWMXLXN","E_JSZS RRFQGRHSGRFRH","E_JSTS RYXZYYZXYYXYZ RYLZMYNXMYLYN","E_JSZS RLXMYLZKYLXLZ RLLMMLNKMLLLN RXXYYXZWYXXXZ RXLYMXNWMXLXN","E_JSKRNQQRSTVUYTZS RRXSYRZQYRXRZ RRLSMRNQMRLRN","E_JSKRNQQRSTVUYTZS","E_ZSYRVQSRQTNUKTJS","E_WPYQZSYUWVTUPQMPKQJSKUMV","E_JSKNLLNKPLQNSXTZV[XZYXZS","E_RKSLTOSRQTPWQZR[","E_JSKRNQQRSTVUYTZS RVKN[","E_ZPJP RZVYWVXSWQUNTKUJV","E_JVZV RJPKONNQOSQVRYQZP","E_JVZV RJPKONNQOSQVRYQZP RVKN[","E_JYZY RJSZS RJMKLNKQLSNVOYNZM","E_JYZY RJSZS RUPO\\ RJMKLNKQLSNVOYNZM","E_JYZY RJSZS RJMKLNKQLSNVOYNZM RXGL_","E_JVKUNTQUSWVXYWZV RJPKONNQOSQVRYQZP","E_JVKUNTQUSWVXYWZV RJPKONNQOSQVRYQZP RVKN[","E_JYZY RJSKRNQQRSTVUYTZS RJMKLNKQLSNVOYNZM","E_JYKXNWQXSZV[YZZY RJSKRNQQRSTVUYTZS RJMKLNKQLSNVOYNZM","E_ZYJY RZSJS RZMYLVKSLQNNOKNJM","E_JXLWPVTVXWZX RJNLOPPTPXOZN","E_JVNVNWOYQZSZUYVWVVZV RJPNPNOOMQLSLUMVOVPZP","E_ZVJV RJPNPNOOMQLSLUMVOVPZP","E_JPZP RZVJV RRHQIRJSIRHRJ","E_JPZP RZVJV RRXSYRZQYRXRZ RRLSMRNQMRLRN","E_JPZP RZVJV RKJLKKLJKKJKL RYZZ[Y\\X[YZY\\","E_ZPJP RJVZV RYJXKYLZKYJYL RKZJ[K\\L[KZK\\","AcNP^P R^VNV RGVHWGXFWGVGX RGNHOGPFOGNGP","AcVPFP RFVVV R]V\\W]X^W]V]X R]N\\O]P^O]N]P","E_JPZP RZVJV RPQRPTQUSTURVPUOSPQ","E_JPZP RZVJV RRJPIOGPERDTEUGTIRJ","E_JPZP RZVJV RNJOHQGSGUHVJ","E_JPZP RZVJV RNJRGVJ","E_JPZP RZVJV RNGRJVG","E_JPZP RZVJV RRATGOCUCPGRA","E_JPZP RZVJV RR?NJVJR?","E_JPZP RYC]C RZVJV R]?[@ZBZJ RM?MJKJIIHGHEICKBMB RQFVFVCUBRBQCQIRJUJ","E_JPZP RZVJV RMBMJ RMCNBQBRCRJ RRCSBVBWCWJ","E_JPZP RZVJV RRHSIRJQIRHRJ RN@P?S?U@VBUDSE","E_JPZP RTMPY RZVJV","E_JYZY RJSZS RJMZM","E_JYZY RJSZS RJMZM RXGL_","E_J\\Z\\ RJPZP RJJZJ RZVJV","E_ZZJZ RZVJPZJ","E_JZZZ RJVZPJJ","E_J]Z] RZWJW RZSJMZG","E_Z]J] RJWZW RJSZMJG","E_J]Z] RTTP` RZWJW RZSJMZG","E_JWZW RTTP` RZ]J] RJSZMJG","=gRMBSRY RbMRSbY","=gRMbSRY RBMRSBY","I[OCPDRGSITLUQUUTZS]R_PbOc RUcTbR_Q]PZOUOQPLQIRGTDUC","E_JXLWPVTVXWZX RJNLOPPTPXOZN RVKN[","E_ZMJSZY RVKN[","E_JMZSJY RVKN[","E_ZZJZ RZVJPZJ RXGL_","E_JZZZ RJVZPJJ RXGL_","E_ZVJPZJ RJZKYNXQYS[V\\Y[ZZ","E_JVZPJJ RJZKYNXQYS[V\\Y[ZZ","E_ZVJPZJ RJZKYNXQYS[V\\Y[ZZ RXGL_","E_JVZPJJ RJZKYNXQYS[V\\Y[ZZ RXGL_","E_JSZYJ_ RZSJMZG","E_ZSJYZ_ RJSZMJG","E_JSZYJ_ RZSJMZG RXGL_","E_ZSJYZ_ RJSZMJG RXGL_","E_ZKXNVPRRJSRTVVXXZ[","E_JKLNNPRRZSRTNVLXJ[","E_JVRWVYX[Z^ RZHXKVMROJPRQVSXUZX","E_ZVRWNYL[J^ RJHLKNMROZPRQNSLUJX","E_J[KZNYQZS\\V]Y\\Z[ RZHXKVMROJPRQVSXUZX","E_J[KZNYQZS\\V]Y\\Z[ RJXLUNSRQZPRONMLKJH","E_ZKXNVPRRJSRTVVXXZ[ RVKN[","E_JKLNNPRRZSRTNVLXJ[ RVKN[","E_ZMNMLNKOJQJUKWLXNYZY","E_JMVMXNYOZQZUYWXXVYJY","E_ZMNMLNKOJQJUKWLXNYZY RVKN[","E_JMVMXNYOZQZUYWXXVYJY RVKN[","E_J\\Z\\ RZJNJLKKLJNJRKTLUNVZV","E_Z\\J\\ RJJVJXKYLZNZRYTXUVVJV","E_J\\Z\\ RZJNJLKKLJNJRKTLUNVZV RXGL_","E_Z\\J\\ RJJVJXKYLZNZRYTXUVVJV RXGL_","E_J\\Z\\ RZJNJLKKLJNJRKTLUNVZV RSYQ_","E_Z\\J\\ RJJVJXKYLZNZRYTXUVVJV RSYQ_","E_JKJULYP[T[XYZUZK ROSUS RSUUSSQ","E_JKJULYP[T[XYZUZK RRRQSRTSSRRRT","E_JKJULYP[T[XYZUZK RLSXS RRMRY","E_ZYJYJMZM","E_JYZYZMJM","E_Z\\J\\ RZVJVJJZJ","E_J\\Z\\ RJVZVZJJJ","E_Z[ZKJKJ[","E_JKJ[Z[ZK","E_PKTKXMZQZUXYT[P[LYJUJQLMPK RLSXS RRMRY","E_PKTKXMZQZUXYT[P[LYJUJQLMPK RLSXS","E_PKTKXMZQZUXYT[P[LYJUJQLMPK RMNWX RWNMX","E_PKTKXMZQZUXYT[P[LYJUJQLMPK RWFM^","E_PKTKXMZQZUXYT[P[LYJUJQLMPK RRRQSRTSSRRRT",47,"E_PKTKXMZQZUXYT[P[LYJUJQLMPK RRNRS RMQRSWQ ROWRSUW","E_PKTKXMZQZUXYT[P[LYJUJQLMPK RLUXU RLQXQ","E_PKTKXMZQZUXYT[P[LYJUJQLMPK RNSVS","E_JKZKZ[J[JK RLSXS RRMRY","E_JKZKZ[J[JK RLSXS","E_JKZKZ[J[JK RMNWX RWNMX","E_JKZKZ[J[JK RRRQSRTSSRRRT","E_J[JK RJSZS","E_Z[ZK RZSJS","E_ZKJK RRKR[","E_J[Z[ RR[RK","I[NSVS RNKN[","I[NVVV RNPVP RNKN[","E_JVZV RJPZP RJKJ[","E_JKJ[ RPSZS RPKP[","E_JKJ[ ROKO[ RTKT[ RYSTS","E_JKJ[ RPVYV RPPYP RPKP[","E_J[JK RJSZS RXGL_","E_JVZV RJPZP RJKJ[ RXGL_","E_JKJ[ RPSZS RPKP[ RXGL_","E_JKJ[ RPVYV RPPYP RPKP[ RXGL_","E_VKXLYNXPVQRRJSRTVUXVYXXZV[","E_NKLLKNLPNQRRZSRTNULVKXLZN[","E_JSZYZMJS","E_ZSJYJMZS","E_Z[J[ RJQZWZKJQ","E_J[Z[ RZQJWJKZQ","BbXQXU RYQYU RZPZV R[Q[U R\\Q\\U RMSLQJPHQGSHUJVLUMSWSXUZV\\U]S\\QZPXQWS","BbLQLU RKQKU RJPJV RIQIU RHQHU RWSXQZP\\Q]S\\UZVXUWSMSLUJVHUGSHQJPLQMS","E_JSTSUUWVYUZSYQWPUQTS","E_JSNS RR[RW RRKRO RZSVS","I[NFVF RRFR[","E_J[Z[ RZKRVJK","E_ZKJK RJ[RPZ[","E_JKZK RZPR[JP","E_JKJ[Z[ RJOLOQQTTVYV[","E_Z[ZKJ[Z[","Bb_`REE`","BbEFRa_F","Bb]`]O\\KZHWFSEQEMFJHHKGOG`","BbGFGWH[J^M`QaSaW`Z^\\[]W]F","E_RaJSRFZSRa",26,"I[RRTXOTUTPXRR","E_ZSJS RRXSYRZQYRXRZ RRLSMRNQMRLRN RLMXY RXMLY","E_JKZ[ZKJ[JK","E_ZKJ[JKZ[","E_JKZ[ZKJ[","E_JKZ[ RRSJ[","E_ZKJ[ RRSZ[","E_ZVJV RZPYOVNSOQQNRKQJP","E_JKMMOOQSR[SSUOWMZK","E_Z[WYUWSSRKQSOWMYJ[","E_ZPSPQQPSQUSVZV RZ\\Q\\N[KXJUJQKNNKQJZJ","E_JPQPSQTSSUQVJV RJ\\S\\V[YXZUZQYNVKSJJJ","E_U[UTTRRQPROTO[ R[[[RZOWLTKPKMLJOIRI[","E_OKORPTRUTTURUK RIKITJWMZP[T[WZZW[T[K","E_RKR[ RL[LSMPNOQNSNVOWPXSX[","E_JPZP RZVJV RODOb RUDUb","E_ZMJSZY RYRXSYTZSYRYT","E_JMZSJY RKRJSKTLSKRKT","5oJM:SJY RZMJSZY RjMZSjY","5oZMjSZY RJMZSJY R:MJS:Y","E_ZSJS RJWZ[J_ RZOJKZG","E_JSZS RZWJ[Z_ RJOZKJG","E_ZLJL RZPJVZ\\","E_JLZL RJPZVJ\\","E_JPROVMXKZH RZ^X[VYRWJVRUVSXQZN","E_ZPRONMLKJH RJ^L[NYRWZVRUNSLQJN","E_JPROVMXKZH RZ^X[VYRWJVRUVSXQZN RXGL_","E_ZPRONMLKJH RJ^L[NYRWZVRUNSLQJN RXGL_","E_Z\\J\\ RZVJVJJZJ RXGL_","E_J\\Z\\ RJVZVZJJJ RXGL_","E_Z\\J\\ RZVJVJJZJ RSYQ_","E_J\\Z\\ RJVZVZJJJ RSYQ_","E_ZVJPZJ RJZKYNXQYS[V\\Y[ZZ RSWQ]","E_JVZPJJ RJZKYNXQYS[V\\Y[ZZ RSWQ]","E_J[KZNYQZS\\V]Y\\Z[ RZHXKVMROJPRQVSXUZX RSXQ^","E_J[KZNYQZS\\V]Y\\Z[ RJXLUNSRQZPRONMLKJH RSXQ^","E_JSZYZMJS RXGL_","E_ZSJYJMZS RXGL_","E_Z[J[ RJQZWZKJQ RXGL_","E_J[Z[ RZQJWJKZQ RXGL_","CaR\\S]R^Q]R\\R^ RRRSSRTQSRRRT RRHSIRJQIRHRJ","CaHRISHTGSHRHT RRRSSRTQSRRRT R\\R]S\\T[S\\R\\T","Ca\\H[I\\J]I\\H\\J RRRQSRTSSRRRT RH\\G]H^I]H\\H^","CaHHIIHJGIHHHJ RRRSSRTQSRRRT R\\\\]]\\^[]\\\\\\^",">`BQ\\Q R\\GOGKIIKGOGSIWKYO[\\[",">`GQ\\Q R\\M\\U R\\GOGKIIKGOGSIWKYO[\\[","E_JSZS RZPZV RZZPZMYKWJTJRKOMMPLZL","C`\\QGQ R\\GOGKIIKGOGSIWKYO[\\[ RR@QARBSAR@RB","C`GA\\A R\\QGQ R\\[O[KYIWGSGOIKKIOG\\G","E_JSZS RZGJG RZLPLMMKOJRJTKWMYPZZZ","C`G`\\` R\\PGP R\\FOFKHIJGNGRIVKXOZ\\Z","C`HT\\T RHN\\N R\\GOGKIIKGOGSIWKYO[\\[","DfbQHQ RHGUGYI[K]O]S[WYYU[H[","Df]QHQ RHMHU RHGUGYI[K]O]S[WYYU[H[","E_ZSJS RJPJV RJZTZWYYWZTZRYOWMTLJL","Da]AHA RHQ]Q RH[U[YY[W]S]O[KYIUGHG","E_ZSJS RJGZG RJLTLWMYOZRZTYWWYTZJZ","C`GQ\\Q R\\GGGG[\\[","E_PKTKXMZQZUXYT[P[LYJUJQLMPK RZKJ[","E_JQRWROZU","E_J[JORGZOZ[J[","E_NORKVO","E_VWR[NW","E_ZKJK RJ[RPZ[","E_JNZN RJHZH RJ[RSZ[","H\\RDSETGSIRJQLRNSOTQSSRTQVRXSYT[S]R^Q`Rb","KYQbQDVD","KYSbSDND","KYQDQbVb","KYSDSbNb","E_RWR[ RVSZS","E_RWR[ RNSJS","E_RORK RVSZS","E_RORK RNSJS","E_ZQJQJV","D`[JZLYPYVZZ[\\Y[UZOZK[I\\JZKVKPJLIJKKOLULYK[J","E_JSJQLMPKTKXMZQZS","E_JSJQLMPKTKXMZQZS RJSZS","E_JMLLPKTKXLZMR[JM","E_PUJ[ RTKWLYNZQYTWVTWQVOTNQONQLTK","E_JSZS RR[RK RVRUPSOQOOPNRNTOVQWSWUVVTVR","E_JWZW RJOZO RNKN[ RVKV[","E_LPXPZO[MZKXJVKUMUYV[X\\Z[[YZWXVLVJWIYJ[L\\N[OYOMNKLJJKIMJOLP","E_ZUJUJP","E_RORSUS RPKTKXMZQZUXYT[P[LYJUJQLMPK","E_M[RVW[ RN[RWV[ RP[RYT[ RS[RZQ[ RU[RXO[ RYMRPKMROYM RJFZFZKYMKTJVJ[Z[ZVYTKMJJJF","JZVFNFNM","JZNFVFVM","JZV[N[NT","JZN[V[VT","H\\RbRMSITGVFXGYI","H\\RDRYQ]P_N`L_K]","E_JUKTMSRRWSYTZU","E_ZQYRWSRTMSKRJQ","E_LKHK RXK\\K RNORKVO","@dXK^K RFKLKX[^[","AfJKZ[ RZKJ[ RFKZKbSZ[F[FK","AcJKZ[ RZKJ[ RFK^K^[F[FK","9k>VfV R>LfL RCQCL RD[DV REVEQ RFLFG RHQHL RJVJQ RK[KV RKLKG RMQML ROVOQ RPLPG RRQRL RTVTQ RULUG RWQWL RYVYQ RZ[ZV RZLZG R\\Q\\L R^V^Q R_L_G R`[`V R>QaQaL R>[>GfGf[>[","KYUcOSUC","KYOcUSOC",">cZKJ[ RJKZ[ R^KJKBSJ[^[^K","AcKOKW RR[YW RRKYO RRE^L^ZRaFZFLRE","H\\PNKX RYNTX RVRUPSOQOOPNRNTOVQWSWUVVTVR","E_N[J[JW RZSRSJ[ RVRUPSOQOOPNRNTOVQWSWUVVTVR","E_JSZS RNYVY RVMNM","E_RPRKNN RZPZKVN RRKJ[R[ZK","H\\LS[S RRMRY RXP[SXV RVRUPSOQOOPNRNTOVQWSWUVVTVR","E_ZSJ\\JJZS RJSZS","E_J[JRZ[J[","E_JWJ[Z[ZW","E_VWR[NW","D`JaZa RJFZF RRFRa","D`MFWFWaMaMF","D`IF[F[aIaIF RJPZP RZVJV","D`IF[F[aIaIF RZSJS RRXSYRZQYRXRZ RRLSMRNQMRLRN","D`IF[F[aIaIF RRJ[SR\\ISRJ","D`IF[F[aIaIF RPQRPTQUSTURVPUOSPQ","D`IF[F[aIaIF RPKTKXMZQZUXYT[P[LYJUJQLMPK","E_PKTKXMZQZUXYT[P[LYJUJQLMPK RRbRD",47,"E_JSZS RZKJ[","E_JSZS RJKZ[","D`IaIF[F[aIa[F","D`[a[FIFIa[aIF","D`IF[F[aIaIF RZMJSZY","D`IF[F[aIaIF RJMZSJY","E_ZSJS RNWJSNO RR[RK","E_JSZS RVWZSVO RR[RK","D`IF[F[aIaIF RZSJS RNWJSNO","D`IF[F[aIaIF RJSZS RVWZSVO","E_PKTKXMZQZUXYT[P[LYJUJQLMPK RLGX_","E_J[Z[ RR[RK RZaJa","E_RKX[L[RK RRbRD","D`IF[F[aIaIF RIKR[[K","D`IF[F[aIaIF RRKX[L[RK","E_ZKJK RRKR[ RVRUPSOQOOPNRNTOVQWSWUVVTVR","E_R[RK RNORKVO RJSZS","D`IF[F[aIaIF RR[RK RNORKVO","E_ZKJK RRKR[ RMEWE","E_R[LKXKR[ RRbRD","D`IF[F[aIaIF R[[RKI[","D`IF[F[aIaIF RR[LKXKR[","E_J[Z[ RR[RK RPQRPTQUSTURVPUOSPQ","E_RKR[ RVWR[NW RJSZS","D`IF[F[aIaIF RRKR[ RVWR[NW","JZJ]Z] RSFQJ","E_RKX[L[RK RJ]Z]","E_RJ[SR\\ISRJ RJ]Z]","E_PQRPTQUSTURVPUOSPQ RJ]Z]","E_PKTKXMZQZUXYT[P[LYJUJQLMPK RJ]Z]","E_Z[ZQXMTKPKLMJQJ[ RPQRPTQUSTURVPUOSPQ","D`IF[F[aIaIF RSFQJ","E_PKTKXMZQZUXYT[P[LYJUJQLMPK RRPTVORURPVRP","D`IF[F[aIaIF RRYSZR[QZRYR[ RRNSORPQORNRP","E_ZKJK RRKR[ RNDOENFMENDNF RVDWEVFUEVDVF","E_R[LKXKR[ RNFOGNHMGNFNH RVFWGVHUGVFVH","E_RKWZJQZQMZRK RNDOENFMENDNF RVDWEVFUEVDVF","E_PQRPTQUSTURVPUOSPQ RNIOJNKMJNINK RVIWJVKUJVIVK","E_PKTKXMZQZUXYT[P[LYJUJQLMPK RNDOENFMENDNF RVDWEVFUEVDVF","E_JKJULYP[T[XYZUZK RRbRD","E_ZMNMLNKOJQJUKWLXNYZY RRbRD","E_JSKRNQQRSTVUYTZS RNFOGNHMGNFNH RVFWGVHUGVFVH","E_JMZSJY RNFOGNHMGNFNH RVFWGVHUGVFVH","E_JSZS RSZS[R]Q^","E_R[LKXKR[ RJSKRNQQRSTVUYTZS","H\\QFSFUGVHWJXNXSWWVYUZS[Q[OZNYMWLSLNMJNHOGQF RJPKONNQOSQVRYQZP","E_JSKRNQQRSTVUYTZS RRbRD","MWSZS[R]Q^ RRNSORPQORNRP RJ]Z]","D`IF[F[aIaIF RJPZP RTMPY RZVJV","D`IF[F[aIaIF RQYRZQ[PZQYQ[ RMGOFTFVGWIWKVMUNSORPQRQS","E_IKR[[K RJSKRNQQRSTVUYTZS","E_[[RKI[ RJSKRNQQRSTVUYTZS",36,"H\\MbMQNOONQMTMVNWOXQXWWYVZT[Q[OZMX",43,"H]YMVWUYTZR[P[NZMYLVLRMONNPMRMTNUOVQWXXZZ[ RJ]Z]","HZLTST RVZT[P[NZMYLWLQMONNPMTMVN RJ]Z]","MXRMRXSZU[ RJ]Z]","G]RTRX RMMLNKPKXLZN[O[QZRXSZU[V[XZYXYPXNWM RJ]Z]",34,"IbMTQSS[bB RXL`L","A_J_F_F[ RJKJ[Z[ RF_OVEQOG","E_JWNWN[V[VWZW","E_NSN[J[ RVSV[Z[ RJSJQLMPKTKXMZQZSJS","E_PQPU RQUQQ RRPRV RSUSQ RTQTU RPTRVTT RPRRPTR RPQRPTQUSTURVPUOSPQ RRbRD","E_VWR[NW ROEQDSDUEVGVN RVMTNQNOMNKOIQHVH","BbF[^[ RGLIKKKMLNNNU RUSVTUUTTUSUU R]S^T]U\\T]S]U RNTLUIUGTFRGPIONO","BbF[N[ RV[^[ RGLIKKKMLNNNU RWLYK[K]L^N^U RNTLUIUGTFRGPIONO R^T\\UYUWTVRWPYO^O","BbHPDP RJUFX RJKFH R^XZU R^HZK R`P\\P RTTRUPUNTMRMQNNPLRKVKTU","=_RKR[B[BKRK RPKTKXMZQZUXYT[P[LYJUJQLMPK","E_JKZKZ[J[JK RRbRD","C_ESUS RQWUSQO RJWJ[Z[ZKJKJO","@dX[^[ RZO^KZG RF[L[XK^K","E_KOYW RR[RK RYOKW RRMONMPLSMVOXRYUXWVXSWPUNRM","E_JSOSR[USZS RPKTKXMZQZUXYT[P[LYJUJQLMPK","E_R[KOYOR[ RPKTKXMZQZUXYT[P[LYJUJQLMPK","E_STJK RJOJKNK RSKTKXMZQZUXYT[P[LYJUJT","D`KNKROR RYRWPTOPOMPKR RNXMVKUIVHXIZK[MZNX RVXWZY[[Z\\X[VYUWVVX","E_I[N[NKVKV[[[","E_I[V[VK RN[NK[K","E_JKZK RJSRKZSR[JS","E_Z[J[ RZSR[JSRKZS","E_JKZK RJSRKZSR[JS RJSZS","E_Z[J[ RZSR[JSRKZS RJSZS","E_JVLV RJPZP RQVSV RXVZV","BbL[FQLGXG^QX[L[","D`IF[F[aIaIF","MWTFQL","AcZSJS RRORK RR[RW RNOJSNW R^[F[FK^K^[","AcJSZS RRWR[ RRKRO RVWZSVO RFK^K^[F[FK","BbLHQHQC RLSLHQCXCXSLS RLKJKHLGNGXHZJ[Z[\\Z]X]N\\LZKXK","BbROJW RZORW RGXGNHLJKZK\\L]N]X\\ZZ[J[HZGX","H\\XDVGUITLSQR[Rb",22,"H\\XbV_U]TZSURKRD","H\\LDNGOIPLQQR[Rb",22,"H\\LbN_O]PZQURKRD","H\\XGRGRb",22,"H\\X_R_RD","H\\LGRGRb",22,"H\\L_R_RD","H\\XDTHSJRNRb","H\\RDRIQMPOLSPWQYR]Rb","H\\XbT^S\\RXRD",22,"H\\LDPHQJRNRb","H\\RDRISMTOXSTWSYR]Rb","H\\LbP^Q\\RXRD",22,"H\\HS\\S","H\\WDSHRKR[Q^Mb","H\\MDQHRKR[S^Wb","E_VbIF\\F","E_VDI`\\`",">fC^CYaYa^",">fCHCMaMaH",">fC^CYaYa^ RaHaMCMCH","IbMTQSS[bB",22,22,"H\\HG\\G","H\\HM\\M","H\\\\YHY","H\\\\_H_","E_UFOFO[","E_U[O[OF","E_PKTKXMZQZUXYT[P[LYJUJQLMPK RRbRD","E_PKTKXMZQZUXYT[P[LYJUJQLMPK RZEJE RRERa","E_PKTKXMZQZUXYT[P[LYJUJQLMPK RJaZa RRaRE","E_RK[[I[RK RRbRD","E_RK[[I[RK RZEJE RRERa","E_RK[[I[RK RJaZa RRaRE","E_JSKRNQQRSTVUYTZS RRbRD","E_JSKRNQQRSTVUYTZS RZEJE RRERa","E_JSKRNQQRSTVUYTZS RJaZa RRaRE","E_JaZa RRaRE","E_ZEJE RRERa","E_OFUFU[","E_O[U[UF","D`TFQL RMKJKJ[Z[ZKWK","E_IWN\\NZZZZKTKTTNTNRIW","E_Z[J[ RJVRKZV",22,"H\\NQNROTQUSUUTVRVQ","H\\NQNROTQUSUUTVRVQ RMKWK","H\\NQNROTQUSUUTVRVQ RW[M[","CaGQGRHTJULUNTOROQ RUQURVTXUZU\\T]R]Q RGK]K","CaGQGRHTJULUNTOROQ RUQURVTXUZU\\T]R]Q R][G[","E_JQJRKTMUOUQTRRRQ RRRSTUUWUYTZRZQ","E_JUZUZP","E_JPJUZUZP","E_RPRU RJPJUZUZP","E_HO\\O RLUXU RRFRO RT[P[","E_HS\\S RJMZMZYJYJM",">fB]C\\FZHYKXPWTWYX\\Y^Za\\b]",">fbIaJ^L\\MYNTOPOKNHMFLCJBI",">fB^B]C[EZOZQYRWSYUZ_Za[b]b^",">fbHbIaK_LULSMROQMOLELCKBIBH",">fB^FY^Yb^",">fbH^MFMBH","E_I[NKVK[[I[","AcRE^L^ZRaFZFLRE RQLSLVMXOYRYTXWVYSZQZNYLWKTKRLONMQL",0,"E_HXMN\\NWXHX","E_JSZS RJSKNLLNKPLQNSXTZV[XZYXZS","E_LMXY RXMLY RPQRPTQUSTURVPUOSPQ",23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,"E_KKK[ RL[LK RMKM[ RN[NK ROKO[ RP[PK RQKQ[ RR[RK RSKS[ RT[TK RUKU[ RV[VK RWKW[ RX[XK RYKY[ RJKZKZ[J[JK","E_JKZKZ[J[JK","E_KLMKWKYLZNZXYZW[M[KZJXJNKL","E_JKZKZ[J[JK RPPPV RQVQP RRPRV RSVSP RTPTV ROVOPUPUVOV","E_JWZW RJSZS RJOZO RJKZKZ[J[JK","E_NKN[ RRKR[ RVKV[ RJKZKZ[J[JK","E_JWZW RJSZS RJOZO RNKN[ RRKR[ RVKV[ RJKZKZ[J[JK","E_JKZ[ RN[JW RT[JQ RZUPK RZOVK RJKZKZ[J[JK","E_J[ZK RJUTK RJONK RP[ZQ RV[ZW RJKZKZ[J[JK","E_J[ZK RJUTK RJONK RJKZ[ RN[JW RP[ZQ RT[JQ RV[ZW RZUPK RZOVK RJKZKZ[J[JK","E_PPPV RQVQP RRPRV RSVSP RTPTV ROVOPUPUVOV","E_OVOPUPUVOV","E_JXTN RJWSN RJVRN RJUQN RJTPN RJSON RJRNN RJQMN RJPLN RJOKN RKXUN RLXVN RMXWN RNXXN ROXYN RPXZN RQXZO RRXZP RSXZQ RTXZR RUXZS RVXZT RWXZU RXXZV RYXZW RJNZNZXJXJN","E_JNZNZXJXJN","E_M[WQ RMZWP RMYWO RMXWN RMWWM RMVWL RMUWK RMTVK RMSUK RMRTK RMQSK RMPRK RMOQK RMNPK RMMOK RMLNK RN[WR RO[WS RP[WT RQ[WU RR[WV RS[WW RT[WX RU[WY RV[WZ RM[MKWKW[M[","E_M[MKWKW[M[","E_NNLP RONKR RPNJT RQNIV RRNHX RSNIX RTNJX RUNKX RVNLX RWNMX RXVVX RXNNX RYTUX RYNOX RZRTX RZNPX R[PSX R[NQX R\\NRX RHXMN\\NWXHX","E_HXMN\\NWXHX","E_JZJ[ RKXK[ RLVL[ RMTM[ RNSN[ ROQO[ RPOP[ RQMQ[ RRKR[ RSMS[ RTOT[ RUQU[ RVSV[ RWTW[ RXVX[ RYXY[ RZ[RLJ[ RZZZ[ RRK[[I[RK","E_RK[[I[RK","E_OUOV RPSPV RQQQV RRORV RSQSV RTSTV RUUUV ROVRPUV RROVVNVRO","E_ROVVNVRO","E_KKK[ RLLLZ RMLMZ RNMNY ROMOY RPNPX RQNQX RRORW RSPSV RTPTV RUQUU RVQVU RWSXS RWRWT RJKYSJ[ RZSJ\\JJZS","E_ZSJ\\JJZS","E_PPPV RQQQU RRQRU RSSUS RSRST ROPUSOV RVSOWOOVS","E_VSOWOOVS","E_KNKX RLNLX RMOMW RNONW ROOOW RPPPV RQPQV RRPRV RSQSU RTQTU RURUT RVRVT RWRWT RXSWS RJNYSJX RZSJYJMZS","E_ZSJYJMZS","E_ZLZK RYNYK RXPXK RWRWK RVSVK RUUUK RTWTK RSYSK RR[RK RQYQK RPWPK ROUOK RNSNK RMRMK RLPLK RKNKK RJKRZZK RJLJK RR[IK[KR[","E_R[IK[KR[","E_UQUP RTSTP RSUSP RRWRP RQUQP RPSPP ROQOP RUPRVOP RRWNPVPRW","E_RWNPVPRW","E_Y[YK RXZXL RWZWL RVYVM RUYUM RTXTN RSXSN RRWRO RQVQP RPVPP ROUOQ RNUNQ RMSLS RMTMR RZ[KSZK RJSZJZ\\JS","E_JSZJZ\\JS","E_TVTP RSUSQ RRURQ RQSOS RQTQR RUVOSUP RNSUOUWNS","E_NSUOUWNS","E_YXYN RXXXN RWWWO RVWVO RUWUO RTVTP RSVSP RRVRP RQUQQ RPUPQ ROTOR RNTNR RMTMR RLSMS RZXKSZN RJSZMZYJS","E_JSZMZYJS","E_JRJT RKUKQ RLPLV RMWMO RNNNX ROYOM RPLPZ RQ[QK RRJR\\ RS[SK RTLTZ RUYUM RVNVX RWWWO RXPXV RYUYQ RZRZT RRJ[SR\\ISRJ","E_RJ[SR\\ISRJ","E_RJ[SR\\ISRJ RPRPT RQUQQ RRPRV RSUSQ RTRTT RRPUSRVOSRP","E_PKTKXMZQZUXYT[P[LYJUJQLMPK RPQPU RQUQQ RRPRV RSUSQ RTQTU RPTRVTT RPRRPTR RPQRPTQUSTURVPUOSPQ","E_RaJSRFZSRa","E_PKTKXMZQZUXYT[P[LYJUJQLMPK","E_JQKO RKWJU RNLPK RP[NZ RTKVL RVZT[ RYOZQ RZUYW","E_NLNZ RRKR[ RVLVZ RPKTKXMZQZUXYT[P[LYJUJQLMPK",47,"E_KOKW RLXP[ RLNPK RLMLY RMYMM RNLNZ ROZOL RPKP[ RQ[QK RRKR[ RS[SK RT[XX RTKT[ RTKXN RUZUL RVLVZ RWYWM RXMXY RYWYO RPKTKXMZQZUXYT[P[LYJUJQLMPK","E_PKTKXMZQZUXYT[P[LYJUJQLMPK RKOKW RLYLM RMMMY RNZNL ROLOZ RP[LX RP[PK RLN RQKQ[ RR[P[LYJUJQLMPKRKR[","E_PKTKXMZQZUXYT[P[LYJUJQLMPK RYWYO RXMXY RWYWM RVLVZ RUZUL RTKXN RTKT[ RXX RS[SK RRKTKXMZQZUXYT[R[RK","E_PKTKXMZQZUXYT[P[LYJUJQLMPK RKOKS RLMLS RMSMM RNLNS ROSOL RPKLN RPKPS RQKQS RRKRS RSKSS RTSTK RXN RULUS RVSVL RWMWS RXMXS RYOYS RJSJQLMPKTKXMZQZSJS","E_PKTKXMZQZUXYT[P[LYJUJQLMPK RYWYS RXYXS RWSWY RVZVS RUSUZ RT[XX RT[TS RS[SS RR[RS RQ[QS RPSP[ RLX ROZOS RNSNZ RMYMS RLYLS RKWKS RZSZUXYT[P[LYJUJSZS","E_SSSK RTKTS RTKXN RUSUL RVLVS RWSWM RXMXS RYSYO RZSRSRK RPKTKXMZQZUXYT[P[LYJUJQLMPK","E_QSQ[ RP[PS RP[LX ROSOZ RNZNS RMSMY RLYLS RKSKW RJSRSR[ RT[P[LYJUJQLMPKTKXMZQZUXYT[ RYWYO RXMXY RWYWM RVLVZ RUZUL RTKXN RTKT[ RXX RS[SK RRKTKXMZQZUXYT[R[RK","E_KOKW RLYLM RMMMY RNZNL ROLOZ RP[LX RP[PK RLN RQKQ[ RR[P[LYJUJQLMPKRKR[","E_YWYO RXMXY RWYWM RVLVZ RUZUL RTKXN RTKT[ RXX RS[SK RRKTKXMZQZUXYT[R[RK","E_FDFb RGbGD RHDHb RIbID RJDJb RKbKD RLbLW RLDLO RMXMb RMNMD RNbNY RNDNM ROZOb ROLOD RPbPZ RPDPL RQZQb RQLQD RRbRZ RRDRL RSZSb RSLSD RTbTZ RTDTL RUZUb RULUD RVbVY RVDVM RWXWb RWNWD RXbXW RXDXO RYbYD RZDZb R[b[D R\\D\\b R]b]D R^D^b R_bEbED_D_b RKTKRLONMQLSLVMXOYRYTXWVYSZQZNYLWKT","E_FRFD RGNIJ RGDGN RHLHD RIDIK RJJJD RJJMG RKDKI RLHLD RMHQF RMDMH RNGND ROPOS RODOG RPSPP RPGPD RQPQS RQDQG RRSRO RRGRD RSPSS RSFWH RSDSG RTSTP RTGTD RUPUS RUDUG RVGVD RWGZJ RWDWH RXHXD RYDYI RZJZD R[J]N R[D[K R\\L\\D R]D]N R^R^D ROQROUQ RNSOPROUPVSNS RFSFRGNIKJJMHQGSGWHZJ[K]N^R^S_S_DEDESFS R^T^b R]X[\\ R]b]X R\\Z\\b R[b[[ RZ\\Zb RZ\\W_ RYbY] RX^Xb RW^S` RWbW^ RV_Vb RUVUS RUbU_ RTSTV RT_Tb RSVSS RSbS_ RRSRW RR_Rb RQVQS RQ`M^ RQbQ_ RPSPV RP_Pb ROVOS RObO_ RN_Nb RM_J\\ RMbM^ RL^Lb RKbK] RJ\\Jb RI\\GX RIbI[ RHZHb RGbGX RFTFb RUURWOU RVSUVRWOVNSVS R^S^T]X[[Z\\W^S_Q_M^J\\I[GXFTFSESEb_b_S^S","E_FRFD RGNIJ RGDGN RHLHD RIDIK RJJJD RJJMG RKDKI RLHLD RMHQF RMDMH RNGND ROPOS RODOG RPSPP RPGPD RQPQS RQDQG RRSRO RRGRD RSPSS RSFWH RSDSG RTSTP RTGTD RUPUS RUDUG RVGVD RWGZJ RWDWH RXHXD RYDYI RZJZD R[J]N R[D[K R\\L\\D R]D]N R^R^D ROQROUQ RNSOPROUPVSNS RFSFRGNIKJJMHQGSGWHZJ[K]N^R^S_S_DEDESFS","E_^T^b R]X[\\ R]b]X R\\Z\\b R[b[[ RZ\\Zb RZ\\W_ RYbY] RX^Xb RW^S` RWbW^ RV_Vb RUVUS RUbU_ RTSTV RT_Tb RSVSS RSbS_ RRSRW RR_Rb RQVQS RQ`M^ RQbQ_ RPSPV RP_Pb ROVOS RObO_ RN_Nb RM_J\\ RMbM^ RL^Lb RKbK] RJ\\Jb RI\\GX RIbI[ RHZHb RGbGX RFTFb RUURWOU RVSUVRWOVNSVS R^S^T]X[[Z\\W^S_Q_M^J\\I[GXFTFSESEb_b_S^S","E_JSJQLMPKRK","E_ZSZQXMTKRK","E_ZSZUXYT[R[","E_JSJULYP[R[","E_JSJQLMPKTKXMZQZS","E_ZSZUXYT[P[LYJUJS","E_KZK[ RLYL[ RMXM[ RNWN[ ROVO[ RPUP[ RQTQ[ RRSR[ RSRS[ RTQT[ RUPU[ RVOV[ RWNW[ RXMX[ RYLY[ RZ[ZKJ[Z[","E_YZY[ RXYX[ RWXW[ RVWV[ RUVU[ RTUT[ RSTS[ RRSR[ RQRQ[ RPQP[ ROPO[ RNON[ RMNM[ RLML[ RKLK[ RJ[JKZ[J[","E_YLYK RXMXK RWNWK RVOVK RUPUK RTQTK RSRSK RRSRK RQTQK RPUPK ROVOK RNWNK RMXMK RLYLK RKZKK RJKJ[ZKJK","E_KLKK RLMLK RMNMK RNONK ROPOK RPQPK RQRQK RRSRK RSTSK RTUTK RUVUK RVWVK RWXWK RXYXK RYZYK RZKZ[JKZK","E_PQRPTQUSTURVPUOSPQ","E_JKZKZ[J[JK RK[KK RLKL[ RM[MK RNKN[ RO[OK RPKP[ RQ[QK RJ[JKRKR[J[","E_JKZKZ[J[JK RYKY[ RX[XK RWKW[ RV[VK RUKU[ RT[TK RSKS[ RZKZ[R[RKZK","E_JKZKZ[J[JK RYLYK RXMXK RWNWK RVOVK RUPUK RTQTK RSRSK RRSRK RQTQK RPUPK ROVOK RNWNK RMXMK RLYLK RKZKK RJKJ[ZKJK","E_JKZKZ[J[JK RKZK[ RLYL[ RMXM[ RNWN[ ROVO[ RPUP[ RQTQ[ RRSR[ RSRS[ RTQT[ RUPU[ RVOV[ RWNW[ RXMX[ RYLY[ RZ[ZKJ[Z[","E_JKZKZ[J[JK RR[RK","E_RK[[I[RK RRUQVRWSVRURW","E_J[RL RJZJ[ RKXK[ RLVL[ RMTM[ RNSN[ ROQO[ RPOP[ RQMQ[ RRKR[ RRK[[I[RK","E_Z[RL RZZZ[ RYXY[ RXVX[ RWTW[ RVSV[ RUQU[ RTOT[ RSMS[ RRKR[ RRKI[[[RK","C`OFTFXHZJ\\N\\SZWXYT[O[KYIWGSGNIJKHOF","E_JKZKZ[J[JK RRKRSJS","E_JKZKZ[J[JK RR[RSJS","E_JKZKZ[J[JK RR[RSZS","E_JKZKZ[J[JK RRKRSZS","E_PKTKXMZQZUXYT[P[LYJUJQLMPK RRKRSJS","E_PKTKXMZQZUXYT[P[LYJUJQLMPK RR[RSJS","E_PKTKXMZQZUXYT[P[LYJUJQLMPK RR[RSZS","E_PKTKXMZQZUXYT[P[LYJUJQLMPK RRKRSZS","E_JKJ[ZKJK","E_ZKZ[JKZK","E_J[JKZ[J[","E_JKZKZ[J[JK","E_KKK[ RL[LK RMKM[ RN[NK ROKO[ RP[PK RQKQ[ RR[RK RSKS[ RT[TK RUKU[ RV[VK RWKW[ RX[XK RYKY[ RJKZKZ[J[JK","E_OVOPUPUVOV","E_PPPV RQVQP RRPRV RSVSP RTPTV ROVOPUPUVOV","E_Z[ZKJ[Z[",23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,48,"PfUUYZ","PfWTYT[V[XYZWZUXUVWT","PfZKXS R^K\\S","PfYFUISMSQUUZXZUXTXRZQ[R[L]N^L^FaIcMcQaU\\X","PfZJYMVQ RYM`M\\T RZR]V","PfbHTWWK^R","PfWG_GcMcS_XWXSSSMWG","PfaD[OaZ","PfUD[OUZ","PfaD[OaZ R^DXO^Z","PfUD[OUZ RXD^OXZ","PfbD^D^R","PfT[X[XO","PfbDbH^H^PZPZDbD","PfT[TWYWYO]O][T[","Pf^DbDaIaOaUbZ^Z^D","PfTDXDX[T[UVUITD","PfUIaI RUNaN R[N[Y","PfUJaJaNUNUJ RURaRaVUVUR","PfbD_H_VbZ","PfTDWHWVTZ","Pf\\DbDaIaOaUbZ\\Z\\D","PfTDZDZ[T[UVUITD","PfbD]F]XbZ R`E`Y","PfTDYFYXTZ RVEVY","PfbD]D][b[ R`D`[","PfTDYDY[T[ RVDV[","PfTOXL^RbO","Pf^EbK RYE]K","PfWDTJ R[DXJ","PfXTTY R]TYY","PfWI_I RWL_L R[L[S RWSXU^U_S RVNXNYPXRVRUPVN R^N`NaP`R^R]P^N RTNRNRSTSVX`XbSdSdNbN","Pf[F[Y","PfXJXU R]F]X","PfVHVX R[J[V R`G`X","PfaK^SUZ RWOaV","PfZHVN]O_R_U]XYXWTWR_M","Pf[M[P RTPbP","Pf[J[M RTMbM RTQbQ","Pf[I[L RTLbL RTPbP RTTbT","PfXLWOTR RWObO R`O_VV[ RVQ[S_Y","PfT\\W\\Y^YaWcTcRaR^T\\","PfTAWAYCYFWHTHRFRCTA","Pf_AbAdCdFbH_H]F]C_A","Pf_\\b\\d^dabc_c]a]^_\\","PfgOjOlQlTjVgVeTeQgO","PfgKjKlMlPjRgRePeMgK RgTjTlVlYj[g[eYeVgT","PfSQVMYQ\\M_QbM","Pf]DWP]Z","Pf]I`L R`HcK R]DWP]Z","Pf_GWY","Pf_MaP RbMdP R_GWY","PfVH_X","PfWG_GcMcS_XWXSSSMWG RWK_K RWO_O R[O[U","PfUFZY R[FUY R\\FaY RaF\\Y","PfULaL R[E[Y","PfTLbL RXEXY R^E^Y","PfTNbN RWGWVUY R[I[V R_H_Y","PfXI^N\\O RXP^U","PfUJaJaWUWUJ RaJUW","PfTLWHZM]JbW","PfTIVI RXIZI R\\I^I R`IbI RbK RbMbO RbQbS RbUbW R`W R^W\\W RZWXW RVWTWTU RTSTQ RTOTM RTKTI RWM[K]N`L RWQ_Q RWT_T R\\PYV","PfUHaHaYUYUH R_JWW RWJ_W",48,"PfVO]O RYLYTZY R\\QXYWYVXVUZR^R`U`W]Z","PfTI^H RYEXPZY R]LZUVZTUXP^NaRaX][","PfVPVWX[ZX R]Q`W","Pf^J`NaS RTHTOUTWZZT","PfZJ]L RWO]N_Q^VZ[","PfXD]F RUM\\J_M_S]XXZ","PfZN]P RXR^RX[ R[W]W][`[","PfYE]H RWL^KV[ RYU]R]Z`Z","PfUQ[Q RXNX[UYUWZT^T`W`Y[[ R]O`R","PfTJ[I RWEWYTWTSZP^QaS`X[Y R^HaL","PfSLZK\\OZZWY RXDTZ R]IaQ","PfSLZK\\OZZWX RXDTY R]H`Q R`JbM RcIeL","PfVI^G RUNaK RYD]SZS RVTVWXY\\Z","PfVI^G RUNaK RYD]SZS RVTVWXY\\Z R_DaG RbCdF","Pf]EXO]Z","Pf]EXO]Z R_IaL RbHdK","PfZLaL RVDUKURUVVYXS R^E_M_S^W\\Z","PfZLaL RVDUKURUVVYXS R^E_M_S^W\\Z RaEcH RdDfG","PfWG^G[J RWPUUWZ`Z","PfWG^G[J RWPUUWZ`Z R`DbG RcCeF","PfTK`I RYE_R[Q RVRVVXY]Z","PfTK`I RYE_R[Q RVRVVXY]Z R_DaG RbCdF","PfWEWVXYZ[][`YaU","PfWEWVXYZ[][`YaU R\\L^O R_KaN","PfSJaJ R]E]S\\WX[ R\\OZMYMWPWRYSZS\\Q","PfSJaJ R]E]S\\WX[ R\\OZMYMWPWRYSZS\\Q R`DbG RcCeF","PfTMbL R^E^S\\R RWGWZ`Z","PfTMbL R^E^S\\R RWGWZ`Z R`EbH RcDeG","PfWF_EXM RTNaL R_M[PYRYU[X^Z","PfWF_EXM RTNaL R_M[PYRYU[X^Z RaDcG RdCfF","PfTI[I RYDTY RZN`N RYSZW\\YaY","PfTI[I RYDTY RZN`N RYT[YaY R_GaJ RbFdI","PfTI^I RXDUSYO]O_R_V\\YX[","PfTI^I RXDUSYO]O_R_V\\YX[ R^E`H RaDcG","PfTO]M`NaR_UYX","PfSL]I`JaMaP`S]VWX","PfSL]I`JaMaP`S]VWX R`EbH RcDeG","PfTIaG R_H[KYPYV[Y^Z","PfTIaG R_H[KYPYV[Y^Z R`CbF RcBeE","Pf_KWQUSUWWZ_Z RWDXIZN","Pf_KWQUSUWWZ_Z RWDXIZN R_GaJ RbFdI","PfTIZI RXDTU R_HbL R]L]X[YXXXT[SaX","PfZHaH RUDTLTRUYWR RZSZW[XaX","PfUGXW R[EXTUXSUTQWK]JaNaV^Z\\ZZW\\TbY","PfWEWZ RTJWJWK RSVZK^IaJbNaU^Y\\YZXZU]TbX","Pf[GWWTTTLVH[F_GbLbRaV\\Y","PfYIaI R^E^YYXYT\\SaW RUETKTQUYVR","PfYIaI R^E^YYXYT\\SaW RUETKTQUYVR R`EbH RcDeG","PfYIaI R^E^YYXYT\\SaW RUETKTQUYVR RbDcDdEdFcGbGaFaEbD","PfSKYGUNUTVXXZ[Y\\W]S^M]GbO","PfSKYGUNUTVXXZ[Y\\W]S^M]GbO R`EbH RcDeG","PfSKYGUNUTVXXZ[Y\\W]S^M]GbO RbEcEdFdGcHbHaGaFbE","PfYE]H RZK[Q]U\\YYYWW RVPTX R_QaW","PfYE]H RZK[Q]U\\YYYWW RVPTX R_QaW R_DaG RbCdF","PfYE]H RZK[Q]U\\YYYWW RVPTX R_QaW R`DaDbEbFaG`G_F_E`D","PfTRYKbS","Pf^J`M RaIcL RTRYKbS","Pf_I`IaJaK`L_L^K^J_I RTRYKbS","PfYF`F RYL`L R^F^ZZYZW\\UbX RUETKTQUZWS","PfYF`F RYL`L R^F^[ZYZW\\UbX RUETKTQUZWS RaCcF RdBfE","PfYF`F RYL`L R^F^[ZYZW\\UbX RUETKTQUZWS RcCdCeDeEdFcFbEbDcC","PfTH`H RVM^M R[D[YXYUWVUZT`W","PfVG\\GZNVXTUTRWP[PbT R_K_Q^U[Y","PfSHYH RWEVVXZ^Z_V_Q RVRUTTTSRSPTNUNVP R]IaN","PfUHYX R[FYVVZSVSRWM[K_MbRaW]Z","PfYDXVYZ[[^[`ZaV`P RTI\\I RUO\\O","PfUR]N`O`Q_S\\T RVL[[ RYK[M","PfSO_KaLbP_S\\S RUG[[ RYE\\H","PfTLTVWP\\MaQaV]YYV R]J]R[[","PfULUXXP[M_MbPbU_W\\WZU R]J]Y[[","Pf[N[ZVYVVYU`X R[Q_Q","Pf[E[[WZUXUVWTaY R[K`J","PfYE]H RXIVUYQ]P`S_XY[","Pf^E^R]VYZ RWEVJVNWQYN","PfWF_EVS[O`OaRaW][Y[XWZU^Y","PfWEWZ RTJXIWJ RSV\\I_I`L_S_YbU","PfXG^FWT[O`OaRaW^YZZ","PfWIWZ RULXLWN RUU[M^MaNaT_W[Y","PfWEWZ RTKXJWL RSVYN[K_KaMbQ`U[Y","PfWG]FWZUUVQZM^NaQaX][ZY[V_X","PfXE^EVN R\\K`M`QZTWRXP[QTY RVWXW[Z R]W_WaY","PfUH^H RZDUSYM[O\\U R`NWUWXZ[_[","Pf[EU[ZQ\\Q^[_[bV","PfXD]F RUM\\J_M_S]XXZ R`FbI RcEeH","PfUO\\N]P\\YYW RYJUY R^LaQ","PfYP`O RUKTQTUVZWW R]L]V\\X[[",48,48,"Pf^E`H RaDcG","PfaDbDcEcFbGaG`F`EaD","PfSEUH RVDXG","PfTDUDVEVFUGTGSFSETD","PfYI`P\\R","PfYI`P\\R R^G`J RaFcI","PfZJ`J R[EUW RXP^P`S_X\\[YZ","PfTLbL RTTbT","PfVK`K_N]Q R[N[RZUXX","PfTGbGaI_L\\N RZJZQZSYVW[","Pf[P[Z R^J\\NYQVS","Pf[L[[ R`E^H[LWOTQ","PfZHZL RVOVL_L_O^S]U[WXY","Pf[D[H RUOUHaH`N_Q]U[XWZ","PfWL_L R[L[W RVW`W","PfUIaI RTWbW R[I[W","PfWO`O R]K]Z[Y R\\O[RYUVX","PfUKbK R^D^Z[Y R]K[PXSTW","PfUJaJ`Y]W RZCZJZOYSWVUY","PfUJaJ`Y]W RZCZJZOYSWVUY R_EaH RaCcF","PfVL^J RUSaP RYD]Z","Pf]E_G R`DbF RVL^J RUSaP RYD]Z","PfZDYIWLUP RZH`H`L_P]T[WWZ","PfZDYIWLUO RZGaG`L_P]T[WWZ R`DbF RcCeE","PfWKbK RXDWHUMTP R]K]P\\SZVWZ","PfWKbK RXDWHUMTQ R]K]P\\SZVWZ R^G`I RaFcH","PfUIaIaWUW","Pf`FbH RcEeG RUIaIaWUW","PfTKbK RWEWR R_D_K_O^S]U[XYZ","PfTKbK RWEWR R_D_K_O^S]U[XYZ RaDbF RdCeE","PfWFZI RULXO RUYZW]U_SbK","PfWFZI RULXO RUYZW]U_SbK R_GaI RbFdH","PfUF^F]L[PYSWVTY R[Q]T`Y","PfUF^F]L[OYSWVTY R[Q]T`Y R`EbG RcDeF","PfULbJ^R RYEYXaX","Pf_EaG RbDdF RULbJ^R RYDYXaX","PfUFWL R`F`L_P^S\\VWY","PfaG`L_P^T\\WXZ RaDcF RdCfE RUGWM","PfXL]R RYDXHWLUP RYH`H_L^P]T[WXZ","PfXL]R RYDXHWLUP RYH`H_L^P]T[WXZ R`EbG RcDeF","PfTNbN R_E]FZGVH R\\G\\M[QZUYWVZ","PfTNbN R_E]FZGVH R\\G\\M[QZUYWWZ R`DbF RcCeE","PfULWQ RZK[P R`L`Q_T\\WYY","PfUGWN RYF[L R`G`M_Q]U[WXY","PfUGWN RYF[L R`G`M_Q]U[WXY RaEcG RdDfF","PfWG_G RTMbM R[M[RYVVZ","Pf`EbG RcDeF RWG_G RTMbM R[M[RYVVZ","Pf[D[Z R[MaR","Pf_KaM RbJdL R[D[Z R[MaR","PfTLbL R[D[K[QZTXWVZ","PfUKaK RSWcW","PfXM_W RWF`F_L^P\\UZWVZ","PfYD]G R[P[[ R]QaU RVH`H^L\\OYRTU","Pf_F^L]QZUVY","Pf^JbV RYJXOVSTV","Pf^JbV RYJXOVSTV R_HaJ RbGdI","Pf^JbV RYJXOVSTV R`GaGbHbIaJ`J_I_H`G","PfUFUYaY R`J\\MYNVO","PfUFUYaY R`J\\MYNVO R`HbJ RcGeI","PfUFUYaY R`J\\MYNVO RaFbFcGcHbIaI`H`GaF","PfUH`H`M_R]UZWVY","PfUH`H`M_R]UZWVY RaFcH RdEfG","PfUH`H`M_R]UZWVY RbEcEdFdGcHbHaGaFbE","PfTRYJbV","Pf]K_M R`JbL RTRYJbV","Pf_K`KaLaM`N_N^M^L_K RTRYJbV","PfUKaK R[E[ZXY R^OaW RWOVRUTTW","PfUKaK R[E[ZXY R^OaW RWOVRUTTW R`GbI RcFeH","PfUKaK R[E[ZXY R^OaW RWOVRUTTW RaFbFcGcHbIaI`H`GaF","PfTJaJ_N]Q[S RWPZS[U]X","PfWFaJ RWM_P RUT`Y","Pf[FUY_W R]PaZ","Pf`E_J]OZSXUTX RXKZM]Q`U","PfVG`G RSOcO RZGZY`Y","PfUOaL^R RXI[Z","PfXE[Z RTMaI`L_O^Q","PfXL^L^V RVVaV","PfVI`I_W RSWcW","PfWL_L_XWX RWR_R","PfUHaHaXUX RUPaP","PfVG`G RTLaLaQ_T\\WXZ","PfXEXP R_E_M_Q]U\\WYZ","PfWGWOVSUVTY R[E[Y]W_TaP","PfWEWX[W^U`SbO","PfUHUV RUHaHaVUV","PfVPVJ`J_P]UYZ","PfUGUN RaG`M_Q^U\\XYZ RUGaG","PfWJbJ RWJWS RSScS R]D]Z","PfVIaI]P R[L[W RSWcW","PfVM`M RUF`F`L`O_S]VZXVZ","PfUHYL RUXZW]T_QaJ","Pf[D[H RUOUHaH`N_Q]U[XWZ RaEcG RdDfF","PfWM_M^Y\\X R[IZNYSWX","PfYMaM RYIXMWPUS R_M^Q]T\\WZZ","PfaEcG RdDfF RUGUN RaG`N`Q^U\\WYZ RUGaG","Pf`GbI RcFeH RWJbJ RWJWS RSScS R]D]Z","Pf`FbH RcEeG RVIaI]P R[L[W RSWcW","PfVM`M RUF`F`L`O_S]VZXVZ RaEcG RdDfF","PfZP\\P]Q]S\\TZTYSYQZP","PfSPcP","PfWK^U","Pf\\M^O R_KaM RWK^U","PfVF`F`Y",23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,"PoROlO","PoRFlF RX[`[ R`F`[","PoRFlF R^[e[ RZFVQ RWNiNfZ","Po\\D\\[j[jW RSOkK","PoR[l[ R_D_[","PoRFlF R_F_[","PoRGlG R[UU[ R^LYW R_G\\T","PoRFlF R\\F[PXVT[ R\\NiMiTg[`[","PoRIlI RWLZS^WcYj[ RbDbLaT\\XYZS[","PoTFjF RVPhP RR[l[","Po^MjM RR[l[ R^D^[","PoRElE R^E^[ R^KjQ","PoSGlG RfFf[ RXVR[ RYFYPXV","PoRElE R`H`[ RaGXPRS RaLiOlS","PoYHiH RRTlT R\\[d[ RYCWNgNeZ","PoRElE RURjR Rb[h[ RUJUU R_E_R R_KkKjRi[","PoRElE R_KjK Rb[i[ R_E_P RUQlQi[ RVITR","PoROlO RR[l[ R[FZNX[ RUFgFf[","PoaXhX RR[l[ R`PcT RXUSW R^NVV RVK`P RaH^O RTFkFkNiX","PoTGjG RRLlL ReS`X RYQhQbW R^C\\JXQ RYWeZ","PoWLgL RWTgT RR[l[ RWEW[ RWEgEg[","PoSFkF RR[l[ R`I`Y RcMfOkS RaF`IXQRS","PoRJlJ R_RgR RWYkY RWDW[ R_C_T RgDgT","PoRKlK RWYgY RWCW[ R_C_Y RgCg[","PoWNkN RR[l[ RWGW[ RdNd[ RhEWG","PoRElE Re[j[ RSKS[ RSKkKk[ R_F^PZUVV R^NgV","PoR[l[ R[D[[ RcDc[ RTKXS RjKfS","PoR[l[ RhTlX RaT\\X RYL\\O^T ReMiV RXOTW RcN_W RdHgS RYEWS RdDbR","PoRGlG RUPjP R[[`[ R`K`[ ReSlY RYKUO RXTRZ R\\CYL","Po`VkV RTV]V RR[l[ RkJgN RbJ`NhN`V R]J\\N RVKTO[OTV RZDVM RfDbL","PoYX_X RS[k[ R_J_X RVEgEdG_J RRL[LXQSV RjJgMbN R`JbOgTlV","PoSEkE RUJiJ RRPlP RZZjZ RXZhZ RRZeZ R_E_P ReTl[ R[PWZ"];var Wt=class i extends Jo{static{a(this,"StrokeFont")}static{this.overbar_position_factor=1.4}static{this.underline_position_factor=-.16}static{this.font_scale=1/21}static{this.font_offset=-10}static default(){return this.instance||(this.instance=new i),this.instance}#e=new Map;#t=[];constructor(){super("stroke"),this.#i()}#i(){for(let e of BR)this.#t.push(zR(e));for(let e=0;e<256;e++)this.#n(e)}#n(e){let t=Wu[e];if(Vn(t))this.#e.set(e,zR(t));else if(Li(t)){let n=this.#t[t];this.#e.set(e,n)}else throw new Error(`Invalid glyph data for glyph ${e}: ${t}`);Wu[e]=void 0}get_glyph(e){let t=Cu(e)-Cu(" ");return t<0||t>Wu.length?this.get_glyph("?"):(this.#e.has(t)||this.#n(t),this.#e.get(t))}get_line_extents(e,t,n,r,s){let o=super.get_line_extents(e,t,n,r,s),l=n*1.25*2;return o.x+=l,o.y+=l,o}compute_underline_vertical_position(e){return e*i.underline_position_factor}compute_overbar_vertical_position(e){return e*i.overbar_position_factor}get_interline(e,t=1){return e*t*i.interline_pitch_ratio}get_text_as_glyphs(e,t,n,r,s,o,l){let _=[],M=n.copy(),g=t.copy(),R=l.italic?i.italic_tilt:0;(l.subscript||l.superscript)&&(g=g.multiply(.7),l.subscript?M.y+=g.y*.3:M.y-=g.y*.5);for(let W of e)switch(W){case"	":{let F=Math.round(g.x*3.28),ee=(M.x-o.x)%F;M.x+=F-ee}break;case" ":M.x+=Math.round(g.x*.6);break;default:{let F=this.get_glyph(W),ee=F.bbox.end.multiply(g);_.push(F.transform(g,M,R,r,s,o)),R&&(ee.x-=ee.y*R),M.x+=Math.round(ee.x)}break}let y=!1,b=new A(0,0),S=g.x*.1;if(l.overbar?(y=!0,b.y=this.compute_overbar_vertical_position(g.y)):l.underline&&(y=!0,b.y=this.compute_underline_vertical_position(g.y)),y){l.italic&&(b.x=b.y*i.italic_tilt);let W=new A(n.x+b.x+S,M.y-b.y),F=new A(M.x+b.x-S,M.y-b.y),ee=new nc([[W,F]],je.from_points([W,F]));_.push(ee.transform(new A(1,1),new A(0,0),0,r,s,o))}let C=new je;return C.start=n,C.end=new A(M.x+b.x-Math.round(g.x*.2),M.y+Math.max(g.y,b.y*i.overbar_position_factor)),{bbox:C,glyphs:_,cursor:new A(M.x,n.y)}}};function Cu(i){return i.charCodeAt(0)}a(Cu,"ord");function JR(i){return Cu(i)-Cu("R")}a(JR,"decode_coord_val");function $S(i){return[JR(i[0]),JR(i[1])]}a($S,"decode_coord");function zR(i){let e=0,t=0,n=0,r=0,s=0,o=[],l=null;for(let h=0;h<i.length;h+=2){let d=[i[h],i[h+1]],f=$S(d);if(h<2)e=f[0]*Wt.font_scale,t=f[1]*Wt.font_scale,n=t-e;else if(d[0]==" "&&d[1]=="R")l=null;else{let m=new A(f[0]*Wt.font_scale-e,(f[1]+Wt.font_offset)*Wt.font_scale);l==null&&(l=[],o.push(l)),r=Math.min(r,m.y),s=Math.max(s,m.y),l.push(m)}}let c=new je(0,r,n,s-r);return new nc(o,c)}a(zR,"decode_glyph");var En=class{constructor(e){this.text_pos=new A(0,0);this.attributes=new Fu;this.text=e}static{a(this,"EDAText")}apply_effects(e){this.attributes.h_align=e.justify.horizontal,this.attributes.v_align=e.justify.vertical,this.attributes.mirrored=e.justify.mirror,this.attributes.italic=e.font.italic,this.attributes.bold=e.font.bold,this.attributes.size.set(e.font.size.multiply(1e4)),this.attributes.stroke_width=(e.font.thickness??0)*1e4,this.attributes.stroke_width=this.get_effective_text_thickness(1588),this.attributes.color=e.font.color}apply_at(e){this.text_pos=e.position.multiply(1e4),this.text_angle=Ve.from_degrees(e.rotation)}get shown_text(){return this.text}get_effective_text_thickness(e){let t=this.text_thickness;return t<1&&(t=e??0,this.bold?t=jS(this.text_width):t<=1&&(t=qS(this.text_width))),t=eT(t,this.text_width,!0),t}get text_angle(){return this.attributes.angle}set text_angle(e){this.attributes.angle=e}get italic(){return this.attributes.italic}get bold(){return this.attributes.bold}get visible(){return this.attributes.visible}get mirrored(){return this.attributes.mirrored}get multiline(){return this.attributes.multiline}get h_align(){return this.attributes.h_align}set h_align(e){this.attributes.h_align=e}get v_align(){return this.attributes.v_align}set v_align(e){this.attributes.v_align=e}get line_spacing(){return this.attributes.line_spacing}get text_size(){return this.attributes.size}get text_width(){return this.attributes.size.x}get text_height(){return this.attributes.size.y}get text_color(){return this.attributes.color}get keep_upright(){return this.attributes.keep_upright}get text_thickness(){return this.attributes.stroke_width}get_text_box(e,t){let n=this.text_pos.copy(),r=new je(0,0,0,0),s=[],o=this.shown_text,l=this.get_effective_text_thickness();this.multiline&&(s=o.split(`
`),s.length&&(e!=null&&e<s.length?o=s[e]:o=s[0]));let c=Wt.default(),u=this.text_size.copy(),h=this.bold,d=this.italic,f=c.get_line_extents(o,u,l,h,d),m=0,_=f.copy();if(this.multiline&&e&&e<s.length&&(n.y-=Math.round(e*c.get_interline(u.y))),o.includes("~{")&&(m=f.y/14),t&&(n.y=-n.y),r.start=n,this.multiline&&!e&&s.length){for(let g of s.slice(1))f=c.get_line_extents(g,u,l,h,d),_.x=Math.max(_.x,f.x);_.y+=Math.round((s.length-1)*c.get_interline(u.y))}r.w=_.x,r.h=_.y;let M=this.italic?Math.round(u.y*Jo.italic_tilt):0;switch(this.h_align){case"left":this.mirrored&&(r.x=r.x-(r.w-M));break;case"center":r.x=r.x-(r.w-M)/2;break;case"right":this.mirrored||(r.x=r.x-(r.w-M));break}switch(this.v_align){case"top":break;case"center":r.y=r.y-(r.h+m)/2;break;case"bottom":r.y=r.y-(r.h+m);break}return r}};function jS(i){return Math.round(i/5)}a(jS,"get_bold_thickness");function qS(i){return Math.round(i/8)}a(qS,"get_normal_thickness");function eT(i,e,t){let n=Math.round(e*(t?.25:.18));return Math.min(i,n)}a(eT,"clamp_thickness");var Zu=class extends En{static{a(this,"LibText")}constructor(e){super(e)}get shown_text(){return this.text}get bounding_box(){let e=this.get_text_box(void 0,!0).mirror_vertical(),t=this.text_pos,n=e.start,r=e.end,s=this.text_angle.negative();return n=s.rotate_point(n,t),r=s.rotate_point(r,t),e=je.from_points([n,r]),e=e.mirror_vertical(),e}get world_pos(){let e=this.bounding_box,t=e.center;if(this.attributes.angle.is_vertical)switch(this.attributes.h_align){case"left":t.y=e.y2;break;case"center":t.y=(e.y+e.y2)/2;break;case"right":t.y=e.y;break}else switch(this.attributes.h_align){case"left":t.x=e.x;break;case"center":t.x=(e.x+e.x2)/2;break;case"right":t.x=e.x2;break}return t}apply_symbol_transformations(e){for(let t=0;t<e.rotations;t++)this.rotate(new A(0,0),!0);e.mirror_x&&this.mirror_vertically(new A(0,0)),e.mirror_y&&this.mirror_horizontally(new A(0,0)),this.text_pos=this.text_pos.add(e.position.multiply(new A(1e4,-1e4)))}normalize_justification(e){let t=new A(0,0),n=this.get_text_box();this.text_angle.is_horizontal?(this.h_align=="left"?t.x=n.w/2:this.h_align=="right"&&(t.x=-(n.w/2)),this.v_align=="top"?t.y=-(n.h/2):this.v_align=="bottom"&&(t.y=n.h/2)):(this.h_align=="left"?t.y=n.w/2:this.h_align=="right"&&(t.y=-(n.w/2)),this.v_align=="top"?t.x=n.h/2:this.v_align=="bottom"&&(t.x=-(n.h/2))),e&&(t=t.multiply(-1)),this.text_pos=this.text_pos.add(t)}rotate(e,t=!1){this.normalize_justification(!1);let n=Ve.from_degrees(t?-90:90);this.text_pos=n.rotate_point(this.text_pos,e),this.text_angle.is_horizontal?this.text_angle.degrees=90:(this.h_align=zo(this.h_align,"left","right"),this.v_align=zo(this.v_align,"top","bottom"),this.text_angle.degrees=0),this.normalize_justification(!0)}mirror_horizontally(e){this.normalize_justification(!1);let t=this.text_pos.x;t-=e.x,t*=-1,t+=e.x,this.text_angle.is_horizontal?this.h_align=zo(this.h_align,"left","right"):this.v_align=zo(this.v_align,"top","bottom"),this.text_pos.x=t,this.normalize_justification(!0)}mirror_vertically(e){this.normalize_justification(!1);let t=this.text_pos.y;t-=e.y,t*=-1,t+=e.y,this.text_angle.is_horizontal?this.v_align=zo(this.v_align,"top","bottom"):this.h_align=zo(this.h_align,"left","right"),this.text_pos.y=t,this.normalize_justification(!0)}};function zo(i,e,t){return i==e?t:i==t?e:i}a(zo,"swap_values");var ku=class extends En{constructor(t,n){super(t);this.parent=n}static{a(this,"SchField")}get shown_text(){return this.text=="~"?"":this.text}get draw_rotation(){let t=this.text_angle.degrees,n=this.parent?.transform??dt.identity();return Math.abs(n.elements[1])==1&&(t==0||t==180?t=90:t=0),Ve.from_degrees(t)}get position(){if(this.parent){let t=this.text_pos.sub(this.parent.position);return t=this.parent.transform.transform(t),t.add(this.parent.position)}return this.text_pos}get bounding_box(){let t=this.get_text_box();if(!this.parent?.is_symbol)return t;let n=this.parent?.position??new A(0,0),r=this.text_pos.sub(n),s=t.start.sub(n),o=t.end.sub(n);s=this.text_angle.rotate_point(s,r),o=this.text_angle.rotate_point(o,r),s.y=$R(s.y,r.y),o.y=$R(o.y,r.y);let l=this.parent?.transform??dt.identity();return t.start=l.transform(s),t.end=l.transform(o),t.start=t.start.add(n),t}};function $R(i,e=0){return-(i-e)+e}a($R,"mirror");var $o=class extends En{static{a(this,"SchText")}constructor(e){super(e)}apply_at(e){super.apply_at(e),this.set_spin_style_from_angle(this.text_angle)}set_spin_style_from_angle(e){switch(e.degrees){default:case 0:this.text_angle.degrees=0,this.h_align="left";break;case 90:this.text_angle.degrees=90,this.h_align="left";break;case 180:this.text_angle.degrees=0,this.h_align="right";break;case 270:this.text_angle.degrees=90,this.h_align="right";break}this.v_align="bottom"}get shown_text(){return this.text}};var jo=new Ai("kicanvas:project"),qo=class{constructor(e,t){this.view_painter=e;this.gfx=t}static{a(this,"ItemPainter")}get theme(){return this.view_painter.theme}},ea=class{constructor(e,t,n){this.gfx=e;this.layers=t;this.theme=n}static{a(this,"DocumentPainter")}#e=new Map;set painter_list(e){for(let t of e)for(let n of t.classes)this.#e.set(n,t)}get painters(){return this.#e}paint(e){jo.debug("Painting"),jo.debug("Sorting paintable items into layers");for(let t of e.items()){let n=this.painter_for(t);if(!n){jo.warn(`No painter found for ${t?.constructor.name}`);continue}for(let r of n.layers_for(t))this.layers.by_name(r)?.items.push(t)}for(let t of this.paintable_layers())jo.debug(`Painting layer ${t.name} with ${t.items.length} items`),this.paint_layer(t);jo.debug("Painting complete")}*paintable_layers(){yield*this.layers.in_display_order()}paint_layer(e){let t=new Map;this.gfx.start_layer(e.name);for(let n of e.items){this.gfx.start_bbox(),this.paint_item(e,n);let r=this.gfx.end_bbox(n);t.set(n,r)}e.graphics=this.gfx.end_layer(),e.bboxes=t}paint_item(e,t,...n){let r=this.painter_for(t);r||jo.error(`Cannot find painter  for ${JSON.stringify(t)}`),r?.paint(e,t,...n)}painter_for(e){return this.painters.get(e.constructor)}layers_for(e){return this.painters.get(e.constructor)?.layers_for(e)||[]}};var Xu=class extends ea{static{a(this,"BaseSchematicPainter")}},Et=class extends qo{static{a(this,"SchematicItemPainter")}get theme(){return this.view_painter.theme}get is_dimmed(){return this.view_painter.current_symbol?.dnp??!1}dim_color(t){return t=t.desaturate(),t.mix(this.theme.background,.5)}dim_if_needed(t){return this.is_dimmed?this.dim_color(t):t}determine_stroke(t,n){let r=n.stroke?.width||this.gfx.state.stroke_width;if(r<0)return{width:0,color:null};if((n.stroke?.type??"none")=="none")return{width:0,color:null};let o=t.name==":Symbol:Foreground"?this.theme.component_outline:this.theme.note,l=this.dim_if_needed(n.stroke?.color??o);return{width:r,color:l}}determine_fill(t,n){let r=n.fill?.type??"none";if(r=="none"||r=="background"&&t.name!=":Symbol:Background")return null;let s;switch(r){case"background":s=this.theme.component_body;break;case"outline":s=this.theme.component_outline;break;case"color":s=n.fill.color;break}return this.dim_if_needed(s)}};var rc=class extends Et{constructor(){super(...arguments);this.classes=[]}static{a(this,"LabelPainter")}layers_for(t){return[":Label"]}paint(t,n){if(n.effects.hide)return;let r=new $o(n.shown_text);r.apply_at(n.at),r.apply_effects(n.effects),this.after_apply(n,r),n.at.rotation==0||n.at.rotation==180?r.text_angle.degrees=0:(n.at.rotation==90||n.at.rotation==270)&&(r.text_angle.degrees=90);let s=r.text_pos.add(this.get_schematic_text_offset(n,r));this.gfx.state.push(),this.gfx.state.stroke=this.color,this.gfx.state.fill=this.color,Wt.default().draw(this.gfx,r.shown_text,s,r.attributes);let o=this.create_shape(n,r);o&&this.gfx.line(o,r.attributes.stroke_width/1e4),this.gfx.state.pop()}create_shape(t,n){return[]}get color(){return new w(1,0,1,1)}after_apply(t,n){}get_text_offset(t){return Math.round(Jt.text_offset_ratio*t.text_size.x)}get_box_expansion(t){return Math.round(Jt.label_size_ratio*t.text_size.y)}get_schematic_text_offset(t,n){let r=Math.round(this.get_text_offset(n)+n.get_effective_text_thickness());return n.text_angle.is_vertical?new A(-r,0):new A(0,-r)}},Hu=class extends rc{constructor(){super(...arguments);this.classes=[Xl]}static{a(this,"NetLabelPainter")}get color(){return this.theme.label_local}},Gu=class extends rc{constructor(){super(...arguments);this.classes=[Hl]}static{a(this,"GlobalLabelPainter")}get color(){return this.theme.label_global}get_schematic_text_offset(t,n){let r=t,s=n.text_size.y,o=this.get_box_expansion(n),l=s*.0715;switch(["input","bidirectional","tri_state"].includes(r.shape)&&(o+=s*.75),o=Math.round(o),l=Math.round(l),t.at.rotation){case 0:return new A(o,l);case 90:return new A(l,-o);case 180:return new A(-o,l);case 270:return new A(l,o);default:throw new Error(`Unexpected label rotation ${t.at.rotation}`)}}create_shape(t,n){let r=t,s=n.text_pos,o=Ve.from_degrees(t.at.rotation+180),l=n.text_size.y,c=this.get_box_expansion(n),u=l/2+c,h=n.get_text_box().w+2*c,d=n.attributes.stroke_width,f=h+d+3,m=u+d+3,_=[new A(0,0),new A(0,-m),new A(-f,-m),new A(-f,0),new A(-f,m),new A(0,m),new A(0,0)],M=new A;switch(r.shape){case"input":M.x=-u,_[0].x+=u,_[6].x+=u;break;case"output":_[3].x-=u;break;case"bidirectional":case"tri_state":M.x=-u,_[0].x+=u,_[6].x+=u,_[3].x-=u;break;default:break}return _=_.map(g=>g.add(M).rotate(o).add(s).multiply(1/1e4)),_}},Du=class extends rc{constructor(){super(...arguments);this.classes=[Hs]}static{a(this,"HierarchicalLabelPainter")}get color(){return this.theme.label_hier}after_apply(t,n){n.v_align="center"}get_schematic_text_offset(t,n){let r=Math.round(this.get_text_offset(n)+n.text_width);switch(t.at.rotation){case 0:return new A(r,0);case 90:return new A(0,-r);case 180:return new A(-r,0);case 270:return new A(0,r);default:throw new Error(`Unexpected label rotation ${t.at.rotation}`)}}create_shape(t,n){let r=n.text_pos,s=Ve.from_degrees(t.at.rotation),o=n.text_width,l;switch(t.shape){case"output":l=[new A(0,o/2),new A(o/2,o/2),new A(o,0),new A(o/2,-o/2),new A(0,-o/2),new A(0,o/2)];break;case"input":l=[new A(o,o/2),new A(o/2,o/2),new A(0,0),new A(o/2,-o/2),new A(o,-o/2),new A(o,o/2)];break;case"bidirectional":case"tri_state":l=[new A(o/2,o/2),new A(o,0),new A(o/2,-o/2),new A(0,0),new A(o/2,o/2)];break;case"passive":default:l=[new A(0,o/2),new A(o,o/2),new A(o,-o/2),new A(0,-o/2),new A(0,o/2)];break}return l=l.map(c=>c.rotate(s).add(r).multiply(1/1e4)),l}};var Yu=class i extends Et{constructor(){super(...arguments);this.classes=[Lo]}static{a(this,"LibSymbolPinPainter")}layers_for(t){return[":Symbol:Pin",":Symbol:Foreground",":Interactive"]}paint(t,n){if(n.definition.hide)return;let r={pin:n,def:n.definition,position:n.definition.at.position.copy(),orientation:tT(n.definition.at.rotation)},s=this.view_painter.current_symbol_transform,o=this.dim_if_needed(this.theme.pin);i.apply_symbol_transformations(r,s),this.gfx.state.push(),this.gfx.state.matrix=dt.identity(),this.gfx.state.stroke=n.highlighted?n.highlightColor:o,this.gfx.state.fill=n.highlighted?n.highlightColor:o,this.draw_pin_shape(this.gfx,r),this.draw_name_and_number(this.gfx,r),this.gfx.state.pop()}static apply_symbol_transformations(t,n){}static rotate(t,n,r=!1){let s=Ve.from_degrees(r?-90:90);if(t.position=s.rotate_point(t.position,n),r)switch(t.orientation){case"right":t.orientation="up";break;case"up":t.orientation="left";break;case"left":t.orientation="down";break;case"down":t.orientation="right";break}else switch(t.orientation){case"right":t.orientation="down";break;case"down":t.orientation="left";break;case"left":t.orientation="up";break;case"up":t.orientation="right";break}}static mirror_horizontally(t,n){t.position.x-=n.x,t.position.x*=-1,t.position.x+=n.x,t.orientation=="right"?t.orientation="left":t.orientation=="left"&&(t.orientation="right")}static mirror_vertically(t,n){t.position.y-=n.y,t.position.y*=-1,t.position.y+=n.y,t.orientation=="up"?t.orientation="down":t.orientation=="down"&&(t.orientation="up")}draw_pin_shape(t,n){let{p0:r,dir:s}=jR.stem(n.position,n.orientation,n.def.length);jR.draw(t,n.def.type,n.def.shape,n.position,r,s,n.orientation,n.def.length)}draw_name_and_number(t,n){let r=n.def,s=n.pin.parent,o=r.name.text,l=r.number.text,c=r.length,u=s.pin_names.hide||!o||o=="~",h=s.pin_numbers.hide||!l||l=="~",d=Jt.line_width,f=s.pin_names.offset,m=.6096*Jt.text_offset_ratio,_=r.number.effects.font.thickness||d,M=r.number.effects.font.thickness||d,g,R;f>0?(g=u?void 0:sc.place_inside(f,M,c,n.orientation),R=h?void 0:sc.place_above(m,d,_,c,n.orientation)):(g=u?void 0:sc.place_above(m,d,M,c,n.orientation),R=h?void 0:sc.place_below(m,d,M,c,n.orientation)),R&&sc.draw(t,l,n.position,R,r.number.effects,t.state.stroke)}};function tT(i){switch(i){case 0:return"right";case 90:return"up";case 180:return"left";case 270:return"down";default:throw new Error(`Unexpected pin angle ${i}`)}}a(tT,"angle_to_orientation");var jR={stem(i,e,t){let n=new A,r=new A;switch(e){case"up":n.set(i.x,i.y-t),r.set(0,1);break;case"down":n.set(i.x,i.y+t),r.set(0,-1);break;case"left":n.set(i.x-t,i.y),r.set(1,0);break;case"right":n.set(i.x+t,i.y),r.set(-1,0);break}return{p0:n,dir:r}},draw(i,e,t,n,r,s,o,l){let c=Jt.pinsymbol_size,u=c*2,h=Jt.target_pin_radius;if(e=="no_connect"){i.line([r,n]),i.line([n.add(new A(-h,-h)),n.add(new A(h,h))]),i.line([n.add(new A(h,-h)),n.add(new A(-h,h))]);return}let d=a(()=>{s.y?i.line([r.add(new A(c,0)),r.add(new A(0,-s.y*c)),r.add(new A(-c,0))]):i.line([r.add(new A(0,c)),r.add(new A(-s.x*c,0)),r.add(new A(0,-c))])},"clock_notch"),f=a(()=>{s.y?i.line([r.add(new A(0,s.y).multiply(u)),r.add(new A(-1,s.y).multiply(u)),r]):i.line([r.add(new A(s.x,0).multiply(u)),r.add(new A(s.x,-1).multiply(u)),r])},"low_in_tri");switch(t){case"line":switch(o){case"down":i.circle(n,.5),i.line([n,new A(n.x,n.y-l)]);break;case"up":i.circle(n,.5),i.line([n,new A(n.x,n.y+l)]);break;case"left":case"right":i.circle(new A(n.x-.5,n.y),.5),i.line([r,n]);break}return;case"inverted":i.arc(r.add(s.multiply(c)),c),i.line([r.add(s.multiply(u)),n]);return;case"inverted_clock":i.arc(r.add(s.multiply(c)),c),i.line([r.add(s.multiply(u)),n]),d();return;case"clock":i.line([r,n]),d();return;case"clock_low":case"edge_clock_high":i.line([r,n]),d(),f();break;case"input_low":i.line([r,n]),f();break;case"output_low":i.line([r,n]),s.y?i.line([r.sub(new A(u,0)),r.add(new A(0,s.y*u))]):i.line([r.sub(new A(0,u)),r.add(new A(s.x*u,0))]);break;case"non_logic":i.line([r,n]),i.line([r.sub(new A(s.x+s.y,s.y-s.x).multiply(c)),r.add(new A(s.x+s.y,s.y-s.x).multiply(c))]),i.line([r.sub(new A(s.x-s.y,s.y+s.x).multiply(c)),r.add(new A(s.x-s.y,s.y+s.x).multiply(c))]);break}}},sc={orient_label(i,e,t,n){switch(e){case"right":break;case"left":i.x*=-1,t=="left"&&(t="right");break;case"up":i=new A(i.y,-i.x);break;case"down":i=new A(i.y,i.x),t=="left"&&(t="right");break}return{offset:i,h_align:t,v_align:n,orientation:e}},place_inside(i,e,t,n){let r=new A(i-e/2+t,0);return this.orient_label(r,n,"left","center")},place_above(i,e,t,n,r){let s=new A(n/2,-(i+e/2+t/2));return this.orient_label(s,r,"center","bottom")},place_below(i,e,t,n,r){let s=new A(n/2,i+e/2+t/2);return this.orient_label(s,r,"center","top")},draw(i,e,t,n,r,s){let o=new En(e);switch(o.apply_effects(r),o.attributes.h_align=n.h_align,o.attributes.v_align=n.v_align,o.attributes.color=s,o.text_pos=t.add(n.offset).multiply(1e4),n.orientation){case"up":case"down":o.text_angle=Ve.from_degrees(90);break;case"left":case"right":o.text_angle=Ve.from_degrees(0);break}Wt.default().draw(i,o.shown_text,o.text_pos,o.attributes)}};var Ku=class i extends Et{constructor(){super(...arguments);this.classes=[Gl]}static{a(this,"PinPainter")}layers_for(t){return[":Symbol:Pin",":Symbol:Foreground",":Interactive"]}paint(t,n){if(n.definition.hide)return;let r={pin:n,def:n.definition,position:n.definition.at.position.copy(),orientation:nT(n.definition.at.rotation)},s=this.view_painter.current_symbol_transform,o=this.dim_if_needed(this.theme.pin);i.apply_symbol_transformations(r,s),this.gfx.state.push(),this.gfx.state.matrix=dt.identity(),this.gfx.state.stroke=o,(t.name==":Symbol:Pin"||t.name==":Interactive")&&this.draw_pin_shape(this.gfx,r),t.name==":Symbol:Foreground"&&this.draw_name_and_number(this.gfx,r),this.gfx.state.pop()}static apply_symbol_transformations(t,n){for(let s=0;s<n.rotations;s++)this.rotate(t,new A(0,0),!0);n.mirror_x&&this.mirror_vertically(t,new A(0,0)),n.mirror_y&&this.mirror_horizontally(t,new A(0,0));let r=n.position.multiply(new A(1,-1));t.position=t.position.add(r).multiply(new A(1,-1))}static rotate(t,n,r=!1){let s=Ve.from_degrees(r?-90:90);if(t.position=s.rotate_point(t.position,n),r)switch(t.orientation){case"right":t.orientation="up";break;case"up":t.orientation="left";break;case"left":t.orientation="down";break;case"down":t.orientation="right";break}else switch(t.orientation){case"right":t.orientation="down";break;case"down":t.orientation="left";break;case"left":t.orientation="up";break;case"up":t.orientation="right";break}}static mirror_horizontally(t,n){t.position.x-=n.x,t.position.x*=-1,t.position.x+=n.x,t.orientation=="right"?t.orientation="left":t.orientation=="left"&&(t.orientation="right")}static mirror_vertically(t,n){t.position.y-=n.y,t.position.y*=-1,t.position.y+=n.y,t.orientation=="up"?t.orientation="down":t.orientation=="down"&&(t.orientation="up")}draw_pin_shape(t,n){let{p0:r,dir:s}=qR.stem(n.position,n.orientation,n.def.length);qR.draw(t,n.def.type,n.def.shape,n.position,r,s)}draw_name_and_number(t,n){let r=n.def,s=n.pin.parent.lib_symbol,o=r.name.text,l=r.number.text,c=r.length,u=s.pin_names.hide||!o||o=="~",h=s.pin_numbers.hide||!l||l=="~",d=Jt.line_width,f=s.pin_names.offset,m=.6096*Jt.text_offset_ratio,_=r.number.effects.font.thickness||d,M=r.number.effects.font.thickness||d,g,R;f>0?(g=u?void 0:ta.place_inside(f,M,c,n.orientation),R=h?void 0:ta.place_above(m,d,_,c,n.orientation)):(g=u?void 0:ta.place_above(m,d,M,c,n.orientation),R=h?void 0:ta.place_below(m,d,M,c,n.orientation)),g&&ta.draw(t,o,n.position,g,r.name.effects,t.state.stroke),R&&ta.draw(t,l,n.position,R,r.number.effects,t.state.stroke)}};function nT(i){switch(i){case 0:return"right";case 90:return"up";case 180:return"left";case 270:return"down";default:throw new Error(`Unexpected pin angle ${i}`)}}a(nT,"angle_to_orientation");var qR={stem(i,e,t){let n=new A,r=new A;switch(e){case"up":n.set(i.x,i.y-t),r.set(0,1);break;case"down":n.set(i.x,i.y+t),r.set(0,-1);break;case"left":n.set(i.x-t,i.y),r.set(1,0);break;case"right":n.set(i.x+t,i.y),r.set(-1,0);break}return{p0:n,dir:r}},draw(i,e,t,n,r,s){let o=Jt.pinsymbol_size,l=o*2,c=Jt.target_pin_radius;if(e=="no_connect"){i.line([r,n]),i.line([n.add(new A(-c,-c)),n.add(new A(c,c))]),i.line([n.add(new A(c,-c)),n.add(new A(-c,c))]);return}let u=a(()=>{s.y?i.line([r.add(new A(o,0)),r.add(new A(0,-s.y*o)),r.add(new A(-o,0))]):i.line([r.add(new A(0,o)),r.add(new A(-s.x*o,0)),r.add(new A(0,-o))])},"clock_notch"),h=a(()=>{s.y?i.line([r.add(new A(0,s.y).multiply(l)),r.add(new A(-1,s.y).multiply(l)),r]):i.line([r.add(new A(s.x,0).multiply(l)),r.add(new A(s.x,-1).multiply(l)),r])},"low_in_tri");switch(t){case"line":i.line([r,n]);return;case"inverted":i.arc(r.add(s.multiply(o)),o),i.line([r.add(s.multiply(l)),n]);return;case"inverted_clock":i.arc(r.add(s.multiply(o)),o),i.line([r.add(s.multiply(l)),n]),u();return;case"clock":i.line([r,n]),u();return;case"clock_low":case"edge_clock_high":i.line([r,n]),u(),h();break;case"input_low":i.line([r,n]),h();break;case"output_low":i.line([r,n]),s.y?i.line([r.sub(new A(l,0)),r.add(new A(0,s.y*l))]):i.line([r.sub(new A(0,l)),r.add(new A(s.x*l,0))]);break;case"non_logic":i.line([r,n]),i.line([r.sub(new A(s.x+s.y,s.y-s.x).multiply(o)),r.add(new A(s.x+s.y,s.y-s.x).multiply(o))]),i.line([r.sub(new A(s.x-s.y,s.y+s.x).multiply(o)),r.add(new A(s.x-s.y,s.y+s.x).multiply(o))]);break}}},ta={orient_label(i,e,t,n){switch(e){case"right":break;case"left":i.x*=-1,t=="left"&&(t="right");break;case"up":i=new A(i.y,-i.x);break;case"down":i=new A(i.y,i.x),t=="left"&&(t="right");break}return{offset:i,h_align:t,v_align:n,orientation:e}},place_inside(i,e,t,n){let r=new A(i-e/2+t,0);return this.orient_label(r,n,"left","center")},place_above(i,e,t,n,r){let s=new A(n/2,-(i+e/2+t/2));return this.orient_label(s,r,"center","bottom")},place_below(i,e,t,n,r){let s=new A(n/2,i+e/2+t/2);return this.orient_label(s,r,"center","top")},draw(i,e,t,n,r,s){let o=new En(e);switch(o.apply_effects(r),o.attributes.h_align=n.h_align,o.attributes.v_align=n.v_align,o.attributes.color=s,o.text_pos=t.add(n.offset).multiply(1e4),n.orientation){case"up":case"down":o.text_angle=Ve.from_degrees(90);break;case"left":case"right":o.text_angle=Ve.from_degrees(0);break}Wt.default().draw(i,o.shown_text,o.text_pos,o.attributes)}};var ep=class extends jr{constructor(){super(...arguments);this.shapes=[]}static{a(this,"NullRenderLayer")}dispose(){this.clear()}clear(){this.shapes=[]}render(t){}},Qu=class extends $r{static{a(this,"NullRenderer")}#e;constructor(){super(null)}set background_color(e){}async setup(){}async dispose(){}update_canvas_size(){}clear_canvas(){}start_layer(e){this.#e=new ep(this,e)}end_layer(){return this.#e}get layers(){return[]}circle(e,t,n){this.#e.shapes.push(super.prep_circle(e,t,n))}arc(e,t,n,r,s,o){this.#e.shapes.push(super.prep_arc(e,t,n,r,s,o))}line(e,t,n){this.#e.shapes.push(super.prep_line(e,t,n))}polygon(e,t){this.#e.shapes.push(super.prep_polygon(e,t))}remove_layer(e){}};var Bu=class extends Et{constructor(){super(...arguments);this.classes=[is]}static{a(this,"LibSymbolPainter")}layers_for(t){return[":Symbol:Background",":Symbol:Foreground",":Symbol:Field"]}paint(t,n,r=1){if(![":Symbol:Background",":Symbol:Foreground",":Interactive"].includes(t.name))return;let s=n.units.get(0);if(s&&this.#e(t,s,r),n.parent instanceof hi){let o=n.units.get(n.parent.active_unit_index+1);o&&this.#e(t,o,r)}else{let o=this.view_painter.current_symbol,l=n.units.get(o?.unit||1);l&&this.#e(t,l,r)}}#e(t,n,r=1){for(let s of n)if(!(s.style>0&&r!=s.style)){for(let o of s.drawings)this.view_painter.paint_item(t,o);for(let o of s.libPins)this.view_painter.paint_item(t,o)}}},Ju=class extends Et{constructor(){super(...arguments);this.classes=[ui]}static{a(this,"SchematicSymbolPainter")}layers_for(t){let n=[":Interactive",":Symbol:Foreground",":Symbol:Background",":Symbol:Field",":Symbol:Pin"];return t.dnp&&n.push(":Marks"),n}paint(t,n){if(t.name==":Interactive"&&n.lib_symbol.power)return;let r=iT(n);this.view_painter.current_symbol=n,this.view_painter.current_symbol_transform=r,this.gfx.state.push(),this.gfx.state.matrix=dt.translation(n.at.position.x,n.at.position.y),this.gfx.state.multiply(r.matrix);let s=n.convert??1;if(this.view_painter.paint_item(t,n.lib_symbol,s),this.gfx.state.pop(),[":Symbol:Pin",":Symbol:Foreground",":Interactive"].includes(t.name))for(let o of n.unit_pins)this.view_painter.paint_item(t,o);if(t.name==":Symbol:Field"||t.name==":Interactive")for(let[o,l]of n.properties)this.view_painter.paint_item(t,l);if(n.dnp&&t.name==":Marks"){let o=rT(this.theme,n),l=Jt.line_width*3,c=this.theme.erc_error;this.gfx.line([o.top_left,o.bottom_right],l,c),this.gfx.line([o.bottom_left,o.top_right],l,c)}this.view_painter.current_symbol=void 0}};function iT(i){let e=new dt([1,0,0,0,-1,0,0,0,1]),t=new dt([0,-1,0,-1,0,0,0,0,1]),n=new dt([-1,0,0,0,1,0,0,0,1]),r=new dt([0,1,0,1,0,0,0,0,1]),s=0,o=e;if(i.at.rotation!=0)if(i.at.rotation==90)s=1,o=t;else if(i.at.rotation==180)s=2,o=n;else if(i.at.rotation==270)s=3,o=r;else throw new Error(`unexpected rotation ${i.at.rotation}`);if(i.mirror=="y"){let l=o.elements[0]*-1,c=o.elements[3]*-1,u=o.elements[1],h=o.elements[4];o.elements[0]=l,o.elements[1]=u,o.elements[3]=c,o.elements[4]=h}else if(i.mirror=="x"){let l=o.elements[0],c=o.elements[3],u=o.elements[1]*-1,h=o.elements[4]*-1;o.elements[0]=l,o.elements[1]=u,o.elements[3]=c,o.elements[4]=h}return{matrix:o,position:i.at.position,rotations:s,mirror_x:i.mirror=="x",mirror_y:i.mirror=="y"}}a(iT,"get_symbol_transform");function rT(i,e){let t=new Qu,n=new Bo(i),r=new na(t,n,i),s=[":Symbol:Foreground",":Symbol:Background",":Symbol:Pin"],o=[];for(let l of s){let c=n.by_name(l);c.items.push(e),r.paint_layer(c),o.push(c.bbox)}return je.combine(o)}a(rT,"get_symbol_body_and_pins_bbox");var tp=class extends Et{constructor(){super(...arguments);this.classes=[ts]}static{a(this,"RectanglePainter")}layers_for(t){return[":Notes"]}paint(t,n){let r=[n.start,new A(n.end.x,n.start.y),n.end,new A(n.start.x,n.end.y),n.start];this.#t(t,n,r),this.#e(t,n,r)}#e(t,n,r){let{width:s,color:o}=this.determine_stroke(t,n);!s||!o||this.gfx.line(new bt(r,n.stroke?.width||this.gfx.state.stroke_width,o))}#t(t,n,r){let s=this.determine_fill(t,n);s&&this.gfx.polygon(new fn(r,s))}},np=class extends Et{constructor(){super(...arguments);this.classes=[hi]}static{a(this,"KicadSymbolLibPainter")}layers_for(t){return[":Interactive",":Symbol:Foreground",":Symbol:Background",":Symbol:Field",":Symbol:Pin",":Label",":Junction",":Notes",":Bitmap",Vi.drawing_sheet,Vi.grid,":Marks"]}paint(t,n){console.log(n.symbols.length);for(let r of n.symbols){this.view_painter.paint_item(t,r);break}}},ip=class extends Et{constructor(){super(...arguments);this.classes=[es]}static{a(this,"PolylinePainter")}layers_for(t){return[":Notes"]}paint(t,n){this.#t(t,n),this.#e(t,n)}#e(t,n){let{width:r,color:s}=this.determine_stroke(t,n);!r||!s||this.gfx.line(new bt(n.pts,r,s))}#t(t,n){let r=this.determine_fill(t,n);r&&this.gfx.polygon(new fn(n.pts,r))}},rp=class extends Et{constructor(){super(...arguments);this.classes=[Vl]}static{a(this,"WirePainter")}layers_for(t){return[":Wire"]}paint(t,n){this.gfx.line(new bt(n.pts,this.gfx.state.stroke_width,this.theme.wire))}},sp=class extends Et{constructor(){super(...arguments);this.classes=[Ul]}static{a(this,"BusPainter")}layers_for(t){return[":Wire"]}paint(t,n){this.gfx.line(new bt(n.pts,Jt.bus_width,this.theme.bus))}},op=class extends Et{constructor(){super(...arguments);this.classes=[Il]}static{a(this,"BusEntryPainter")}layers_for(t){return[":Junction"]}paint(t,n){this.gfx.line(new bt([n.at.position,n.at.position.add(n.size)],Jt.wire_width,this.theme.wire))}},ap=class extends Et{constructor(){super(...arguments);this.classes=[Xs]}static{a(this,"CirclePainter")}layers_for(t){return[":Notes"]}paint(t,n){this.#t(t,n),this.#e(t,n)}#e(t,n){let{width:r,color:s}=this.determine_stroke(t,n);!r||!s||this.gfx.arc(new zr(n.center,n.radius,new Ve(0),new Ve(Math.PI*2),r,s))}#t(t,n){let r=this.determine_fill(t,n);r&&this.gfx.circle(new In(n.center,n.radius,r))}},lp=class extends Et{constructor(){super(...arguments);this.classes=[Eo]}static{a(this,"ArcPainter")}layers_for(t){return[":Notes"]}paint(t,n){let r=Un.from_three_points(n.start,n.mid,n.end,n.stroke?.width);this.#t(t,n,r),this.#e(t,n,r)}#e(t,n,r){let{width:s,color:o}=this.determine_stroke(t,n);!s||!o||this.gfx.arc(new zr(r.center,r.radius,r.start_angle,r.end_angle,s,o))}#t(t,n,r){let s=this.determine_fill(t,n);s&&this.gfx.polygon(new fn(r.to_polygon(),s))}},cp=class extends Et{constructor(){super(...arguments);this.classes=[Fl]}static{a(this,"JunctionPainter")}layers_for(t){return[":Junction"]}paint(t,n){let r=this.theme.junction;this.gfx.circle(new In(n.at.position,(n.diameter||1)/2,r))}},up=class extends Et{constructor(){super(...arguments);this.classes=[Wl]}static{a(this,"NoConnectPainter")}layers_for(t){return[":Junction"]}paint(t,n){let r=this.theme.no_connect,s=Jt.line_width,o=Jt.noconnect_size/2;this.gfx.state.push(),this.gfx.state.matrix.translate_self(n.at.position.x,n.at.position.y),this.gfx.line(new bt([new A(-o,-o),new A(o,o)],s,r)),this.gfx.line(new bt([new A(o,-o),new A(-o,o)],s,r)),this.gfx.state.pop()}},hp=class extends Et{constructor(){super(...arguments);this.classes=[wo]}static{a(this,"TextPainter")}layers_for(t){return[":Notes"]}paint(t,n){if(n.effects.hide||!n.text)return;let r=new $o(n.shown_text);r.apply_at(n.at),r.apply_effects(n.effects);let s=n.effects.font.color;if(s.is_transparent_black){let o=this.theme.note;r.attributes.color=this.dim_if_needed(o)}else r.attributes.color=this.dim_if_needed(s);this.gfx.state.push(),Wt.default().draw(this.gfx,r.shown_text,r.text_pos,r.attributes),this.gfx.state.pop()}},dp=class extends Et{constructor(){super(...arguments);this.classes=[rs]}static{a(this,"PropertyPainter")}layers_for(t){return[":Symbol:Field",":Interactive"]}paint(t,n){if(n.effects.hide||!n.text)return;let r=this.theme.fields;n.parent instanceof bi&&(r=this.theme.sheet_fields);let s=n.effects.font.color;if(s.is_transparent_black){switch(n.name){case"Reference":r=this.theme.reference;break;case"Value":r=this.theme.value;break;case"Sheet name":r=this.theme.sheet_name;break;case"Sheet file":r=this.theme.sheet_filename;break}r=this.dim_if_needed(r)}else r=this.dim_if_needed(s);let o=n.parent,c=this.view_painter.current_symbol_transform?.matrix??dt.identity(),u=n.shown_text;n.name=="Reference"&&o.unit&&(u+=o.unit_suffix);let h=new ku(u,{position:o.at.position.multiply(1e4),transform:c,is_symbol:o instanceof ui});h.apply_effects(n.effects),h.attributes.angle=Ve.from_degrees(n.at.rotation);let d=n.at.position.multiply(1e4).sub(h.parent.position);d=c.inverse().transform(d),d=d.add(h.parent.position),h.text_pos=d;let f=h.draw_rotation,m=h.bounding_box,_=m.center;h.attributes.angle=f,h.attributes.h_align="center",h.attributes.v_align="center",h.attributes.stroke_width=h.get_effective_text_thickness(Jt.line_width*1e4),h.attributes.color=r;let M=dt.scaling(1e-4,1e-4).transform_all([m.top_left,m.top_right,m.bottom_right,m.bottom_left,m.top_left]);t.name==":Interactive"?this.gfx.line(new bt(Array.from(M),.1,w.white)):(this.gfx.state.push(),Wt.default().draw(this.gfx,h.shown_text,_,h.attributes),this.gfx.state.pop())}},fp=class extends Et{constructor(){super(...arguments);this.classes=[Zl]}static{a(this,"LibTextPainter")}layers_for(t){return[":Symbol:Foreground"]}paint(t,n){if(n.effects.hide||!n.text)return;let r=this.view_painter.current_symbol_transform,s=new Zu(n.shown_text);s.apply_effects(n.effects),s.apply_at(n.at),s.apply_symbol_transformations(r),s.attributes.color=this.dim_if_needed(this.theme.component_outline);let o=s.world_pos;s.attributes.v_align="center",this.gfx.state.push(),this.gfx.state.matrix=dt.identity(),Wt.default().draw(this.gfx,s.shown_text,o,s.attributes),this.gfx.state.pop()}paint_debug(t){this.gfx.line(bt.from_BBox(t.scale(1/1e4),.127,new w(0,0,1,1))),this.gfx.circle(new In(t.center.multiply(1/1e4),.2,new w(0,1,0,1)))}},pp=class extends Et{constructor(){super(...arguments);this.classes=[bi]}static{a(this,"SchematicSheetPainter")}layers_for(t){return[":Interactive",":Label",":Symbol:Foreground",":Symbol:Background",":Symbol:Field"]}paint(t,n){let r=this.theme.sheet,s=this.theme.sheet_background,o=new je(n.at.position.x,n.at.position.y,n.size.x,n.size.y);if(t.name==":Interactive"&&this.gfx.polygon(fn.from_BBox(o.grow(3),s)),t.name==":Symbol:Background"&&this.gfx.polygon(fn.from_BBox(o,s)),t.name==":Symbol:Foreground"&&this.gfx.line(bt.from_BBox(o,this.gfx.state.stroke_width,r)),t.name==":Symbol:Field")for(let l of n.properties.values())this.view_painter.paint_item(t,l);if(t.name==":Label")for(let l of n.pins){let c=new Hs;switch(c.at=l.at.copy(),c.effects=l.effects,c.text=l.name,c.shape=l.shape,c.at.rotation){case 0:c.at.rotation=180;break;case 180:c.at.rotation=0;break;case 90:c.at.rotation=270;break;case 270:c.at.rotation=90;break}l.shape=="input"?c.shape="output":l.shape=="output"&&(c.shape="input"),this.view_painter.paint_item(t,c)}}},na=class extends Xu{constructor(t,n,r){super(t,n,r);this.painter_list=[new tp(this,t),new ip(this,t),new rp(this,t),new sp(this,t),new op(this,t),new ap(this,t),new lp(this,t),new cp(this,t),new up(this,t),new hp(this,t),new fp(this,t),new Ku(this,t),new Bu(this,t),new dp(this,t),new Ju(this,t),new Hu(this,t),new Gu(this,t),new Du(this,t),new pp(this,t),new np(this,t),new Yu(this,t)]}static{a(this,"SchematicPainter")}};var ia=class extends Qo{constructor(){super(...arguments);this._alter_footprint_parts=[];this.libPins=new Map}static{a(this,"SchematicViewer")}get alter_footprint_parts(){return this._alter_footprint_parts}get schematic(){return this.document}create_renderer(t){let n=new Lu(t);return n.state.fill=this.theme.note,n.state.stroke=this.theme.note,n.state.stroke_width=.1524,n}build_libPins(t){for(let n of t.libPins)this.libPins.set(n.index,n);for(let n of t.children)this.build_libPins(n)}set_active_part_unit(t){this._symbolLib&&this._symbolLib.active_unit_index!=t&&(this._symbolLib.set_active_unit_index(t),this.paint(),this.draw())}async load(t){if(t instanceof Oi)return await super.load(t);if(this.libPins=new Map,t instanceof hi){this._symbolLib=t;for(let n of t.items())this.build_libPins(n);for(let n=0;n<t.alter_symbol_parts;n++)this._alter_footprint_parts.push(`Part ${String.fromCharCode(65+n)}`)}return this.document=null,await super.load(t)}create_painter(){return new na(this.renderer,this.layers,this.theme)}create_layer_set(){return new Bo(this.theme)}findHighlightItem(t){for(let[,n]of this.libPins)if(n.boundingBox.contains_point(t))return n;return null}locateItemForCrossHight(t){return this.libPins.get(t)??null}select(t){if(this.schematic instanceof Oi){if(Vn(t)&&(t=this.schematic.find_symbol(t)??this.schematic.find_sheet(t)),t instanceof ui||t instanceof bi){let n=this.layers.query_item_bboxes(t);t=pu(n)??null}super.select(t)}}};var mp=class extends de{static{a(this,"KCHelpPanel")}static{this.styles=[...de.styles,Je`
            p {
                margin: 0;
                padding: 0.5em;
            }

            a {
                color: var(--button-bg);
            }

            a:hover {
                color: var(--button-hover-bg);
            }
        `]}render(){return re`
            <kc-ui-panel>
                <kc-ui-panel-title title="Help"></kc-ui-panel-title>
                <kc-ui-panel-body>
                    <p>
                        You're using
                        <a href="https://kicanvas.org/home">KiCanvas</a>, an
                        interactive, browser-based viewer for KiCAD schematics
                        and boards.
                    </p>
                    <p>
                        KiCanvas is very much in <strong>alpha</strong>, so
                        please
                        <a
                            href="https://github.com/theacodes/kicanvas/issues/new/choose"
                            target="_blank"
                            >file an issue on GitHub</a
                        >
                        if you run into any bugs.
                    </p>
                    <p>
                        KiCanvas is developed by
                        <a href="https://thea.codes" target="_blank"
                            >Thea Flowers</a
                        >
                        and supported by
                        <a
                            href="https://github.com/sponsors/theacodes"
                            target="_blank"
                            >community donations</a
                        >.
                    </p></kc-ui-panel-body
                >
            </kc-ui-panel>
        `}};window.customElements.define("kc-help-panel",mp);var zu=class{constructor(e="kc",t){this.prefix=e;this.reviver=t}static{a(this,"LocalStorage")}key_for(e){return`${this.prefix}:${e}`}set(e,t,n){window.localStorage.setItem(this.key_for(e),JSON.stringify({val:t,exp:n}))}get(e,t){let n=window.localStorage.getItem(this.key_for(e));if(n===null)return t;let r=JSON.parse(n,this.reviver);return r.exp&&r.exp<Date.now()?(this.delete(e),t):r.val}delete(e){window.localStorage.removeItem(this.key_for(e))}};var sT={name:"witchhazel",friendly_name:"Witch Hazel",board:{anchor:w.from_css("rgb(100, 203, 150)"),aux_items:w.from_css("rgb(255, 98, 0)"),b_adhes:w.from_css("rgb(0, 0, 132)"),b_crtyd:w.from_css("rgb(174, 129, 255)"),b_fab:w.from_css("rgb(113, 103, 153)"),b_mask:w.from_css("rgba(78, 129, 137, 0.800)"),b_paste:w.from_css("rgba(167, 234, 255, 0.502)"),b_silks:w.from_css("rgb(136, 100, 203)"),background:w.from_css("rgb(19, 18, 24)"),cmts_user:w.from_css("rgb(129, 255, 190)"),copper:{b:w.from_css("rgb(111, 204, 219)"),f:w.from_css("rgb(226, 114, 153)"),in1:w.from_css("rgb(127, 200, 127)"),in10:w.from_css("rgb(237, 124, 51)"),in11:w.from_css("rgb(91, 195, 235)"),in12:w.from_css("rgb(247, 111, 142)"),in13:w.from_css("rgb(167, 165, 198)"),in14:w.from_css("rgb(40, 204, 217)"),in15:w.from_css("rgb(232, 178, 167)"),in16:w.from_css("rgb(242, 237, 161)"),in17:w.from_css("rgb(237, 124, 51)"),in18:w.from_css("rgb(91, 195, 235)"),in19:w.from_css("rgb(247, 111, 142)"),in2:w.from_css("rgb(206, 125, 44)"),in20:w.from_css("rgb(167, 165, 198)"),in21:w.from_css("rgb(40, 204, 217)"),in22:w.from_css("rgb(232, 178, 167)"),in23:w.from_css("rgb(242, 237, 161)"),in24:w.from_css("rgb(237, 124, 51)"),in25:w.from_css("rgb(91, 195, 235)"),in26:w.from_css("rgb(247, 111, 142)"),in27:w.from_css("rgb(167, 165, 198)"),in28:w.from_css("rgb(40, 204, 217)"),in29:w.from_css("rgb(232, 178, 167)"),in3:w.from_css("rgb(79, 203, 203)"),in30:w.from_css("rgb(242, 237, 161)"),in4:w.from_css("rgb(219, 98, 139)"),in5:w.from_css("rgb(167, 165, 198)"),in6:w.from_css("rgb(40, 204, 217)"),in7:w.from_css("rgb(232, 178, 167)"),in8:w.from_css("rgb(242, 237, 161)"),in9:w.from_css("rgb(141, 203, 129)")},cursor:w.from_css("rgb(220, 200, 255)"),drc_error:w.from_css("rgba(255, 0, 237, 0.800)"),drc_exclusion:w.from_css("rgba(255, 255, 255, 0.800)"),drc_warning:w.from_css("rgba(255, 208, 66, 0.800)"),dwgs_user:w.from_css("rgb(248, 248, 240)"),eco1_user:w.from_css("rgb(129, 238, 255)"),eco2_user:w.from_css("rgb(255, 129, 173)"),edge_cuts:w.from_css("rgb(129, 255, 190)"),f_adhes:w.from_css("rgb(132, 0, 132)"),f_crtyd:w.from_css("rgb(174, 129, 255)"),f_fab:w.from_css("rgb(113, 103, 153)"),f_mask:w.from_css("rgb(137, 78, 99)"),f_paste:w.from_css("rgba(252, 249, 255, 0.502)"),f_silks:w.from_css("rgb(220, 200, 255)"),footprint_text_invisible:w.from_css("rgb(40, 38, 52)"),grid:w.from_css("rgb(113, 103, 153)"),grid_axes:w.from_css("rgb(255, 129, 173)"),margin:w.from_css("rgb(78, 137, 107)"),no_connect:w.from_css("rgb(255, 148, 0)"),pad_plated_hole:w.from_css("rgb(194, 194, 0)"),pad_through_hole:w.from_css("rgb(227, 209, 46)"),non_plated_hole:w.from_css("rgb(129, 255, 190)"),ratsnest:w.from_css("rgb(128, 119, 168)"),user_1:w.from_css("rgb(194, 118, 0)"),user_2:w.from_css("rgb(89, 148, 220)"),user_3:w.from_css("rgb(180, 219, 210)"),user_4:w.from_css("rgb(216, 200, 82)"),user_5:w.from_css("rgb(194, 194, 194)"),user_6:w.from_css("rgb(89, 148, 220)"),user_7:w.from_css("rgb(180, 219, 210)"),user_8:w.from_css("rgb(216, 200, 82)"),user_9:w.from_css("rgb(232, 178, 167)"),via_blind_buried:w.from_css("rgb(203, 196, 100)"),via_hole:w.from_css("rgb(40, 38, 52)"),via_micro:w.from_css("rgb(255, 148, 0)"),via_through:w.from_css("rgb(227, 209, 46)"),worksheet:w.from_css("rgb(100, 190, 203)")},schematic:{anchor:w.from_css("rgb(174, 129, 255)"),aux_items:w.from_css("rgb(255, 160, 0)"),background:w.from_css("rgb(19, 18, 24)"),brightened:w.from_css("rgb(200, 255, 227)"),bus:w.from_css("rgb(129, 238, 255)"),bus_junction:w.from_css("rgb(163, 243, 255)"),component_body:w.from_css("rgb(67, 62, 86)"),component_outline:w.from_css("rgb(197, 163, 255)"),cursor:w.from_css("rgb(220, 200, 255)"),erc_error:w.from_css("rgba(255, 55, 162, 0.800)"),erc_warning:w.from_css("rgba(255, 92, 0, 0.800)"),fields:w.from_css("rgb(174, 129, 255)"),grid:w.from_css("rgb(113, 103, 153)"),grid_axes:w.from_css("rgb(255, 129, 173)"),hidden:w.from_css("rgb(67, 62, 86)"),junction:w.from_css("rgb(220, 200, 255)"),label_global:w.from_css("rgb(255, 247, 129)"),label_hier:w.from_css("rgb(163, 255, 207)"),label_local:w.from_css("rgb(220, 200, 255)"),no_connect:w.from_css("rgb(255, 129, 173)"),note:w.from_css("rgb(248, 248, 240)"),pin:w.from_css("rgb(129, 255, 190)"),pin_name:w.from_css("rgb(129, 255, 190)"),pin_number:w.from_css("rgb(100, 203, 150)"),reference:w.from_css("rgb(129, 238, 255)"),shadow:w.from_css("rgb(200, 248, 255)"),sheet:w.from_css("rgb(174, 129, 255)"),sheet_background:w.from_css("rgb(19, 18, 24)"),sheet_fields:w.from_css("rgb(129, 255, 190)"),sheet_filename:w.from_css("rgb(78, 129, 137)"),sheet_label:w.from_css("rgb(129, 255, 190)"),sheet_name:w.from_css("rgb(129, 238, 255)"),value:w.from_css("rgb(129, 238, 255)"),wire:w.from_css("rgb(174, 129, 255)"),worksheet:w.from_css("rgb(100, 190, 203)")}},eg=sT;var oT={name:"kicad",friendly_name:"KiCAD",board:{anchor:w.from_css("rgb(255, 38, 226)"),aux_items:w.from_css("rgb(255, 255, 255)"),b_adhes:w.from_css("rgb(0, 0, 132)"),b_crtyd:w.from_css("rgb(38, 233, 255)"),b_fab:w.from_css("rgb(88, 93, 132)"),b_mask:w.from_css("rgba(2, 255, 238, 0.400)"),b_paste:w.from_css("rgba(0, 194, 194, 0.902)"),b_silks:w.from_css("rgb(232, 178, 167)"),background:w.from_css("rgb(0, 16, 35)"),cmts_user:w.from_css("rgb(89, 148, 220)"),copper:{b:w.from_css("rgb(77, 127, 196)"),f:w.from_css("rgb(200, 52, 52)"),in1:w.from_css("rgb(127, 200, 127)"),in10:w.from_css("rgb(237, 124, 51)"),in11:w.from_css("rgb(91, 195, 235)"),in12:w.from_css("rgb(247, 111, 142)"),in13:w.from_css("rgb(167, 165, 198)"),in14:w.from_css("rgb(40, 204, 217)"),in15:w.from_css("rgb(232, 178, 167)"),in16:w.from_css("rgb(242, 237, 161)"),in17:w.from_css("rgb(237, 124, 51)"),in18:w.from_css("rgb(91, 195, 235)"),in19:w.from_css("rgb(247, 111, 142)"),in2:w.from_css("rgb(206, 125, 44)"),in20:w.from_css("rgb(167, 165, 198)"),in21:w.from_css("rgb(40, 204, 217)"),in22:w.from_css("rgb(232, 178, 167)"),in23:w.from_css("rgb(242, 237, 161)"),in24:w.from_css("rgb(237, 124, 51)"),in25:w.from_css("rgb(91, 195, 235)"),in26:w.from_css("rgb(247, 111, 142)"),in27:w.from_css("rgb(167, 165, 198)"),in28:w.from_css("rgb(40, 204, 217)"),in29:w.from_css("rgb(232, 178, 167)"),in3:w.from_css("rgb(79, 203, 203)"),in30:w.from_css("rgb(242, 237, 161)"),in4:w.from_css("rgb(219, 98, 139)"),in5:w.from_css("rgb(167, 165, 198)"),in6:w.from_css("rgb(40, 204, 217)"),in7:w.from_css("rgb(232, 178, 167)"),in8:w.from_css("rgb(242, 237, 161)"),in9:w.from_css("rgb(141, 203, 129)")},cursor:w.from_css("rgb(255, 255, 255)"),drc_error:w.from_css("rgba(215, 91, 107, 0.800)"),drc_exclusion:w.from_css("rgba(255, 255, 255, 0.800)"),drc_warning:w.from_css("rgba(255, 208, 66, 0.800)"),dwgs_user:w.from_css("rgb(194, 194, 194)"),eco1_user:w.from_css("rgb(180, 219, 210)"),eco2_user:w.from_css("rgb(216, 200, 82)"),edge_cuts:w.from_css("rgb(208, 210, 205)"),f_adhes:w.from_css("rgb(132, 0, 132)"),f_crtyd:w.from_css("rgb(255, 38, 226)"),f_fab:w.from_css("rgb(175, 175, 175)"),f_mask:w.from_css("rgba(216, 100, 255, 0.400)"),f_paste:w.from_css("rgba(180, 160, 154, 0.902)"),f_silks:w.from_css("rgb(242, 237, 161)"),footprint_text_invisible:w.from_css("rgb(132, 132, 132)"),grid:w.from_css("rgb(132, 132, 132)"),grid_axes:w.from_css("rgb(194, 194, 194)"),margin:w.from_css("rgb(255, 38, 226)"),no_connect:w.from_css("rgb(0, 0, 132)"),pad_plated_hole:w.from_css("rgb(194, 194, 0)"),pad_through_hole:w.from_css("rgb(227, 183, 46)"),non_plated_hole:w.from_css("rgb(26, 196, 210)"),ratsnest:w.from_css("rgba(245, 255, 213, 0.702)"),user_1:w.from_css("rgb(194, 194, 194)"),user_2:w.from_css("rgb(89, 148, 220)"),user_3:w.from_css("rgb(180, 219, 210)"),user_4:w.from_css("rgb(216, 200, 82)"),user_5:w.from_css("rgb(194, 194, 194)"),user_6:w.from_css("rgb(89, 148, 220)"),user_7:w.from_css("rgb(180, 219, 210)"),user_8:w.from_css("rgb(216, 200, 82)"),user_9:w.from_css("rgb(232, 178, 167)"),via_blind_buried:w.from_css("rgb(187, 151, 38)"),via_hole:w.from_css("rgb(227, 183, 46)"),via_micro:w.from_css("rgb(0, 132, 132)"),via_through:w.from_css("rgb(236, 236, 236)"),worksheet:w.from_css("rgb(200, 114, 171)")},schematic:{anchor:w.from_css("rgb(0, 0, 255)"),aux_items:w.from_css("rgb(0, 0, 0)"),background:w.from_css("rgb(255, 255, 255)"),brightened:w.from_css("rgb(255, 0, 255)"),bus:w.from_css("rgb(0, 0, 132)"),bus_junction:w.from_css("rgb(0, 0, 132)"),component_body:w.from_css("rgb(255, 255, 194)"),component_outline:w.from_css("rgb(132, 0, 0)"),cursor:w.from_css("rgb(15, 15, 15)"),erc_error:w.from_css("rgba(230, 9, 13, 0.800)"),erc_warning:w.from_css("rgba(209, 146, 0, 0.800)"),fields:w.from_css("rgb(132, 0, 132)"),grid:w.from_css("rgb(181, 181, 181)"),grid_axes:w.from_css("rgb(0, 0, 132)"),hidden:w.from_css("rgb(94, 194, 194)"),junction:w.from_css("rgb(0, 150, 0)"),label_global:w.from_css("rgb(132, 0, 0)"),label_hier:w.from_css("rgb(114, 86, 0)"),label_local:w.from_css("rgb(15, 15, 15)"),no_connect:w.from_css("rgb(0, 0, 132)"),note:w.from_css("rgb(0, 0, 194)"),pin:w.from_css("rgb(132, 0, 0)"),pin_name:w.from_css("rgb(0, 100, 100)"),pin_number:w.from_css("rgb(169, 0, 0)"),reference:w.from_css("rgb(0, 100, 100)"),shadow:w.from_css("rgba(199, 235, 255, 0.800)"),sheet:w.from_css("rgb(132, 0, 0)"),sheet_background:w.from_css("rgba(255, 255, 255, 0.000)"),sheet_fields:w.from_css("rgb(132, 0, 132)"),sheet_filename:w.from_css("rgb(114, 86, 0)"),sheet_label:w.from_css("rgb(0, 100, 100)"),sheet_name:w.from_css("rgb(0, 100, 100)"),value:w.from_css("rgb(0, 100, 100)"),wire:w.from_css("rgb(0, 150, 0)"),worksheet:w.from_css("rgb(132, 0, 0)")}},Rp=oT;var tg=[eg,Rp],aT=new Map(tg.map(i=>[i.name,i])),xr={default:Rp,by_name(i){return aT.get(i)??this.default},list(){return tg}};var yr=class i extends EventTarget{constructor(){super(...arguments);this.storage=new zu("kc:prefs");this.theme=xr.default}static{a(this,"Preferences")}static{this.INSTANCE=new i}save(){this.storage.set("theme",this.theme.name),this.dispatchEvent(new $u({preferences:this}))}load(){this.theme=xr.by_name(this.storage.get("theme",xr.default.name))}};yr.INSTANCE.load();var $u=class i extends CustomEvent{static{a(this,"PreferencesChangeEvent")}static{this.type="kicanvas:preferences:change"}constructor(e){super(i.type,{detail:e,composed:!0,bubbles:!0})}};function ng(i){return class extends i{static{a(this,"WithPreferences")}constructor(...t){super(...t),this.addDisposable(yn(yr.INSTANCE,$u.type,()=>{this.preferenceChangeCallback(this.preferences)}))}get preferences(){return yr.INSTANCE}async preferenceChangeCallback(t){}}}a(ng,"WithPreferences");var gp=yr.INSTANCE,ju=class extends de{static{a(this,"KCPreferencesPanel")}static{this.styles=[...de.styles,Je`
            select {
                box-sizing: border-box;
                display: block;
                width: 100%;
                max-width: 100%;
                margin-top: 0.25em;
                font-family: inherit;
                font-size: inherit;
                font-weight: 300;
                margin-top: 0.25em;
                border-radius: 0.25em;
                text-align: left;
                padding: 0.25em;
                background: var(--input-bg);
                color: var(--input-fg);
                border: var(--input-border);
                transition:
                    color var(--transition-time-medium) ease,
                    box-shadow var(--transition-time-medium) ease,
                    outline var(--transition-time-medium) ease,
                    background var(--transition-time-medium) ease,
                    border var(--transition-time-medium) ease;
            }

            select::after {
                display: block;
                content: "";
                color: var(--input-fg);
            }

            select:hover {
                z-index: 10;
                box-shadow: var(--input-hover-shadow);
            }

            select:focus {
                z-index: 10;
                box-shadow: none;
                outline: var(--input-focus-outline);
            }
        `]}initialContentCallback(){this.renderRoot.addEventListener("input",t=>{gp.theme=xr.by_name(this.theme_control.value),gp.save()})}render(){let t=xr.list().map(n=>re`<option
                value="${n.name}"
                selected="${gp.theme.name==n.name}">
                ${n.friendly_name}
            </option>`);return re`
            <kc-ui-panel>
                <kc-ui-panel-title title="Preferences"></kc-ui-panel-title>
                <kc-ui-panel-body padded>
                    <kc-ui-control-list>
                        <kc-ui-control>
                            <label>Theme</label>
                            <select name="theme" value="kicad">
                                ${t}
                            </select>
                        </kc-ui-control>
                    </kc-ui-control-list>
                </kc-ui-panel-body>
            </kc-ui-panel>
        `}};Me([Tt("[name=theme]",!0)],ju.prototype,"theme_control",2);window.customElements.define("kc-preferences-panel",ju);var qu=class extends de{static{a(this,"KCProjectPanelElement")}static{this.styles=[...de.styles,Je`
            .page {
                display: flex;
                align-items: center;
            }

            .page span.name {
                margin-right: 1em;
                text-overflow: ellipsis;
                white-space: nowrap;
                overflow: hidden;
            }

            .page span.filename {
                flex: 1;
                text-overflow: ellipsis;
                white-space: nowrap;
                overflow: hidden;
                margin-left: 1em;
                text-align: right;
                color: #aaa;
            }

            .page kc-ui-button {
                margin-left: 0.5em;
            }

            .page span.number {
                flex: 0;
                background: var(--dropdown-hover-bg);
                border: 1px solid transparent;
                border-radius: 0.5em;
                font-size: 0.8em;
                padding: 0px 0.3em;
                margin-right: 0.5em;
            }

            kc-ui-menu-item:hover span.number {
                background: var(--dropdown-bg);
            }

            kc-ui-menu-item[selected]:hover span.number {
                background: var(--dropdown-hover-bg);
            }
        `]}#e;connectedCallback(){(async()=>(this.project=await this.requestContext("project"),super.connectedCallback()))()}initialContentCallback(){super.initialContentCallback(),this.addDisposable(yn(this.project,"load",t=>{this.update()})),this.addDisposable(yn(this.project,"change",t=>{this.selected=this.project.active_page?.project_path??null})),this.addEventListener("kc-ui-menu:select",t=>{let n=t.detail;this.selected=n?.name??null,this.change_current_project_page(this.selected)}),Bi(this.renderRoot,"kc-ui-button","click",(t,n)=>{let r=n.closest("kc-ui-menu-item");this.project.download(r.name)})}get selected(){return this.#e.selected?.name??null}set selected(t){this.#e.selected=t}change_current_project_page(t){this.project.set_active_page(t)}render(){let t=[];if(!this.project)return re``;for(let n of this.project.pages()){let r=n.type=="schematic"?"svg:schematic_file":"svg:pcb_file",s=n.page?re`<span class="number">${n.page}</span>`:"";t.push(re`<kc-ui-menu-item
                    icon="${r}"
                    name="${n.project_path}">
                    <span class="page">
                        ${s}
                        <span class="name">
                            ${n.name??n.filename}
                        </span>
                        <span class="filename">
                            ${n.name&&n.name!==n.filename?n.filename:""}
                        </span>
                        <kc-ui-button
                            variant="menu"
                            icon="download"
                            title="Download"></kc-ui-button>
                    </span>
                </kc-ui-menu-item>`)}return this.#e=re`<kc-ui-menu>
            ${t}
        </kc-ui-menu>`,re`<kc-ui-panel>
            <kc-ui-panel-title title="Project"></kc-ui-panel-title>
            <kc-ui-panel-body>${this.#e}</kc-ui-panel-body>
        </kc-ui-panel>`}};Me([Zs],qu.prototype,"change_current_project_page",1);window.customElements.define("kc-project-panel",qu);var _p=class extends de{static{a(this,"KCViewerBottomToolbarElement")}static{this.styles=[...de.styles,Je`
            output {
                width: unset;
                margin: unset;
                padding: 0.5em;
                color: var(--button-toolbar-fg);
                background: var(--button-toolbar-bg);
                border: 1px solid var(--button-toolbar-bg);
                border-radius: 0.25em;
                font-weight: 300;
                font-size: 0.9em;
                box-shadow: var(--input-hover-shadow);
                user-select: none;
            }
        `]}#e;#t;#i;#n;connectedCallback(){(async()=>(this.viewer=await this.requestLazyContext("viewer"),await this.viewer.loaded,super.connectedCallback(),this.addDisposable(this.viewer.addEventListener(Go.type,()=>{this.update_position()})),this.#t.addEventListener("click",t=>{t.preventDefault(),this.viewer.zoom_fit_top_item()}),this.#i.addEventListener("click",t=>{t.preventDefault(),this.viewer.zoom_in()}),this.#n.addEventListener("click",t=>{t.preventDefault(),this.viewer.zoom_out()})))()}update_position(){let t=this.viewer.mouse_position;this.#e.value=`${t.x.toFixed(2)}, ${t.y.toFixed(2)} mm`}render(){return this.#e=re`<output
            slot="left"
            class="toolbar"></output>`,this.#t=re`<kc-ui-button
            slot="right"
            variant="toolbar"
            name="reset"
            title="reset"
            icon="svg:reset">
        </kc-ui-button>`,this.#i=re`<kc-ui-button
            slot="right"
            variant="toolbar"
            name="zoom_in"
            title="zoom in"
            icon="svg:zoom_in">
        </kc-ui-button>`,this.#n=re`<kc-ui-button
            slot="right"
            variant="toolbar"
            name="zoom_out"
            title="zoom out"
            icon="svg:zoom_out">
        </kc-ui-button>`,this.update_position(),re`<kc-ui-floating-toolbar location="bottom">
            ${this.#n} ${this.#t} ${this.#i}
        </kc-ui-floating-toolbar>`}};window.customElements.define("kc-viewer-bottom-toolbar",_p);var Sr=class extends de{constructor(){super();this.select=re`<kc-ui-select>
    </kc-ui-select> `;this.viewerReady=new fr;this.provideLazyContext("viewer",()=>this.viewer)}static{a(this,"KCViewerAppElement")}#e;#t;get viewer(){return this.#e.viewer}init_alter_source(t){this.select.addSelections(t)}connectedCallback(){this.hidden=!0,(async()=>(this.project=await this.requestContext("project"),await this.project.loaded,super.connectedCallback(),this.select.addSelections(await this.requestContext("alter_source"))))()}initialContentCallback(){this.project.first_page&&this.load(this.project.first_page),this.addDisposable(yn(this.project,"change",async t=>{let n=this.project.page_by_path(this.project.active_page_name);n?await this.load(n):this.hidden=!0})),this.select.select.addEventListener("change",t=>{this.apply_alter_src({idx:this.select.select.selectedIndex,name:this.select.select.value})}),this.addDisposable(this.viewer.addEventListener(ti.type,t=>{this.on_viewer_select(t.detail.item,t.detail.previous)})),Bi(this.renderRoot,"kc-ui-button","click",t=>{let n=t.target;switch(console.log("button",n),n.name){case"download":this.project.active_page_name&&this.project.download(this.project.active_page_name);break;default:console.warn("Unknown button",t)}})}async load(t){await this.viewerReady,this.can_load(t)?(await this.#e.load(t),this.hidden=!1):this.hidden=!0,this.#e.viewer instanceof ia&&this.select.addSelections(this.#e.viewer.alter_footprint_parts)}#i(){return wl(this.project.pages())>1}make_pre_activities(){let t=[];return this.#i()&&t.push(re`<kc-ui-activity
                    slot="activities"
                    name="Project"
                    icon="folder">
                    <kc-project-panel></kc-project-panel>
                </kc-ui-activity>`),t}make_post_activities(){return[re`<kc-ui-activity
                slot="activities"
                name="Preferences"
                icon="settings"
                button-location="bottom">
                <kc-preferences-panel></kc-preferences-panel>
            </kc-ui-activity>`,re` <kc-ui-activity
                slot="activities"
                name="Help"
                icon="help"
                button-location="bottom">
                <kc-help-panel></kc-help-panel>
            </kc-ui-activity>`]}change_activity(t){this.#t?.change_activity(t)}render(){let t=this.controls??"none";this.#e=this.make_viewer_element(),this.#e.disableinteraction=t=="none";let n=re`<kc-viewer-bottom-toolbar></kc-viewer-bottom-toolbar>`;return this.top_toolbar=re`<kc-ui-floating-toolbar>
            ${this.select}
        </kc-ui-floating-toolbar>`,this.top_toolbar.style.display="none",this.addEventListener("mouseenter",r=>{this.select.select.options.length>1&&(this.top_toolbar.style.display="block")}),this.addEventListener("mouseleave",r=>{this.top_toolbar.style.display="none"}),re`<kc-ui-split-view vertical>
            <kc-ui-view class="grow">
                ${this.top_toolbar} ${this.#e} ${n}
            </kc-ui-view>
            ${this.#t}
        </kc-ui-split-view>`}renderedCallback(){window.requestAnimationFrame(()=>{this.viewerReady.resolve(!0)})}};Me([Ye({type:String})],Sr.prototype,"controls",2),Me([Ye({type:String})],Sr.prototype,"controlslist",2),Me([Ye({type:Boolean})],Sr.prototype,"sidebarcollapsed",2);function cc(i,e,t){t=t||2;var n=e&&e.length,r=n?e[0]*t:i.length,s=rg(i,0,r,t,!0),o=[];if(!s||s.next===s.prev)return o;var l,c,u,h,d,f,m;if(n&&(s=dT(i,e,s,t)),i.length>80*t){l=u=i[0],c=h=i[1];for(var _=t;_<r;_+=t)d=i[_],f=i[_+1],d<l&&(l=d),f<c&&(c=f),d>u&&(u=d),f>h&&(h=f);m=Math.max(u-l,h-c),m=m!==0?32767/m:0}return oc(s,o,t,l,c,m,0),o}a(cc,"earcut");function rg(i,e,t,n,r){var s,o;if(r===xp(i,e,t,n)>0)for(s=e;s<t;s+=n)o=ig(s,i[s],i[s+1],o);else for(s=t-n;s>=e;s-=n)o=ig(s,i[s],i[s+1],o);return o&&nh(o,o.next)&&(lc(o),o=o.next),o}a(rg,"linkedList");function Ks(i,e){if(!i)return i;e||(e=i);var t=i,n;do if(n=!1,!t.steiner&&(nh(t,t.next)||Gt(t.prev,t,t.next)===0)){if(lc(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}a(Ks,"filterPoints");function oc(i,e,t,n,r,s,o){if(i){!o&&s&&gT(i,n,r,s);for(var l=i,c,u;i.prev!==i.next;){if(c=i.prev,u=i.next,s?cT(i,n,r,s):lT(i)){e.push(c.i/t|0),e.push(i.i/t|0),e.push(u.i/t|0),lc(i),i=u.next,l=u.next;continue}if(i=u,i===l){o?o===1?(i=uT(Ks(i),e,t),oc(i,e,t,n,r,s,2)):o===2&&hT(i,e,t,n,r,s):oc(Ks(i),e,t,n,r,s,1);break}}}}a(oc,"earcutLinked");function lT(i){var e=i.prev,t=i,n=i.next;if(Gt(e,t,n)>=0)return!1;for(var r=e.x,s=t.x,o=n.x,l=e.y,c=t.y,u=n.y,h=r<s?r<o?r:o:s<o?s:o,d=l<c?l<u?l:u:c<u?c:u,f=r>s?r>o?r:o:s>o?s:o,m=l>c?l>u?l:u:c>u?c:u,_=n.next;_!==e;){if(_.x>=h&&_.x<=f&&_.y>=d&&_.y<=m&&ra(r,l,s,c,o,u,_.x,_.y)&&Gt(_.prev,_,_.next)>=0)return!1;_=_.next}return!0}a(lT,"isEar");function cT(i,e,t,n){var r=i.prev,s=i,o=i.next;if(Gt(r,s,o)>=0)return!1;for(var l=r.x,c=s.x,u=o.x,h=r.y,d=s.y,f=o.y,m=l<c?l<u?l:u:c<u?c:u,_=h<d?h<f?h:f:d<f?d:f,M=l>c?l>u?l:u:c>u?c:u,g=h>d?h>f?h:f:d>f?d:f,R=bp(m,_,e,t,n),y=bp(M,g,e,t,n),b=i.prevZ,S=i.nextZ;b&&b.z>=R&&S&&S.z<=y;){if(b.x>=m&&b.x<=M&&b.y>=_&&b.y<=g&&b!==r&&b!==o&&ra(l,h,c,d,u,f,b.x,b.y)&&Gt(b.prev,b,b.next)>=0||(b=b.prevZ,S.x>=m&&S.x<=M&&S.y>=_&&S.y<=g&&S!==r&&S!==o&&ra(l,h,c,d,u,f,S.x,S.y)&&Gt(S.prev,S,S.next)>=0))return!1;S=S.nextZ}for(;b&&b.z>=R;){if(b.x>=m&&b.x<=M&&b.y>=_&&b.y<=g&&b!==r&&b!==o&&ra(l,h,c,d,u,f,b.x,b.y)&&Gt(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;S&&S.z<=y;){if(S.x>=m&&S.x<=M&&S.y>=_&&S.y<=g&&S!==r&&S!==o&&ra(l,h,c,d,u,f,S.x,S.y)&&Gt(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0}a(cT,"isEarHashed");function uT(i,e,t){var n=i;do{var r=n.prev,s=n.next.next;!nh(r,s)&&sg(r,n,n.next,s)&&ac(r,s)&&ac(s,r)&&(e.push(r.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),lc(n),lc(n.next),n=i=s),n=n.next}while(n!==i);return Ks(n)}a(uT,"cureLocalIntersections");function hT(i,e,t,n,r,s){var o=i;do{for(var l=o.next.next;l!==o.prev;){if(o.i!==l.i&&MT(o,l)){var c=og(o,l);o=Ks(o,o.next),c=Ks(c,c.next),oc(o,e,t,n,r,s,0),oc(c,e,t,n,r,s,0);return}l=l.next}o=o.next}while(o!==i)}a(hT,"splitEarcut");function dT(i,e,t,n){var r=[],s,o,l,c,u;for(s=0,o=e.length;s<o;s++)l=e[s]*n,c=s<o-1?e[s+1]*n:i.length,u=rg(i,l,c,n,!1),u===u.next&&(u.steiner=!0),r.push(bT(u));for(r.sort(fT),s=0;s<r.length;s++)t=pT(r[s],t);return t}a(dT,"eliminateHoles");function fT(i,e){return i.x-e.x}a(fT,"compareX");function pT(i,e){var t=mT(i,e);if(!t)return e;var n=og(t,i);return Ks(n,n.next),Ks(t,t.next)}a(pT,"eliminateHole");function mT(i,e){var t=e,n=i.x,r=i.y,s=-1/0,o;do{if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){var l=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(l<=n&&l>s&&(s=l,o=t.x<t.next.x?t:t.next,l===n))return o}t=t.next}while(t!==e);if(!o)return null;var c=o,u=o.x,h=o.y,d=1/0,f;t=o;do n>=t.x&&t.x>=u&&n!==t.x&&ra(r<h?n:s,r,u,h,r<h?s:n,r,t.x,t.y)&&(f=Math.abs(r-t.y)/(n-t.x),ac(t,i)&&(f<d||f===d&&(t.x>o.x||t.x===o.x&&RT(o,t)))&&(o=t,d=f)),t=t.next;while(t!==c);return o}a(mT,"findHoleBridge");function RT(i,e){return Gt(i.prev,i,e.prev)<0&&Gt(e.next,i,i.next)<0}a(RT,"sectorContainsSector");function gT(i,e,t,n){var r=i;do r.z===0&&(r.z=bp(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,_T(r)}a(gT,"indexCurve");function _T(i){var e,t,n,r,s,o,l,c,u=1;do{for(t=i,i=null,s=null,o=0;t;){for(o++,n=t,l=0,e=0;e<u&&(l++,n=n.nextZ,!!n);e++);for(c=u;l>0||c>0&&n;)l!==0&&(c===0||!n||t.z<=n.z)?(r=t,t=t.nextZ,l--):(r=n,n=n.nextZ,c--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;t=n}s.nextZ=null,u*=2}while(o>1);return i}a(_T,"sortLinked");function bp(i,e,t,n,r){return i=(i-t)*r|0,e=(e-n)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}a(bp,"zOrder");function bT(i){var e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}a(bT,"getLeftmost");function ra(i,e,t,n,r,s,o,l){return(r-o)*(e-l)>=(i-o)*(s-l)&&(i-o)*(n-l)>=(t-o)*(e-l)&&(t-o)*(s-l)>=(r-o)*(n-l)}a(ra,"pointInTriangle");function MT(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!xT(i,e)&&(ac(i,e)&&ac(e,i)&&yT(i,e)&&(Gt(i.prev,i,e.prev)||Gt(i,e.prev,e))||nh(i,e)&&Gt(i.prev,i,i.next)>0&&Gt(e.prev,e,e.next)>0)}a(MT,"isValidDiagonal");function Gt(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}a(Gt,"area");function nh(i,e){return i.x===e.x&&i.y===e.y}a(nh,"equals");function sg(i,e,t,n){var r=th(Gt(i,e,t)),s=th(Gt(i,e,n)),o=th(Gt(t,n,i)),l=th(Gt(t,n,e));return!!(r!==s&&o!==l||r===0&&eh(i,t,e)||s===0&&eh(i,n,e)||o===0&&eh(t,i,n)||l===0&&eh(t,e,n))}a(sg,"intersects");function eh(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}a(eh,"onSegment");function th(i){return i>0?1:i<0?-1:0}a(th,"sign");function xT(i,e){var t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&sg(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}a(xT,"intersectsPolygon");function ac(i,e){return Gt(i.prev,i,i.next)<0?Gt(i,e,i.next)>=0&&Gt(i,i.prev,e)>=0:Gt(i,e,i.prev)<0||Gt(i,i.next,e)<0}a(ac,"locallyInside");function yT(i,e){var t=i,n=!1,r=(i.x+e.x)/2,s=(i.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}a(yT,"middleInside");function og(i,e){var t=new Mp(i.i,i.x,i.y),n=new Mp(e.i,e.x,e.y),r=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}a(og,"splitPolygon");function ig(i,e,t,n){var r=new Mp(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}a(ig,"insertNode");function lc(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}a(lc,"removeNode");function Mp(i,e,t){this.i=i,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}a(Mp,"Node");cc.deviation=function(i,e,t,n){var r=e&&e.length,s=r?e[0]*t:i.length,o=Math.abs(xp(i,0,s,t));if(r)for(var l=0,c=e.length;l<c;l++){var u=e[l]*t,h=l<c-1?e[l+1]*t:i.length;o-=Math.abs(xp(i,u,h,t))}var d=0;for(l=0;l<n.length;l+=3){var f=n[l]*t,m=n[l+1]*t,_=n[l+2]*t;d+=Math.abs((i[f]-i[_])*(i[m+1]-i[f+1])-(i[f]-i[m])*(i[_+1]-i[f+1]))}return o===0&&d===0?0:Math.abs((d-o)/o)};function xp(i,e,t,n){for(var r=0,s=e,o=t-n;s<t;s+=n)r+=(i[o]-i[s])*(i[s+1]+i[o+1]),o=s;return r}a(xp,"signedArea");cc.flatten=function(i){for(var e=i[0][0].length,t={vertices:[],holes:[],dimensions:e},n=0,r=0;r<i.length;r++){for(var s=0;s<i[r].length;s++)for(var o=0;o<e;o++)t.vertices.push(i[r][s][o]);r>0&&(n+=i[r-1].length,t.holes.push(n))}return t};var yp=class{constructor(e,t,n,r){this.gl=e;this.name=t;this.location=n;this.type=r}static{a(this,"Uniform")}f1(e){this.gl.uniform1f(this.location,e)}f1v(e,t,n){this.gl.uniform1fv(this.location,e,t,n)}f2(...e){this.gl.uniform2f(this.location,...e)}f2v(...e){this.gl.uniform2fv(this.location,...e)}f3(...e){this.gl.uniform3f(this.location,...e)}f3v(...e){this.gl.uniform3fv(this.location,...e)}f4(...e){this.gl.uniform4f(this.location,...e)}f4v(...e){this.gl.uniform4fv(this.location,...e)}mat3f(...e){this.gl.uniformMatrix3fv(this.location,...e)}mat3fv(...e){this.gl.uniformMatrix3fv(this.location,...e)}},sa=class i{constructor(e,t,n,r){this.gl=e;this.name=t;this.vertex=n;this.fragment=r;this.uniforms={};this.attribs={};Vn(n)&&(n=i.compile(e,e.VERTEX_SHADER,n)),this.vertex=n,Vn(r)&&(r=i.compile(e,e.FRAGMENT_SHADER,r)),this.fragment=r,this.program=i.link(e,n,r),this.#t(),this.#i()}static{a(this,"ShaderProgram")}static#e=new WeakMap;static async load(e,t,n,r){let s=i.#e.get(e);if(s||(s=new Map,i.#e.set(e,s)),!s.has(t)){n instanceof URL&&(n=await(await fetch(n)).text()),r instanceof URL&&(r=await(await fetch(r)).text());let o=new i(e,t,n,r);s.set(t,o)}return s.get(t)}static compile(e,t,n){let r=e.createShader(t);if(r==null)throw new Error("Could not create new shader");if(e.shaderSource(r,n),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS))return r;let s=e.getShaderInfoLog(r);throw e.deleteShader(r),new Error(`Error compiling ${t} shader: ${s}`)}static link(e,t,n){let r=e.createProgram();if(r==null)throw new Error("Could not create new shader program");if(e.attachShader(r,t),e.attachShader(r,n),e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS))return r;let s=e.getProgramInfoLog(r);throw e.deleteProgram(r),new Error(`Error linking shader program: ${s}`)}#t(){this.uniforms={};for(let e=0;e<this.gl.getProgramParameter(this.program,this.gl.ACTIVE_UNIFORMS);e++){let t=this.gl.getActiveUniform(this.program,e);if(t==null)throw new Error(`Could not get uniform info for uniform number ${e} for program ${this.program}`);let n=this.gl.getUniformLocation(this.program,t.name);if(n==null)throw new Error(`Could not get uniform location for uniform number ${e} for program ${this.program}`);this[t.name]=this.uniforms[t.name]=new yp(this.gl,t.name,n,t.type)}}#i(){this.attribs={};for(let e=0;e<this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES);e++){let t=this.gl.getActiveAttrib(this.program,e);if(t==null)throw new Error(`Could not get attribute info for attribute number ${e} for program ${this.program}`);this.attribs[t.name]=t,this[t.name]=this.gl.getAttribLocation(this.program,t.name)}}bind(){this.gl.useProgram(this.program)}},oa=class{constructor(e){this.gl=e;this.buffers=[];this.gl=e;let t=this.gl.createVertexArray();if(!t)throw new Error("Could not create new VertexArray");this.vao=t,this.bind()}static{a(this,"VertexArray")}dispose(e=!0){if(this.gl.deleteVertexArray(this.vao??null),this.vao=void 0,e)for(let t of this.buffers)t.dispose()}bind(){this.gl.bindVertexArray(this.vao)}buffer(e,t,n,r=!1,s=0,o=0,l){n??=this.gl.FLOAT;let c=new Sp(this.gl,l);return c.bind(),this.gl.vertexAttribPointer(e,t,n,r,s,o),this.gl.enableVertexAttribArray(e),this.buffers.push(c),c}},Sp=class{constructor(e,t){this.gl=e;this.gl=e,this.target=t??e.ARRAY_BUFFER;let n=e.createBuffer();if(!n)throw new Error("Unable to create new Buffer");this.#e=n}static{a(this,"Buffer")}#e;dispose(){this.#e&&this.gl.deleteBuffer(this.#e),this.#e=void 0}bind(){this.gl.bindBuffer(this.target,this.#e)}set(e,t){this.bind(),t??=this.gl.STATIC_DRAW,this.gl.bufferData(this.target,e,t)}get length(){return this.bind(),this.gl.getBufferParameter(this.target,this.gl.BUFFER_SIZE)}};var ag=`#version 300 es\r
\r
precision highp float;\r
\r
uniform float u_depth;\r
uniform float u_alpha;\r
\r
in vec4 v_color;\r
\r
out vec4 o_color;\r
\r
void main() {\r
    vec4 i_color = v_color;\r
    i_color.a *= u_alpha;\r
    o_color = i_color;\r
    gl_FragDepth = u_depth;\r
}\r
`;var lg=`#version 300 es\r
\r
uniform mat3 u_matrix;\r
in vec2 a_position;\r
in vec4 a_color;\r
out vec4 v_color;\r
\r
void main() {\r
    v_color = a_color;\r
    gl_Position = vec4((u_matrix * vec3(a_position, 1)).xy, 0, 1);;\r
}\r
`;var Tp=`#version 300 es\r
\r
precision highp float;\r
\r
uniform float u_depth;\r
uniform float u_alpha;\r
\r
in vec2 v_linespace;\r
in float v_cap_region;\r
in vec4 v_color;\r
\r
out vec4 outColor;\r
\r
void main() {\r
    vec4 i_color = v_color;\r
    i_color.a *= u_alpha;\r
\r
    float v = abs(v_linespace.x);\r
    float x = v_linespace.x;\r
    float y = v_linespace.y;\r
\r
    if(x < (-1.0 + v_cap_region)) {\r
        float a = (1.0 + x) / v_cap_region;\r
        x = mix(-1.0, 0.0, a);\r
        if(x * x + y * y < 1.0) {\r
            outColor = i_color;\r
        } else {\r
            discard;\r
        }\r
    } else if (x > (1.0 - v_cap_region)) {\r
        float a = (x - (1.0 - v_cap_region)) / v_cap_region;\r
        x = mix(0.0, 1.0, a);\r
        if(x * x + y * y < 1.0) {\r
            outColor = i_color;\r
        } else {\r
            discard;\r
        }\r
    } else {\r
        outColor = i_color;\r
    }\r
\r
    gl_FragDepth = u_depth;\r
}\r
`;var vp=`#version 300 es\r
\r
uniform mat3 u_matrix;\r
\r
in vec2 a_position;\r
in vec4 a_color;\r
in float a_cap_region;\r
\r
out vec2 v_linespace;\r
out float v_cap_region;\r
out vec4 v_color;\r
\r
vec2 c_linespace[6] = vec2[](\r
    // first triangle\r
    vec2(-1, -1),\r
    vec2( 1, -1),\r
    vec2(-1,  1),\r
    // second triangle\r
    vec2(-1,  1),\r
    vec2( 1, -1),\r
    vec2( 1,  1)\r
);\r
\r
void main() {\r
    int triangle_vertex_num = int(gl_VertexID % 6);\r
\r
    v_linespace = c_linespace[triangle_vertex_num];\r
    v_cap_region = a_cap_region;\r
\r
    gl_Position = vec4((u_matrix * vec3(a_position, 1)).xy, 0, 1);\r
\r
    v_color = a_color;\r
}\r
`;var Qs=class{static{a(this,"Tesselator")}static{this.vertices_per_quad=2*3}static quad_to_triangles(e){let t=[...e[0],...e[2],...e[1],...e[1],...e[2],...e[3]];if(t.filter(n=>Number.isNaN(n)).length)throw new Error("Degenerate quad");return t}static populate_color_data(e,t,n,r){t||(t=new w(1,0,0,1));let s=t.to_array();for(let o=0;o<r;o++)e[n+o]=s[o%s.length]}static tesselate_segment(e,t,n){let o=t.sub(e).normal.normalize().multiply(n/2),l=o.normal,c=e.add(o).add(l),u=e.sub(o).add(l),h=t.add(o).sub(l),d=t.sub(o).sub(l);return[c,u,h,d]}static tesselate_polyline(e){let t=e.width||0,n=e.points,r=e.color,o=(n.length-1)*this.vertices_per_quad,l=new Float32Array(o*2),c=new Float32Array(o*4),u=new Float32Array(o),h=0;for(let d=1;d<n.length;d++){let f=n[d-1],m=n[d],_=m.sub(f).magnitude;if(_==0)continue;let M=this.tesselate_segment(f,m,t),g=t/(_+t);l.set(this.quad_to_triangles(M),h*2),u.set(Array(this.vertices_per_quad).fill(g),h),this.populate_color_data(c,r,h*4,this.vertices_per_quad*4),h+=this.vertices_per_quad}return{position_array:l.slice(0,h*2),cap_array:u.slice(0,h),color_array:c.slice(0,h*4)}}static tesselate_circle(e){let t=new A(e.radius,0),n=t.normal,r=e.center.add(t).add(n),s=e.center.sub(t).add(n),o=e.center.add(t).sub(n),l=e.center.sub(t).sub(n);return[r,s,o,l]}static tesselate_circles(e){let t=e.length*this.vertices_per_quad,n=new Float32Array(t*2),r=new Float32Array(t),s=new Float32Array(t*4),o=0;for(let l=0;l<e.length;l++){let c=e[l],u=1,h=this.tesselate_circle(c);n.set(this.quad_to_triangles(h),o*2),r.set(Array(this.vertices_per_quad).fill(u),o),this.populate_color_data(s,c.color,o*4,this.vertices_per_quad*4),o+=this.vertices_per_quad}return{position_array:n.slice(0,o*2),cap_array:r.slice(0,o),color_array:s.slice(0,o*4)}}static triangulate_polygon(e){if(e.vertices)return e;let t=e.points,n=new Array(t.length*2);for(let o=0;o<t.length;o++){let l=t[o];n[o*2]=l.x,n[o*2+1]=l.y}if(t.length==3)return e.points=[],e.vertices=new Float32Array(n),e;let r=cc(n),s=new Float32Array(r.length*2);for(let o=0;o<r.length;o++){let l=r[o];s[o*2]=n[l*2],s[o*2+1]=n[l*2+1]}return e.points=[],e.vertices=s,e}},ih=class i{constructor(e,t){this.gl=e;this.shader=t??i.shader,this.vao=new oa(e),this.position_buf=this.vao.buffer(this.shader.a_position,2),this.cap_region_buf=this.vao.buffer(this.shader.a_cap_region,1),this.color_buf=this.vao.buffer(this.shader.a_color,4),this.vertex_count=0}static{a(this,"CircleSet")}static async load_shader(e){this.shader=await sa.load(e,"polyline",vp,Tp)}dispose(){this.vao.dispose(),this.position_buf.dispose(),this.cap_region_buf.dispose(),this.color_buf.dispose()}set(e){let{position_array:t,cap_array:n,color_array:r}=Qs.tesselate_circles(e);this.position_buf.set(t),this.cap_region_buf.set(n),this.color_buf.set(r),this.vertex_count=t.length/2}render(){this.vertex_count&&(this.vao.bind(),this.gl.drawArrays(this.gl.TRIANGLES,0,this.vertex_count))}},rh=class i{constructor(e,t){this.gl=e;this.shader=t??i.shader,this.vao=new oa(e),this.position_buf=this.vao.buffer(this.shader.a_position,2),this.cap_region_buf=this.vao.buffer(this.shader.a_cap_region,1),this.color_buf=this.vao.buffer(this.shader.a_color,4),this.vertex_count=0}static{a(this,"PolylineSet")}static async load_shader(e){this.shader=await sa.load(e,"polyline",vp,Tp)}dispose(){this.vao.dispose(),this.position_buf.dispose(),this.cap_region_buf.dispose(),this.color_buf.dispose()}set(e){if(!e.length)return;let t=e.reduce((u,h)=>u+(h.points.length-1)*Qs.vertices_per_quad,0),n=new Float32Array(t*2),r=new Float32Array(t),s=new Float32Array(t*4),o=0,l=0,c=0;for(let u of e){let{position_array:h,cap_array:d,color_array:f}=Qs.tesselate_polyline(u);n.set(h,o),o+=h.length,r.set(d,l),l+=d.length,s.set(f,c),c+=f.length}this.position_buf.set(n),this.cap_region_buf.set(r),this.color_buf.set(s),this.vertex_count=o/2}render(){this.vertex_count&&(this.vao.bind(),this.gl.drawArrays(this.gl.TRIANGLES,0,this.vertex_count))}},sh=class i{constructor(e,t){this.gl=e;this.shader=t??i.shader,this.vao=new oa(e),this.position_buf=this.vao.buffer(this.shader.a_position,2),this.color_buf=this.vao.buffer(this.shader.a_color,4),this.vertex_count=0}static{a(this,"PolygonSet")}static async load_shader(e){this.shader=await sa.load(e,"polygon",lg,ag)}dispose(){this.vao.dispose(),this.position_buf.dispose(),this.color_buf.dispose()}static polyline_from_triangles(e,t,n){let r=[];for(let s=0;s<e.length;s+=6){let o=new A(e[s],e[s+1]),l=new A(e[s+2],e[s+3]),c=new A(e[s+4],e[s+5]);r.push(new bt([o,l,c,o],t,n))}return r}set(e){let t=0;for(let c of e)Qs.triangulate_polygon(c),t+=c.vertices?.length??0;let n=t/2,r=new Float32Array(t),s=new Float32Array(n*4),o=0,l=0;for(let c of e){if(c.vertices==null)continue;let u=c.vertices.length/2;r.set(c.vertices,o),o+=c.vertices.length,Qs.populate_color_data(s,c.color,l,u*4),l+=u*4}this.position_buf.set(r),this.color_buf.set(s),this.vertex_count=o/2}render(){this.vertex_count&&(this.vao.bind(),this.gl.drawArrays(this.gl.TRIANGLES,0,this.vertex_count))}},uc=class{constructor(e){this.gl=e;this.gl=e}static{a(this,"PrimitiveSet")}#e=[];#t=[];#i=[];#n;#r;#s;static async load_shaders(e){await Promise.all([sh.load_shader(e),rh.load_shader(e),ih.load_shader(e)])}dispose(){this.#n?.dispose(),this.#r?.dispose(),this.#s?.dispose()}clear(){this.#n?.dispose(),this.#r?.dispose(),this.#s?.dispose(),this.#n=void 0,this.#r=void 0,this.#s=void 0,this.#e=[],this.#t=[],this.#i=[]}add_circle(e){this.#t.push(e)}add_polygon(e){this.#e.push(e)}add_line(e){this.#i.push(e)}commit(){this.#e.length&&(this.#n=new sh(this.gl),this.#n.set(this.#e),this.#e=void 0),this.#i.length&&(this.#s=new rh(this.gl),this.#s.set(this.#i),this.#i=void 0),this.#t.length&&(this.#r=new ih(this.gl),this.#r.set(this.#t),this.#t=void 0)}render(e,t=0,n=1){this.#n&&(this.#n.shader.bind(),this.#n.shader.u_matrix.mat3f(!1,e.elements),this.#n.shader.u_depth.f1(t),this.#n.shader.u_alpha.f1(n),this.#n.render()),this.#r&&(this.#r.shader.bind(),this.#r.shader.u_matrix.mat3f(!1,e.elements),this.#r.shader.u_depth.f1(t),this.#r.shader.u_alpha.f1(n),this.#r.render()),this.#s&&(this.#s.shader.bind(),this.#s.shader.u_matrix.mat3f(!1,e.elements),this.#s.shader.u_depth.f1(t),this.#s.shader.u_alpha.f1(n),this.#s.render())}};var oh=class extends $r{constructor(t){super(t);this.#e=[];this.projection_matrix=dt.identity()}static{a(this,"WebGL2Renderer")}#e;#t;async setup(){let t=this.canvas.getContext("webgl2",{alpha:!1});if(t==null)throw new Error("Unable to create WebGL2 context");this.gl=t,t.enable(t.BLEND),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.enable(t.DEPTH_TEST),t.depthFunc(t.GREATER),t.clearColor(...this.background_color.to_array()),t.clearDepth(0),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.update_canvas_size(),await uc.load_shaders(t)}dispose(){for(let t of this.layers)t.dispose();this.gl=void 0}update_canvas_size(){if(!this.gl)return;let t=window.devicePixelRatio,n=this.canvas.getBoundingClientRect(),r=n.width,s=n.height,o=Math.round(n.width*t),l=Math.round(n.height*t);this.canvas_size.x==o&&this.canvas_size.y==l||(this.canvas.width=o,this.canvas.height=l,this.gl.viewport(0,0,o,l),this.projection_matrix=dt.orthographic(r,s))}clear_canvas(){if(this.gl==null)throw new Error("Uninitialized");this.update_canvas_size(),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}start_layer(t,n=0){if(this.gl==null)throw new Error("Uninitialized");this.#t=new Np(this,t,new uc(this.gl))}end_layer(){if(this.#t==null)throw new Error("No active layer");return this.#t.geometry.commit(),this.#e.push(this.#t),this.#t=null,this.#e.at(-1)}arc(t,n,r,s,o,l){super.prep_arc(t,n,r,s,o,l)}circle(t,n,r){let s=super.prep_circle(t,n,r);s.color&&this.#t.geometry.add_circle(s)}line(t,n,r){let s=super.prep_line(t,n,r);s.color&&this.#t.geometry.add_line(s)}polygon(t,n){let r=super.prep_polygon(t,n);r.color&&this.#t.geometry.add_polygon(r)}get layers(){let t=this.#e;return{*[Symbol.iterator](){for(let n of t)yield n}}}remove_layer(t){let n=this.#e.indexOf(t);n!=-1&&this.#e.splice(n,1)}},Np=class extends jr{constructor(t,n,r){super(t,n);this.renderer=t;this.name=n;this.geometry=r}static{a(this,"WebGL2RenderLayer")}dispose(){this.clear()}clear(){this.geometry?.dispose()}render(t,n,r=1){let s=this.renderer.gl,o=this.renderer.projection_matrix.multiply(t);this.composite_operation!="source-over"&&s.blendFunc(s.ONE_MINUS_DST_COLOR,s.ONE_MINUS_SRC_ALPHA),this.geometry.render(o,n,r),this.composite_operation!="source-over"&&s.blendFunc(s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA)}};var Fn=class extends qo{static{a(this,"BoardItemPainter")}get theme(){return this.view_painter.theme}get filter_net(){return this.view_painter.filter_net}},Pp=class extends Fn{constructor(){super(...arguments);this.classes=[Vo,zl]}static{a(this,"LinePainter")}layers_for(t){return[t.layer]}paint(t,n){if(this.filter_net)return;let r=[n.start,n.end];this.gfx.line(new bt(r,n.width,t.color))}},Ep=class extends Fn{constructor(){super(...arguments);this.classes=[Wo,ec]}static{a(this,"RectPainter")}layers_for(t){return[t.layer]}paint(t,n){if(this.filter_net)return;let r=t.color,s=[n.start,new A(n.start.x,n.end.y),n.end,new A(n.end.x,n.start.y),n.start];this.gfx.line(new bt(s,n.width,r)),n.fill&&n.fill!="none"&&this.gfx.polygon(new fn(s,r))}},wp=class extends Fn{constructor(){super(...arguments);this.classes=[br,Fo,ql]}static{a(this,"PolyPainter")}layers_for(t){return[t.layer]}paint(t,n){if(this.filter_net)return;let r=t.color;n.width&&this.gfx.line(new bt([...n.pts,n.pts[0]],n.width,r)),n.fill&&n.fill!="none"&&this.gfx.polygon(new fn(n.pts,r))}},Lp=class extends Fn{constructor(){super(...arguments);this.classes=[Io,jl]}static{a(this,"ArcPainter")}layers_for(t){return[t.layer]}paint(t,n){if(this.filter_net)return;let r=n.arc,s=r.to_polyline();this.gfx.line(new bt(s,r.width,t.color))}},Ap=class extends Fn{constructor(){super(...arguments);this.classes=[Uo,$l]}static{a(this,"CirclePainter")}layers_for(t){return[t.layer]}paint(t,n){if(this.filter_net)return;let r=t.color,s=n.center.sub(n.end).magnitude,o=new Un(n.center,s,new Ve(0),new Ve(2*Math.PI),n.width);if(n.fill&&n.fill!="none")this.gfx.circle(new In(o.center,o.radius+(n.width??0),r));else{let l=o.to_polyline();this.gfx.line(new bt(l,o.width,r))}}},Op=class extends Fn{constructor(){super(...arguments);this.classes=[Kl]}static{a(this,"TraceSegmentPainter")}layers_for(t){return[t.layer]}paint(t,n){if(this.filter_net&&n.net!=this.filter_net)return;let r=[n.start,n.end];this.gfx.line(new bt(r,n.width,t.color))}},Vp=class extends Fn{constructor(){super(...arguments);this.classes=[Ql]}static{a(this,"TraceArcPainter")}layers_for(t){return[t.layer]}paint(t,n){if(this.filter_net&&n.net!=this.filter_net)return;let r=Un.from_three_points(n.start,n.mid,n.end,n.width),s=r.to_polyline();this.gfx.line(new bt(s,r.width,t.color))}},Up=class extends Fn{constructor(){super(...arguments);this.classes=[Bl]}static{a(this,"ViaPainter")}layers_for(t){if(t.layers){let n=[];for(let r of WR(t.layers[0],t.layers[1]))n.push(gr(r,"BBViaHoles")),n.push(gr(r,"BBViaHoleWalls"));return n}else return[":Via:Holes",":Via:HoleWalls"]}paint(t,n){if(this.filter_net&&n.net!=this.filter_net)return;let r=t.color;t.name.endsWith("HoleWalls")||t.name==":Overlay"?this.gfx.circle(new In(n.at.position,n.size/2,r)):t.name.endsWith("Holes")&&(this.gfx.circle(new In(n.at.position,n.drill/2,r)),(n.type=="blind"||n.type=="micro")&&n.layers&&(this.gfx.arc(n.at.position,n.size/2-n.size/8,Ve.from_degrees(180+70),Ve.from_degrees(360-70),n.size/4,t.layer_set.by_name(n.layers[0])?.color??w.transparent_black),this.gfx.arc(n.at.position,n.size/2-n.size/8,Ve.from_degrees(70),Ve.from_degrees(180-70),n.size/4,t.layer_set.by_name(n.layers[1])?.color??w.transparent_black)))}},Ip=class extends Fn{constructor(){super(...arguments);this.classes=[Oo]}static{a(this,"ZonePainter")}layers_for(t){let n=t.layers??[t.layer];return n.length&&n[0]=="F&B.Cu"&&(n.shift(),n.push("F.Cu","B.Cu")),n.map(r=>Ds.includes(r)?gr(r,"Zones"):r)}paint(t,n){if(n.filled_polygons&&!(this.filter_net&&n.net!=this.filter_net))for(let r of n.filled_polygons)!t.name.includes(r.layer)&&t.name!=":Overlay"||this.gfx.polygon(new fn(r.pts,t.color))}},Fp=class extends Fn{constructor(){super(...arguments);this.classes=[tc]}static{a(this,"PadPainter")}layers_for(t){let n=[":Pad:Num"];for(let r of t.layers)r=="*.Cu"?(n.push(":Pads:Front"),n.push(":Pads:Back")):r=="F.Cu"?n.push(":Pads:Front"):r=="B.Cu"?n.push(":Pads:Back"):r=="*.Mask"?(n.push("F.Mask"),n.push("B.Mask")):r=="*.Paste"?(n.push("F.Paste"),n.push("B.Paste")):n.push(r);switch(t.type){case"thru_hole":n.push(":Pad:HoleWalls"),n.push(":Pad:Holes");break;case"np_thru_hole":n.push(":NonPlatedHoles");break;case"smd":case"connect":break;default:Ll(`Unhandled pad type "${t.type}"`);break}return n}paintPadNumber(t,n){let r=new En(n.number);Object.assign(r.attributes,JSON.parse(`
                {
                    "font": null,
                    "h_align": "center",
                    "v_align": "center",
                    "angle": {},
                    "line_spacing": 1,
                    "stroke_width": 350,
                    "italic": false,
                    "bold": false,
                    "underlined": false,
                    "color": {
                        "r": 0.6862745098039216,
                        "g": 0.6862745098039216,
                        "b": 0.6862745098039216,
                        "a": 1
                    },
                    "visible": true,
                    "mirrored": false,
                    "multiline": true,
                    "size": {
                        "x": 10000,
                        "y": 10000
                    },
                    "keep_upright": false
                }

            `)),r.attributes.size=new A(2e3,2e3),r.apply_at(n.at),r.attributes.color=n.highlighted?w.black:w.white,Wt.default().draw(this.gfx,r.shown_text,r.text_pos,r.attributes)}paint(t,n){if(this.filter_net&&n.net?.number!=this.filter_net)return;if(t.name===":Pad:Num"){this.paintPadNumber(t,n);return}let r=n.highlighted?n.highlightColor:t.color,s=dt.translation(n.at.position.x,n.at.position.y);s.rotate_self(-Ve.deg_to_rad(n.parent.at.rotation)),s.rotate_self(Ve.deg_to_rad(n.at.rotation)),this.gfx.state.push(),this.gfx.state.multiply(s);let o=new A(0,0);if((t.name==":Pad:Holes"||t.name==":NonPlatedHoles")&&n.drill!=null)if(n.drill.oval){let c=new A(n.drill.diameter/2,(n.drill.width??0)/2),u=Math.min(c.x,c.y),h=new A(c.x-u,c.y-u),d=o.add(n.drill.offset),f=d.sub(h),m=d.add(h);this.gfx.line(new bt([f,m],u*2,r))}else{let c=o.add(n.drill.offset);this.gfx.circle(new In(c,n.drill.diameter/2,r))}else{let c=n.shape;switch(c=="custom"&&n.options?.anchor&&(c=n.options.anchor),n.drill?.offset&&this.gfx.state.matrix.translate_self(n.drill.offset.x,n.drill.offset.y),c){case"circle":this.gfx.circle(new In(o,n.size.x/2,r));break;case"rect":{let u=[new A(-n.size.x/2,-n.size.y/2),new A(n.size.x/2,-n.size.y/2),new A(n.size.x/2,n.size.y/2),new A(-n.size.x/2,n.size.y/2)];this.gfx.polygon(new fn(u,r))}break;case"roundrect":case"trapezoid":{let u=Math.min(n.size.x,n.size.y)*(n.roundrect_rratio??0),h=new A(n.size.x/2,n.size.y/2);h=h.sub(new A(u,u));let d=n.rect_delta?n.rect_delta.copy():new A(0,0);d=d.multiply(.5);let f=[new A(-h.x-d.y,h.y+d.x),new A(h.x+d.y,h.y-d.x),new A(h.x-d.y,-h.y+d.x),new A(-h.x+d.y,-h.y-d.x)];this.gfx.polygon(new fn(f,r)),this.gfx.line(new bt([...f,f[0]],u*2,r))}break;case"oval":{let u=new A(n.size.x/2,n.size.y/2),h=Math.min(u.x,u.y),d=new A(u.x-h,u.y-h),f=o.add(n.drill?.offset||new A(0,0)),m=f.sub(d),_=f.add(d);m.equals(_)?this.gfx.circle(new In(f,h,r)):this.gfx.line(new bt([m,_],h*2,r))}break;default:Ll(`Unknown pad shape "${n.shape}"`);break}if(n.shape=="custom"&&n.primitives)for(let u of n.primitives)this.view_painter.paint_item(t,u)}this.gfx.state.pop()}},Wp=class extends Fn{constructor(){super(...arguments);this.classes=[Zo]}static{a(this,"GrTextPainter")}layers_for(t){return[t.layer.name]}paint(t,n){if(this.filter_net||n.hide||!n.shown_text)return;if(n.render_cache){for(let s of n.render_cache.polygons)this.view_painter.paint_item(t,s);return}let r=new En(n.shown_text);r.apply_effects(n.effects),r.apply_at(n.at),r.attributes.color=t.color,this.gfx.state.push(),Wt.default().draw(this.gfx,r.shown_text,r.text_pos,r.attributes),this.gfx.state.pop()}},Cp=class extends Fn{constructor(){super(...arguments);this.classes=[Ys]}static{a(this,"FpTextPainter")}layers_for(t){return t.hide?[]:[t.layer.name]}paint(t,n){if(this.filter_net||n.hide||!n.shown_text)return;if(n.render_cache){this.gfx.state.push(),this.gfx.state.matrix=dt.identity();for(let s of n.render_cache.polygons)this.view_painter.paint_item(t,s);this.gfx.state.pop();return}let r=new En(n.shown_text);if(r.apply_effects(n.effects),r.apply_at(n.at),r.attributes.keep_upright=!n.at.unlocked,r.attributes.color=t.color,n.parent){let s=Ve.from_degrees(0),o=r.text_pos;o=s.rotate_point(o,new A(0,0)),o=o.add(new A(0,0).multiply(1e4)),r.text_pos.set(o)}if(r.attributes.keep_upright){for(;r.text_angle.degrees>90;)r.text_angle.degrees-=180;for(;r.text_angle.degrees<=-90;)r.text_angle.degrees+=180}this.gfx.state.push(),this.gfx.state.matrix=dt.identity(),Wt.default().draw(this.gfx,r.shown_text,r.text_pos,r.attributes),this.gfx.state.pop()}},Zp=class extends Fn{constructor(){super(...arguments);this.classes=[Jl]}static{a(this,"DimensionPainter")}layers_for(t){return[t.layer]}paint(t,n){switch(n.type){case"orthogonal":case"aligned":this.paint_linear(t,n);break;case"center":this.paint_center(t,n);break;case"radial":this.paint_radial(t,n);break;case"leader":this.paint_leader(t,n);break}}paint_center(t,n){let r=n.style.thickness??.2,s=n.end.sub(n.start);this.gfx.line([n.start.sub(s),n.start.add(s)],r,t.color),s=Ve.from_degrees(90).rotate_point(s),this.gfx.line([n.start.sub(s),n.start.add(s)],r,t.color)}paint_radial(t,n){let r=n.style.thickness??.2,s=n.start.copy(),o=new A(0,n.style.arrow_length);this.gfx.line([s.sub(o),s.add(o)],r,t.color),o=Ve.from_degrees(90).rotate_point(o),this.gfx.line([s.sub(o),s.add(o)],r,t.color);let l=n.end.sub(n.start);l=l.resize(n.leader_length);let c=this.make_text(t,n),u=c.get_text_box().scale(1/1e4),h=[n.end,n.end.add(l),n.gr_text.at.position],d=u.intersect_segment(h[1],h[2]);d&&(h[2]=d),this.gfx.line(h,r,t.color);let f=Ve.from_degrees(27.5),m=l.angle.negative(),_=new A(n.style.arrow_length,0),M=m.add(f).rotate_point(_),g=m.sub(f).rotate_point(_);this.gfx.line([n.end.add(g),n.end,n.end.add(M)],r,t.color),this.paint_text(c)}paint_leader(t,n){let r=n.style.thickness??.2,s=this.make_text(t,n),o=s.get_text_box().grow(s.text_width/2,s.get_effective_text_thickness()*2).scale(1/1e4),l=n.start.add(n.end.sub(n.start).resize(n.style.extension_offset)),c=[l,n.end,n.gr_text.at.position],u=o.intersect_segment(c[1],c[2]);if(u&&(c[2]=u),this.gfx.line(c,r,t.color),n.style.text_frame==1&&this.gfx.line(bt.from_BBox(o,r,t.color)),n.style.text_frame==2){let g=o.w/2-s.get_effective_text_thickness()/1e4/2;this.gfx.arc(o.center,g,Ve.from_degrees(0),Ve.from_degrees(360),r,t.color)}let h=n.end.sub(n.start),d=Ve.from_degrees(27.5),f=h.angle.negative(),m=new A(n.style.arrow_length,0),_=f.add(d).rotate_point(m),M=f.sub(d).rotate_point(m);this.gfx.line([l.add(M),l,l.add(_)],r,t.color),this.paint_text(s)}paint_linear(t,n){let r=n.style.thickness??.2,s=new A,o=new A,l=new A;if(n.type=="orthogonal")n.orientation==0?(s=new A(0,n.height),o=n.start.add(s),l=new A(n.end.x,o.y)):(s=new A(n.height,0),o=n.start.add(s),l=new A(o.x,n.end.y));else{let M=n.end.sub(n.start);n.height>0?s=new A(-M.y,M.x):s=new A(M.y,-M.x);let g=s.resize(n.height).multiply(Math.sign(n.height));o=n.start.add(g),l=n.end.add(g)}let c=Math.abs(n.height)-n.style.extension_offset+n.style.extension_height,u=n.start.add(s.resize(n.style.extension_offset)),h=u.add(s.resize(c));this.gfx.line([u,h],r,t.color),u=n.end.add(s.resize(n.style.extension_offset)),h=u.add(s.resize(c)),this.gfx.line([u,h],r,t.color),this.gfx.line([o,l],r,t.color);let d=l.sub(o).angle.negative(),f=Ve.from_degrees(27.5),m=d.add(f).rotate_point(new A(n.style.arrow_length,0)),_=d.sub(f).rotate_point(new A(n.style.arrow_length,0));this.gfx.line([o.add(_),o,o.add(m)],r,t.color),this.gfx.line([l.sub(_),l,l.sub(m)],r,t.color),this.paint_text(this.make_text(t,n))}make_text(t,n){let r=new En(n.gr_text.shown_text);return r.apply_effects(n.gr_text.effects),r.apply_at(n.gr_text.at),r.attributes.color=t.color,r}paint_text(t){this.gfx.state.push(),Wt.default().draw(this.gfx,t.shown_text,t.text_pos,t.attributes),this.gfx.state.pop()}},kp=class extends Fn{constructor(){super(...arguments);this.classes=[_r]}static{a(this,"FootprintPainter")}layers_for(t){let n=new Set;for(let r of t.items()){let s=this.view_painter.layers_for(r);for(let o of s)n.add(o)}return Array.from(n.values())}paint(t,n){let r=dt.translation(n.at.position.x,n.at.position.y).rotate_self(Ve.deg_to_rad(n.at.rotation));this.gfx.state.push(),this.gfx.state.multiply(r);for(let s of n.items()){let o=this.view_painter.layers_for(s);(t.name==":Overlay"||o.includes(t.name))&&this.view_painter.paint_item(t,s)}this.gfx.state.pop()}},ah=class extends ea{constructor(t,n,r){super(t,n,r);this.filter_net=null;this.painter_list=[new Pp(this,t),new Ep(this,t),new wp(this,t),new Lp(this,t),new Ap(this,t),new Op(this,t),new Vp(this,t),new Up(this,t),new Ip(this,t),new Fp(this,t),new kp(this,t),new Wp(this,t),new Cp(this,t),new Zp(this,t)]}static{a(this,"BoardPainter")}paint_net(t,n){let r=this.layers.overlay;this.filter_net=n,r.clear(),r.color=w.white,this.gfx.start_layer(r.name);for(let s of t.items())this.painter_for(s)&&this.paint_item(r,s);r.graphics=this.gfx.end_layer(),r.graphics.composite_operation="overlay",this.filter_net=null}};var lh=class extends Qo{constructor(){super(...arguments);this.pads=new Map}static{a(this,"BoardViewer")}get board(){return this.document}async load(t){if(t instanceof Mr)for(let n of t.pads)this.pads.set(n.index,n);await super.load(t)}create_renderer(t){return new oh(t)}create_painter(){return new ah(this.renderer,this.layers,this.theme)}create_layer_set(){return new Su(this.board,this.theme)}get grid_origin(){return new A(0,0)}on_pick(t,n){let r=null;for(let{layer:s,bbox:o}of n)if(o.context instanceof _r){r=o.context;break}this.select(r)}select(t){}highlight_net(t){this.draw()}set_layers_opacity(t,n){for(let r of t)r.opacity=n;this.draw()}set track_opacity(t){this.set_layers_opacity(this.layers.copper_layers(),t)}set via_opacity(t){this.set_layers_opacity(this.layers.via_layers(),t)}set zone_opacity(t){this.set_layers_opacity(this.layers.zone_layers(),t)}set pad_opacity(t){this.set_layers_opacity(this.layers.pad_layers(),t)}set pad_hole_opacity(t){this.set_layers_opacity(this.layers.pad_hole_layers(),t)}set grid_opacity(t){this.set_layers_opacity(this.layers.grid_layers(),t)}set page_opacity(t){this.layers.by_name(ss.drawing_sheet).opacity=t,this.draw()}zoom_to_board(){let n=this.layers.by_name("Edge.Cuts").bbox;this.viewport.camera.bbox=n.grow(n.w*.1)}findHighlightItem(t){for(let[,n]of this.pads)if(n.boundingBox.contains_point(t))return n;return null}locateItemForCrossHight(t){return this.pads.get(t)??null}};var Tr=class extends ng(de){constructor(){super(...arguments);this.selected=[];this.mouse_press_pos=null}static{a(this,"KCViewerElement")}initialContentCallback(){(async()=>(this.viewer=this.addDisposable(this.make_viewer()),await this.viewer.setup(),this.addDisposable(this.viewer.addEventListener(di.type,()=>{this.loaded=!0,this.dispatchEvent(new di)}))))()}async preferenceChangeCallback(t){this.theme||!this.viewer||!this.viewer.loaded||(this.update_theme(),this.viewer.paint(),this.viewer.draw())}disconnectedCallback(){super.disconnectedCallback(),this.selected=[]}get themeObject(){return this.theme?xr.by_name(this.theme):yr.INSTANCE.theme}async load(t){this.loaded=!1,await this.viewer.load(t)}render(){return this.canvas=re`<canvas></canvas>`,this.canvas.addEventListener("mousedown",t=>{this.mouse_press_pos=new A(t.clientX,t.clientY)}),this.canvas.addEventListener("mouseup",t=>{this.mouse_press_pos=null}),this.canvas.addEventListener("mouseleave",t=>{this.mouse_press_pos=null}),this.canvas.addEventListener("mousemove",t=>{if(!this.mouse_press_pos)return;let n=new A(this.mouse_press_pos.x-t.clientX,this.mouse_press_pos.y-t.clientY).multiply(1/this.viewer.viewport.camera.zoom);this.mouse_press_pos=new A(t.clientX,t.clientY);let r=this.viewer.viewport.camera.center.add(n);this.viewer.viewport.camera.center.set(r),this.viewer.draw()}),re`<style>
                :host {
                    display: block;
                    touch-action: none;
                    width: 100%;
                    height: 100%;
                }
                canvas {
                    width: 100%;
                    height: 100%;
                    border: solid 1px rgb(24, 144, 255);
                }
            </style>
            ${this.canvas}`}};Me([Ye({type:Boolean})],Tr.prototype,"loaded",2),Me([Ye({type:String})],Tr.prototype,"theme",2),Me([Ye({type:Boolean})],Tr.prototype,"disableinteraction",2);var Xp=class extends Tr{static{a(this,"KCBoardViewerElement")}update_theme(){this.viewer.theme=this.themeObject.board}make_viewer(){return new lh(this.canvas,!this.disableinteraction,this.themeObject.board)}};window.customElements.define("kc-board-viewer",Xp);var aa=class extends de{static{a(this,"KCBoardFootprintsPanelElement")}connectedCallback(){(async()=>(this.viewer=await this.requestLazyContext("viewer"),await this.viewer.loaded,this.sort_footprints(),super.connectedCallback()))()}sort_footprints(){this.viewer.board instanceof xi&&(this.sorted_footprints=Kr(this.viewer.board.footprints,t=>t.reference||"REF"))}initialContentCallback(){this.addEventListener("kc-ui-menu:select",t=>{let n=t.detail;n.name&&this.viewer.select(n.name)}),this.addDisposable(this.viewer.addEventListener(ti.type,()=>{this.menu.selected=this.viewer.selected?.context.uuid??null})),this.search_input_elm.addEventListener("input",t=>{this.item_filter_elem.filter_text=this.search_input_elm.value??null})}render(){return re`
            <kc-ui-panel>
                <kc-ui-panel-title title="Footprints"></kc-ui-panel-title>
                <kc-ui-panel-body>
                    <kc-ui-text-filter-input></kc-ui-text-filter-input>
                    <kc-ui-filtered-list>
                        <kc-ui-menu class="outline">
                            ${this.render_list()}
                        </kc-ui-menu>
                    </kc-ui-filtered-list>
                </kc-ui-panel-body>
            </kc-ui-panel>
        `}render_list(){let t=[],n=[];for(let r of this.sorted_footprints){let s=r.reference||"REF",o=r.value||"VAL",l=`${r.library_link} ${r.descr} ${r.layer} ${s} ${o} ${r.tags}`,c=re`<kc-ui-menu-item
                name="${r.uuid}"
                data-match-text="${l}">
                <span class="narrow">${s}</span><span>${o}</span>
            </kc-ui-menu-item>`;r.layer=="F.Cu"?t.push(c):n.push(c)}return re`<kc-ui-menu-label>Front</kc-ui-menu-label>
            ${t}
            <kc-ui-menu-label>Back</kc-ui-menu-label>
            ${n}`}};Me([Tt("kc-ui-menu",!0)],aa.prototype,"menu",2),Me([Tt("kc-ui-text-filter-input",!0)],aa.prototype,"search_input_elm",2),Me([Tt("kc-ui-filtered-list",!0)],aa.prototype,"item_filter_elem",2);window.customElements.define("kc-board-footprints-panel",aa);var Hp=class extends de{static{a(this,"KCBoardInfoPanelElement")}connectedCallback(){(async()=>(this.viewer=await this.requestLazyContext("viewer"),await this.viewer.loaded,super.connectedCallback()))()}render(){let t=this.viewer.drawing_sheet,n=this.viewer.board,r=n.edge_cuts_bbox,s=a(c=>re`<kc-ui-property-list-item
                name="${c}"
                class="label"></kc-ui-property-list-item>`,"header"),o=a((c,u,h="")=>re` <kc-ui-property-list-item name="${c}">
                ${u} ${h}
            </kc-ui-property-list-item>`,"entry"),l=Object.entries(n.title_block?.comment||{}).map(([c,u])=>o(`Comment ${c}`,u));return re`
            <kc-ui-panel>
                <kc-ui-panel-title title="Info"></kc-ui-panel-title>
                <kc-ui-panel-body>
                    <kc-ui-property-list>
                        ${s("Page properties")}
                        ${o("Size",t.paper?.size)}
                        ${o("Width",t.width,"mm")}
                        ${o("Height",t.height,"mm")}
                        ${s("Board properties")}
                        ${o("KiCAD version",n.version)}
                        ${o("Generator",n.generator)}
                        ${o("Thickness",n.general?.thickness??1.6,"mm")}
                        ${o("Title",n.title_block?.title)}
                        ${o("Date",n.title_block?.date)}
                        ${o("Revision",n.title_block?.rev)}
                        ${o("Company",n.title_block?.company)}
                        ${l}
                        ${o("Dimensions",`${r.w.toFixed(1)} x
                            ${r.h.toFixed(1)} mm`)}
                        ${o("Footprints",n.footprints.length)}
                        ${o("Nets",n.nets.length)}
                        ${o("Track segments",n.segments.length)}
                        ${o("Vias",n.vias.length)}
                        ${o("Zones",n.zones.length)}
                        ${o("Pad to mask clearance",n.setup?.pad_to_mask_clearance??0,"mm")}
                        ${o("Soldermask min width",n.setup?.solder_mask_min_width??0,"mm")}
                        ${o("Pad to paste clearance",n.setup?.pad_to_paste_clearance??0,"mm")}
                        ${o("Pad to paste clearance ratio",n.setup?.pad_to_paste_clearance_ratio??0)}
                        ${o("Grid origin",`${n.setup?.grid_origin?.x??0}, ${n.setup?.grid_origin?.y??0}`)}
                    </kc-ui-property-list>
                </kc-ui-panel-body>
            </kc-ui-panel>
        `}};window.customElements.define("kc-board-info-panel",Hp);var hc=class extends de{static{a(this,"KCBoardLayersPanelElement")}static{this.styles=[...de.styles,Je`
            :host {
                display: block;
                height: 100%;
                overflow-y: auto;
                overflow-x: hidden;
                user-select: none;
            }

            kc-ui-panel-title button {
                all: unset;
                flex-shrink: 0;
                margin-left: 1em;
                color: white;
                border: 0 none;
                background: transparent;
                padding: 0 0.25em 0 0.25em;
                margin-right: -0.25em;
                display: flex;
                align-items: center;
            }
        `]}get items(){return Array.from(this.panel_body.querySelectorAll("kc-board-layer-control")??[])}connectedCallback(){(async()=>(this.viewer=await this.requestLazyContext("viewer"),await this.viewer.loaded,super.connectedCallback()))()}initialContentCallback(){this.panel_body.addEventListener(dc.select_event,t=>{let n=t.detail;for(let s of this.items)s.layer_highlighted=!1;let r=this.viewer.layers.by_name(n.layer_name);r.highlighted?this.viewer.layers.highlight(null):(this.viewer.layers.highlight(r),r.visible=!0,n.layer_visible=!0,n.layer_highlighted=!0),this.viewer.draw()}),this.panel_body.addEventListener(dc.visibility_event,t=>{let n=t.detail,r=this.viewer.layers.by_name(n.layer_name);r.visible=!r.visible,n.layer_visible=r.visible,this.presets_menu.deselect(),this.viewer.draw()}),this.renderRoot.querySelector("button")?.addEventListener("click",t=>{t.stopPropagation();let n=this.viewer.layers.in_ui_order();if(this.items.some(r=>r.layer_visible))for(let r of n)r.visible=!1;else for(let r of n)r.visible=!0;this.viewer.draw(),this.presets_menu.deselect(),this.update_item_states()}),this.presets_menu.addEventListener("kc-ui-menu:select",t=>{let n=t.detail,r=this.viewer.layers.in_ui_order();switch(n.name){case"all":for(let s of r)s.visible=!0;break;case"front":for(let s of r)s.visible=s.name.startsWith("F.")||s.name=="Edge.Cuts";break;case"back":for(let s of r)s.visible=s.name.startsWith("B.")||s.name=="Edge.Cuts";break;case"copper":for(let s of r)s.visible=s.name.includes(".Cu")||s.name=="Edge.Cuts";break;case"outer-copper":for(let s of r)s.visible=s.name=="F.Cu"||s.name=="B.Cu"||s.name=="Edge.Cuts";break;case"inner-copper":for(let s of r)s.visible=s.name.includes(".Cu")&&!(s.name=="F.Cu"||s.name=="B.Cu")||s.name=="Edge.Cuts";break;case"drawings":for(let s of r)s.visible=!s.name.includes(".Cu")&&!s.name.includes(".Mask")&&!s.name.includes(".Paste")&&!s.name.includes(".Adhes")}this.viewer.draw(),this.update_item_states()})}update_item_states(){for(let t of this.items){let n=this.viewer.layers.by_name(t.layer_name);t.layer_visible=n?.visible??!1,t.layer_highlighted=n?.highlighted??!1}}render(){let t=this.viewer.layers,n=[];for(let r of t.in_ui_order()){let s=r.visible?"":void 0,o=r.color.to_css();n.push(re`<kc-board-layer-control
                    layer-name="${r.name}"
                    layer-color="${o}"
                    layer-visible="${s}"></kc-board-layer-control>`)}return re`
            <kc-ui-panel>
                <kc-ui-panel-title title="Layers">
                    <button slot="actions" type="button">
                        <kc-ui-icon>visibility</kc-ui-icon>
                    </button>
                </kc-ui-panel-title>
                <kc-ui-panel-body>
                    ${n}
                    <kc-ui-panel-label>Presets</kc-ui-panel-label>
                    <kc-ui-menu id="presets" class="outline">
                        <kc-ui-menu-item name="all">All</kc-ui-menu-item>
                        <kc-ui-menu-item name="front">Front</kc-ui-menu-item>
                        <kc-ui-menu-item name="back">Back</kc-ui-menu-item>
                        <kc-ui-menu-item name="copper">Copper</kc-ui-menu-item>
                        <kc-ui-menu-item name="outer-copper">
                            Outer copper
                        </kc-ui-menu-item>
                        <kc-ui-menu-item name="inner-copper">
                            Inner copper
                        </kc-ui-menu-item>
                        <kc-ui-menu-item name="drawings">
                            Drawings
                        </kc-ui-menu-item>
                    </kc-ui-menu>
                </kc-ui-panel-body>
            </kc-ui-panel>
        `}};Me([Tt("kc-ui-panel-body",!0)],hc.prototype,"panel_body",2),Me([Tt("#presets",!0)],hc.prototype,"presets_menu",2);var ls=class ls extends de{static{a(this,"KCBoardLayerControlElement")}static{this.styles=[...de.styles,Je`
            :host {
                box-sizing: border-box;
                padding: 0.1em 0.8em 0.1em 0.4em;
                color: white;
                text-align: left;
                display: flex;
                flex-direction: row;
                width: 100%;
                align-items: center;
            }

            button {
                all: unset;
                cursor: pointer;
                flex-shrink: 0;
                margin-left: 1em;
                color: white;
                border: 0 none;
                background: transparent;
                padding: 0 0.25em 0 0.25em;
                margin-right: -0.25em;
                display: flex;
                align-items: center;
            }

            .color {
                flex-shrink: 0;
                display: block;
                width: 1em;
                height: 1em;
                margin-right: 0.5em;
            }

            .name {
                display: block;
                flex-grow: 1;
            }

            .for-hidden {
                color: #888;
            }

            :host {
                background: var(--list-item-disabled-bg);
                color: var(--list-item-disabled-fg);
            }

            :host(:hover) {
                background: var(--list-item-hover-bg);
                color: var(--list-item-hover-fg);
            }

            :host(:hover) button {
                color: var(--list-item-bg);
            }

            :host(:hover) button:hover {
                color: var(--list-item-fg);
            }

            :host([layer-visible]) {
                background: var(--list-item-bg);
                color: var(--list-item-fg);
            }

            :host([layer-highlighted]) {
                background: var(--list-item-active-bg);
                color: var(--list-item-active-fg);
            }

            :host([layer-highlighted]:hover) button {
                color: var(--list-item-fg);
            }

            :host kc-ui-icon.for-visible,
            :host([layer-visible]) kc-ui-icon.for-hidden {
                display: none;
            }

            :host kc-ui-icon.for-hidden,
            :host([layer-visible]) kc-ui-icon.for-visible {
                display: revert;
            }
        `]}static{this.select_event="kicanvas:layer-control:select"}static{this.visibility_event="kicanvas:layer-control:visibility"}initialContentCallback(){super.initialContentCallback(),this.renderRoot.addEventListener("click",t=>{t.stopPropagation();let n=t.target?.closest("button"),r;n?r=ls.visibility_event:r=ls.select_event,this.dispatchEvent(new CustomEvent(r,{detail:this,bubbles:!0}))})}render(){return re`<span
                class="color"
                style="background: ${this.layer_color};"></span>
            <span class="name">${this.layer_name}</span>
            <button type="button" name="${this.layer_name}">
                <kc-ui-icon class="for-visible">visibility</kc-ui-icon>
                <kc-ui-icon class="for-hidden">visibility_off</kc-ui-icon>
            </button>`}};Me([Ye({type:String})],ls.prototype,"layer_name",2),Me([Ye({type:String})],ls.prototype,"layer_color",2),Me([Ye({type:Boolean})],ls.prototype,"layer_highlighted",2),Me([Ye({type:Boolean})],ls.prototype,"layer_visible",2);var dc=ls;window.customElements.define("kc-board-layer-control",dc);window.customElements.define("kc-board-layers-panel",hc);var fc=class extends de{static{a(this,"KCBoardNetsPanelElement")}connectedCallback(){(async()=>(this.viewer=await this.requestLazyContext("viewer"),await this.viewer.loaded,super.connectedCallback()))()}initialContentCallback(){this.addEventListener("kc-ui-menu:select",t=>{let n=t.detail,r=parseInt(n?.name,10);r&&this.viewer.highlight_net(r)}),this.search_input_elm.addEventListener("input",t=>{this.item_filter_elem.filter_text=this.search_input_elm.value??null})}render(){let t=this.viewer.board,n=[];if(t instanceof xi)for(let r of t.nets)n.push(re`<kc-ui-menu-item
                        name="${r.number}"
                        data-match-text="${r.number} ${r.name}">
                        <span class="very-narrow"> ${r.number} </span>
                        <span>${r.name}</span>
                    </kc-ui-menu-item>`);return re`
            <kc-ui-panel>
                <kc-ui-panel-title title="Nets"></kc-ui-panel-title>
                <kc-ui-panel-body>
                    <kc-ui-text-filter-input></kc-ui-text-filter-input>
                    <kc-ui-filtered-list>
                        <kc-ui-menu class="outline">${n}</kc-ui-menu>
                    </kc-ui-filtered-list>
                </kc-ui-panel-body>
            </kc-ui-panel>
        `}};Me([Tt("kc-ui-text-filter-input",!0)],fc.prototype,"search_input_elm",2),Me([Tt("kc-ui-filtered-list",!0)],fc.prototype,"item_filter_elem",2);window.customElements.define("kc-board-nets-panel",fc);var Gp=class extends de{static{a(this,"KCBoardObjectsPanelElement")}connectedCallback(){(async()=>(this.viewer=await this.requestLazyContext("viewer"),await this.viewer.loaded,super.connectedCallback(),this.setup_events()))()}setup_events(){Bi(this.renderRoot,"kc-ui-range","kc-ui-range:input",t=>{let n=t.target,r=n.valueAsNumber;switch(n.name){case"tracks":this.viewer.track_opacity=r;break;case"vias":this.viewer.via_opacity=r;break;case"pads":this.viewer.pad_opacity=r;break;case"holes":this.viewer.pad_hole_opacity=r;break;case"zones":this.viewer.zone_opacity=r;break;case"grid":this.viewer.grid_opacity=r;break;case"page":this.viewer.page_opacity=r;break}})}render(){return re`
            <kc-ui-panel>
                <kc-ui-panel-title title="Objects"></kc-ui-panel-title>
                <kc-ui-panel-body padded>
                    <kc-ui-control-list>
                        <kc-ui-control>
                            <label>Tracks</label>
                            <kc-ui-range
                                min="0"
                                max="1.0"
                                step="0.01"
                                value="1"
                                name="tracks"></kc-ui-range>
                        </kc-ui-control>
                        <kc-ui-control>
                            <label>Vias</label>
                            <kc-ui-range
                                min="0"
                                max="1.0"
                                step="0.01"
                                value="1"
                                name="vias"></kc-ui-range>
                        </kc-ui-control>
                        <kc-ui-control>
                            <label>Pads</label>
                            <kc-ui-range
                                min="0"
                                max="1.0"
                                step="0.01"
                                value="1"
                                name="pads"></kc-ui-range>
                        </kc-ui-control>
                        <kc-ui-control>
                            <label>Through holes</label>
                            <kc-ui-range
                                min="0"
                                max="1.0"
                                step="0.01"
                                value="1"
                                name="holes"></kc-ui-range>
                        </kc-ui-control>
                        <kc-ui-control>
                            <label>Zones</label>
                            <kc-ui-range
                                min="0"
                                max="1.0"
                                step="0.01"
                                value="1"
                                name="zones"></kc-ui-range>
                        </kc-ui-control>
                        <kc-ui-control>
                            <label>Grid</label>
                            <kc-ui-range
                                min="0"
                                max="1.0"
                                step="0.01"
                                value="1"
                                name="grid"></kc-ui-range>
                        </kc-ui-control>
                        <kc-ui-control>
                            <label>Page</label>
                            <kc-ui-range
                                min="0"
                                max="1.0"
                                step="0.01"
                                value="1"
                                name="page"></kc-ui-range>
                        </kc-ui-control>
                    </kc-ui-control-list>
                </kc-ui-panel-body>
            </kc-ui-panel>
        `}};window.customElements.define("kc-board-objects-panel",Gp);var Dp=class extends de{static{a(this,"KCBoardPropertiesPanelElement")}connectedCallback(){(async()=>(this.viewer=await this.requestLazyContext("viewer"),await this.viewer.loaded,super.connectedCallback(),this.setup_events()))()}setup_events(){this.addDisposable(this.viewer.addEventListener(ti.type,t=>{this.selected_item=t.detail.item,this.update()}))}render(){let t=a(o=>re`<kc-ui-property-list-item class="label" name="${o}">
            </kc-ui-property-list-item>`,"header"),n=a((o,l,c="")=>re`<kc-ui-property-list-item name="${o}">
                ${l??""} ${c}
            </kc-ui-property-list-item>`,"entry"),r=a(o=>o?re`<kc-ui-icon>check</kc-ui-icon>`:re`<kc-ui-icon>close</kc-ui-icon>`,"checkbox"),s;if(!this.selected_item)s=t("No item selected");else{let o=this.selected_item,l=Object.entries(o.properties).map(([c,u])=>n(c,u));s=re`
                ${t("Basic properties")}
                ${n("X",o.at.position.x.toFixed(4),"mm")}
                ${n("Y",o.at.position.y.toFixed(4),"mm")}
                ${n("Orientation",o.at.rotation,"\xB0")}
                ${n("Layer",o.layer)} ${t("Footprint properties")}
                ${n("Reference",o.reference)}
                ${n("Value",o.value)}
                ${n("Type",o.attr.through_hole?"through hole":o.attr.smd?"smd":"unspecified")}
                ${n("Pads",o.pads.length)}
                ${n("Library link",o.library_link)}
                ${n("Description",o.descr)}
                ${n("Keywords",o.tags)} ${l}
                ${t("Fabrication attributes")}
                ${n("Not in schematic",r(o.attr.board_only))}
                ${n("Exclude from position files",r(o.attr.exclude_from_pos_files))}
                ${n("Exclude from BOM",r(o.attr.exclude_from_bom))}
                ${t("Overrides")}
                ${n("Exempt from courtyard requirement",r(o.attr.allow_missing_courtyard))}
                ${n("Clearance",o.clearance??0,"mm")}
                ${n("Solderpaste margin",o.solder_paste_margin??0,"mm")}
                ${n("Solderpaste margin ratio",o.solder_paste_ratio??0)}
                ${n("Zone connection",o.zone_connect??"inherited")}
            `}return re`
            <kc-ui-panel>
                <kc-ui-panel-title title="Properties"></kc-ui-panel-title>
                <kc-ui-panel-body>
                    <kc-ui-property-list> ${s} </kc-ui-property-list>
                </kc-ui-panel-body>
            </kc-ui-panel>
        `}};window.customElements.define("kc-board-properties-panel",Dp);var Yp=class extends Sr{static{a(this,"KCBoardAppElement")}on_viewer_select(e,t){e&&e==t&&this.change_activity("properties")}can_load(e){return e instanceof xi||e instanceof Mr}apply_alter_src(e){this.project.filesByIndex.get(e.name)&&this.project.set_active_page(e.name)}make_viewer_element(){return re`<kc-board-viewer></kc-board-viewer>`}make_activities(){return[re`<kc-ui-activity slot="activities" name="Layers" icon="layers">
                <kc-board-layers-panel></kc-board-layers-panel>
            </kc-ui-activity>`,re`<kc-ui-activity
                slot="activities"
                name="Objects"
                icon="category">
                <kc-board-objects-panel></kc-board-objects-panel>
            </kc-ui-activity>`,re`<kc-ui-activity
                slot="activities"
                name="Footprints"
                icon="memory">
                <kc-board-footprints-panel></kc-board-footprints-panel>
            </kc-ui-activity>`,re`<kc-ui-activity slot="activities" name="Nets" icon="hub">
                <kc-board-nets-panel></kc-board-nets-panel>
            </kc-ui-activity>`,re`<kc-ui-activity
                slot="activities"
                name="Properties"
                icon="list">
                <kc-board-properties-panel></kc-board-properties-panel>
            </kc-ui-activity>`,re`<kc-ui-activity
                slot="activities"
                name="Board info"
                icon="info">
                <kc-board-info-panel></kc-board-info-panel>
            </kc-ui-activity>`]}};window.customElements.define("kc-board-app",Yp);var zi=class extends de{constructor(){super();this.#e=new ko;this.provideContext("project",this.#e)}static{a(this,"KicadFootprintViewer")}static{this.styles=[...de.styles,new Qi(No),Je`
            :host {
                margin: 0;
                display: flex;
                position: relative;
                width: 100%;
                max-height: 100%;
                aspect-ratio: 1.414;
                background-color: white;
                color: var(--fg);
                contain: layout paint;
            }

            main {
                display: contents;
            }

            kc-board-app,
            kc-schematic-app {
                width: 100%;
                height: 100%;
                flex: 1;
            }
        `]}#e;#t;initialContentCallback(){this.#i(),Ki(()=>{this.#n()})}async#i(){}async#n(){let t=[];this.src&&t.push(this.src);for(let s of this.querySelectorAll("ecad-source"))s.src&&t.push(s.src);if(t.length==0){console.warn("No valid sources specified");return}if(t.length==0){console.warn("No valid sources specified");return}this.addEventListener("alter_source_changed",s=>{console.log(s)});let n=[];for(let s of t){let o=s.split("/");o.length&&n.push(o[o.length-1])}this.provideContext("alter_source",n);let r=new Xo(t);await this.#r(r)}async#r(t){this.loaded=!1,this.loading=!0;try{await this.#e.load(t),this.loaded=!0,await this.update(),this.#e.set_active_page(this.#e.active_page_name)}finally{this.loading=!1}}render(){return this.loaded?(this.#e.has_boards&&!this.#t&&(this.#t=re`<kc-board-app
                sidebarcollapsed
                controls="${this.controls}"
                controlslist="${this.controlslist}">
            </kc-board-app> `),re` ${this.#t}`):re``}};Me([Ye({type:String})],zi.prototype,"src",2),Me([Ye({type:Boolean})],zi.prototype,"loading",2),Me([Ye({type:Boolean})],zi.prototype,"loaded",2),Me([Ye({type:String})],zi.prototype,"controls",2),Me([Ye({type:String})],zi.prototype,"controlslist",2),Me([Ye({type:String})],zi.prototype,"theme",2),Me([Ye({type:String})],zi.prototype,"zoom",2);window.customElements.define("kicad-footprint-viewer",zi);var Kp=class extends Tr{static{a(this,"KCSchematicViewerElement")}update_theme(){this.viewer.theme=this.themeObject.schematic}make_viewer(){return new ia(this.canvas,!this.disableinteraction,this.themeObject.schematic)}};window.customElements.define("kc-schematic-viewer",Kp);var Qp=class extends de{static{a(this,"KCSchematicInfoPanel")}connectedCallback(){(async()=>(this.viewer=await this.requestLazyContext("viewer"),await this.viewer.loaded,super.connectedCallback(),this.addDisposable(this.viewer.addEventListener(di.type,t=>{this.update()}))))()}render(){let t=this.viewer.drawing_sheet,n=this.viewer.schematic,r=a(l=>re`<kc-ui-property-list-item
                class="label"
                name="${l}"></kc-ui-property-list-item>`,"header"),s=a((l,c,u="")=>re`<kc-ui-property-list-item name="${l}">
                ${c} ${u}
            </kc-ui-property-list-item>`,"entry"),o=Object.entries(n.title_block?.comment||{}).map(([l,c])=>s(`Comment ${l}`,c));return re`
            <kc-ui-panel>
                <kc-ui-panel-title title="Info"></kc-ui-panel-title>
                <kc-ui-panel-body>
                    <kc-ui-property-list>
                        ${r("Page properties")}
                        ${s("Size",t.paper?.size)}
                        ${s("Width",t.width,"mm")}
                        ${s("Height",t.height,"mm")}
                        ${r("Schematic properties")}
                        ${s("KiCAD version",n.version)}
                        ${s("Generator",n.generator)}
                        ${s("Title",n.title_block?.title)}
                        ${s("Date",n.title_block?.date)}
                        ${s("Revision",n.title_block?.rev)}
                        ${s("Company",n.title_block?.company)}
                        ${o}
                        ${s("Symbols",n.symbols.size)}
                        ${s("Unique symbols",n.lib_symbols?.symbols.length??0)}
                        ${s("Wires",n.wires.length)}
                        ${s("Buses",n.buses.length)}
                        ${s("Junctions",n.junctions.length)}
                        ${s("Net labels",n.net_labels.length)}
                        ${s("Global labels",n.global_labels.length)}
                        ${s("Hierarchical labels",n.hierarchical_labels.length)}
                        ${s("No connects",n.no_connects.length)}
                    </dl>
                </kc-ui-property-list>
            </kc-ui-panel>
        `}};window.customElements.define("kc-schematic-info-panel",Qp);var Bp=class extends de{static{a(this,"KCSchematicPropertiesPanelElement")}connectedCallback(){(async()=>(this.viewer=await this.requestLazyContext("viewer"),await this.viewer.loaded,super.connectedCallback(),this.setup_events()))()}setup_events(){this.addDisposable(this.viewer.addEventListener(ti.type,t=>{this.selected_item=t.detail.item,this.update()})),this.addDisposable(this.viewer.addEventListener(di.type,t=>{this.selected_item=void 0,this.update()}))}render(){let t=a(l=>re`<kc-ui-property-list-item
                class="label"
                name="${l}"></kc-ui-property-list-item>`,"header"),n=a((l,c,u="")=>re`<kc-ui-property-list-item name="${l}">
                ${c??""} ${u}
            </kc-ui-property-list-item>`,"entry"),r=a(l=>l?re`<kc-ui-icon>check</kc-ui-icon>`:re`<kc-ui-icon>close</kc-ui-icon>`,"checkbox"),s,o=this.selected_item;if(!o)s=t("No item selected");else if(o instanceof ui){let l=o.lib_symbol,c=Array.from(o.properties.values()).map(h=>n(h.name,h.text)),u=Kr(o.unit_pins,h=>h.number).map(h=>n(h.number,h.definition.name.text));s=re`
                ${t("Basic properties")}
                ${n("X",o.at.position.x.toFixed(4),"mm")}
                ${n("Y",o.at.position.y.toFixed(4),"mm")}
                ${n("Orientation",o.at.rotation,"\xB0")}
                ${n("Mirror",o.mirror=="x"?"Around X axis":o.mirror=="y"?"Around Y axis":"Not mirrored")}
                ${t("Instance properties")}
                ${n("Library link",o.lib_name??o.lib_id)}
                ${o.unit?n("Unit",String.fromCharCode("A".charCodeAt(0)+o.unit-1)):""}
                ${n("In BOM",r(o.in_bom))}
                ${n("On board",r(o.in_bom))}
                ${n("Populate",r(!o.dnp))} ${t("Fields")}
                ${c} ${t("Symbol properties")}
                ${n("Name",l.name)}
                ${n("Description",l.description)}
                ${n("Keywords",l.keywords)}
                ${n("Power",r(l.power))}
                ${n("Units",l.unit_count)}
                ${n("Units are interchangeable",r(l.units_interchangable))}
                ${t("Pins")} ${u}
            `}else if(o instanceof bi){let l=Array.from(o.properties.values()).map(u=>n(u.name,u.text)),c=Kr(o.pins,u=>u.name).map(u=>n(u.name,u.shape));s=re`
                ${t("Basic properties")}
                ${n("X",o.at.position.x.toFixed(4),"mm")}
                ${n("Y",o.at.position.y.toFixed(4),"mm")}
                ${t("Fields")} ${l} ${t("Pins")} ${c}
            `}return re`
            <kc-ui-panel>
                <kc-ui-panel-title title="Properties"></kc-ui-panel-title>
                <kc-ui-panel-body>
                    <kc-ui-property-list>${s}</kc-ui-property-list>
                </kc-ui-panel-body>
            </kc-ui-panel>
        `}};window.customElements.define("kc-schematic-properties-panel",Bp);var la=class extends de{static{a(this,"KCSchematicSymbolsPanelElement")}connectedCallback(){(async()=>(this.viewer=await this.requestLazyContext("viewer"),await this.viewer.loaded,super.connectedCallback(),this.setup_initial_events()))()}setup_initial_events(){let t=!1;this.addEventListener("kc-ui-menu:select",n=>{if(t)return;let r=n.detail;r.name&&this.viewer.select(r.name)}),this.addDisposable(this.viewer.addEventListener(ti.type,()=>{t=!0,this.menu.selected=this.viewer.selected?.context.uuid??null,t=!1})),this.addDisposable(this.viewer.addEventListener(di.type,()=>{this.update()}))}renderedCallback(){this.search_input_elm.addEventListener("input",t=>{this.item_filter_elem.filter_text=this.search_input_elm.value??null})}render(){let t=this.viewer.schematic,n=[],r=[],s=[],o=Kr(Array.from(t.symbols.values()),c=>c.reference);for(let c of o){let u=`${c.reference} ${c.value} ${c.id} ${c.lib_symbol.name}`,h=re`<kc-ui-menu-item
                name="${c.uuid}"
                data-match-text="${u}">
                <span class="narrow"> ${c.reference} </span>
                <span> ${c.value} </span>
            </kc-ui-menu-item>`;c.lib_symbol.power?r.push(h):n.push(h)}let l=Kr(t.sheets,c=>c.sheetname??c.sheetfile??"");for(let c of l){let u=`${c.sheetname} ${c.sheetfile}`;s.push(re`<kc-ui-menu-item
                    name="${c.uuid}"
                    data-match-text="${u}">
                    <span class="narrow"> ${c.sheetname}</span>
                    <span>${c.sheetfile}</span>
                </kc-ui-menu-item>`)}return re`
            <kc-ui-panel>
                <kc-ui-panel-title title="Symbols"></kc-ui-panel-title>
                <kc-ui-panel-body>
                    <kc-ui-text-filter-input></kc-ui-text-filter-input>
                    <kc-ui-filtered-list>
                        <kc-ui-menu class="outline">
                            ${n}
                            ${r.length?re`<kc-ui-menu-label
                                      >Power symbols</kc-ui-menu-label
                                  >`:null}
                            ${r}
                            ${s.length?re`<kc-ui-menu-label
                                      >Sheets</kc-ui-menu-label
                                  >`:null}
                            ${s}
                        </kc-ui-menu>
                    </kc-ui-filtered-list>
                </kc-ui-panel-body>
            </kc-ui-panel>
        `}};Me([Tt("kc-ui-menu")],la.prototype,"menu",2),Me([Tt("kc-ui-text-filter-input",!0)],la.prototype,"search_input_elm",2),Me([Tt("kc-ui-filtered-list",!0)],la.prototype,"item_filter_elem",2);window.customElements.define("kc-schematic-symbols-panel",la);var Jp=class extends Sr{static{a(this,"KCSchematicAppElement")}on_viewer_select(e,t){if(!(!e||e!=t)){if(e instanceof bi){this.project.set_active_page(`${e.sheetfile}:${e.path}/${e.uuid}`);return}this.change_activity("properties")}}apply_alter_src(e){this.viewer.set_active_part_unit(e.idx)}can_load(e){return e instanceof Oi||e instanceof hi}make_viewer_element(){return re`<kc-schematic-viewer></kc-schematic-viewer>`}};window.customElements.define("kc-schematic-app",Jp);var $i=class extends de{constructor(){super();this.#e=new ko;this.provideContext("project",this.#e)}static{a(this,"KicadSymbolViewer")}static{this.styles=[...de.styles,new Qi(No),Je`
            :host {
                margin: 0;
                display: flex;
                position: relative;
                width: 100%;
                max-height: 100%;
                aspect-ratio: 1.414;
                background-color: white;
                color: var(--fg);
                contain: layout paint;
            }

            main {
                display: contents;
            }

            kc-board-app,
            kc-schematic-app {
                width: 100%;
                height: 100%;
                flex: 1;
            }
        `]}#e;#t;initialContentCallback(){this.#i(),Ki(()=>{this.#n()})}async#i(){}async#n(){let t=[];this.src&&t.push(this.src);for(let r of this.querySelectorAll("ecad-source"))r.src&&t.push(r.src);if(t.length==0){console.warn("No valid sources specified");return}if(t.length==0){console.warn("No valid sources specified");return}this.provideContext("alter_source",[]);let n=new Xo(t);await this.#r(n)}async#r(t){this.loaded=!1,this.loading=!0;try{await this.#e.load(t),this.loaded=!0,await this.update(),this.#e.set_active_page(this.#e.active_page_name)}finally{this.loading=!1}}render(){return this.loaded?(this.#t=re`<kc-schematic-app
            sidebarcollapsed
            controls="${this.controls}"
            controlslist="${this.controlslist}">        </kc-schematic-app>`,re` ${this.#t}`):re``}};Me([Ye({type:String})],$i.prototype,"src",2),Me([Ye({type:Boolean})],$i.prototype,"loading",2),Me([Ye({type:Boolean})],$i.prototype,"loaded",2),Me([Ye({type:String})],$i.prototype,"controls",2),Me([Ye({type:String})],$i.prototype,"controlslist",2),Me([Ye({type:String})],$i.prototype,"theme",2),Me([Ye({type:String})],$i.prototype,"zoom",2);window.customElements.define("kicad-symbol-viewer",$i);var fm="160",ho={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},fo={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},PT=0,cg=1,ET=2;var G_=1,wT=2,Ar=3,qi=0,Ln=1,Ci=2;var Rs=0,La=1,ug=2,hg=3,dg=4,LT=5,qs=100,AT=101,OT=102,fg=103,pg=104,VT=200,UT=201,IT=202,FT=203,P3=204,E3=205,WT=206,CT=207,ZT=208,kT=209,XT=210,HT=211,GT=212,DT=213,YT=214,KT=0,QT=1,BT=2,Wh=3,JT=4,zT=5,$T=6,jT=7,pm=0,qT=1,ev=2,gs=0,tv=1,nv=2,iv=3,rv=4,sv=5,ov=6;var D_=300,Va=301,Ua=302,w3=303,L3=304,Rd=306,bs=1e3,kn=1001,A3=1002,wn=1003,mg=1004;var zp=1005;var Ti=1006,av=1007;var yc=1008;var _s=1009,lv=1010,cv=1011,mm=1012,Y_=1013,ps=1014,ms=1015,Sc=1016,K_=1017,Q_=1018,to=1020,uv=1021,Zi=1023,hv=1024,dv=1025,no=1026,Ia=1027,fv=1028,B_=1029,pv=1030,J_=1031,z_=1033,$p=33776,jp=33777,qp=33778,e3=33779,Rg=35840,gg=35841,_g=35842,bg=35843,$_=36196,Mg=37492,xg=37496,yg=37808,Sg=37809,Tg=37810,vg=37811,Ng=37812,Pg=37813,Eg=37814,wg=37815,Lg=37816,Ag=37817,Og=37818,Vg=37819,Ug=37820,Ig=37821,t3=36492,Fg=36494,Wg=36495,mv=36283,Cg=36284,Zg=36285,kg=36286;var Ch=2300,Zh=2301,n3=2302,Xg=2400,Hg=2401,Gg=2402;var j_=3e3,io=3001,Rv=3200,gv=3201,q_=0,_v=1,vi="",on="srgb",Ur="srgb-linear",Rm="display-p3",gd="display-p3-linear",kh="linear",Ut="srgb",Xh="rec709",Hh="p3";var ca=7680;var Dg=519,bv=512,Mv=513,xv=514,eb=515,yv=516,Sv=517,Tv=518,vv=519,Yg=35044;var Kg="300 es",O3=1035,Or=2e3,Gh=2001,er=class{static{a(this,"EventDispatcher")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});let n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;let n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;let r=this._listeners[e];if(r!==void 0){let s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;let n=this._listeners[e.type];if(n!==void 0){e.target=this;let r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}},Wn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Qg=1234567,_c=Math.PI/180,Tc=180/Math.PI;function ka(){let i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(Wn[i&255]+Wn[i>>8&255]+Wn[i>>16&255]+Wn[i>>24&255]+"-"+Wn[e&255]+Wn[e>>8&255]+"-"+Wn[e>>16&15|64]+Wn[e>>24&255]+"-"+Wn[t&63|128]+Wn[t>>8&255]+"-"+Wn[t>>16&255]+Wn[t>>24&255]+Wn[n&255]+Wn[n>>8&255]+Wn[n>>16&255]+Wn[n>>24&255]).toLowerCase()}a(ka,"generateUUID");function Zn(i,e,t){return Math.max(e,Math.min(t,i))}a(Zn,"clamp");function gm(i,e){return(i%e+e)%e}a(gm,"euclideanModulo");function Nv(i,e,t,n,r){return n+(i-e)*(r-n)/(t-e)}a(Nv,"mapLinear");function Pv(i,e,t){return i!==e?(t-i)/(e-i):0}a(Pv,"inverseLerp");function bc(i,e,t){return(1-t)*i+t*e}a(bc,"lerp");function Ev(i,e,t,n){return bc(i,e,1-Math.exp(-t*n))}a(Ev,"damp");function wv(i,e=1){return e-Math.abs(gm(i,e*2)-e)}a(wv,"pingpong");function Lv(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}a(Lv,"smoothstep");function Av(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}a(Av,"smootherstep");function Ov(i,e){return i+Math.floor(Math.random()*(e-i+1))}a(Ov,"randInt");function Vv(i,e){return i+Math.random()*(e-i)}a(Vv,"randFloat");function Uv(i){return i*(.5-Math.random())}a(Uv,"randFloatSpread");function Iv(i){i!==void 0&&(Qg=i);let e=Qg+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}a(Iv,"seededRandom");function Fv(i){return i*_c}a(Fv,"degToRad");function Wv(i){return i*Tc}a(Wv,"radToDeg");function V3(i){return(i&i-1)===0&&i!==0}a(V3,"isPowerOfTwo");function Cv(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}a(Cv,"ceilPowerOfTwo");function Dh(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}a(Dh,"floorPowerOfTwo");function Zv(i,e,t,n,r){let s=Math.cos,o=Math.sin,l=s(t/2),c=o(t/2),u=s((e+n)/2),h=o((e+n)/2),d=s((e-n)/2),f=o((e-n)/2),m=s((n-e)/2),_=o((n-e)/2);switch(r){case"XYX":i.set(l*h,c*d,c*f,l*u);break;case"YZY":i.set(c*f,l*h,c*d,l*u);break;case"ZXZ":i.set(c*d,c*f,l*h,l*u);break;case"XZX":i.set(l*h,c*_,c*m,l*u);break;case"YXY":i.set(c*m,l*h,c*_,l*u);break;case"ZYZ":i.set(c*_,c*m,l*h,l*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}a(Zv,"setQuaternionFromProperEuler");function va(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}a(va,"denormalize");function Dn(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}a(Dn,"normalize");var tb={DEG2RAD:_c,RAD2DEG:Tc,generateUUID:ka,clamp:Zn,euclideanModulo:gm,mapLinear:Nv,inverseLerp:Pv,lerp:bc,damp:Ev,pingpong:wv,smoothstep:Lv,smootherstep:Av,randInt:Ov,randFloat:Vv,randFloatSpread:Uv,seededRandom:Iv,degToRad:Fv,radToDeg:Wv,isPowerOfTwo:V3,ceilPowerOfTwo:Cv,floorPowerOfTwo:Dh,setQuaternionFromProperEuler:Zv,normalize:Dn,denormalize:va},nt=class i{static{a(this,"Vector2")}constructor(e=0,t=0){i.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){let t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let n=this.dot(e)/t;return Math.acos(Zn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){let n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*n-o*r+e.x,this.y=s*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Rt=class i{static{a(this,"Matrix3")}constructor(e,t,n,r,s,o,l,c,u){i.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,o,l,c,u)}set(e,t,n,r,s,o,l,c,u){let h=this.elements;return h[0]=e,h[1]=r,h[2]=l,h[3]=t,h[4]=s,h[5]=c,h[6]=n,h[7]=o,h[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){let t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){let t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let n=e.elements,r=t.elements,s=this.elements,o=n[0],l=n[3],c=n[6],u=n[1],h=n[4],d=n[7],f=n[2],m=n[5],_=n[8],M=r[0],g=r[3],R=r[6],y=r[1],b=r[4],S=r[7],C=r[2],W=r[5],F=r[8];return s[0]=o*M+l*y+c*C,s[3]=o*g+l*b+c*W,s[6]=o*R+l*S+c*F,s[1]=u*M+h*y+d*C,s[4]=u*g+h*b+d*W,s[7]=u*R+h*S+d*F,s[2]=f*M+m*y+_*C,s[5]=f*g+m*b+_*W,s[8]=f*R+m*S+_*F,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){let e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],l=e[5],c=e[6],u=e[7],h=e[8];return t*o*h-t*l*u-n*s*h+n*l*c+r*s*u-r*o*c}invert(){let e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=h*o-l*u,f=l*c-h*s,m=u*s-o*c,_=t*d+n*f+r*m;if(_===0)return this.set(0,0,0,0,0,0,0,0,0);let M=1/_;return e[0]=d*M,e[1]=(r*u-h*n)*M,e[2]=(l*n-r*o)*M,e[3]=f*M,e[4]=(h*t-r*c)*M,e[5]=(r*s-l*t)*M,e[6]=m*M,e[7]=(n*c-u*t)*M,e[8]=(o*t-n*s)*M,this}transpose(){let e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){let t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,o,l){let c=Math.cos(s),u=Math.sin(s);return this.set(n*c,n*u,-n*(c*o+u*l)+o+e,-r*u,r*c,-r*(-u*o+c*l)+l+t,0,0,1),this}scale(e,t){return this.premultiply(i3.makeScale(e,t)),this}rotate(e){return this.premultiply(i3.makeRotation(-e)),this}translate(e,t){return this.premultiply(i3.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){let t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){let n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}},i3=new Rt;function nb(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}a(nb,"arrayNeedsUint32");function vc(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}a(vc,"createElementNS");function kv(){let i=vc("canvas");return i.style.display="block",i}a(kv,"createCanvasElement");var Bg={};function Mc(i){i in Bg||(Bg[i]=!0,console.warn(i))}a(Mc,"warnOnce");var Jg=new Rt().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),zg=new Rt().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),ch={[Ur]:{transfer:kh,primaries:Xh,toReference:i=>i,fromReference:i=>i},[on]:{transfer:Ut,primaries:Xh,toReference:i=>i.convertSRGBToLinear(),fromReference:i=>i.convertLinearToSRGB()},[gd]:{transfer:kh,primaries:Hh,toReference:i=>i.applyMatrix3(zg),fromReference:i=>i.applyMatrix3(Jg)},[Rm]:{transfer:Ut,primaries:Hh,toReference:i=>i.convertSRGBToLinear().applyMatrix3(zg),fromReference:i=>i.applyMatrix3(Jg).convertLinearToSRGB()}},Xv=new Set([Ur,gd]),vt={enabled:!0,_workingColorSpace:Ur,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(i){if(!Xv.has(i))throw new Error(`Unsupported working color space, "${i}".`);this._workingColorSpace=i},convert:function(i,e,t){if(this.enabled===!1||e===t||!e||!t)return i;let n=ch[e].toReference,r=ch[t].fromReference;return r(n(i))},fromWorkingColorSpace:function(i,e){return this.convert(i,this._workingColorSpace,e)},toWorkingColorSpace:function(i,e){return this.convert(i,e,this._workingColorSpace)},getPrimaries:function(i){return ch[i].primaries},getTransfer:function(i){return i===vi?kh:ch[i].transfer}};function Aa(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}a(Aa,"SRGBToLinear");function r3(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}a(r3,"LinearToSRGB");var ua,Yh=class{static{a(this,"ImageUtils")}static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{ua===void 0&&(ua=vc("canvas")),ua.width=e.width,ua.height=e.height;let n=ua.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=ua}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){let t=vc("canvas");t.width=e.width,t.height=e.height;let n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);let r=n.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Aa(s[o]/255)*255;return n.putImageData(r,0,0),t}else if(e.data){let t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Aa(t[n]/255)*255):t[n]=Aa(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}},Hv=0,Kh=class{static{a(this,"Source")}constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Hv++}),this.uuid=ka(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];let n={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,l=r.length;o<l;o++)r[o].isDataTexture?s.push(s3(r[o].image)):s.push(s3(r[o]))}else s=s3(r);n.url=s}return t||(e.images[this.uuid]=n),n}};function s3(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?Yh.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}a(s3,"serializeImage");var Gv=0,mi=class i extends er{static{a(this,"Texture")}constructor(e=i.DEFAULT_IMAGE,t=i.DEFAULT_MAPPING,n=kn,r=kn,s=Ti,o=yc,l=Zi,c=_s,u=i.DEFAULT_ANISOTROPY,h=vi){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Gv++}),this.uuid=ka(),this.name="",this.source=new Kh(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=l,this.internalFormat=null,this.type=c,this.offset=new nt(0,0),this.repeat=new nt(1,1),this.center=new nt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Rt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof h=="string"?this.colorSpace=h:(Mc("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=h===io?on:vi),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){let t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==D_)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case bs:e.x=e.x-Math.floor(e.x);break;case kn:e.x=e.x<0?0:1;break;case A3:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case bs:e.y=e.y-Math.floor(e.y);break;case kn:e.y=e.y<0?0:1;break;case A3:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Mc("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===on?io:j_}set encoding(e){Mc("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===io?on:vi}};mi.DEFAULT_IMAGE=null;mi.DEFAULT_MAPPING=D_;mi.DEFAULT_ANISOTROPY=1;var Tn=class i{static{a(this,"Vector4")}constructor(e=0,t=0,n=0,r=1){i.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){let t=this.x,n=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);let t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s,c=e.elements,u=c[0],h=c[4],d=c[8],f=c[1],m=c[5],_=c[9],M=c[2],g=c[6],R=c[10];if(Math.abs(h-f)<.01&&Math.abs(d-M)<.01&&Math.abs(_-g)<.01){if(Math.abs(h+f)<.1&&Math.abs(d+M)<.1&&Math.abs(_+g)<.1&&Math.abs(u+m+R-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;let b=(u+1)/2,S=(m+1)/2,C=(R+1)/2,W=(h+f)/4,F=(d+M)/4,ee=(_+g)/4;return b>S&&b>C?b<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(b),r=W/n,s=F/n):S>C?S<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(S),n=W/r,s=ee/r):C<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(C),n=F/s,r=ee/s),this.set(n,r,s,t),this}let y=Math.sqrt((g-_)*(g-_)+(d-M)*(d-M)+(f-h)*(f-h));return Math.abs(y)<.001&&(y=1),this.x=(g-_)/y,this.y=(d-M)/y,this.z=(f-h)/y,this.w=Math.acos((u+m+R-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},U3=class extends er{static{a(this,"RenderTarget")}constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Tn(0,0,e,t),this.scissorTest=!1,this.viewport=new Tn(0,0,e,t);let r={width:e,height:t,depth:1};n.encoding!==void 0&&(Mc("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===io?on:vi),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ti,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0},n),this.texture=new mi(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=n.generateMipmaps,this.texture.internalFormat=n.internalFormat,this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}setSize(e,t,n=1){(this.width!==e||this.height!==t||this.depth!==n)&&(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;let t=Object.assign({},e.texture.image);return this.texture.source=new Kh(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},Ir=class extends U3{static{a(this,"WebGLRenderTarget")}constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}},Qh=class extends mi{static{a(this,"DataArrayTexture")}constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=wn,this.minFilter=wn,this.wrapR=kn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var I3=class extends mi{static{a(this,"Data3DTexture")}constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=wn,this.minFilter=wn,this.wrapR=kn,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var Ri=class{static{a(this,"Quaternion")}constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,o,l){let c=n[r+0],u=n[r+1],h=n[r+2],d=n[r+3],f=s[o+0],m=s[o+1],_=s[o+2],M=s[o+3];if(l===0){e[t+0]=c,e[t+1]=u,e[t+2]=h,e[t+3]=d;return}if(l===1){e[t+0]=f,e[t+1]=m,e[t+2]=_,e[t+3]=M;return}if(d!==M||c!==f||u!==m||h!==_){let g=1-l,R=c*f+u*m+h*_+d*M,y=R>=0?1:-1,b=1-R*R;if(b>Number.EPSILON){let C=Math.sqrt(b),W=Math.atan2(C,R*y);g=Math.sin(g*W)/C,l=Math.sin(l*W)/C}let S=l*y;if(c=c*g+f*S,u=u*g+m*S,h=h*g+_*S,d=d*g+M*S,g===1-l){let C=1/Math.sqrt(c*c+u*u+h*h+d*d);c*=C,u*=C,h*=C,d*=C}}e[t]=c,e[t+1]=u,e[t+2]=h,e[t+3]=d}static multiplyQuaternionsFlat(e,t,n,r,s,o){let l=n[r],c=n[r+1],u=n[r+2],h=n[r+3],d=s[o],f=s[o+1],m=s[o+2],_=s[o+3];return e[t]=l*_+h*d+c*m-u*f,e[t+1]=c*_+h*f+u*d-l*m,e[t+2]=u*_+h*m+l*f-c*d,e[t+3]=h*_-l*d-c*f-u*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){let n=e._x,r=e._y,s=e._z,o=e._order,l=Math.cos,c=Math.sin,u=l(n/2),h=l(r/2),d=l(s/2),f=c(n/2),m=c(r/2),_=c(s/2);switch(o){case"XYZ":this._x=f*h*d+u*m*_,this._y=u*m*d-f*h*_,this._z=u*h*_+f*m*d,this._w=u*h*d-f*m*_;break;case"YXZ":this._x=f*h*d+u*m*_,this._y=u*m*d-f*h*_,this._z=u*h*_-f*m*d,this._w=u*h*d+f*m*_;break;case"ZXY":this._x=f*h*d-u*m*_,this._y=u*m*d+f*h*_,this._z=u*h*_+f*m*d,this._w=u*h*d-f*m*_;break;case"ZYX":this._x=f*h*d-u*m*_,this._y=u*m*d+f*h*_,this._z=u*h*_-f*m*d,this._w=u*h*d+f*m*_;break;case"YZX":this._x=f*h*d+u*m*_,this._y=u*m*d+f*h*_,this._z=u*h*_-f*m*d,this._w=u*h*d-f*m*_;break;case"XZY":this._x=f*h*d-u*m*_,this._y=u*m*d-f*h*_,this._z=u*h*_+f*m*d,this._w=u*h*d+f*m*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){let n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){let t=e.elements,n=t[0],r=t[4],s=t[8],o=t[1],l=t[5],c=t[9],u=t[2],h=t[6],d=t[10],f=n+l+d;if(f>0){let m=.5/Math.sqrt(f+1);this._w=.25/m,this._x=(h-c)*m,this._y=(s-u)*m,this._z=(o-r)*m}else if(n>l&&n>d){let m=2*Math.sqrt(1+n-l-d);this._w=(h-c)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(s+u)/m}else if(l>d){let m=2*Math.sqrt(1+l-n-d);this._w=(s-u)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(c+h)/m}else{let m=2*Math.sqrt(1+d-n-l);this._w=(o-r)/m,this._x=(s+u)/m,this._y=(c+h)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Zn(this.dot(e),-1,1)))}rotateTowards(e,t){let n=this.angleTo(e);if(n===0)return this;let r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){let n=e._x,r=e._y,s=e._z,o=e._w,l=t._x,c=t._y,u=t._z,h=t._w;return this._x=n*h+o*l+r*u-s*c,this._y=r*h+o*c+s*l-n*u,this._z=s*h+o*u+n*c-r*l,this._w=o*h-n*l-r*c-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);let n=this._x,r=this._y,s=this._z,o=this._w,l=o*e._w+n*e._x+r*e._y+s*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=o,this._x=n,this._y=r,this._z=s,this;let c=1-l*l;if(c<=Number.EPSILON){let m=1-t;return this._w=m*o+t*this._w,this._x=m*n+t*this._x,this._y=m*r+t*this._y,this._z=m*s+t*this._z,this.normalize(),this}let u=Math.sqrt(c),h=Math.atan2(u,l),d=Math.sin((1-t)*h)/u,f=Math.sin(t*h)/u;return this._w=o*d+this._w*f,this._x=n*d+this._x*f,this._y=r*d+this._y*f,this._z=s*d+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){let e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),n*Math.sin(s),n*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},K=class i{static{a(this,"Vector3")}constructor(e=0,t=0,n=0){i.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion($g.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion($g.setFromAxisAngle(e,t))}applyMatrix3(e){let t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){let t=this.x,n=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*o,this}applyQuaternion(e){let t=this.x,n=this.y,r=this.z,s=e.x,o=e.y,l=e.z,c=e.w,u=2*(o*r-l*n),h=2*(l*t-s*r),d=2*(s*n-o*t);return this.x=t+c*u+o*d-l*h,this.y=n+c*h+l*u-s*d,this.z=r+c*d+s*h-o*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){let t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){let n=e.x,r=e.y,s=e.z,o=t.x,l=t.y,c=t.z;return this.x=r*c-s*l,this.y=s*o-n*c,this.z=n*l-r*o,this}projectOnVector(e){let t=e.lengthSq();if(t===0)return this.set(0,0,0);let n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return o3.copy(this).projectOnVector(e),this.sub(o3)}reflect(e){return this.sub(o3.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){let t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;let n=this.dot(e)/t;return Math.acos(Zn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){let t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){let r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){let t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){let t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},o3=new K,$g=new Ri,ro=class{static{a(this,"Box3")}constructor(e=new K(1/0,1/0,1/0),t=new K(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Ui.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Ui.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){let n=Ui.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);let n=e.geometry;if(n!==void 0){let s=n.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,l=s.count;o<l;o++)e.isMesh===!0?e.getVertexPosition(o,Ui):Ui.fromBufferAttribute(s,o),Ui.applyMatrix4(e.matrixWorld),this.expandByPoint(Ui);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),uh.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),uh.copy(n.boundingBox)),uh.applyMatrix4(e.matrixWorld),this.union(uh)}let r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Ui),Ui.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(pc),hh.subVectors(this.max,pc),ha.subVectors(e.a,pc),da.subVectors(e.b,pc),fa.subVectors(e.c,pc),cs.subVectors(da,ha),us.subVectors(fa,da),Bs.subVectors(ha,fa);let t=[0,-cs.z,cs.y,0,-us.z,us.y,0,-Bs.z,Bs.y,cs.z,0,-cs.x,us.z,0,-us.x,Bs.z,0,-Bs.x,-cs.y,cs.x,0,-us.y,us.x,0,-Bs.y,Bs.x,0];return!a3(t,ha,da,fa,hh)||(t=[1,0,0,0,1,0,0,0,1],!a3(t,ha,da,fa,hh))?!1:(dh.crossVectors(cs,us),t=[dh.x,dh.y,dh.z],a3(t,ha,da,fa,hh))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ui).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Ui).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(vr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),vr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),vr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),vr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),vr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),vr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),vr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),vr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(vr),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}},vr=[new K,new K,new K,new K,new K,new K,new K,new K],Ui=new K,uh=new ro,ha=new K,da=new K,fa=new K,cs=new K,us=new K,Bs=new K,pc=new K,hh=new K,dh=new K,Js=new K;function a3(i,e,t,n,r){for(let s=0,o=i.length-3;s<=o;s+=3){Js.fromArray(i,s);let l=r.x*Math.abs(Js.x)+r.y*Math.abs(Js.y)+r.z*Math.abs(Js.z),c=e.dot(Js),u=t.dot(Js),h=n.dot(Js);if(Math.max(-Math.max(c,u,h),Math.min(c,u,h))>l)return!1}return!0}a(a3,"satForAxes");var Dv=new ro,mc=new K,l3=new K,so=class{static{a(this,"Sphere")}constructor(e=new K,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){let n=this.center;t!==void 0?n.copy(t):Dv.setFromPoints(e).getCenter(n);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){let t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){let n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;mc.subVectors(e,this.center);let t=mc.lengthSq();if(t>this.radius*this.radius){let n=Math.sqrt(t),r=(n-this.radius)*.5;this.center.addScaledVector(mc,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(l3.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(mc.copy(e.center).add(l3)),this.expandByPoint(mc.copy(e.center).sub(l3))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}},Nr=new K,c3=new K,fh=new K,hs=new K,u3=new K,ph=new K,h3=new K,oo=class{static{a(this,"Ray")}constructor(e=new K,t=new K(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Nr)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);let n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){let t=Nr.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Nr.copy(this.origin).addScaledVector(this.direction,t),Nr.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){c3.copy(e).add(t).multiplyScalar(.5),fh.copy(t).sub(e).normalize(),hs.copy(this.origin).sub(c3);let s=e.distanceTo(t)*.5,o=-this.direction.dot(fh),l=hs.dot(this.direction),c=-hs.dot(fh),u=hs.lengthSq(),h=Math.abs(1-o*o),d,f,m,_;if(h>0)if(d=o*c-l,f=o*l-c,_=s*h,d>=0)if(f>=-_)if(f<=_){let M=1/h;d*=M,f*=M,m=d*(d+o*f+2*l)+f*(o*d+f+2*c)+u}else f=s,d=Math.max(0,-(o*f+l)),m=-d*d+f*(f+2*c)+u;else f=-s,d=Math.max(0,-(o*f+l)),m=-d*d+f*(f+2*c)+u;else f<=-_?(d=Math.max(0,-(-o*s+l)),f=d>0?-s:Math.min(Math.max(-s,-c),s),m=-d*d+f*(f+2*c)+u):f<=_?(d=0,f=Math.min(Math.max(-s,-c),s),m=f*(f+2*c)+u):(d=Math.max(0,-(o*s+l)),f=d>0?s:Math.min(Math.max(-s,-c),s),m=-d*d+f*(f+2*c)+u);else f=o>0?-s:s,d=Math.max(0,-(o*f+l)),m=-d*d+f*(f+2*c)+u;return n&&n.copy(this.origin).addScaledVector(this.direction,d),r&&r.copy(c3).addScaledVector(fh,f),m}intersectSphere(e,t){Nr.subVectors(e.center,this.origin);let n=Nr.dot(this.direction),r=Nr.dot(Nr)-n*n,s=e.radius*e.radius;if(r>s)return null;let o=Math.sqrt(s-r),l=n-o,c=n+o;return c<0?null:l<0?this.at(c,t):this.at(l,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){let t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;let n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){let n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){let t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,s,o,l,c,u=1/this.direction.x,h=1/this.direction.y,d=1/this.direction.z,f=this.origin;return u>=0?(n=(e.min.x-f.x)*u,r=(e.max.x-f.x)*u):(n=(e.max.x-f.x)*u,r=(e.min.x-f.x)*u),h>=0?(s=(e.min.y-f.y)*h,o=(e.max.y-f.y)*h):(s=(e.max.y-f.y)*h,o=(e.min.y-f.y)*h),n>o||s>r||((s>n||isNaN(n))&&(n=s),(o<r||isNaN(r))&&(r=o),d>=0?(l=(e.min.z-f.z)*d,c=(e.max.z-f.z)*d):(l=(e.max.z-f.z)*d,c=(e.min.z-f.z)*d),n>c||l>r)||((l>n||n!==n)&&(n=l),(c<r||r!==r)&&(r=c),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return this.intersectBox(e,Nr)!==null}intersectTriangle(e,t,n,r,s){u3.subVectors(t,e),ph.subVectors(n,e),h3.crossVectors(u3,ph);let o=this.direction.dot(h3),l;if(o>0){if(r)return null;l=1}else if(o<0)l=-1,o=-o;else return null;hs.subVectors(this.origin,e);let c=l*this.direction.dot(ph.crossVectors(hs,ph));if(c<0)return null;let u=l*this.direction.dot(u3.cross(hs));if(u<0||c+u>o)return null;let h=-l*hs.dot(h3);return h<0?null:this.at(h/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},an=class i{static{a(this,"Matrix4")}constructor(e,t,n,r,s,o,l,c,u,h,d,f,m,_,M,g){i.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,o,l,c,u,h,d,f,m,_,M,g)}set(e,t,n,r,s,o,l,c,u,h,d,f,m,_,M,g){let R=this.elements;return R[0]=e,R[4]=t,R[8]=n,R[12]=r,R[1]=s,R[5]=o,R[9]=l,R[13]=c,R[2]=u,R[6]=h,R[10]=d,R[14]=f,R[3]=m,R[7]=_,R[11]=M,R[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new i().fromArray(this.elements)}copy(e){let t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){let t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){let t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){let t=this.elements,n=e.elements,r=1/pa.setFromMatrixColumn(e,0).length(),s=1/pa.setFromMatrixColumn(e,1).length(),o=1/pa.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){let t=this.elements,n=e.x,r=e.y,s=e.z,o=Math.cos(n),l=Math.sin(n),c=Math.cos(r),u=Math.sin(r),h=Math.cos(s),d=Math.sin(s);if(e.order==="XYZ"){let f=o*h,m=o*d,_=l*h,M=l*d;t[0]=c*h,t[4]=-c*d,t[8]=u,t[1]=m+_*u,t[5]=f-M*u,t[9]=-l*c,t[2]=M-f*u,t[6]=_+m*u,t[10]=o*c}else if(e.order==="YXZ"){let f=c*h,m=c*d,_=u*h,M=u*d;t[0]=f+M*l,t[4]=_*l-m,t[8]=o*u,t[1]=o*d,t[5]=o*h,t[9]=-l,t[2]=m*l-_,t[6]=M+f*l,t[10]=o*c}else if(e.order==="ZXY"){let f=c*h,m=c*d,_=u*h,M=u*d;t[0]=f-M*l,t[4]=-o*d,t[8]=_+m*l,t[1]=m+_*l,t[5]=o*h,t[9]=M-f*l,t[2]=-o*u,t[6]=l,t[10]=o*c}else if(e.order==="ZYX"){let f=o*h,m=o*d,_=l*h,M=l*d;t[0]=c*h,t[4]=_*u-m,t[8]=f*u+M,t[1]=c*d,t[5]=M*u+f,t[9]=m*u-_,t[2]=-u,t[6]=l*c,t[10]=o*c}else if(e.order==="YZX"){let f=o*c,m=o*u,_=l*c,M=l*u;t[0]=c*h,t[4]=M-f*d,t[8]=_*d+m,t[1]=d,t[5]=o*h,t[9]=-l*h,t[2]=-u*h,t[6]=m*d+_,t[10]=f-M*d}else if(e.order==="XZY"){let f=o*c,m=o*u,_=l*c,M=l*u;t[0]=c*h,t[4]=-d,t[8]=u*h,t[1]=f*d+M,t[5]=o*h,t[9]=m*d-_,t[2]=_*d-m,t[6]=l*h,t[10]=M*d+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Yv,e,Kv)}lookAt(e,t,n){let r=this.elements;return fi.subVectors(e,t),fi.lengthSq()===0&&(fi.z=1),fi.normalize(),ds.crossVectors(n,fi),ds.lengthSq()===0&&(Math.abs(n.z)===1?fi.x+=1e-4:fi.z+=1e-4,fi.normalize(),ds.crossVectors(n,fi)),ds.normalize(),mh.crossVectors(fi,ds),r[0]=ds.x,r[4]=mh.x,r[8]=fi.x,r[1]=ds.y,r[5]=mh.y,r[9]=fi.y,r[2]=ds.z,r[6]=mh.z,r[10]=fi.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){let n=e.elements,r=t.elements,s=this.elements,o=n[0],l=n[4],c=n[8],u=n[12],h=n[1],d=n[5],f=n[9],m=n[13],_=n[2],M=n[6],g=n[10],R=n[14],y=n[3],b=n[7],S=n[11],C=n[15],W=r[0],F=r[4],ee=r[8],P=r[12],U=r[1],j=r[5],ae=r[9],_e=r[13],D=r[2],z=r[6],se=r[10],fe=r[14],le=r[3],ce=r[7],ge=r[11],be=r[15];return s[0]=o*W+l*U+c*D+u*le,s[4]=o*F+l*j+c*z+u*ce,s[8]=o*ee+l*ae+c*se+u*ge,s[12]=o*P+l*_e+c*fe+u*be,s[1]=h*W+d*U+f*D+m*le,s[5]=h*F+d*j+f*z+m*ce,s[9]=h*ee+d*ae+f*se+m*ge,s[13]=h*P+d*_e+f*fe+m*be,s[2]=_*W+M*U+g*D+R*le,s[6]=_*F+M*j+g*z+R*ce,s[10]=_*ee+M*ae+g*se+R*ge,s[14]=_*P+M*_e+g*fe+R*be,s[3]=y*W+b*U+S*D+C*le,s[7]=y*F+b*j+S*z+C*ce,s[11]=y*ee+b*ae+S*se+C*ge,s[15]=y*P+b*_e+S*fe+C*be,this}multiplyScalar(e){let t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){let e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],o=e[1],l=e[5],c=e[9],u=e[13],h=e[2],d=e[6],f=e[10],m=e[14],_=e[3],M=e[7],g=e[11],R=e[15];return _*(+s*c*d-r*u*d-s*l*f+n*u*f+r*l*m-n*c*m)+M*(+t*c*m-t*u*f+s*o*f-r*o*m+r*u*h-s*c*h)+g*(+t*u*d-t*l*m-s*o*d+n*o*m+s*l*h-n*u*h)+R*(-r*l*h-t*c*d+t*l*f+r*o*d-n*o*f+n*c*h)}transpose(){let e=this.elements,t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){let r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){let e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],f=e[10],m=e[11],_=e[12],M=e[13],g=e[14],R=e[15],y=d*g*u-M*f*u+M*c*m-l*g*m-d*c*R+l*f*R,b=_*f*u-h*g*u-_*c*m+o*g*m+h*c*R-o*f*R,S=h*M*u-_*d*u+_*l*m-o*M*m-h*l*R+o*d*R,C=_*d*c-h*M*c-_*l*f+o*M*f+h*l*g-o*d*g,W=t*y+n*b+r*S+s*C;if(W===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let F=1/W;return e[0]=y*F,e[1]=(M*f*s-d*g*s-M*r*m+n*g*m+d*r*R-n*f*R)*F,e[2]=(l*g*s-M*c*s+M*r*u-n*g*u-l*r*R+n*c*R)*F,e[3]=(d*c*s-l*f*s-d*r*u+n*f*u+l*r*m-n*c*m)*F,e[4]=b*F,e[5]=(h*g*s-_*f*s+_*r*m-t*g*m-h*r*R+t*f*R)*F,e[6]=(_*c*s-o*g*s-_*r*u+t*g*u+o*r*R-t*c*R)*F,e[7]=(o*f*s-h*c*s+h*r*u-t*f*u-o*r*m+t*c*m)*F,e[8]=S*F,e[9]=(_*d*s-h*M*s-_*n*m+t*M*m+h*n*R-t*d*R)*F,e[10]=(o*M*s-_*l*s+_*n*u-t*M*u-o*n*R+t*l*R)*F,e[11]=(h*l*s-o*d*s-h*n*u+t*d*u+o*n*m-t*l*m)*F,e[12]=C*F,e[13]=(h*M*r-_*d*r+_*n*f-t*M*f-h*n*g+t*d*g)*F,e[14]=(_*l*r-o*M*r-_*n*c+t*M*c+o*n*g-t*l*g)*F,e[15]=(o*d*r-h*l*r+h*n*c-t*d*c-o*n*f+t*l*f)*F,this}scale(e){let t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){let e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){let t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){let t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){let n=Math.cos(t),r=Math.sin(t),s=1-n,o=e.x,l=e.y,c=e.z,u=s*o,h=s*l;return this.set(u*o+n,u*l-r*c,u*c+r*l,0,u*l+r*c,h*l+n,h*c-r*o,0,u*c-r*l,h*c+r*o,s*c*c+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,o){return this.set(1,n,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){let r=this.elements,s=t._x,o=t._y,l=t._z,c=t._w,u=s+s,h=o+o,d=l+l,f=s*u,m=s*h,_=s*d,M=o*h,g=o*d,R=l*d,y=c*u,b=c*h,S=c*d,C=n.x,W=n.y,F=n.z;return r[0]=(1-(M+R))*C,r[1]=(m+S)*C,r[2]=(_-b)*C,r[3]=0,r[4]=(m-S)*W,r[5]=(1-(f+R))*W,r[6]=(g+y)*W,r[7]=0,r[8]=(_+b)*F,r[9]=(g-y)*F,r[10]=(1-(f+M))*F,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){let r=this.elements,s=pa.set(r[0],r[1],r[2]).length(),o=pa.set(r[4],r[5],r[6]).length(),l=pa.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Ii.copy(this);let u=1/s,h=1/o,d=1/l;return Ii.elements[0]*=u,Ii.elements[1]*=u,Ii.elements[2]*=u,Ii.elements[4]*=h,Ii.elements[5]*=h,Ii.elements[6]*=h,Ii.elements[8]*=d,Ii.elements[9]*=d,Ii.elements[10]*=d,t.setFromRotationMatrix(Ii),n.x=s,n.y=o,n.z=l,this}makePerspective(e,t,n,r,s,o,l=Or){let c=this.elements,u=2*s/(t-e),h=2*s/(n-r),d=(t+e)/(t-e),f=(n+r)/(n-r),m,_;if(l===Or)m=-(o+s)/(o-s),_=-2*o*s/(o-s);else if(l===Gh)m=-o/(o-s),_=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return c[0]=u,c[4]=0,c[8]=d,c[12]=0,c[1]=0,c[5]=h,c[9]=f,c[13]=0,c[2]=0,c[6]=0,c[10]=m,c[14]=_,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,n,r,s,o,l=Or){let c=this.elements,u=1/(t-e),h=1/(n-r),d=1/(o-s),f=(t+e)*u,m=(n+r)*h,_,M;if(l===Or)_=(o+s)*d,M=-2*d;else if(l===Gh)_=s*d,M=-1*d;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return c[0]=2*u,c[4]=0,c[8]=0,c[12]=-f,c[1]=0,c[5]=2*h,c[9]=0,c[13]=-m,c[2]=0,c[6]=0,c[10]=M,c[14]=-_,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){let t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){let n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}},pa=new K,Ii=new an,Yv=new K(0,0,0),Kv=new K(1,1,1),ds=new K,mh=new K,fi=new K,jg=new an,qg=new Ri,Bh=class i{static{a(this,"Euler")}constructor(e=0,t=0,n=0,r=i.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){let r=e.elements,s=r[0],o=r[4],l=r[8],c=r[1],u=r[5],h=r[9],d=r[2],f=r[6],m=r[10];switch(t){case"XYZ":this._y=Math.asin(Zn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-h,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Zn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(l,m),this._z=Math.atan2(c,u)):(this._y=Math.atan2(-d,s),this._z=0);break;case"ZXY":this._x=Math.asin(Zn(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-d,m),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-Zn(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(f,m),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(Zn(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-d,s)):(this._x=0,this._y=Math.atan2(l,m));break;case"XZY":this._z=Math.asin(-Zn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-h,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return jg.makeRotationFromQuaternion(e),this.setFromRotationMatrix(jg,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return qg.setFromEuler(this),this.setFromQuaternion(qg,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}};Bh.DEFAULT_ORDER="XYZ";var Jh=class{static{a(this,"Layers")}constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}},Qv=0,e_=new K,ma=new Ri,Pr=new an,Rh=new K,Rc=new K,Bv=new K,Jv=new Ri,t_=new K(1,0,0),n_=new K(0,1,0),i_=new K(0,0,1),zv={type:"added"},$v={type:"removed"},ln=class i extends er{static{a(this,"Object3D")}constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Qv++}),this.uuid=ka(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=i.DEFAULT_UP.clone();let e=new K,t=new Bh,n=new Ri,r=new K(1,1,1);function s(){n.setFromEuler(t,!1)}a(s,"onRotationChange");function o(){t.setFromQuaternion(n,void 0,!1)}a(o,"onQuaternionChange"),t._onChange(s),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new an},normalMatrix:{value:new Rt}}),this.matrix=new an,this.matrixWorld=new an,this.matrixAutoUpdate=i.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Jh,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return ma.setFromAxisAngle(e,t),this.quaternion.multiply(ma),this}rotateOnWorldAxis(e,t){return ma.setFromAxisAngle(e,t),this.quaternion.premultiply(ma),this}rotateX(e){return this.rotateOnAxis(t_,e)}rotateY(e){return this.rotateOnAxis(n_,e)}rotateZ(e){return this.rotateOnAxis(i_,e)}translateOnAxis(e,t){return e_.copy(e).applyQuaternion(this.quaternion),this.position.add(e_.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(t_,e)}translateY(e){return this.translateOnAxis(n_,e)}translateZ(e){return this.translateOnAxis(i_,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Pr.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Rh.copy(e):Rh.set(e,t,n);let r=this.parent;this.updateWorldMatrix(!0,!1),Rc.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Pr.lookAt(Rc,Rh,this.up):Pr.lookAt(Rh,Rc,this.up),this.quaternion.setFromRotationMatrix(Pr),r&&(Pr.extractRotation(r.matrixWorld),ma.setFromRotationMatrix(Pr),this.quaternion.premultiply(ma.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(zv)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}let t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent($v)),this}removeFromParent(){let e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Pr.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Pr.multiply(e.parent.matrixWorld)),e.applyMatrix4(Pr),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){let o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);let r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Rc,e,Bv),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Rc,Jv,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);let t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);let t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){let t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);let t=this.children;for(let n=0,r=t.length;n<r;n++){let s=t[n];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){let n=this.parent;if(e===!0&&n!==null&&n.matrixWorldAutoUpdate===!0&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){let r=this.children;for(let s=0,o=r.length;s<o;s++){let l=r[s];l.matrixWorldAutoUpdate===!0&&l.updateWorldMatrix(!1,!0)}}}toJSON(e){let t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});let r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(l=>({boxInitialized:l.boxInitialized,boxMin:l.box.min.toArray(),boxMax:l.box.max.toArray(),sphereInitialized:l.sphereInitialized,sphereRadius:l.sphere.radius,sphereCenter:l.sphere.center.toArray()})),r.maxGeometryCount=this._maxGeometryCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(e)),c.uuid}if(a(s,"serialize"),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);let l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){let c=l.shapes;if(Array.isArray(c))for(let u=0,h=c.length;u<h;u++){let d=c[u];s(e.shapes,d)}else s(e.shapes,c)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let l=[];for(let c=0,u=this.material.length;c<u;c++)l.push(s(e.materials,this.material[c]));r.material=l}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let l=0;l<this.children.length;l++)r.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let l=0;l<this.animations.length;l++){let c=this.animations[l];r.animations.push(s(e.animations,c))}}if(t){let l=o(e.geometries),c=o(e.materials),u=o(e.textures),h=o(e.images),d=o(e.shapes),f=o(e.skeletons),m=o(e.animations),_=o(e.nodes);l.length>0&&(n.geometries=l),c.length>0&&(n.materials=c),u.length>0&&(n.textures=u),h.length>0&&(n.images=h),d.length>0&&(n.shapes=d),f.length>0&&(n.skeletons=f),m.length>0&&(n.animations=m),_.length>0&&(n.nodes=_)}return n.object=r,n;function o(l){let c=[];for(let u in l){let h=l[u];delete h.metadata,c.push(h)}return c}a(o,"extractFromCache")}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){let r=e.children[n];this.add(r.clone())}return this}};ln.DEFAULT_UP=new K(0,1,0);ln.DEFAULT_MATRIX_AUTO_UPDATE=!0;ln.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;var Fi=new K,Er=new K,d3=new K,wr=new K,Ra=new K,ga=new K,r_=new K,f3=new K,p3=new K,m3=new K,gh=!1,Na=class i{static{a(this,"Triangle")}constructor(e=new K,t=new K,n=new K){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),Fi.subVectors(e,t),r.cross(Fi);let s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){Fi.subVectors(r,t),Er.subVectors(n,t),d3.subVectors(e,t);let o=Fi.dot(Fi),l=Fi.dot(Er),c=Fi.dot(d3),u=Er.dot(Er),h=Er.dot(d3),d=o*u-l*l;if(d===0)return s.set(0,0,0),null;let f=1/d,m=(u*c-l*h)*f,_=(o*h-l*c)*f;return s.set(1-m-_,_,m)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,wr)===null?!1:wr.x>=0&&wr.y>=0&&wr.x+wr.y<=1}static getUV(e,t,n,r,s,o,l,c){return gh===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),gh=!0),this.getInterpolation(e,t,n,r,s,o,l,c)}static getInterpolation(e,t,n,r,s,o,l,c){return this.getBarycoord(e,t,n,r,wr)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(s,wr.x),c.addScaledVector(o,wr.y),c.addScaledVector(l,wr.z),c)}static isFrontFacing(e,t,n,r){return Fi.subVectors(n,t),Er.subVectors(e,t),Fi.cross(Er).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Fi.subVectors(this.c,this.b),Er.subVectors(this.a,this.b),Fi.cross(Er).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return i.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return i.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,r,s){return gh===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),gh=!0),i.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}getInterpolation(e,t,n,r,s){return i.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}containsPoint(e){return i.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return i.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){let n=this.a,r=this.b,s=this.c,o,l;Ra.subVectors(r,n),ga.subVectors(s,n),f3.subVectors(e,n);let c=Ra.dot(f3),u=ga.dot(f3);if(c<=0&&u<=0)return t.copy(n);p3.subVectors(e,r);let h=Ra.dot(p3),d=ga.dot(p3);if(h>=0&&d<=h)return t.copy(r);let f=c*d-h*u;if(f<=0&&c>=0&&h<=0)return o=c/(c-h),t.copy(n).addScaledVector(Ra,o);m3.subVectors(e,s);let m=Ra.dot(m3),_=ga.dot(m3);if(_>=0&&m<=_)return t.copy(s);let M=m*u-c*_;if(M<=0&&u>=0&&_<=0)return l=u/(u-_),t.copy(n).addScaledVector(ga,l);let g=h*_-m*d;if(g<=0&&d-h>=0&&m-_>=0)return r_.subVectors(s,r),l=(d-h)/(d-h+(m-_)),t.copy(r).addScaledVector(r_,l);let R=1/(g+M+f);return o=M*R,l=f*R,t.copy(n).addScaledVector(Ra,o).addScaledVector(ga,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}},ib={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},fs={h:0,s:0,l:0},_h={h:0,s:0,l:0};function R3(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}a(R3,"hue2rgb");var ct=class{static{a(this,"Color")}constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){let r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=on){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,vt.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=vt.workingColorSpace){return this.r=e,this.g=t,this.b=n,vt.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=vt.workingColorSpace){if(e=gm(e,1),t=Zn(t,0,1),n=Zn(n,0,1),t===0)this.r=this.g=this.b=n;else{let s=n<=.5?n*(1+t):n+t-n*t,o=2*n-s;this.r=R3(o,s,e+1/3),this.g=R3(o,s,e),this.b=R3(o,s,e-1/3)}return vt.toWorkingColorSpace(this,r),this}setStyle(e,t=on){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}a(n,"handleAlpha");let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s,o=r[1],l=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){let s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=on){let n=ib[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Aa(e.r),this.g=Aa(e.g),this.b=Aa(e.b),this}copyLinearToSRGB(e){return this.r=r3(e.r),this.g=r3(e.g),this.b=r3(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=on){return vt.fromWorkingColorSpace(Cn.copy(this),e),Math.round(Zn(Cn.r*255,0,255))*65536+Math.round(Zn(Cn.g*255,0,255))*256+Math.round(Zn(Cn.b*255,0,255))}getHexString(e=on){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=vt.workingColorSpace){vt.fromWorkingColorSpace(Cn.copy(this),t);let n=Cn.r,r=Cn.g,s=Cn.b,o=Math.max(n,r,s),l=Math.min(n,r,s),c,u,h=(l+o)/2;if(l===o)c=0,u=0;else{let d=o-l;switch(u=h<=.5?d/(o+l):d/(2-o-l),o){case n:c=(r-s)/d+(r<s?6:0);break;case r:c=(s-n)/d+2;break;case s:c=(n-r)/d+4;break}c/=6}return e.h=c,e.s=u,e.l=h,e}getRGB(e,t=vt.workingColorSpace){return vt.fromWorkingColorSpace(Cn.copy(this),t),e.r=Cn.r,e.g=Cn.g,e.b=Cn.b,e}getStyle(e=on){vt.fromWorkingColorSpace(Cn.copy(this),e);let t=Cn.r,n=Cn.g,r=Cn.b;return e!==on?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(r*255)})`}offsetHSL(e,t,n){return this.getHSL(fs),this.setHSL(fs.h+e,fs.s+t,fs.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(fs),e.getHSL(_h);let n=bc(fs.h,_h.h,t),r=bc(fs.s,_h.s,t),s=bc(fs.l,_h.l,t);return this.setHSL(n,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){let t=this.r,n=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*r,this.g=s[1]*t+s[4]*n+s[7]*r,this.b=s[2]*t+s[5]*n+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},Cn=new ct;ct.NAMES=ib;var jv=0,Fr=class extends er{static{a(this,"Material")}constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:jv++}),this.uuid=ka(),this.name="",this.type="Material",this.blending=La,this.side=qi,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=P3,this.blendDst=E3,this.blendEquation=qs,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new ct(0,0,0),this.blendAlpha=0,this.depthFunc=Wh,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Dg,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ca,this.stencilZFail=ca,this.stencilZPass=ca,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(let t in e){let n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}let r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){let t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});let n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==La&&(n.blending=this.blending),this.side!==qi&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==P3&&(n.blendSrc=this.blendSrc),this.blendDst!==E3&&(n.blendDst=this.blendDst),this.blendEquation!==qs&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Wh&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==Dg&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==ca&&(n.stencilFail=this.stencilFail),this.stencilZFail!==ca&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==ca&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function r(s){let o=[];for(let l in s){let c=s[l];delete c.metadata,o.push(c)}return o}if(a(r,"extractFromCache"),t){let s=r(e.textures),o=r(e.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;let t=e.clippingPlanes,n=null;if(t!==null){let r=t.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}},Wr=class extends Fr{static{a(this,"MeshBasicMaterial")}constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new ct(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=pm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}};var sn=new K,bh=new nt,ii=class{static{a(this,"BufferAttribute")}constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=Yg,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=ms,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return console.warn("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)bh.fromBufferAttribute(this,t),bh.applyMatrix3(e),this.setXY(t,bh.x,bh.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)sn.fromBufferAttribute(this,t),sn.applyMatrix3(e),this.setXYZ(t,sn.x,sn.y,sn.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)sn.fromBufferAttribute(this,t),sn.applyMatrix4(e),this.setXYZ(t,sn.x,sn.y,sn.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)sn.fromBufferAttribute(this,t),sn.applyNormalMatrix(e),this.setXYZ(t,sn.x,sn.y,sn.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)sn.fromBufferAttribute(this,t),sn.transformDirection(e),this.setXYZ(t,sn.x,sn.y,sn.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=va(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Dn(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=va(t,this.array)),t}setX(e,t){return this.normalized&&(t=Dn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=va(t,this.array)),t}setY(e,t){return this.normalized&&(t=Dn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=va(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Dn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=va(t,this.array)),t}setW(e,t){return this.normalized&&(t=Dn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Dn(t,this.array),n=Dn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Dn(t,this.array),n=Dn(n,this.array),r=Dn(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=Dn(t,this.array),n=Dn(n,this.array),r=Dn(r,this.array),s=Dn(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Yg&&(e.usage=this.usage),e}};var zh=class extends ii{static{a(this,"Uint16BufferAttribute")}constructor(e,t,n){super(new Uint16Array(e),t,n)}};var $h=class extends ii{static{a(this,"Uint32BufferAttribute")}constructor(e,t,n){super(new Uint32Array(e),t,n)}};var gt=class extends ii{static{a(this,"Float32BufferAttribute")}constructor(e,t,n){super(new Float32Array(e),t,n)}};var qv=0,Si=new an,g3=new ln,_a=new K,pi=new ro,gc=new ro,Sn=new K,vn=class i extends er{static{a(this,"BufferGeometry")}constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:qv++}),this.uuid=ka(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(nb(e)?$h:zh)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){let t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);let n=this.attributes.normal;if(n!==void 0){let s=new Rt().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Si.makeRotationFromQuaternion(e),this.applyMatrix4(Si),this}rotateX(e){return Si.makeRotationX(e),this.applyMatrix4(Si),this}rotateY(e){return Si.makeRotationY(e),this.applyMatrix4(Si),this}rotateZ(e){return Si.makeRotationZ(e),this.applyMatrix4(Si),this}translate(e,t,n){return Si.makeTranslation(e,t,n),this.applyMatrix4(Si),this}scale(e,t,n){return Si.makeScale(e,t,n),this.applyMatrix4(Si),this}lookAt(e){return g3.lookAt(e),g3.updateMatrix(),this.applyMatrix4(g3.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_a).negate(),this.translate(_a.x,_a.y,_a.z),this}setFromPoints(e){let t=[];for(let n=0,r=e.length;n<r;n++){let s=e[n];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new gt(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ro);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new K(-1/0,-1/0,-1/0),new K(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){let s=t[n];pi.setFromBufferAttribute(s),this.morphTargetsRelative?(Sn.addVectors(this.boundingBox.min,pi.min),this.boundingBox.expandByPoint(Sn),Sn.addVectors(this.boundingBox.max,pi.max),this.boundingBox.expandByPoint(Sn)):(this.boundingBox.expandByPoint(pi.min),this.boundingBox.expandByPoint(pi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new so);let e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new K,1/0);return}if(e){let n=this.boundingSphere.center;if(pi.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){let l=t[s];gc.setFromBufferAttribute(l),this.morphTargetsRelative?(Sn.addVectors(pi.min,gc.min),pi.expandByPoint(Sn),Sn.addVectors(pi.max,gc.max),pi.expandByPoint(Sn)):(pi.expandByPoint(gc.min),pi.expandByPoint(gc.max))}pi.getCenter(n);let r=0;for(let s=0,o=e.count;s<o;s++)Sn.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(Sn));if(t)for(let s=0,o=t.length;s<o;s++){let l=t[s],c=this.morphTargetsRelative;for(let u=0,h=l.count;u<h;u++)Sn.fromBufferAttribute(l,u),c&&(_a.fromBufferAttribute(e,u),Sn.add(_a)),r=Math.max(r,n.distanceToSquared(Sn))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let n=e.array,r=t.position.array,s=t.normal.array,o=t.uv.array,l=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ii(new Float32Array(4*l),4));let c=this.getAttribute("tangent").array,u=[],h=[];for(let U=0;U<l;U++)u[U]=new K,h[U]=new K;let d=new K,f=new K,m=new K,_=new nt,M=new nt,g=new nt,R=new K,y=new K;function b(U,j,ae){d.fromArray(r,U*3),f.fromArray(r,j*3),m.fromArray(r,ae*3),_.fromArray(o,U*2),M.fromArray(o,j*2),g.fromArray(o,ae*2),f.sub(d),m.sub(d),M.sub(_),g.sub(_);let _e=1/(M.x*g.y-g.x*M.y);isFinite(_e)&&(R.copy(f).multiplyScalar(g.y).addScaledVector(m,-M.y).multiplyScalar(_e),y.copy(m).multiplyScalar(M.x).addScaledVector(f,-g.x).multiplyScalar(_e),u[U].add(R),u[j].add(R),u[ae].add(R),h[U].add(y),h[j].add(y),h[ae].add(y))}a(b,"handleTriangle");let S=this.groups;S.length===0&&(S=[{start:0,count:n.length}]);for(let U=0,j=S.length;U<j;++U){let ae=S[U],_e=ae.start,D=ae.count;for(let z=_e,se=_e+D;z<se;z+=3)b(n[z+0],n[z+1],n[z+2])}let C=new K,W=new K,F=new K,ee=new K;function P(U){F.fromArray(s,U*3),ee.copy(F);let j=u[U];C.copy(j),C.sub(F.multiplyScalar(F.dot(j))).normalize(),W.crossVectors(ee,j);let _e=W.dot(h[U])<0?-1:1;c[U*4]=C.x,c[U*4+1]=C.y,c[U*4+2]=C.z,c[U*4+3]=_e}a(P,"handleVertex");for(let U=0,j=S.length;U<j;++U){let ae=S[U],_e=ae.start,D=ae.count;for(let z=_e,se=_e+D;z<se;z+=3)P(n[z+0]),P(n[z+1]),P(n[z+2])}}computeVertexNormals(){let e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new ii(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let f=0,m=n.count;f<m;f++)n.setXYZ(f,0,0,0);let r=new K,s=new K,o=new K,l=new K,c=new K,u=new K,h=new K,d=new K;if(e)for(let f=0,m=e.count;f<m;f+=3){let _=e.getX(f+0),M=e.getX(f+1),g=e.getX(f+2);r.fromBufferAttribute(t,_),s.fromBufferAttribute(t,M),o.fromBufferAttribute(t,g),h.subVectors(o,s),d.subVectors(r,s),h.cross(d),l.fromBufferAttribute(n,_),c.fromBufferAttribute(n,M),u.fromBufferAttribute(n,g),l.add(h),c.add(h),u.add(h),n.setXYZ(_,l.x,l.y,l.z),n.setXYZ(M,c.x,c.y,c.z),n.setXYZ(g,u.x,u.y,u.z)}else for(let f=0,m=t.count;f<m;f+=3)r.fromBufferAttribute(t,f+0),s.fromBufferAttribute(t,f+1),o.fromBufferAttribute(t,f+2),h.subVectors(o,s),d.subVectors(r,s),h.cross(d),n.setXYZ(f+0,h.x,h.y,h.z),n.setXYZ(f+1,h.x,h.y,h.z),n.setXYZ(f+2,h.x,h.y,h.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){let e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Sn.fromBufferAttribute(e,t),Sn.normalize(),e.setXYZ(t,Sn.x,Sn.y,Sn.z)}toNonIndexed(){function e(l,c){let u=l.array,h=l.itemSize,d=l.normalized,f=new u.constructor(c.length*h),m=0,_=0;for(let M=0,g=c.length;M<g;M++){l.isInterleavedBufferAttribute?m=c[M]*l.data.stride+l.offset:m=c[M]*h;for(let R=0;R<h;R++)f[_++]=u[m++]}return new ii(f,h,d)}if(a(e,"convertBufferAttribute"),this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let t=new i,n=this.index.array,r=this.attributes;for(let l in r){let c=r[l],u=e(c,n);t.setAttribute(l,u)}let s=this.morphAttributes;for(let l in s){let c=[],u=s[l];for(let h=0,d=u.length;h<d;h++){let f=u[h],m=e(f,n);c.push(m)}t.morphAttributes[l]=c}t.morphTargetsRelative=this.morphTargetsRelative;let o=this.groups;for(let l=0,c=o.length;l<c;l++){let u=o[l];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){let e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){let c=this.parameters;for(let u in c)c[u]!==void 0&&(e[u]=c[u]);return e}e.data={attributes:{}};let t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});let n=this.attributes;for(let c in n){let u=n[c];e.data.attributes[c]=u.toJSON(e.data)}let r={},s=!1;for(let c in this.morphAttributes){let u=this.morphAttributes[c],h=[];for(let d=0,f=u.length;d<f;d++){let m=u[d];h.push(m.toJSON(e.data))}h.length>0&&(r[c]=h,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);let o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));let l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let t={};this.name=e.name;let n=e.index;n!==null&&this.setIndex(n.clone(t));let r=e.attributes;for(let u in r){let h=r[u];this.setAttribute(u,h.clone(t))}let s=e.morphAttributes;for(let u in s){let h=[],d=s[u];for(let f=0,m=d.length;f<m;f++)h.push(d[f].clone(t));this.morphAttributes[u]=h}this.morphTargetsRelative=e.morphTargetsRelative;let o=e.groups;for(let u=0,h=o.length;u<h;u++){let d=o[u];this.addGroup(d.start,d.count,d.materialIndex)}let l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());let c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},s_=new an,zs=new oo,Mh=new so,o_=new K,ba=new K,Ma=new K,xa=new K,_3=new K,xh=new K,yh=new nt,Sh=new nt,Th=new nt,a_=new K,l_=new K,c_=new K,vh=new K,Nh=new K,ni=class extends ln{static{a(this,"Mesh")}constructor(e=new vn,t=new Wr){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){let t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){let r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){let l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}getVertexPosition(e,t){let n=this.geometry,r=n.attributes.position,s=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(r,e);let l=this.morphTargetInfluences;if(s&&l){xh.set(0,0,0);for(let c=0,u=s.length;c<u;c++){let h=l[c],d=s[c];h!==0&&(_3.fromBufferAttribute(d,e),o?xh.addScaledVector(_3,h):xh.addScaledVector(_3.sub(t),h))}t.add(xh)}return t}raycast(e,t){let n=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),Mh.copy(n.boundingSphere),Mh.applyMatrix4(s),zs.copy(e.ray).recast(e.near),!(Mh.containsPoint(zs.origin)===!1&&(zs.intersectSphere(Mh,o_)===null||zs.origin.distanceToSquared(o_)>(e.far-e.near)**2))&&(s_.copy(s).invert(),zs.copy(e.ray).applyMatrix4(s_),!(n.boundingBox!==null&&zs.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,zs)))}_computeIntersections(e,t,n){let r,s=this.geometry,o=this.material,l=s.index,c=s.attributes.position,u=s.attributes.uv,h=s.attributes.uv1,d=s.attributes.normal,f=s.groups,m=s.drawRange;if(l!==null)if(Array.isArray(o))for(let _=0,M=f.length;_<M;_++){let g=f[_],R=o[g.materialIndex],y=Math.max(g.start,m.start),b=Math.min(l.count,Math.min(g.start+g.count,m.start+m.count));for(let S=y,C=b;S<C;S+=3){let W=l.getX(S),F=l.getX(S+1),ee=l.getX(S+2);r=Ph(this,R,e,n,u,h,d,W,F,ee),r&&(r.faceIndex=Math.floor(S/3),r.face.materialIndex=g.materialIndex,t.push(r))}}else{let _=Math.max(0,m.start),M=Math.min(l.count,m.start+m.count);for(let g=_,R=M;g<R;g+=3){let y=l.getX(g),b=l.getX(g+1),S=l.getX(g+2);r=Ph(this,o,e,n,u,h,d,y,b,S),r&&(r.faceIndex=Math.floor(g/3),t.push(r))}}else if(c!==void 0)if(Array.isArray(o))for(let _=0,M=f.length;_<M;_++){let g=f[_],R=o[g.materialIndex],y=Math.max(g.start,m.start),b=Math.min(c.count,Math.min(g.start+g.count,m.start+m.count));for(let S=y,C=b;S<C;S+=3){let W=S,F=S+1,ee=S+2;r=Ph(this,R,e,n,u,h,d,W,F,ee),r&&(r.faceIndex=Math.floor(S/3),r.face.materialIndex=g.materialIndex,t.push(r))}}else{let _=Math.max(0,m.start),M=Math.min(c.count,m.start+m.count);for(let g=_,R=M;g<R;g+=3){let y=g,b=g+1,S=g+2;r=Ph(this,o,e,n,u,h,d,y,b,S),r&&(r.faceIndex=Math.floor(g/3),t.push(r))}}}};function e0(i,e,t,n,r,s,o,l){let c;if(e.side===Ln?c=n.intersectTriangle(o,s,r,!0,l):c=n.intersectTriangle(r,s,o,e.side===qi,l),c===null)return null;Nh.copy(l),Nh.applyMatrix4(i.matrixWorld);let u=t.ray.origin.distanceTo(Nh);return u<t.near||u>t.far?null:{distance:u,point:Nh.clone(),object:i}}a(e0,"checkIntersection");function Ph(i,e,t,n,r,s,o,l,c,u){i.getVertexPosition(l,ba),i.getVertexPosition(c,Ma),i.getVertexPosition(u,xa);let h=e0(i,e,t,n,ba,Ma,xa,vh);if(h){r&&(yh.fromBufferAttribute(r,l),Sh.fromBufferAttribute(r,c),Th.fromBufferAttribute(r,u),h.uv=Na.getInterpolation(vh,ba,Ma,xa,yh,Sh,Th,new nt)),s&&(yh.fromBufferAttribute(s,l),Sh.fromBufferAttribute(s,c),Th.fromBufferAttribute(s,u),h.uv1=Na.getInterpolation(vh,ba,Ma,xa,yh,Sh,Th,new nt),h.uv2=h.uv1),o&&(a_.fromBufferAttribute(o,l),l_.fromBufferAttribute(o,c),c_.fromBufferAttribute(o,u),h.normal=Na.getInterpolation(vh,ba,Ma,xa,a_,l_,c_,new K),h.normal.dot(n.direction)>0&&h.normal.multiplyScalar(-1));let d={a:l,b:c,c:u,normal:new K,materialIndex:0};Na.getNormal(ba,Ma,xa,d.normal),h.face=d}return h}a(Ph,"checkGeometryIntersection");var ao=class i extends vn{static{a(this,"BoxGeometry")}constructor(e=1,t=1,n=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:o};let l=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);let c=[],u=[],h=[],d=[],f=0,m=0;_("z","y","x",-1,-1,n,t,e,o,s,0),_("z","y","x",1,-1,n,t,-e,o,s,1),_("x","z","y",1,1,e,n,t,r,o,2),_("x","z","y",1,-1,e,n,-t,r,o,3),_("x","y","z",1,-1,e,t,n,r,s,4),_("x","y","z",-1,-1,e,t,-n,r,s,5),this.setIndex(c),this.setAttribute("position",new gt(u,3)),this.setAttribute("normal",new gt(h,3)),this.setAttribute("uv",new gt(d,2));function _(M,g,R,y,b,S,C,W,F,ee,P){let U=S/F,j=C/ee,ae=S/2,_e=C/2,D=W/2,z=F+1,se=ee+1,fe=0,le=0,ce=new K;for(let ge=0;ge<se;ge++){let be=ge*j-_e;for(let Oe=0;Oe<z;Oe++){let $=Oe*U-ae;ce[M]=$*y,ce[g]=be*b,ce[R]=D,u.push(ce.x,ce.y,ce.z),ce[M]=0,ce[g]=0,ce[R]=W>0?1:-1,h.push(ce.x,ce.y,ce.z),d.push(Oe/F),d.push(1-ge/ee),fe+=1}}for(let ge=0;ge<ee;ge++)for(let be=0;be<F;be++){let Oe=f+be+z*ge,$=f+be+z*(ge+1),me=f+(be+1)+z*(ge+1),Se=f+(be+1)+z*ge;c.push(Oe,$,Se),c.push($,me,Se),le+=6}l.addGroup(m,le,P),m+=le,f+=fe}a(_,"buildPlane")}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new i(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}};function Fa(i){let e={};for(let t in i){e[t]={};for(let n in i[t]){let r=i[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=r.clone():Array.isArray(r)?e[t][n]=r.slice():e[t][n]=r}}return e}a(Fa,"cloneUniforms");function Yn(i){let e={};for(let t=0;t<i.length;t++){let n=Fa(i[t]);for(let r in n)e[r]=n[r]}return e}a(Yn,"mergeUniforms");function t0(i){let e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}a(t0,"cloneUniformsGroups");function rb(i){return i.getRenderTarget()===null?i.outputColorSpace:vt.workingColorSpace}a(rb,"getUnlitUniformColorSpace");var n0={clone:Fa,merge:Yn},i0=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,r0=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,Cr=class extends Fr{static{a(this,"ShaderMaterial")}constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=i0,this.fragmentShader=r0,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Fa(e.uniforms),this.uniformsGroups=t0(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){let t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(let r in this.uniforms){let o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;let n={};for(let r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}},jh=class extends ln{static{a(this,"Camera")}constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new an,this.projectionMatrix=new an,this.projectionMatrixInverse=new an,this.coordinateSystem=Or}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},Kn=class extends jh{static{a(this,"PerspectiveCamera")}constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){let t=.5*this.getFilmHeight()/e;this.fov=Tc*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){let e=Math.tan(_c*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Tc*2*Math.atan(Math.tan(_c*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=this.near,t=e*Math.tan(_c*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,s=-.5*r,o=this.view;if(this.view!==null&&this.view.enabled){let c=o.fullWidth,u=o.fullHeight;s+=o.offsetX*r/c,t-=o.offsetY*n/u,r*=o.width/c,n*=o.height/u}let l=this.filmOffset;l!==0&&(s+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}},ya=-90,Sa=1,F3=class extends ln{static{a(this,"CubeCamera")}constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;let r=new Kn(ya,Sa,e,t);r.layers=this.layers,this.add(r);let s=new Kn(ya,Sa,e,t);s.layers=this.layers,this.add(s);let o=new Kn(ya,Sa,e,t);o.layers=this.layers,this.add(o);let l=new Kn(ya,Sa,e,t);l.layers=this.layers,this.add(l);let c=new Kn(ya,Sa,e,t);c.layers=this.layers,this.add(c);let u=new Kn(ya,Sa,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){let e=this.coordinateSystem,t=this.children.concat(),[n,r,s,o,l,c]=t;for(let u of t)this.remove(u);if(e===Or)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===Gh)n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(let u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();let{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());let[s,o,l,c,u,h]=this.children,d=e.getRenderTarget(),f=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),_=e.xr.enabled;e.xr.enabled=!1;let M=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,s),e.setRenderTarget(n,1,r),e.render(t,o),e.setRenderTarget(n,2,r),e.render(t,l),e.setRenderTarget(n,3,r),e.render(t,c),e.setRenderTarget(n,4,r),e.render(t,u),n.texture.generateMipmaps=M,e.setRenderTarget(n,5,r),e.render(t,h),e.setRenderTarget(d,f,m),e.xr.enabled=_,n.texture.needsPMREMUpdate=!0}},qh=class extends mi{static{a(this,"CubeTexture")}constructor(e,t,n,r,s,o,l,c,u,h){e=e!==void 0?e:[],t=t!==void 0?t:Va,super(e,t,n,r,s,o,l,c,u,h),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}},W3=class extends Ir{static{a(this,"WebGLCubeRenderTarget")}constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;let n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];t.encoding!==void 0&&(Mc("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===io?on:vi),this.texture=new qh(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Ti}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;let n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new ao(5,5,5),s=new Cr({name:"CubemapFromEquirect",uniforms:Fa(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Ln,blending:Rs});s.uniforms.tEquirect.value=t;let o=new ni(r,s),l=t.minFilter;return t.minFilter===yc&&(t.minFilter=Ti),new F3(1,10,this).update(e,o),t.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,r){let s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,r);e.setRenderTarget(s)}},b3=new K,s0=new K,o0=new Rt,Wi=class{static{a(this,"Plane")}constructor(e=new K(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){let r=b3.subVectors(n,t).cross(s0.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){let e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){let n=e.delta(b3),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;let s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){let t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){let n=t||o0.getNormalMatrix(e),r=this.coplanarPoint(b3).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}},$s=new so,Eh=new K,Nc=class{static{a(this,"Frustum")}constructor(e=new Wi,t=new Wi,n=new Wi,r=new Wi,s=new Wi,o=new Wi){this.planes=[e,t,n,r,s,o]}set(e,t,n,r,s,o){let l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(n),l[3].copy(r),l[4].copy(s),l[5].copy(o),this}copy(e){let t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=Or){let n=this.planes,r=e.elements,s=r[0],o=r[1],l=r[2],c=r[3],u=r[4],h=r[5],d=r[6],f=r[7],m=r[8],_=r[9],M=r[10],g=r[11],R=r[12],y=r[13],b=r[14],S=r[15];if(n[0].setComponents(c-s,f-u,g-m,S-R).normalize(),n[1].setComponents(c+s,f+u,g+m,S+R).normalize(),n[2].setComponents(c+o,f+h,g+_,S+y).normalize(),n[3].setComponents(c-o,f-h,g-_,S-y).normalize(),n[4].setComponents(c-l,f-d,g-M,S-b).normalize(),t===Or)n[5].setComponents(c+l,f+d,g+M,S+b).normalize();else if(t===Gh)n[5].setComponents(l,d,M,b).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),$s.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{let t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),$s.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere($s)}intersectsSprite(e){return $s.center.set(0,0,0),$s.radius=.7071067811865476,$s.applyMatrix4(e.matrixWorld),this.intersectsSphere($s)}intersectsSphere(e){let t=this.planes,n=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){let t=this.planes;for(let n=0;n<6;n++){let r=t[n];if(Eh.x=r.normal.x>0?e.max.x:e.min.x,Eh.y=r.normal.y>0?e.max.y:e.min.y,Eh.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Eh)<0)return!1}return!0}containsPoint(e){let t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};function sb(){let i=null,e=!1,t=null,n=null;function r(s,o){t(s,o),n=i.requestAnimationFrame(r)}return a(r,"onAnimationFrame"),{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(r),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){i=s}}}a(sb,"WebGLAnimation");function a0(i,e){let t=e.isWebGL2,n=new WeakMap;function r(u,h){let d=u.array,f=u.usage,m=d.byteLength,_=i.createBuffer();i.bindBuffer(h,_),i.bufferData(h,d,f),u.onUploadCallback();let M;if(d instanceof Float32Array)M=i.FLOAT;else if(d instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(t)M=i.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else M=i.UNSIGNED_SHORT;else if(d instanceof Int16Array)M=i.SHORT;else if(d instanceof Uint32Array)M=i.UNSIGNED_INT;else if(d instanceof Int32Array)M=i.INT;else if(d instanceof Int8Array)M=i.BYTE;else if(d instanceof Uint8Array)M=i.UNSIGNED_BYTE;else if(d instanceof Uint8ClampedArray)M=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+d);return{buffer:_,type:M,bytesPerElement:d.BYTES_PER_ELEMENT,version:u.version,size:m}}a(r,"createBuffer");function s(u,h,d){let f=h.array,m=h._updateRange,_=h.updateRanges;if(i.bindBuffer(d,u),m.count===-1&&_.length===0&&i.bufferSubData(d,0,f),_.length!==0){for(let M=0,g=_.length;M<g;M++){let R=_[M];t?i.bufferSubData(d,R.start*f.BYTES_PER_ELEMENT,f,R.start,R.count):i.bufferSubData(d,R.start*f.BYTES_PER_ELEMENT,f.subarray(R.start,R.start+R.count))}h.clearUpdateRanges()}m.count!==-1&&(t?i.bufferSubData(d,m.offset*f.BYTES_PER_ELEMENT,f,m.offset,m.count):i.bufferSubData(d,m.offset*f.BYTES_PER_ELEMENT,f.subarray(m.offset,m.offset+m.count)),m.count=-1),h.onUploadCallback()}a(s,"updateBuffer");function o(u){return u.isInterleavedBufferAttribute&&(u=u.data),n.get(u)}a(o,"get");function l(u){u.isInterleavedBufferAttribute&&(u=u.data);let h=n.get(u);h&&(i.deleteBuffer(h.buffer),n.delete(u))}a(l,"remove");function c(u,h){if(u.isGLBufferAttribute){let f=n.get(u);(!f||f.version<u.version)&&n.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);let d=n.get(u);if(d===void 0)n.set(u,r(u,h));else if(d.version<u.version){if(d.size!==u.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");s(d.buffer,u,h),d.version=u.version}}return a(c,"update"),{get:o,remove:l,update:c}}a(a0,"WebGLAttributes");var C3=class i extends vn{static{a(this,"PlaneGeometry")}constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};let s=e/2,o=t/2,l=Math.floor(n),c=Math.floor(r),u=l+1,h=c+1,d=e/l,f=t/c,m=[],_=[],M=[],g=[];for(let R=0;R<h;R++){let y=R*f-o;for(let b=0;b<u;b++){let S=b*d-s;_.push(S,-y,0),M.push(0,0,1),g.push(b/l),g.push(1-R/c)}}for(let R=0;R<c;R++)for(let y=0;y<l;y++){let b=y+u*R,S=y+u*(R+1),C=y+1+u*(R+1),W=y+1+u*R;m.push(b,S,W),m.push(S,C,W)}this.setIndex(m),this.setAttribute("position",new gt(_,3)),this.setAttribute("normal",new gt(M,3)),this.setAttribute("uv",new gt(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new i(e.width,e.height,e.widthSegments,e.heightSegments)}},l0=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,c0=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,u0=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,h0=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,d0=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,f0=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,p0=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,m0=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,R0=`#ifdef USE_BATCHING
	attribute float batchId;
	uniform highp sampler2D batchingTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,g0=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( batchId );
#endif`,_0=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,b0=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,M0=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,x0=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,y0=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,S0=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,T0=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,v0=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,N0=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,P0=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,E0=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,w0=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,L0=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,A0=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,O0=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,V0=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,U0=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,I0=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,F0=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,W0=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,C0="gl_FragColor = linearToOutputTexel( gl_FragColor );",Z0=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,k0=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,X0=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,H0=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,G0=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,D0=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Y0=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,K0=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Q0=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,B0=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,J0=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,z0=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,$0=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,j0=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,q0=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,eN=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,tN=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,nN=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,iN=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,rN=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,sN=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,oN=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,aN=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lN=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,cN=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,uN=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,hN=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,dN=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,fN=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,pN=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,mN=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,RN=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,gN=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,_N=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,bN=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,MN=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,xN=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,yN=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,SN=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,TN=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,vN=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,NN=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,PN=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,EN=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,wN=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,LN=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,AN=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,ON=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,VN=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,UN=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,IN=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,FN=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,WN=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,CN=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,ZN=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,kN=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,XN=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,HN=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,GN=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,DN=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,YN=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,KN=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,QN=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,BN=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,JN=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,zN=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,$N=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,jN=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,qN=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,eP=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color *= toneMappingExposure;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	return color;
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,tP=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,nP=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,iP=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,rP=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,sP=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,oP=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,aP=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,lP=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,cP=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,uP=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,hP=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,dP=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,fP=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,pP=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,mP=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,RP=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,gP=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,_P=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,bP=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,MP=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,xP=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,yP=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,SP=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,TP=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vP=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,NP=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,PP=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,EP=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,wP=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,LP=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,AP=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,OP=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,VP=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,UP=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,IP=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,FP=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,WP=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,CP=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ZP=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,kP=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ft={alphahash_fragment:l0,alphahash_pars_fragment:c0,alphamap_fragment:u0,alphamap_pars_fragment:h0,alphatest_fragment:d0,alphatest_pars_fragment:f0,aomap_fragment:p0,aomap_pars_fragment:m0,batching_pars_vertex:R0,batching_vertex:g0,begin_vertex:_0,beginnormal_vertex:b0,bsdfs:M0,iridescence_fragment:x0,bumpmap_pars_fragment:y0,clipping_planes_fragment:S0,clipping_planes_pars_fragment:T0,clipping_planes_pars_vertex:v0,clipping_planes_vertex:N0,color_fragment:P0,color_pars_fragment:E0,color_pars_vertex:w0,color_vertex:L0,common:A0,cube_uv_reflection_fragment:O0,defaultnormal_vertex:V0,displacementmap_pars_vertex:U0,displacementmap_vertex:I0,emissivemap_fragment:F0,emissivemap_pars_fragment:W0,colorspace_fragment:C0,colorspace_pars_fragment:Z0,envmap_fragment:k0,envmap_common_pars_fragment:X0,envmap_pars_fragment:H0,envmap_pars_vertex:G0,envmap_physical_pars_fragment:tN,envmap_vertex:D0,fog_vertex:Y0,fog_pars_vertex:K0,fog_fragment:Q0,fog_pars_fragment:B0,gradientmap_pars_fragment:J0,lightmap_fragment:z0,lightmap_pars_fragment:$0,lights_lambert_fragment:j0,lights_lambert_pars_fragment:q0,lights_pars_begin:eN,lights_toon_fragment:nN,lights_toon_pars_fragment:iN,lights_phong_fragment:rN,lights_phong_pars_fragment:sN,lights_physical_fragment:oN,lights_physical_pars_fragment:aN,lights_fragment_begin:lN,lights_fragment_maps:cN,lights_fragment_end:uN,logdepthbuf_fragment:hN,logdepthbuf_pars_fragment:dN,logdepthbuf_pars_vertex:fN,logdepthbuf_vertex:pN,map_fragment:mN,map_pars_fragment:RN,map_particle_fragment:gN,map_particle_pars_fragment:_N,metalnessmap_fragment:bN,metalnessmap_pars_fragment:MN,morphcolor_vertex:xN,morphnormal_vertex:yN,morphtarget_pars_vertex:SN,morphtarget_vertex:TN,normal_fragment_begin:vN,normal_fragment_maps:NN,normal_pars_fragment:PN,normal_pars_vertex:EN,normal_vertex:wN,normalmap_pars_fragment:LN,clearcoat_normal_fragment_begin:AN,clearcoat_normal_fragment_maps:ON,clearcoat_pars_fragment:VN,iridescence_pars_fragment:UN,opaque_fragment:IN,packing:FN,premultiplied_alpha_fragment:WN,project_vertex:CN,dithering_fragment:ZN,dithering_pars_fragment:kN,roughnessmap_fragment:XN,roughnessmap_pars_fragment:HN,shadowmap_pars_fragment:GN,shadowmap_pars_vertex:DN,shadowmap_vertex:YN,shadowmask_pars_fragment:KN,skinbase_vertex:QN,skinning_pars_vertex:BN,skinning_vertex:JN,skinnormal_vertex:zN,specularmap_fragment:$N,specularmap_pars_fragment:jN,tonemapping_fragment:qN,tonemapping_pars_fragment:eP,transmission_fragment:tP,transmission_pars_fragment:nP,uv_pars_fragment:iP,uv_pars_vertex:rP,uv_vertex:sP,worldpos_vertex:oP,background_vert:aP,background_frag:lP,backgroundCube_vert:cP,backgroundCube_frag:uP,cube_vert:hP,cube_frag:dP,depth_vert:fP,depth_frag:pP,distanceRGBA_vert:mP,distanceRGBA_frag:RP,equirect_vert:gP,equirect_frag:_P,linedashed_vert:bP,linedashed_frag:MP,meshbasic_vert:xP,meshbasic_frag:yP,meshlambert_vert:SP,meshlambert_frag:TP,meshmatcap_vert:vP,meshmatcap_frag:NP,meshnormal_vert:PP,meshnormal_frag:EP,meshphong_vert:wP,meshphong_frag:LP,meshphysical_vert:AP,meshphysical_frag:OP,meshtoon_vert:VP,meshtoon_frag:UP,points_vert:IP,points_frag:FP,shadow_vert:WP,shadow_frag:CP,sprite_vert:ZP,sprite_frag:kP},Ne={common:{diffuse:{value:new ct(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Rt},alphaMap:{value:null},alphaMapTransform:{value:new Rt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Rt}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Rt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Rt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Rt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Rt},normalScale:{value:new nt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Rt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Rt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Rt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Rt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ct(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ct(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Rt},alphaTest:{value:0},uvTransform:{value:new Rt}},sprite:{diffuse:{value:new ct(16777215)},opacity:{value:1},center:{value:new nt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Rt},alphaMap:{value:null},alphaMapTransform:{value:new Rt},alphaTest:{value:0}}},ji={basic:{uniforms:Yn([Ne.common,Ne.specularmap,Ne.envmap,Ne.aomap,Ne.lightmap,Ne.fog]),vertexShader:ft.meshbasic_vert,fragmentShader:ft.meshbasic_frag},lambert:{uniforms:Yn([Ne.common,Ne.specularmap,Ne.envmap,Ne.aomap,Ne.lightmap,Ne.emissivemap,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.fog,Ne.lights,{emissive:{value:new ct(0)}}]),vertexShader:ft.meshlambert_vert,fragmentShader:ft.meshlambert_frag},phong:{uniforms:Yn([Ne.common,Ne.specularmap,Ne.envmap,Ne.aomap,Ne.lightmap,Ne.emissivemap,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.fog,Ne.lights,{emissive:{value:new ct(0)},specular:{value:new ct(1118481)},shininess:{value:30}}]),vertexShader:ft.meshphong_vert,fragmentShader:ft.meshphong_frag},standard:{uniforms:Yn([Ne.common,Ne.envmap,Ne.aomap,Ne.lightmap,Ne.emissivemap,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.roughnessmap,Ne.metalnessmap,Ne.fog,Ne.lights,{emissive:{value:new ct(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ft.meshphysical_vert,fragmentShader:ft.meshphysical_frag},toon:{uniforms:Yn([Ne.common,Ne.aomap,Ne.lightmap,Ne.emissivemap,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.gradientmap,Ne.fog,Ne.lights,{emissive:{value:new ct(0)}}]),vertexShader:ft.meshtoon_vert,fragmentShader:ft.meshtoon_frag},matcap:{uniforms:Yn([Ne.common,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,Ne.fog,{matcap:{value:null}}]),vertexShader:ft.meshmatcap_vert,fragmentShader:ft.meshmatcap_frag},points:{uniforms:Yn([Ne.points,Ne.fog]),vertexShader:ft.points_vert,fragmentShader:ft.points_frag},dashed:{uniforms:Yn([Ne.common,Ne.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ft.linedashed_vert,fragmentShader:ft.linedashed_frag},depth:{uniforms:Yn([Ne.common,Ne.displacementmap]),vertexShader:ft.depth_vert,fragmentShader:ft.depth_frag},normal:{uniforms:Yn([Ne.common,Ne.bumpmap,Ne.normalmap,Ne.displacementmap,{opacity:{value:1}}]),vertexShader:ft.meshnormal_vert,fragmentShader:ft.meshnormal_frag},sprite:{uniforms:Yn([Ne.sprite,Ne.fog]),vertexShader:ft.sprite_vert,fragmentShader:ft.sprite_frag},background:{uniforms:{uvTransform:{value:new Rt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ft.background_vert,fragmentShader:ft.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ft.backgroundCube_vert,fragmentShader:ft.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ft.cube_vert,fragmentShader:ft.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ft.equirect_vert,fragmentShader:ft.equirect_frag},distanceRGBA:{uniforms:Yn([Ne.common,Ne.displacementmap,{referencePosition:{value:new K},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ft.distanceRGBA_vert,fragmentShader:ft.distanceRGBA_frag},shadow:{uniforms:Yn([Ne.lights,Ne.fog,{color:{value:new ct(0)},opacity:{value:1}}]),vertexShader:ft.shadow_vert,fragmentShader:ft.shadow_frag}};ji.physical={uniforms:Yn([ji.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Rt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Rt},clearcoatNormalScale:{value:new nt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Rt},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Rt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Rt},sheen:{value:0},sheenColor:{value:new ct(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Rt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Rt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Rt},transmissionSamplerSize:{value:new nt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Rt},attenuationDistance:{value:0},attenuationColor:{value:new ct(0)},specularColor:{value:new ct(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Rt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Rt},anisotropyVector:{value:new nt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Rt}}]),vertexShader:ft.meshphysical_vert,fragmentShader:ft.meshphysical_frag};var wh={r:0,b:0,g:0};function XP(i,e,t,n,r,s,o){let l=new ct(0),c=s===!0?0:1,u,h,d=null,f=0,m=null;function _(g,R){let y=!1,b=R.isScene===!0?R.background:null;b&&b.isTexture&&(b=(R.backgroundBlurriness>0?t:e).get(b)),b===null?M(l,c):b&&b.isColor&&(M(b,1),y=!0);let S=i.xr.getEnvironmentBlendMode();S==="additive"?n.buffers.color.setClear(0,0,0,1,o):S==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,o),(i.autoClear||y)&&i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil),b&&(b.isCubeTexture||b.mapping===Rd)?(h===void 0&&(h=new ni(new ao(1,1,1),new Cr({name:"BackgroundCubeMaterial",uniforms:Fa(ji.backgroundCube.uniforms),vertexShader:ji.backgroundCube.vertexShader,fragmentShader:ji.backgroundCube.fragmentShader,side:Ln,depthTest:!1,depthWrite:!1,fog:!1})),h.geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(C,W,F){this.matrixWorld.copyPosition(F.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(h)),h.material.uniforms.envMap.value=b,h.material.uniforms.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,h.material.uniforms.backgroundBlurriness.value=R.backgroundBlurriness,h.material.uniforms.backgroundIntensity.value=R.backgroundIntensity,h.material.toneMapped=vt.getTransfer(b.colorSpace)!==Ut,(d!==b||f!==b.version||m!==i.toneMapping)&&(h.material.needsUpdate=!0,d=b,f=b.version,m=i.toneMapping),h.layers.enableAll(),g.unshift(h,h.geometry,h.material,0,0,null)):b&&b.isTexture&&(u===void 0&&(u=new ni(new C3(2,2),new Cr({name:"BackgroundMaterial",uniforms:Fa(ji.background.uniforms),vertexShader:ji.background.vertexShader,fragmentShader:ji.background.fragmentShader,side:qi,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=b,u.material.uniforms.backgroundIntensity.value=R.backgroundIntensity,u.material.toneMapped=vt.getTransfer(b.colorSpace)!==Ut,b.matrixAutoUpdate===!0&&b.updateMatrix(),u.material.uniforms.uvTransform.value.copy(b.matrix),(d!==b||f!==b.version||m!==i.toneMapping)&&(u.material.needsUpdate=!0,d=b,f=b.version,m=i.toneMapping),u.layers.enableAll(),g.unshift(u,u.geometry,u.material,0,0,null))}a(_,"render");function M(g,R){g.getRGB(wh,rb(i)),n.buffers.color.setClear(wh.r,wh.g,wh.b,R,o)}return a(M,"setClear"),{getClearColor:function(){return l},setClearColor:function(g,R=1){l.set(g),c=R,M(l,c)},getClearAlpha:function(){return c},setClearAlpha:function(g){c=g,M(l,c)},render:_}}a(XP,"WebGLBackground");function HP(i,e,t,n){let r=i.getParameter(i.MAX_VERTEX_ATTRIBS),s=n.isWebGL2?null:e.get("OES_vertex_array_object"),o=n.isWebGL2||s!==null,l={},c=g(null),u=c,h=!1;function d(D,z,se,fe,le){let ce=!1;if(o){let ge=M(fe,se,z);u!==ge&&(u=ge,m(u.object)),ce=R(D,fe,se,le),ce&&y(D,fe,se,le)}else{let ge=z.wireframe===!0;(u.geometry!==fe.id||u.program!==se.id||u.wireframe!==ge)&&(u.geometry=fe.id,u.program=se.id,u.wireframe=ge,ce=!0)}le!==null&&t.update(le,i.ELEMENT_ARRAY_BUFFER),(ce||h)&&(h=!1,ee(D,z,se,fe),le!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.get(le).buffer))}a(d,"setup");function f(){return n.isWebGL2?i.createVertexArray():s.createVertexArrayOES()}a(f,"createVertexArrayObject");function m(D){return n.isWebGL2?i.bindVertexArray(D):s.bindVertexArrayOES(D)}a(m,"bindVertexArrayObject");function _(D){return n.isWebGL2?i.deleteVertexArray(D):s.deleteVertexArrayOES(D)}a(_,"deleteVertexArrayObject");function M(D,z,se){let fe=se.wireframe===!0,le=l[D.id];le===void 0&&(le={},l[D.id]=le);let ce=le[z.id];ce===void 0&&(ce={},le[z.id]=ce);let ge=ce[fe];return ge===void 0&&(ge=g(f()),ce[fe]=ge),ge}a(M,"getBindingState");function g(D){let z=[],se=[],fe=[];for(let le=0;le<r;le++)z[le]=0,se[le]=0,fe[le]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:z,enabledAttributes:se,attributeDivisors:fe,object:D,attributes:{},index:null}}a(g,"createBindingState");function R(D,z,se,fe){let le=u.attributes,ce=z.attributes,ge=0,be=se.getAttributes();for(let Oe in be)if(be[Oe].location>=0){let me=le[Oe],Se=ce[Oe];if(Se===void 0&&(Oe==="instanceMatrix"&&D.instanceMatrix&&(Se=D.instanceMatrix),Oe==="instanceColor"&&D.instanceColor&&(Se=D.instanceColor)),me===void 0||me.attribute!==Se||Se&&me.data!==Se.data)return!0;ge++}return u.attributesNum!==ge||u.index!==fe}a(R,"needsUpdate");function y(D,z,se,fe){let le={},ce=z.attributes,ge=0,be=se.getAttributes();for(let Oe in be)if(be[Oe].location>=0){let me=ce[Oe];me===void 0&&(Oe==="instanceMatrix"&&D.instanceMatrix&&(me=D.instanceMatrix),Oe==="instanceColor"&&D.instanceColor&&(me=D.instanceColor));let Se={};Se.attribute=me,me&&me.data&&(Se.data=me.data),le[Oe]=Se,ge++}u.attributes=le,u.attributesNum=ge,u.index=fe}a(y,"saveCache");function b(){let D=u.newAttributes;for(let z=0,se=D.length;z<se;z++)D[z]=0}a(b,"initAttributes");function S(D){C(D,0)}a(S,"enableAttribute");function C(D,z){let se=u.newAttributes,fe=u.enabledAttributes,le=u.attributeDivisors;se[D]=1,fe[D]===0&&(i.enableVertexAttribArray(D),fe[D]=1),le[D]!==z&&((n.isWebGL2?i:e.get("ANGLE_instanced_arrays"))[n.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](D,z),le[D]=z)}a(C,"enableAttributeAndDivisor");function W(){let D=u.newAttributes,z=u.enabledAttributes;for(let se=0,fe=z.length;se<fe;se++)z[se]!==D[se]&&(i.disableVertexAttribArray(se),z[se]=0)}a(W,"disableUnusedAttributes");function F(D,z,se,fe,le,ce,ge){ge===!0?i.vertexAttribIPointer(D,z,se,le,ce):i.vertexAttribPointer(D,z,se,fe,le,ce)}a(F,"vertexAttribPointer");function ee(D,z,se,fe){if(n.isWebGL2===!1&&(D.isInstancedMesh||fe.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;b();let le=fe.attributes,ce=se.getAttributes(),ge=z.defaultAttributeValues;for(let be in ce){let Oe=ce[be];if(Oe.location>=0){let $=le[be];if($===void 0&&(be==="instanceMatrix"&&D.instanceMatrix&&($=D.instanceMatrix),be==="instanceColor"&&D.instanceColor&&($=D.instanceColor)),$!==void 0){let me=$.normalized,Se=$.itemSize,Be=t.get($);if(Be===void 0)continue;let Le=Be.buffer,ze=Be.type,qe=Be.bytesPerElement,Ze=n.isWebGL2===!0&&(ze===i.INT||ze===i.UNSIGNED_INT||$.gpuType===Y_);if($.isInterleavedBufferAttribute){let st=$.data,B=st.stride,xt=$.offset;if(st.isInstancedInterleavedBuffer){for(let Ge=0;Ge<Oe.locationSize;Ge++)C(Oe.location+Ge,st.meshPerAttribute);D.isInstancedMesh!==!0&&fe._maxInstanceCount===void 0&&(fe._maxInstanceCount=st.meshPerAttribute*st.count)}else for(let Ge=0;Ge<Oe.locationSize;Ge++)S(Oe.location+Ge);i.bindBuffer(i.ARRAY_BUFFER,Le);for(let Ge=0;Ge<Oe.locationSize;Ge++)F(Oe.location+Ge,Se/Oe.locationSize,ze,me,B*qe,(xt+Se/Oe.locationSize*Ge)*qe,Ze)}else{if($.isInstancedBufferAttribute){for(let st=0;st<Oe.locationSize;st++)C(Oe.location+st,$.meshPerAttribute);D.isInstancedMesh!==!0&&fe._maxInstanceCount===void 0&&(fe._maxInstanceCount=$.meshPerAttribute*$.count)}else for(let st=0;st<Oe.locationSize;st++)S(Oe.location+st);i.bindBuffer(i.ARRAY_BUFFER,Le);for(let st=0;st<Oe.locationSize;st++)F(Oe.location+st,Se/Oe.locationSize,ze,me,Se*qe,Se/Oe.locationSize*st*qe,Ze)}}else if(ge!==void 0){let me=ge[be];if(me!==void 0)switch(me.length){case 2:i.vertexAttrib2fv(Oe.location,me);break;case 3:i.vertexAttrib3fv(Oe.location,me);break;case 4:i.vertexAttrib4fv(Oe.location,me);break;default:i.vertexAttrib1fv(Oe.location,me)}}}}W()}a(ee,"setupVertexAttributes");function P(){ae();for(let D in l){let z=l[D];for(let se in z){let fe=z[se];for(let le in fe)_(fe[le].object),delete fe[le];delete z[se]}delete l[D]}}a(P,"dispose");function U(D){if(l[D.id]===void 0)return;let z=l[D.id];for(let se in z){let fe=z[se];for(let le in fe)_(fe[le].object),delete fe[le];delete z[se]}delete l[D.id]}a(U,"releaseStatesOfGeometry");function j(D){for(let z in l){let se=l[z];if(se[D.id]===void 0)continue;let fe=se[D.id];for(let le in fe)_(fe[le].object),delete fe[le];delete se[D.id]}}a(j,"releaseStatesOfProgram");function ae(){_e(),h=!0,u!==c&&(u=c,m(u.object))}a(ae,"reset");function _e(){c.geometry=null,c.program=null,c.wireframe=!1}return a(_e,"resetDefaultState"),{setup:d,reset:ae,resetDefaultState:_e,dispose:P,releaseStatesOfGeometry:U,releaseStatesOfProgram:j,initAttributes:b,enableAttribute:S,disableUnusedAttributes:W}}a(HP,"WebGLBindingStates");function GP(i,e,t,n){let r=n.isWebGL2,s;function o(h){s=h}a(o,"setMode");function l(h,d){i.drawArrays(s,h,d),t.update(d,s,1)}a(l,"render");function c(h,d,f){if(f===0)return;let m,_;if(r)m=i,_="drawArraysInstanced";else if(m=e.get("ANGLE_instanced_arrays"),_="drawArraysInstancedANGLE",m===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}m[_](s,h,d,f),t.update(d,s,f)}a(c,"renderInstances");function u(h,d,f){if(f===0)return;let m=e.get("WEBGL_multi_draw");if(m===null)for(let _=0;_<f;_++)this.render(h[_],d[_]);else{m.multiDrawArraysWEBGL(s,h,0,d,0,f);let _=0;for(let M=0;M<f;M++)_+=d[M];t.update(_,s,1)}}a(u,"renderMultiDraw"),this.setMode=o,this.render=l,this.renderInstances=c,this.renderMultiDraw=u}a(GP,"WebGLBufferRenderer");function DP(i,e,t){let n;function r(){if(n!==void 0)return n;if(e.has("EXT_texture_filter_anisotropic")===!0){let F=e.get("EXT_texture_filter_anisotropic");n=i.getParameter(F.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else n=0;return n}a(r,"getMaxAnisotropy");function s(F){if(F==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";F="mediump"}return F==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}a(s,"getMaxPrecision");let o=typeof WebGL2RenderingContext<"u"&&i.constructor.name==="WebGL2RenderingContext",l=t.precision!==void 0?t.precision:"highp",c=s(l);c!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",c,"instead."),l=c);let u=o||e.has("WEBGL_draw_buffers"),h=t.logarithmicDepthBuffer===!0,d=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),f=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=i.getParameter(i.MAX_TEXTURE_SIZE),_=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),M=i.getParameter(i.MAX_VERTEX_ATTRIBS),g=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),R=i.getParameter(i.MAX_VARYING_VECTORS),y=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),b=f>0,S=o||e.has("OES_texture_float"),C=b&&S,W=o?i.getParameter(i.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:r,getMaxPrecision:s,precision:l,logarithmicDepthBuffer:h,maxTextures:d,maxVertexTextures:f,maxTextureSize:m,maxCubemapSize:_,maxAttributes:M,maxVertexUniforms:g,maxVaryings:R,maxFragmentUniforms:y,vertexTextures:b,floatFragmentTextures:S,floatVertexTextures:C,maxSamples:W}}a(DP,"WebGLCapabilities");function YP(i){let e=this,t=null,n=0,r=!1,s=!1,o=new Wi,l=new Rt,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(d,f){let m=d.length!==0||f||n!==0||r;return r=f,n=d.length,m},this.beginShadows=function(){s=!0,h(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(d,f){t=h(d,f,0)},this.setState=function(d,f,m){let _=d.clippingPlanes,M=d.clipIntersection,g=d.clipShadows,R=i.get(d);if(!r||_===null||_.length===0||s&&!g)s?h(null):u();else{let y=s?0:n,b=y*4,S=R.clippingState||null;c.value=S,S=h(_,f,b,m);for(let C=0;C!==b;++C)S[C]=t[C];R.clippingState=S,this.numIntersection=M?this.numPlanes:0,this.numPlanes+=y}};function u(){c.value!==t&&(c.value=t,c.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}a(u,"resetGlobalState");function h(d,f,m,_){let M=d!==null?d.length:0,g=null;if(M!==0){if(g=c.value,_!==!0||g===null){let R=m+M*4,y=f.matrixWorldInverse;l.getNormalMatrix(y),(g===null||g.length<R)&&(g=new Float32Array(R));for(let b=0,S=m;b!==M;++b,S+=4)o.copy(d[b]).applyMatrix4(y,l),o.normal.toArray(g,S),g[S+3]=o.constant}c.value=g,c.needsUpdate=!0}return e.numPlanes=M,e.numIntersection=0,g}a(h,"projectPlanes")}a(YP,"WebGLClipping");function KP(i){let e=new WeakMap;function t(o,l){return l===w3?o.mapping=Va:l===L3&&(o.mapping=Ua),o}a(t,"mapTextureMapping");function n(o){if(o&&o.isTexture){let l=o.mapping;if(l===w3||l===L3)if(e.has(o)){let c=e.get(o).texture;return t(c,o.mapping)}else{let c=o.image;if(c&&c.height>0){let u=new W3(c.height/2);return u.fromEquirectangularTexture(i,o),e.set(o,u),o.addEventListener("dispose",r),t(u.texture,o.mapping)}else return null}}return o}a(n,"get");function r(o){let l=o.target;l.removeEventListener("dispose",r);let c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}a(r,"onTextureDispose");function s(){e=new WeakMap}return a(s,"dispose"),{get:n,dispose:s}}a(KP,"WebGLCubeMaps");var ed=class extends jh{static{a(this,"OrthographicCamera")}constructor(e=-1,t=1,n=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,s=n-e,o=n+e,l=r+t,c=r-t;if(this.view!==null&&this.view.enabled){let u=(this.right-this.left)/this.view.fullWidth/this.zoom,h=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,l-=h*this.view.offsetY,c=l-h*this.view.height}this.projectionMatrix.makeOrthographic(s,o,l,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){let t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}},Pa=4,u_=[.125,.215,.35,.446,.526,.582],eo=20,M3=new ed,h_=new ct,x3=null,y3=0,S3=0,js=(1+Math.sqrt(5))/2,Ta=1/js,d_=[new K(1,1,1),new K(-1,1,1),new K(1,1,-1),new K(-1,1,-1),new K(0,js,Ta),new K(0,js,-Ta),new K(Ta,0,js),new K(-Ta,0,js),new K(js,Ta,0),new K(-js,Ta,0)],td=class{static{a(this,"PMREMGenerator")}constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){x3=this._renderer.getRenderTarget(),y3=this._renderer.getActiveCubeFace(),S3=this._renderer.getActiveMipmapLevel(),this._setSize(256);let s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,n,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=m_(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=p_(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(x3,y3,S3),e.scissorTest=!1,Lh(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Va||e.mapping===Ua?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),x3=this._renderer.getRenderTarget(),y3=this._renderer.getActiveCubeFace(),S3=this._renderer.getActiveMipmapLevel();let n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){let e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Ti,minFilter:Ti,generateMipmaps:!1,type:Sc,format:Zi,colorSpace:Ur,depthBuffer:!1},r=f_(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=f_(e,t,n);let{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=QP(s)),this._blurMaterial=BP(s,e,t)}return r}_compileMaterial(e){let t=new ni(this._lodPlanes[0],e);this._renderer.compile(t,M3)}_sceneToCubeUV(e,t,n,r){let l=new Kn(90,1,t,n),c=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],h=this._renderer,d=h.autoClear,f=h.toneMapping;h.getClearColor(h_),h.toneMapping=gs,h.autoClear=!1;let m=new Wr({name:"PMREM.Background",side:Ln,depthWrite:!1,depthTest:!1}),_=new ni(new ao,m),M=!1,g=e.background;g?g.isColor&&(m.color.copy(g),e.background=null,M=!0):(m.color.copy(h_),M=!0);for(let R=0;R<6;R++){let y=R%3;y===0?(l.up.set(0,c[R],0),l.lookAt(u[R],0,0)):y===1?(l.up.set(0,0,c[R]),l.lookAt(0,u[R],0)):(l.up.set(0,c[R],0),l.lookAt(0,0,u[R]));let b=this._cubeSize;Lh(r,y*b,R>2?b:0,b,b),h.setRenderTarget(r),M&&h.render(_,l),h.render(e,l)}_.geometry.dispose(),_.material.dispose(),h.toneMapping=f,h.autoClear=d,e.background=g}_textureToCubeUV(e,t){let n=this._renderer,r=e.mapping===Va||e.mapping===Ua;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=m_()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=p_());let s=r?this._cubemapMaterial:this._equirectMaterial,o=new ni(this._lodPlanes[0],s),l=s.uniforms;l.envMap.value=e;let c=this._cubeSize;Lh(t,0,0,3*c,2*c),n.setRenderTarget(t),n.render(o,M3)}_applyPMREM(e){let t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){let s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),o=d_[(r-1)%d_.length];this._blur(e,r-1,r,s,o)}t.autoClear=n}_blur(e,t,n,r,s){let o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",s),this._halfBlur(o,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,o,l){let c=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");let h=3,d=new ni(this._lodPlanes[r],u),f=u.uniforms,m=this._sizeLods[n]-1,_=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*eo-1),M=s/_,g=isFinite(s)?1+Math.floor(h*M):eo;g>eo&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${eo}`);let R=[],y=0;for(let F=0;F<eo;++F){let ee=F/M,P=Math.exp(-ee*ee/2);R.push(P),F===0?y+=P:F<g&&(y+=2*P)}for(let F=0;F<R.length;F++)R[F]=R[F]/y;f.envMap.value=e.texture,f.samples.value=g,f.weights.value=R,f.latitudinal.value=o==="latitudinal",l&&(f.poleAxis.value=l);let{_lodMax:b}=this;f.dTheta.value=_,f.mipInt.value=b-n;let S=this._sizeLods[r],C=3*S*(r>b-Pa?r-b+Pa:0),W=4*(this._cubeSize-S);Lh(t,C,W,3*S,2*S),c.setRenderTarget(t),c.render(d,M3)}};function QP(i){let e=[],t=[],n=[],r=i,s=i-Pa+1+u_.length;for(let o=0;o<s;o++){let l=Math.pow(2,r);t.push(l);let c=1/l;o>i-Pa?c=u_[o-i+Pa-1]:o===0&&(c=0),n.push(c);let u=1/(l-2),h=-u,d=1+u,f=[h,h,d,h,d,d,h,h,d,d,h,d],m=6,_=6,M=3,g=2,R=1,y=new Float32Array(M*_*m),b=new Float32Array(g*_*m),S=new Float32Array(R*_*m);for(let W=0;W<m;W++){let F=W%3*2/3-1,ee=W>2?0:-1,P=[F,ee,0,F+2/3,ee,0,F+2/3,ee+1,0,F,ee,0,F+2/3,ee+1,0,F,ee+1,0];y.set(P,M*_*W),b.set(f,g*_*W);let U=[W,W,W,W,W,W];S.set(U,R*_*W)}let C=new vn;C.setAttribute("position",new ii(y,M)),C.setAttribute("uv",new ii(b,g)),C.setAttribute("faceIndex",new ii(S,R)),e.push(C),r>Pa&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}a(QP,"_createPlanes");function f_(i,e,t){let n=new Ir(i,e,t);return n.texture.mapping=Rd,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}a(f_,"_createRenderTarget");function Lh(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}a(Lh,"_setViewport");function BP(i,e,t){let n=new Float32Array(eo),r=new K(0,1,0);return new Cr({name:"SphericalGaussianBlur",defines:{n:eo,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:_m(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Rs,depthTest:!1,depthWrite:!1})}a(BP,"_getBlurShader");function p_(){return new Cr({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_m(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Rs,depthTest:!1,depthWrite:!1})}a(p_,"_getEquirectMaterial");function m_(){return new Cr({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_m(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Rs,depthTest:!1,depthWrite:!1})}a(m_,"_getCubemapMaterial");function _m(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}a(_m,"_getCommonVertexShader");function JP(i){let e=new WeakMap,t=null;function n(l){if(l&&l.isTexture){let c=l.mapping,u=c===w3||c===L3,h=c===Va||c===Ua;if(u||h)if(l.isRenderTargetTexture&&l.needsPMREMUpdate===!0){l.needsPMREMUpdate=!1;let d=e.get(l);return t===null&&(t=new td(i)),d=u?t.fromEquirectangular(l,d):t.fromCubemap(l,d),e.set(l,d),d.texture}else{if(e.has(l))return e.get(l).texture;{let d=l.image;if(u&&d&&d.height>0||h&&d&&r(d)){t===null&&(t=new td(i));let f=u?t.fromEquirectangular(l):t.fromCubemap(l);return e.set(l,f),l.addEventListener("dispose",s),f.texture}else return null}}}return l}a(n,"get");function r(l){let c=0,u=6;for(let h=0;h<u;h++)l[h]!==void 0&&c++;return c===u}a(r,"isCubeTextureComplete");function s(l){let c=l.target;c.removeEventListener("dispose",s);let u=e.get(c);u!==void 0&&(e.delete(c),u.dispose())}a(s,"onTextureDispose");function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return a(o,"dispose"),{get:n,dispose:o}}a(JP,"WebGLCubeUVMaps");function zP(i){let e={};function t(n){if(e[n]!==void 0)return e[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return e[n]=r,r}return a(t,"getExtension"),{has:function(n){return t(n)!==null},init:function(n){n.isWebGL2?(t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance")):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(n){let r=t(n);return r===null&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}a(zP,"WebGLExtensions");function $P(i,e,t,n){let r={},s=new WeakMap;function o(d){let f=d.target;f.index!==null&&e.remove(f.index);for(let _ in f.attributes)e.remove(f.attributes[_]);for(let _ in f.morphAttributes){let M=f.morphAttributes[_];for(let g=0,R=M.length;g<R;g++)e.remove(M[g])}f.removeEventListener("dispose",o),delete r[f.id];let m=s.get(f);m&&(e.remove(m),s.delete(f)),n.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}a(o,"onGeometryDispose");function l(d,f){return r[f.id]===!0||(f.addEventListener("dispose",o),r[f.id]=!0,t.memory.geometries++),f}a(l,"get");function c(d){let f=d.attributes;for(let _ in f)e.update(f[_],i.ARRAY_BUFFER);let m=d.morphAttributes;for(let _ in m){let M=m[_];for(let g=0,R=M.length;g<R;g++)e.update(M[g],i.ARRAY_BUFFER)}}a(c,"update");function u(d){let f=[],m=d.index,_=d.attributes.position,M=0;if(m!==null){let y=m.array;M=m.version;for(let b=0,S=y.length;b<S;b+=3){let C=y[b+0],W=y[b+1],F=y[b+2];f.push(C,W,W,F,F,C)}}else if(_!==void 0){let y=_.array;M=_.version;for(let b=0,S=y.length/3-1;b<S;b+=3){let C=b+0,W=b+1,F=b+2;f.push(C,W,W,F,F,C)}}else return;let g=new(nb(f)?$h:zh)(f,1);g.version=M;let R=s.get(d);R&&e.remove(R),s.set(d,g)}a(u,"updateWireframeAttribute");function h(d){let f=s.get(d);if(f){let m=d.index;m!==null&&f.version<m.version&&u(d)}else u(d);return s.get(d)}return a(h,"getWireframeAttribute"),{get:l,update:c,getWireframeAttribute:h}}a($P,"WebGLGeometries");function jP(i,e,t,n){let r=n.isWebGL2,s;function o(m){s=m}a(o,"setMode");let l,c;function u(m){l=m.type,c=m.bytesPerElement}a(u,"setIndex");function h(m,_){i.drawElements(s,_,l,m*c),t.update(_,s,1)}a(h,"render");function d(m,_,M){if(M===0)return;let g,R;if(r)g=i,R="drawElementsInstanced";else if(g=e.get("ANGLE_instanced_arrays"),R="drawElementsInstancedANGLE",g===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}g[R](s,_,l,m*c,M),t.update(_,s,M)}a(d,"renderInstances");function f(m,_,M){if(M===0)return;let g=e.get("WEBGL_multi_draw");if(g===null)for(let R=0;R<M;R++)this.render(m[R]/c,_[R]);else{g.multiDrawElementsWEBGL(s,_,0,l,m,0,M);let R=0;for(let y=0;y<M;y++)R+=_[y];t.update(R,s,1)}}a(f,"renderMultiDraw"),this.setMode=o,this.setIndex=u,this.render=h,this.renderInstances=d,this.renderMultiDraw=f}a(jP,"WebGLIndexedBufferRenderer");function qP(i){let e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,o,l){switch(t.calls++,o){case i.TRIANGLES:t.triangles+=l*(s/3);break;case i.LINES:t.lines+=l*(s/2);break;case i.LINE_STRIP:t.lines+=l*(s-1);break;case i.LINE_LOOP:t.lines+=l*s;break;case i.POINTS:t.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}a(n,"update");function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return a(r,"reset"),{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:n}}a(qP,"WebGLInfo");function eE(i,e){return i[0]-e[0]}a(eE,"numericalSort");function tE(i,e){return Math.abs(e[1])-Math.abs(i[1])}a(tE,"absNumericalSort");function nE(i,e,t){let n={},r=new Float32Array(8),s=new WeakMap,o=new Tn,l=[];for(let u=0;u<8;u++)l[u]=[u,0];function c(u,h,d){let f=u.morphTargetInfluences;if(e.isWebGL2===!0){let m=h.morphAttributes.position||h.morphAttributes.normal||h.morphAttributes.color,_=m!==void 0?m.length:0,M=s.get(h);if(M===void 0||M.count!==_){let D=function(){ae.dispose(),s.delete(h),h.removeEventListener("dispose",D)};a(D,"disposeTexture"),M!==void 0&&M.texture.dispose();let y=h.morphAttributes.position!==void 0,b=h.morphAttributes.normal!==void 0,S=h.morphAttributes.color!==void 0,C=h.morphAttributes.position||[],W=h.morphAttributes.normal||[],F=h.morphAttributes.color||[],ee=0;y===!0&&(ee=1),b===!0&&(ee=2),S===!0&&(ee=3);let P=h.attributes.position.count*ee,U=1;P>e.maxTextureSize&&(U=Math.ceil(P/e.maxTextureSize),P=e.maxTextureSize);let j=new Float32Array(P*U*4*_),ae=new Qh(j,P,U,_);ae.type=ms,ae.needsUpdate=!0;let _e=ee*4;for(let z=0;z<_;z++){let se=C[z],fe=W[z],le=F[z],ce=P*U*4*z;for(let ge=0;ge<se.count;ge++){let be=ge*_e;y===!0&&(o.fromBufferAttribute(se,ge),j[ce+be+0]=o.x,j[ce+be+1]=o.y,j[ce+be+2]=o.z,j[ce+be+3]=0),b===!0&&(o.fromBufferAttribute(fe,ge),j[ce+be+4]=o.x,j[ce+be+5]=o.y,j[ce+be+6]=o.z,j[ce+be+7]=0),S===!0&&(o.fromBufferAttribute(le,ge),j[ce+be+8]=o.x,j[ce+be+9]=o.y,j[ce+be+10]=o.z,j[ce+be+11]=le.itemSize===4?o.w:1)}}M={count:_,texture:ae,size:new nt(P,U)},s.set(h,M),h.addEventListener("dispose",D)}let g=0;for(let y=0;y<f.length;y++)g+=f[y];let R=h.morphTargetsRelative?1:1-g;d.getUniforms().setValue(i,"morphTargetBaseInfluence",R),d.getUniforms().setValue(i,"morphTargetInfluences",f),d.getUniforms().setValue(i,"morphTargetsTexture",M.texture,t),d.getUniforms().setValue(i,"morphTargetsTextureSize",M.size)}else{let m=f===void 0?0:f.length,_=n[h.id];if(_===void 0||_.length!==m){_=[];for(let b=0;b<m;b++)_[b]=[b,0];n[h.id]=_}for(let b=0;b<m;b++){let S=_[b];S[0]=b,S[1]=f[b]}_.sort(tE);for(let b=0;b<8;b++)b<m&&_[b][1]?(l[b][0]=_[b][0],l[b][1]=_[b][1]):(l[b][0]=Number.MAX_SAFE_INTEGER,l[b][1]=0);l.sort(eE);let M=h.morphAttributes.position,g=h.morphAttributes.normal,R=0;for(let b=0;b<8;b++){let S=l[b],C=S[0],W=S[1];C!==Number.MAX_SAFE_INTEGER&&W?(M&&h.getAttribute("morphTarget"+b)!==M[C]&&h.setAttribute("morphTarget"+b,M[C]),g&&h.getAttribute("morphNormal"+b)!==g[C]&&h.setAttribute("morphNormal"+b,g[C]),r[b]=W,R+=W):(M&&h.hasAttribute("morphTarget"+b)===!0&&h.deleteAttribute("morphTarget"+b),g&&h.hasAttribute("morphNormal"+b)===!0&&h.deleteAttribute("morphNormal"+b),r[b]=0)}let y=h.morphTargetsRelative?1:1-R;d.getUniforms().setValue(i,"morphTargetBaseInfluence",y),d.getUniforms().setValue(i,"morphTargetInfluences",r)}}return a(c,"update"),{update:c}}a(nE,"WebGLMorphtargets");function iE(i,e,t,n){let r=new WeakMap;function s(c){let u=n.render.frame,h=c.geometry,d=e.get(c,h);if(r.get(d)!==u&&(e.update(d),r.set(d,u)),c.isInstancedMesh&&(c.hasEventListener("dispose",l)===!1&&c.addEventListener("dispose",l),r.get(c)!==u&&(t.update(c.instanceMatrix,i.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,i.ARRAY_BUFFER),r.set(c,u))),c.isSkinnedMesh){let f=c.skeleton;r.get(f)!==u&&(f.update(),r.set(f,u))}return d}a(s,"update");function o(){r=new WeakMap}a(o,"dispose");function l(c){let u=c.target;u.removeEventListener("dispose",l),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return a(l,"onInstancedMeshDispose"),{update:s,dispose:o}}a(iE,"WebGLObjects");var nd=class extends mi{static{a(this,"DepthTexture")}constructor(e,t,n,r,s,o,l,c,u,h){if(h=h!==void 0?h:no,h!==no&&h!==Ia)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");n===void 0&&h===no&&(n=ps),n===void 0&&h===Ia&&(n=to),super(null,r,s,o,l,c,h,n,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=l!==void 0?l:wn,this.minFilter=c!==void 0?c:wn,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){let t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}},ob=new mi,ab=new nd(1,1);ab.compareFunction=eb;var lb=new Qh,cb=new I3,ub=new qh,R_=[],g_=[],__=new Float32Array(16),b_=new Float32Array(9),M_=new Float32Array(4);function Xa(i,e,t){let n=i[0];if(n<=0||n>0)return i;let r=e*t,s=R_[r];if(s===void 0&&(s=new Float32Array(r),R_[r]=s),e!==0){n.toArray(s,0);for(let o=1,l=0;o!==e;++o)l+=t,i[o].toArray(s,l)}return s}a(Xa,"flatten");function Rn(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}a(Rn,"arraysEqual");function gn(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}a(gn,"copyArray");function _d(i,e){let t=g_[e];t===void 0&&(t=new Int32Array(e),g_[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}a(_d,"allocTexUnits");function rE(i,e){let t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}a(rE,"setValueV1f");function sE(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Rn(t,e))return;i.uniform2fv(this.addr,e),gn(t,e)}}a(sE,"setValueV2f");function oE(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Rn(t,e))return;i.uniform3fv(this.addr,e),gn(t,e)}}a(oE,"setValueV3f");function aE(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Rn(t,e))return;i.uniform4fv(this.addr,e),gn(t,e)}}a(aE,"setValueV4f");function lE(i,e){let t=this.cache,n=e.elements;if(n===void 0){if(Rn(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),gn(t,e)}else{if(Rn(t,n))return;M_.set(n),i.uniformMatrix2fv(this.addr,!1,M_),gn(t,n)}}a(lE,"setValueM2");function cE(i,e){let t=this.cache,n=e.elements;if(n===void 0){if(Rn(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),gn(t,e)}else{if(Rn(t,n))return;b_.set(n),i.uniformMatrix3fv(this.addr,!1,b_),gn(t,n)}}a(cE,"setValueM3");function uE(i,e){let t=this.cache,n=e.elements;if(n===void 0){if(Rn(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),gn(t,e)}else{if(Rn(t,n))return;__.set(n),i.uniformMatrix4fv(this.addr,!1,__),gn(t,n)}}a(uE,"setValueM4");function hE(i,e){let t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}a(hE,"setValueV1i");function dE(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Rn(t,e))return;i.uniform2iv(this.addr,e),gn(t,e)}}a(dE,"setValueV2i");function fE(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Rn(t,e))return;i.uniform3iv(this.addr,e),gn(t,e)}}a(fE,"setValueV3i");function pE(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Rn(t,e))return;i.uniform4iv(this.addr,e),gn(t,e)}}a(pE,"setValueV4i");function mE(i,e){let t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}a(mE,"setValueV1ui");function RE(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Rn(t,e))return;i.uniform2uiv(this.addr,e),gn(t,e)}}a(RE,"setValueV2ui");function gE(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Rn(t,e))return;i.uniform3uiv(this.addr,e),gn(t,e)}}a(gE,"setValueV3ui");function _E(i,e){let t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Rn(t,e))return;i.uniform4uiv(this.addr,e),gn(t,e)}}a(_E,"setValueV4ui");function bE(i,e,t){let n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r);let s=this.type===i.SAMPLER_2D_SHADOW?ab:ob;t.setTexture2D(e||s,r)}a(bE,"setValueT1");function ME(i,e,t){let n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||cb,r)}a(ME,"setValueT3D1");function xE(i,e,t){let n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||ub,r)}a(xE,"setValueT6");function yE(i,e,t){let n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||lb,r)}a(yE,"setValueT2DArray1");function SE(i){switch(i){case 5126:return rE;case 35664:return sE;case 35665:return oE;case 35666:return aE;case 35674:return lE;case 35675:return cE;case 35676:return uE;case 5124:case 35670:return hE;case 35667:case 35671:return dE;case 35668:case 35672:return fE;case 35669:case 35673:return pE;case 5125:return mE;case 36294:return RE;case 36295:return gE;case 36296:return _E;case 35678:case 36198:case 36298:case 36306:case 35682:return bE;case 35679:case 36299:case 36307:return ME;case 35680:case 36300:case 36308:case 36293:return xE;case 36289:case 36303:case 36311:case 36292:return yE}}a(SE,"getSingularSetter");function TE(i,e){i.uniform1fv(this.addr,e)}a(TE,"setValueV1fArray");function vE(i,e){let t=Xa(e,this.size,2);i.uniform2fv(this.addr,t)}a(vE,"setValueV2fArray");function NE(i,e){let t=Xa(e,this.size,3);i.uniform3fv(this.addr,t)}a(NE,"setValueV3fArray");function PE(i,e){let t=Xa(e,this.size,4);i.uniform4fv(this.addr,t)}a(PE,"setValueV4fArray");function EE(i,e){let t=Xa(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}a(EE,"setValueM2Array");function wE(i,e){let t=Xa(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}a(wE,"setValueM3Array");function LE(i,e){let t=Xa(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}a(LE,"setValueM4Array");function AE(i,e){i.uniform1iv(this.addr,e)}a(AE,"setValueV1iArray");function OE(i,e){i.uniform2iv(this.addr,e)}a(OE,"setValueV2iArray");function VE(i,e){i.uniform3iv(this.addr,e)}a(VE,"setValueV3iArray");function UE(i,e){i.uniform4iv(this.addr,e)}a(UE,"setValueV4iArray");function IE(i,e){i.uniform1uiv(this.addr,e)}a(IE,"setValueV1uiArray");function FE(i,e){i.uniform2uiv(this.addr,e)}a(FE,"setValueV2uiArray");function WE(i,e){i.uniform3uiv(this.addr,e)}a(WE,"setValueV3uiArray");function CE(i,e){i.uniform4uiv(this.addr,e)}a(CE,"setValueV4uiArray");function ZE(i,e,t){let n=this.cache,r=e.length,s=_d(t,r);Rn(n,s)||(i.uniform1iv(this.addr,s),gn(n,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||ob,s[o])}a(ZE,"setValueT1Array");function kE(i,e,t){let n=this.cache,r=e.length,s=_d(t,r);Rn(n,s)||(i.uniform1iv(this.addr,s),gn(n,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||cb,s[o])}a(kE,"setValueT3DArray");function XE(i,e,t){let n=this.cache,r=e.length,s=_d(t,r);Rn(n,s)||(i.uniform1iv(this.addr,s),gn(n,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||ub,s[o])}a(XE,"setValueT6Array");function HE(i,e,t){let n=this.cache,r=e.length,s=_d(t,r);Rn(n,s)||(i.uniform1iv(this.addr,s),gn(n,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||lb,s[o])}a(HE,"setValueT2DArrayArray");function GE(i){switch(i){case 5126:return TE;case 35664:return vE;case 35665:return NE;case 35666:return PE;case 35674:return EE;case 35675:return wE;case 35676:return LE;case 5124:case 35670:return AE;case 35667:case 35671:return OE;case 35668:case 35672:return VE;case 35669:case 35673:return UE;case 5125:return IE;case 36294:return FE;case 36295:return WE;case 36296:return CE;case 35678:case 36198:case 36298:case 36306:case 35682:return ZE;case 35679:case 36299:case 36307:return kE;case 35680:case 36300:case 36308:case 36293:return XE;case 36289:case 36303:case 36311:case 36292:return HE}}a(GE,"getPureArraySetter");var Z3=class{static{a(this,"SingleUniform")}constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=SE(t.type)}},k3=class{static{a(this,"PureArrayUniform")}constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=GE(t.type)}},X3=class{static{a(this,"StructuredUniform")}constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){let r=this.seq;for(let s=0,o=r.length;s!==o;++s){let l=r[s];l.setValue(e,t[l.id],n)}}},T3=/(\w+)(\])?(\[|\.)?/g;function x_(i,e){i.seq.push(e),i.map[e.id]=e}a(x_,"addUniform");function DE(i,e,t){let n=i.name,r=n.length;for(T3.lastIndex=0;;){let s=T3.exec(n),o=T3.lastIndex,l=s[1],c=s[2]==="]",u=s[3];if(c&&(l=l|0),u===void 0||u==="["&&o+2===r){x_(t,u===void 0?new Z3(l,i,e):new k3(l,i,e));break}else{let d=t.map[l];d===void 0&&(d=new X3(l),x_(t,d)),t=d}}}a(DE,"parseUniform");var Oa=class{static{a(this,"WebGLUniforms")}constructor(e,t){this.seq=[],this.map={};let n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){let s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);DE(s,o,this)}}setValue(e,t,n,r){let s=this.map[t];s!==void 0&&s.setValue(e,n,r)}setOptional(e,t,n){let r=t[n];r!==void 0&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let s=0,o=t.length;s!==o;++s){let l=t[s],c=n[l.id];c.needsUpdate!==!1&&l.setValue(e,c.value,r)}}static seqWithValue(e,t){let n=[];for(let r=0,s=e.length;r!==s;++r){let o=e[r];o.id in t&&n.push(o)}return n}};function y_(i,e,t){let n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}a(y_,"WebGLShader");var YE=37297,KE=0;function QE(i,e){let t=i.split(`
`),n=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){let l=o+1;n.push(`${l===e?">":" "} ${l}: ${t[o]}`)}return n.join(`
`)}a(QE,"handleSource");function BE(i){let e=vt.getPrimaries(vt.workingColorSpace),t=vt.getPrimaries(i),n;switch(e===t?n="":e===Hh&&t===Xh?n="LinearDisplayP3ToLinearSRGB":e===Xh&&t===Hh&&(n="LinearSRGBToLinearDisplayP3"),i){case Ur:case gd:return[n,"LinearTransferOETF"];case on:case Rm:return[n,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",i),[n,"LinearTransferOETF"]}}a(BE,"getEncodingComponents");function S_(i,e,t){let n=i.getShaderParameter(e,i.COMPILE_STATUS),r=i.getShaderInfoLog(e).trim();if(n&&r==="")return"";let s=/ERROR: 0:(\d+)/.exec(r);if(s){let o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+QE(i.getShaderSource(e),o)}else return r}a(S_,"getShaderErrors");function JE(i,e){let t=BE(e);return`vec4 ${i}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}a(JE,"getTexelEncodingFunction");function zE(i,e){let t;switch(e){case tv:t="Linear";break;case nv:t="Reinhard";break;case iv:t="OptimizedCineon";break;case rv:t="ACESFilmic";break;case ov:t="AgX";break;case sv:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}a(zE,"getToneMappingFunction");function $E(i){return[i.extensionDerivatives||i.envMapCubeUVHeight||i.bumpMap||i.normalMapTangentSpace||i.clearcoatNormalMap||i.flatShading||i.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(i.extensionFragDepth||i.logarithmicDepthBuffer)&&i.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",i.extensionDrawBuffers&&i.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(i.extensionShaderTextureLOD||i.envMap||i.transmission)&&i.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ea).join(`
`)}a($E,"generateExtensions");function jE(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":""].filter(Ea).join(`
`)}a(jE,"generateVertexExtensions");function qE(i){let e=[];for(let t in i){let n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}a(qE,"generateDefines");function ew(i,e){let t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){let s=i.getActiveAttrib(e,r),o=s.name,l=1;s.type===i.FLOAT_MAT2&&(l=2),s.type===i.FLOAT_MAT3&&(l=3),s.type===i.FLOAT_MAT4&&(l=4),t[o]={type:s.type,location:i.getAttribLocation(e,o),locationSize:l}}return t}a(ew,"fetchAttributeLocations");function Ea(i){return i!==""}a(Ea,"filterEmptyLine");function T_(i,e){let t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}a(T_,"replaceLightNums");function v_(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}a(v_,"replaceClippingPlaneNums");var tw=/^[ \t]*#include +<([\w\d./]+)>/gm;function H3(i){return i.replace(tw,iw)}a(H3,"resolveIncludes");var nw=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function iw(i,e){let t=ft[e];if(t===void 0){let n=nw.get(e);if(n!==void 0)t=ft[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return H3(t)}a(iw,"includeReplacer");var rw=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function N_(i){return i.replace(rw,sw)}a(N_,"unrollLoops");function sw(i,e,t,n){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}a(sw,"loopReplacer");function P_(i){let e="precision "+i.precision+` float;
precision `+i.precision+" int;";return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}a(P_,"generatePrecision");function ow(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===G_?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===wT?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===Ar&&(e="SHADOWMAP_TYPE_VSM"),e}a(ow,"generateShadowMapTypeDefine");function aw(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case Va:case Ua:e="ENVMAP_TYPE_CUBE";break;case Rd:e="ENVMAP_TYPE_CUBE_UV";break}return e}a(aw,"generateEnvMapTypeDefine");function lw(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case Ua:e="ENVMAP_MODE_REFRACTION";break}return e}a(lw,"generateEnvMapModeDefine");function cw(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case pm:e="ENVMAP_BLENDING_MULTIPLY";break;case qT:e="ENVMAP_BLENDING_MIX";break;case ev:e="ENVMAP_BLENDING_ADD";break}return e}a(cw,"generateEnvMapBlendingDefine");function uw(i){let e=i.envMapCubeUVHeight;if(e===null)return null;let t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}a(uw,"generateCubeUVSize");function hw(i,e,t,n){let r=i.getContext(),s=t.defines,o=t.vertexShader,l=t.fragmentShader,c=ow(t),u=aw(t),h=lw(t),d=cw(t),f=uw(t),m=t.isWebGL2?"":$E(t),_=jE(t),M=qE(s),g=r.createProgram(),R,y,b=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(R=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M].filter(Ea).join(`
`),R.length>0&&(R+=`
`),y=[m,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M].filter(Ea).join(`
`),y.length>0&&(y+=`
`)):(R=[P_(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+h:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ea).join(`
`),y=[m,P_(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,M,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+h:"",t.envMap?"#define "+d:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==gs?"#define TONE_MAPPING":"",t.toneMapping!==gs?ft.tonemapping_pars_fragment:"",t.toneMapping!==gs?zE("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",ft.colorspace_pars_fragment,JE("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Ea).join(`
`)),o=H3(o),o=T_(o,t),o=v_(o,t),l=H3(l),l=T_(l,t),l=v_(l,t),o=N_(o),l=N_(l),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(b=`#version 300 es
`,R=[_,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+R,y=["precision mediump sampler2DArray;","#define varying in",t.glslVersion===Kg?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Kg?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+y);let S=b+R+o,C=b+y+l,W=y_(r,r.VERTEX_SHADER,S),F=y_(r,r.FRAGMENT_SHADER,C);r.attachShader(g,W),r.attachShader(g,F),t.index0AttributeName!==void 0?r.bindAttribLocation(g,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(g,0,"position"),r.linkProgram(g);function ee(ae){if(i.debug.checkShaderErrors){let _e=r.getProgramInfoLog(g).trim(),D=r.getShaderInfoLog(W).trim(),z=r.getShaderInfoLog(F).trim(),se=!0,fe=!0;if(r.getProgramParameter(g,r.LINK_STATUS)===!1)if(se=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(r,g,W,F);else{let le=S_(r,W,"vertex"),ce=S_(r,F,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(g,r.VALIDATE_STATUS)+`

Program Info Log: `+_e+`
`+le+`
`+ce)}else _e!==""?console.warn("THREE.WebGLProgram: Program Info Log:",_e):(D===""||z==="")&&(fe=!1);fe&&(ae.diagnostics={runnable:se,programLog:_e,vertexShader:{log:D,prefix:R},fragmentShader:{log:z,prefix:y}})}r.deleteShader(W),r.deleteShader(F),P=new Oa(r,g),U=ew(r,g)}a(ee,"onFirstUse");let P;this.getUniforms=function(){return P===void 0&&ee(this),P};let U;this.getAttributes=function(){return U===void 0&&ee(this),U};let j=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return j===!1&&(j=r.getProgramParameter(g,YE)),j},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(g),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=KE++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=W,this.fragmentShader=F,this}a(hw,"WebGLProgram");var dw=0,G3=class{static{a(this,"WebGLShaderCache")}constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){let t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){let t=this.materialCache.get(e);for(let n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){let t=this.materialCache,n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){let t=this.shaderCache,n=t.get(e);return n===void 0&&(n=new D3(e),t.set(e,n)),n}},D3=class{static{a(this,"WebGLShaderStage")}constructor(e){this.id=dw++,this.code=e,this.usedTimes=0}};function fw(i,e,t,n,r,s,o){let l=new Jh,c=new G3,u=[],h=r.isWebGL2,d=r.logarithmicDepthBuffer,f=r.vertexTextures,m=r.precision,_={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function M(P){return P===0?"uv":`uv${P}`}a(M,"getChannel");function g(P,U,j,ae,_e){let D=ae.fog,z=_e.geometry,se=P.isMeshStandardMaterial?ae.environment:null,fe=(P.isMeshStandardMaterial?t:e).get(P.envMap||se),le=fe&&fe.mapping===Rd?fe.image.height:null,ce=_[P.type];P.precision!==null&&(m=r.getMaxPrecision(P.precision),m!==P.precision&&console.warn("THREE.WebGLProgram.getParameters:",P.precision,"not supported, using",m,"instead."));let ge=z.morphAttributes.position||z.morphAttributes.normal||z.morphAttributes.color,be=ge!==void 0?ge.length:0,Oe=0;z.morphAttributes.position!==void 0&&(Oe=1),z.morphAttributes.normal!==void 0&&(Oe=2),z.morphAttributes.color!==void 0&&(Oe=3);let $,me,Se,Be;if(ce){let Ie=ji[ce];$=Ie.vertexShader,me=Ie.fragmentShader}else $=P.vertexShader,me=P.fragmentShader,c.update(P),Se=c.getVertexShaderID(P),Be=c.getFragmentShaderID(P);let Le=i.getRenderTarget(),ze=_e.isInstancedMesh===!0,qe=_e.isBatchedMesh===!0,Ze=!!P.map,st=!!P.matcap,B=!!fe,xt=!!P.aoMap,Ge=!!P.lightMap,tt=!!P.bumpMap,De=!!P.normalMap,St=!!P.displacementMap,at=!!P.emissiveMap,L=!!P.metalnessMap,T=!!P.roughnessMap,te=P.anisotropy>0,xe=P.clearcoat>0,O=P.iridescence>0,N=P.sheen>0,I=P.transmission>0,Z=te&&!!P.anisotropyMap,V=xe&&!!P.clearcoatMap,G=xe&&!!P.clearcoatNormalMap,Y=xe&&!!P.clearcoatRoughnessMap,k=O&&!!P.iridescenceMap,q=O&&!!P.iridescenceThicknessMap,v=N&&!!P.sheenColorMap,Q=N&&!!P.sheenRoughnessMap,H=!!P.specularMap,ue=!!P.specularColorMap,Pe=!!P.specularIntensityMap,Ce=I&&!!P.transmissionMap,Ee=I&&!!P.thicknessMap,ve=!!P.gradientMap,pe=!!P.alphaMap,X=P.alphaTest>0,he=!!P.alphaHash,Re=!!P.extensions,we=!!z.attributes.uv1,Ue=!!z.attributes.uv2,rt=!!z.attributes.uv3,Xe=gs;return P.toneMapped&&(Le===null||Le.isXRRenderTarget===!0)&&(Xe=i.toneMapping),{isWebGL2:h,shaderID:ce,shaderType:P.type,shaderName:P.name,vertexShader:$,fragmentShader:me,defines:P.defines,customVertexShaderID:Se,customFragmentShaderID:Be,isRawShaderMaterial:P.isRawShaderMaterial===!0,glslVersion:P.glslVersion,precision:m,batching:qe,instancing:ze,instancingColor:ze&&_e.instanceColor!==null,supportsVertexTextures:f,outputColorSpace:Le===null?i.outputColorSpace:Le.isXRRenderTarget===!0?Le.texture.colorSpace:Ur,map:Ze,matcap:st,envMap:B,envMapMode:B&&fe.mapping,envMapCubeUVHeight:le,aoMap:xt,lightMap:Ge,bumpMap:tt,normalMap:De,displacementMap:f&&St,emissiveMap:at,normalMapObjectSpace:De&&P.normalMapType===_v,normalMapTangentSpace:De&&P.normalMapType===q_,metalnessMap:L,roughnessMap:T,anisotropy:te,anisotropyMap:Z,clearcoat:xe,clearcoatMap:V,clearcoatNormalMap:G,clearcoatRoughnessMap:Y,iridescence:O,iridescenceMap:k,iridescenceThicknessMap:q,sheen:N,sheenColorMap:v,sheenRoughnessMap:Q,specularMap:H,specularColorMap:ue,specularIntensityMap:Pe,transmission:I,transmissionMap:Ce,thicknessMap:Ee,gradientMap:ve,opaque:P.transparent===!1&&P.blending===La,alphaMap:pe,alphaTest:X,alphaHash:he,combine:P.combine,mapUv:Ze&&M(P.map.channel),aoMapUv:xt&&M(P.aoMap.channel),lightMapUv:Ge&&M(P.lightMap.channel),bumpMapUv:tt&&M(P.bumpMap.channel),normalMapUv:De&&M(P.normalMap.channel),displacementMapUv:St&&M(P.displacementMap.channel),emissiveMapUv:at&&M(P.emissiveMap.channel),metalnessMapUv:L&&M(P.metalnessMap.channel),roughnessMapUv:T&&M(P.roughnessMap.channel),anisotropyMapUv:Z&&M(P.anisotropyMap.channel),clearcoatMapUv:V&&M(P.clearcoatMap.channel),clearcoatNormalMapUv:G&&M(P.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Y&&M(P.clearcoatRoughnessMap.channel),iridescenceMapUv:k&&M(P.iridescenceMap.channel),iridescenceThicknessMapUv:q&&M(P.iridescenceThicknessMap.channel),sheenColorMapUv:v&&M(P.sheenColorMap.channel),sheenRoughnessMapUv:Q&&M(P.sheenRoughnessMap.channel),specularMapUv:H&&M(P.specularMap.channel),specularColorMapUv:ue&&M(P.specularColorMap.channel),specularIntensityMapUv:Pe&&M(P.specularIntensityMap.channel),transmissionMapUv:Ce&&M(P.transmissionMap.channel),thicknessMapUv:Ee&&M(P.thicknessMap.channel),alphaMapUv:pe&&M(P.alphaMap.channel),vertexTangents:!!z.attributes.tangent&&(De||te),vertexColors:P.vertexColors,vertexAlphas:P.vertexColors===!0&&!!z.attributes.color&&z.attributes.color.itemSize===4,vertexUv1s:we,vertexUv2s:Ue,vertexUv3s:rt,pointsUvs:_e.isPoints===!0&&!!z.attributes.uv&&(Ze||pe),fog:!!D,useFog:P.fog===!0,fogExp2:D&&D.isFogExp2,flatShading:P.flatShading===!0,sizeAttenuation:P.sizeAttenuation===!0,logarithmicDepthBuffer:d,skinning:_e.isSkinnedMesh===!0,morphTargets:z.morphAttributes.position!==void 0,morphNormals:z.morphAttributes.normal!==void 0,morphColors:z.morphAttributes.color!==void 0,morphTargetsCount:be,morphTextureStride:Oe,numDirLights:U.directional.length,numPointLights:U.point.length,numSpotLights:U.spot.length,numSpotLightMaps:U.spotLightMap.length,numRectAreaLights:U.rectArea.length,numHemiLights:U.hemi.length,numDirLightShadows:U.directionalShadowMap.length,numPointLightShadows:U.pointShadowMap.length,numSpotLightShadows:U.spotShadowMap.length,numSpotLightShadowsWithMaps:U.numSpotLightShadowsWithMaps,numLightProbes:U.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:P.dithering,shadowMapEnabled:i.shadowMap.enabled&&j.length>0,shadowMapType:i.shadowMap.type,toneMapping:Xe,useLegacyLights:i._useLegacyLights,decodeVideoTexture:Ze&&P.map.isVideoTexture===!0&&vt.getTransfer(P.map.colorSpace)===Ut,premultipliedAlpha:P.premultipliedAlpha,doubleSided:P.side===Ci,flipSided:P.side===Ln,useDepthPacking:P.depthPacking>=0,depthPacking:P.depthPacking||0,index0AttributeName:P.index0AttributeName,extensionDerivatives:Re&&P.extensions.derivatives===!0,extensionFragDepth:Re&&P.extensions.fragDepth===!0,extensionDrawBuffers:Re&&P.extensions.drawBuffers===!0,extensionShaderTextureLOD:Re&&P.extensions.shaderTextureLOD===!0,extensionClipCullDistance:Re&&P.extensions.clipCullDistance&&n.has("WEBGL_clip_cull_distance"),rendererExtensionFragDepth:h||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||n.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:P.customProgramCacheKey()}}a(g,"getParameters");function R(P){let U=[];if(P.shaderID?U.push(P.shaderID):(U.push(P.customVertexShaderID),U.push(P.customFragmentShaderID)),P.defines!==void 0)for(let j in P.defines)U.push(j),U.push(P.defines[j]);return P.isRawShaderMaterial===!1&&(y(U,P),b(U,P),U.push(i.outputColorSpace)),U.push(P.customProgramCacheKey),U.join()}a(R,"getProgramCacheKey");function y(P,U){P.push(U.precision),P.push(U.outputColorSpace),P.push(U.envMapMode),P.push(U.envMapCubeUVHeight),P.push(U.mapUv),P.push(U.alphaMapUv),P.push(U.lightMapUv),P.push(U.aoMapUv),P.push(U.bumpMapUv),P.push(U.normalMapUv),P.push(U.displacementMapUv),P.push(U.emissiveMapUv),P.push(U.metalnessMapUv),P.push(U.roughnessMapUv),P.push(U.anisotropyMapUv),P.push(U.clearcoatMapUv),P.push(U.clearcoatNormalMapUv),P.push(U.clearcoatRoughnessMapUv),P.push(U.iridescenceMapUv),P.push(U.iridescenceThicknessMapUv),P.push(U.sheenColorMapUv),P.push(U.sheenRoughnessMapUv),P.push(U.specularMapUv),P.push(U.specularColorMapUv),P.push(U.specularIntensityMapUv),P.push(U.transmissionMapUv),P.push(U.thicknessMapUv),P.push(U.combine),P.push(U.fogExp2),P.push(U.sizeAttenuation),P.push(U.morphTargetsCount),P.push(U.morphAttributeCount),P.push(U.numDirLights),P.push(U.numPointLights),P.push(U.numSpotLights),P.push(U.numSpotLightMaps),P.push(U.numHemiLights),P.push(U.numRectAreaLights),P.push(U.numDirLightShadows),P.push(U.numPointLightShadows),P.push(U.numSpotLightShadows),P.push(U.numSpotLightShadowsWithMaps),P.push(U.numLightProbes),P.push(U.shadowMapType),P.push(U.toneMapping),P.push(U.numClippingPlanes),P.push(U.numClipIntersection),P.push(U.depthPacking)}a(y,"getProgramCacheKeyParameters");function b(P,U){l.disableAll(),U.isWebGL2&&l.enable(0),U.supportsVertexTextures&&l.enable(1),U.instancing&&l.enable(2),U.instancingColor&&l.enable(3),U.matcap&&l.enable(4),U.envMap&&l.enable(5),U.normalMapObjectSpace&&l.enable(6),U.normalMapTangentSpace&&l.enable(7),U.clearcoat&&l.enable(8),U.iridescence&&l.enable(9),U.alphaTest&&l.enable(10),U.vertexColors&&l.enable(11),U.vertexAlphas&&l.enable(12),U.vertexUv1s&&l.enable(13),U.vertexUv2s&&l.enable(14),U.vertexUv3s&&l.enable(15),U.vertexTangents&&l.enable(16),U.anisotropy&&l.enable(17),U.alphaHash&&l.enable(18),U.batching&&l.enable(19),P.push(l.mask),l.disableAll(),U.fog&&l.enable(0),U.useFog&&l.enable(1),U.flatShading&&l.enable(2),U.logarithmicDepthBuffer&&l.enable(3),U.skinning&&l.enable(4),U.morphTargets&&l.enable(5),U.morphNormals&&l.enable(6),U.morphColors&&l.enable(7),U.premultipliedAlpha&&l.enable(8),U.shadowMapEnabled&&l.enable(9),U.useLegacyLights&&l.enable(10),U.doubleSided&&l.enable(11),U.flipSided&&l.enable(12),U.useDepthPacking&&l.enable(13),U.dithering&&l.enable(14),U.transmission&&l.enable(15),U.sheen&&l.enable(16),U.opaque&&l.enable(17),U.pointsUvs&&l.enable(18),U.decodeVideoTexture&&l.enable(19),P.push(l.mask)}a(b,"getProgramCacheKeyBooleans");function S(P){let U=_[P.type],j;if(U){let ae=ji[U];j=n0.clone(ae.uniforms)}else j=P.uniforms;return j}a(S,"getUniforms");function C(P,U){let j;for(let ae=0,_e=u.length;ae<_e;ae++){let D=u[ae];if(D.cacheKey===U){j=D,++j.usedTimes;break}}return j===void 0&&(j=new hw(i,U,P,s),u.push(j)),j}a(C,"acquireProgram");function W(P){if(--P.usedTimes===0){let U=u.indexOf(P);u[U]=u[u.length-1],u.pop(),P.destroy()}}a(W,"releaseProgram");function F(P){c.remove(P)}a(F,"releaseShaderCache");function ee(){c.dispose()}return a(ee,"dispose"),{getParameters:g,getProgramCacheKey:R,getUniforms:S,acquireProgram:C,releaseProgram:W,releaseShaderCache:F,programs:u,dispose:ee}}a(fw,"WebGLPrograms");function pw(){let i=new WeakMap;function e(s){let o=i.get(s);return o===void 0&&(o={},i.set(s,o)),o}a(e,"get");function t(s){i.delete(s)}a(t,"remove");function n(s,o,l){i.get(s)[o]=l}a(n,"update");function r(){i=new WeakMap}return a(r,"dispose"),{get:e,remove:t,update:n,dispose:r}}a(pw,"WebGLProperties");function mw(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}a(mw,"painterSortStable");function E_(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}a(E_,"reversePainterSortStable");function w_(){let i=[],e=0,t=[],n=[],r=[];function s(){e=0,t.length=0,n.length=0,r.length=0}a(s,"init");function o(d,f,m,_,M,g){let R=i[e];return R===void 0?(R={id:d.id,object:d,geometry:f,material:m,groupOrder:_,renderOrder:d.renderOrder,z:M,group:g},i[e]=R):(R.id=d.id,R.object=d,R.geometry=f,R.material=m,R.groupOrder=_,R.renderOrder=d.renderOrder,R.z=M,R.group=g),e++,R}a(o,"getNextRenderItem");function l(d,f,m,_,M,g){let R=o(d,f,m,_,M,g);m.transmission>0?n.push(R):m.transparent===!0?r.push(R):t.push(R)}a(l,"push");function c(d,f,m,_,M,g){let R=o(d,f,m,_,M,g);m.transmission>0?n.unshift(R):m.transparent===!0?r.unshift(R):t.unshift(R)}a(c,"unshift");function u(d,f){t.length>1&&t.sort(d||mw),n.length>1&&n.sort(f||E_),r.length>1&&r.sort(f||E_)}a(u,"sort");function h(){for(let d=e,f=i.length;d<f;d++){let m=i[d];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return a(h,"finish"),{opaque:t,transmissive:n,transparent:r,init:s,push:l,unshift:c,finish:h,sort:u}}a(w_,"WebGLRenderList");function Rw(){let i=new WeakMap;function e(n,r){let s=i.get(n),o;return s===void 0?(o=new w_,i.set(n,[o])):r>=s.length?(o=new w_,s.push(o)):o=s[r],o}a(e,"get");function t(){i=new WeakMap}return a(t,"dispose"),{get:e,dispose:t}}a(Rw,"WebGLRenderLists");function gw(){let i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new K,color:new ct};break;case"SpotLight":t={position:new K,direction:new K,color:new ct,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new K,color:new ct,distance:0,decay:0};break;case"HemisphereLight":t={direction:new K,skyColor:new ct,groundColor:new ct};break;case"RectAreaLight":t={color:new ct,position:new K,halfWidth:new K,halfHeight:new K};break}return i[e.id]=t,t}}}a(gw,"UniformsCache");function _w(){let i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new nt};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new nt};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new nt,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}a(_w,"ShadowUniformsCache");var bw=0;function Mw(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}a(Mw,"shadowCastingAndTexturingLightsFirst");function xw(i,e){let t=new gw,n=_w(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let h=0;h<9;h++)r.probe.push(new K);let s=new K,o=new an,l=new an;function c(h,d){let f=0,m=0,_=0;for(let ae=0;ae<9;ae++)r.probe[ae].set(0,0,0);let M=0,g=0,R=0,y=0,b=0,S=0,C=0,W=0,F=0,ee=0,P=0;h.sort(Mw);let U=d===!0?Math.PI:1;for(let ae=0,_e=h.length;ae<_e;ae++){let D=h[ae],z=D.color,se=D.intensity,fe=D.distance,le=D.shadow&&D.shadow.map?D.shadow.map.texture:null;if(D.isAmbientLight)f+=z.r*se*U,m+=z.g*se*U,_+=z.b*se*U;else if(D.isLightProbe){for(let ce=0;ce<9;ce++)r.probe[ce].addScaledVector(D.sh.coefficients[ce],se);P++}else if(D.isDirectionalLight){let ce=t.get(D);if(ce.color.copy(D.color).multiplyScalar(D.intensity*U),D.castShadow){let ge=D.shadow,be=n.get(D);be.shadowBias=ge.bias,be.shadowNormalBias=ge.normalBias,be.shadowRadius=ge.radius,be.shadowMapSize=ge.mapSize,r.directionalShadow[M]=be,r.directionalShadowMap[M]=le,r.directionalShadowMatrix[M]=D.shadow.matrix,S++}r.directional[M]=ce,M++}else if(D.isSpotLight){let ce=t.get(D);ce.position.setFromMatrixPosition(D.matrixWorld),ce.color.copy(z).multiplyScalar(se*U),ce.distance=fe,ce.coneCos=Math.cos(D.angle),ce.penumbraCos=Math.cos(D.angle*(1-D.penumbra)),ce.decay=D.decay,r.spot[R]=ce;let ge=D.shadow;if(D.map&&(r.spotLightMap[F]=D.map,F++,ge.updateMatrices(D),D.castShadow&&ee++),r.spotLightMatrix[R]=ge.matrix,D.castShadow){let be=n.get(D);be.shadowBias=ge.bias,be.shadowNormalBias=ge.normalBias,be.shadowRadius=ge.radius,be.shadowMapSize=ge.mapSize,r.spotShadow[R]=be,r.spotShadowMap[R]=le,W++}R++}else if(D.isRectAreaLight){let ce=t.get(D);ce.color.copy(z).multiplyScalar(se),ce.halfWidth.set(D.width*.5,0,0),ce.halfHeight.set(0,D.height*.5,0),r.rectArea[y]=ce,y++}else if(D.isPointLight){let ce=t.get(D);if(ce.color.copy(D.color).multiplyScalar(D.intensity*U),ce.distance=D.distance,ce.decay=D.decay,D.castShadow){let ge=D.shadow,be=n.get(D);be.shadowBias=ge.bias,be.shadowNormalBias=ge.normalBias,be.shadowRadius=ge.radius,be.shadowMapSize=ge.mapSize,be.shadowCameraNear=ge.camera.near,be.shadowCameraFar=ge.camera.far,r.pointShadow[g]=be,r.pointShadowMap[g]=le,r.pointShadowMatrix[g]=D.shadow.matrix,C++}r.point[g]=ce,g++}else if(D.isHemisphereLight){let ce=t.get(D);ce.skyColor.copy(D.color).multiplyScalar(se*U),ce.groundColor.copy(D.groundColor).multiplyScalar(se*U),r.hemi[b]=ce,b++}}y>0&&(e.isWebGL2?i.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Ne.LTC_FLOAT_1,r.rectAreaLTC2=Ne.LTC_FLOAT_2):(r.rectAreaLTC1=Ne.LTC_HALF_1,r.rectAreaLTC2=Ne.LTC_HALF_2):i.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=Ne.LTC_FLOAT_1,r.rectAreaLTC2=Ne.LTC_FLOAT_2):i.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=Ne.LTC_HALF_1,r.rectAreaLTC2=Ne.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=f,r.ambient[1]=m,r.ambient[2]=_;let j=r.hash;(j.directionalLength!==M||j.pointLength!==g||j.spotLength!==R||j.rectAreaLength!==y||j.hemiLength!==b||j.numDirectionalShadows!==S||j.numPointShadows!==C||j.numSpotShadows!==W||j.numSpotMaps!==F||j.numLightProbes!==P)&&(r.directional.length=M,r.spot.length=R,r.rectArea.length=y,r.point.length=g,r.hemi.length=b,r.directionalShadow.length=S,r.directionalShadowMap.length=S,r.pointShadow.length=C,r.pointShadowMap.length=C,r.spotShadow.length=W,r.spotShadowMap.length=W,r.directionalShadowMatrix.length=S,r.pointShadowMatrix.length=C,r.spotLightMatrix.length=W+F-ee,r.spotLightMap.length=F,r.numSpotLightShadowsWithMaps=ee,r.numLightProbes=P,j.directionalLength=M,j.pointLength=g,j.spotLength=R,j.rectAreaLength=y,j.hemiLength=b,j.numDirectionalShadows=S,j.numPointShadows=C,j.numSpotShadows=W,j.numSpotMaps=F,j.numLightProbes=P,r.version=bw++)}a(c,"setup");function u(h,d){let f=0,m=0,_=0,M=0,g=0,R=d.matrixWorldInverse;for(let y=0,b=h.length;y<b;y++){let S=h[y];if(S.isDirectionalLight){let C=r.directional[f];C.direction.setFromMatrixPosition(S.matrixWorld),s.setFromMatrixPosition(S.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(R),f++}else if(S.isSpotLight){let C=r.spot[_];C.position.setFromMatrixPosition(S.matrixWorld),C.position.applyMatrix4(R),C.direction.setFromMatrixPosition(S.matrixWorld),s.setFromMatrixPosition(S.target.matrixWorld),C.direction.sub(s),C.direction.transformDirection(R),_++}else if(S.isRectAreaLight){let C=r.rectArea[M];C.position.setFromMatrixPosition(S.matrixWorld),C.position.applyMatrix4(R),l.identity(),o.copy(S.matrixWorld),o.premultiply(R),l.extractRotation(o),C.halfWidth.set(S.width*.5,0,0),C.halfHeight.set(0,S.height*.5,0),C.halfWidth.applyMatrix4(l),C.halfHeight.applyMatrix4(l),M++}else if(S.isPointLight){let C=r.point[m];C.position.setFromMatrixPosition(S.matrixWorld),C.position.applyMatrix4(R),m++}else if(S.isHemisphereLight){let C=r.hemi[g];C.direction.setFromMatrixPosition(S.matrixWorld),C.direction.transformDirection(R),g++}}}return a(u,"setupView"),{setup:c,setupView:u,state:r}}a(xw,"WebGLLights");function L_(i,e){let t=new xw(i,e),n=[],r=[];function s(){n.length=0,r.length=0}a(s,"init");function o(d){n.push(d)}a(o,"pushLight");function l(d){r.push(d)}a(l,"pushShadow");function c(d){t.setup(n,d)}a(c,"setupLights");function u(d){t.setupView(n,d)}return a(u,"setupLightsView"),{init:s,state:{lightsArray:n,shadowsArray:r,lights:t},setupLights:c,setupLightsView:u,pushLight:o,pushShadow:l}}a(L_,"WebGLRenderState");function yw(i,e){let t=new WeakMap;function n(s,o=0){let l=t.get(s),c;return l===void 0?(c=new L_(i,e),t.set(s,[c])):o>=l.length?(c=new L_(i,e),l.push(c)):c=l[o],c}a(n,"get");function r(){t=new WeakMap}return a(r,"dispose"),{get:n,dispose:r}}a(yw,"WebGLRenderStates");var Y3=class extends Fr{static{a(this,"MeshDepthMaterial")}constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Rv,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},K3=class extends Fr{static{a(this,"MeshDistanceMaterial")}constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}},Sw=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Tw=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function vw(i,e,t){let n=new Nc,r=new nt,s=new nt,o=new Tn,l=new Y3({depthPacking:gv}),c=new K3,u={},h=t.maxTextureSize,d={[qi]:Ln,[Ln]:qi,[Ci]:Ci},f=new Cr({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new nt},radius:{value:4}},vertexShader:Sw,fragmentShader:Tw}),m=f.clone();m.defines.HORIZONTAL_PASS=1;let _=new vn;_.setAttribute("position",new ii(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let M=new ni(_,f),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=G_;let R=this.type;this.render=function(W,F,ee){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||W.length===0)return;let P=i.getRenderTarget(),U=i.getActiveCubeFace(),j=i.getActiveMipmapLevel(),ae=i.state;ae.setBlending(Rs),ae.buffers.color.setClear(1,1,1,1),ae.buffers.depth.setTest(!0),ae.setScissorTest(!1);let _e=R!==Ar&&this.type===Ar,D=R===Ar&&this.type!==Ar;for(let z=0,se=W.length;z<se;z++){let fe=W[z],le=fe.shadow;if(le===void 0){console.warn("THREE.WebGLShadowMap:",fe,"has no shadow.");continue}if(le.autoUpdate===!1&&le.needsUpdate===!1)continue;r.copy(le.mapSize);let ce=le.getFrameExtents();if(r.multiply(ce),s.copy(le.mapSize),(r.x>h||r.y>h)&&(r.x>h&&(s.x=Math.floor(h/ce.x),r.x=s.x*ce.x,le.mapSize.x=s.x),r.y>h&&(s.y=Math.floor(h/ce.y),r.y=s.y*ce.y,le.mapSize.y=s.y)),le.map===null||_e===!0||D===!0){let be=this.type!==Ar?{minFilter:wn,magFilter:wn}:{};le.map!==null&&le.map.dispose(),le.map=new Ir(r.x,r.y,be),le.map.texture.name=fe.name+".shadowMap",le.camera.updateProjectionMatrix()}i.setRenderTarget(le.map),i.clear();let ge=le.getViewportCount();for(let be=0;be<ge;be++){let Oe=le.getViewport(be);o.set(s.x*Oe.x,s.y*Oe.y,s.x*Oe.z,s.y*Oe.w),ae.viewport(o),le.updateMatrices(fe,be),n=le.getFrustum(),S(F,ee,le.camera,fe,this.type)}le.isPointLightShadow!==!0&&this.type===Ar&&y(le,ee),le.needsUpdate=!1}R=this.type,g.needsUpdate=!1,i.setRenderTarget(P,U,j)};function y(W,F){let ee=e.update(M);f.defines.VSM_SAMPLES!==W.blurSamples&&(f.defines.VSM_SAMPLES=W.blurSamples,m.defines.VSM_SAMPLES=W.blurSamples,f.needsUpdate=!0,m.needsUpdate=!0),W.mapPass===null&&(W.mapPass=new Ir(r.x,r.y)),f.uniforms.shadow_pass.value=W.map.texture,f.uniforms.resolution.value=W.mapSize,f.uniforms.radius.value=W.radius,i.setRenderTarget(W.mapPass),i.clear(),i.renderBufferDirect(F,null,ee,f,M,null),m.uniforms.shadow_pass.value=W.mapPass.texture,m.uniforms.resolution.value=W.mapSize,m.uniforms.radius.value=W.radius,i.setRenderTarget(W.map),i.clear(),i.renderBufferDirect(F,null,ee,m,M,null)}a(y,"VSMPass");function b(W,F,ee,P){let U=null,j=ee.isPointLight===!0?W.customDistanceMaterial:W.customDepthMaterial;if(j!==void 0)U=j;else if(U=ee.isPointLight===!0?c:l,i.localClippingEnabled&&F.clipShadows===!0&&Array.isArray(F.clippingPlanes)&&F.clippingPlanes.length!==0||F.displacementMap&&F.displacementScale!==0||F.alphaMap&&F.alphaTest>0||F.map&&F.alphaTest>0){let ae=U.uuid,_e=F.uuid,D=u[ae];D===void 0&&(D={},u[ae]=D);let z=D[_e];z===void 0&&(z=U.clone(),D[_e]=z,F.addEventListener("dispose",C)),U=z}if(U.visible=F.visible,U.wireframe=F.wireframe,P===Ar?U.side=F.shadowSide!==null?F.shadowSide:F.side:U.side=F.shadowSide!==null?F.shadowSide:d[F.side],U.alphaMap=F.alphaMap,U.alphaTest=F.alphaTest,U.map=F.map,U.clipShadows=F.clipShadows,U.clippingPlanes=F.clippingPlanes,U.clipIntersection=F.clipIntersection,U.displacementMap=F.displacementMap,U.displacementScale=F.displacementScale,U.displacementBias=F.displacementBias,U.wireframeLinewidth=F.wireframeLinewidth,U.linewidth=F.linewidth,ee.isPointLight===!0&&U.isMeshDistanceMaterial===!0){let ae=i.properties.get(U);ae.light=ee}return U}a(b,"getDepthMaterial");function S(W,F,ee,P,U){if(W.visible===!1)return;if(W.layers.test(F.layers)&&(W.isMesh||W.isLine||W.isPoints)&&(W.castShadow||W.receiveShadow&&U===Ar)&&(!W.frustumCulled||n.intersectsObject(W))){W.modelViewMatrix.multiplyMatrices(ee.matrixWorldInverse,W.matrixWorld);let _e=e.update(W),D=W.material;if(Array.isArray(D)){let z=_e.groups;for(let se=0,fe=z.length;se<fe;se++){let le=z[se],ce=D[le.materialIndex];if(ce&&ce.visible){let ge=b(W,ce,P,U);W.onBeforeShadow(i,W,F,ee,_e,ge,le),i.renderBufferDirect(ee,null,_e,ge,W,le),W.onAfterShadow(i,W,F,ee,_e,ge,le)}}}else if(D.visible){let z=b(W,D,P,U);W.onBeforeShadow(i,W,F,ee,_e,z,null),i.renderBufferDirect(ee,null,_e,z,W,null),W.onAfterShadow(i,W,F,ee,_e,z,null)}}let ae=W.children;for(let _e=0,D=ae.length;_e<D;_e++)S(ae[_e],F,ee,P,U)}a(S,"renderObject");function C(W){W.target.removeEventListener("dispose",C);for(let ee in u){let P=u[ee],U=W.target.uuid;U in P&&(P[U].dispose(),delete P[U])}}a(C,"onMaterialDispose")}a(vw,"WebGLShadowMap");function Nw(i,e,t){let n=t.isWebGL2;function r(){let X=!1,he=new Tn,Re=null,we=new Tn(0,0,0,0);return{setMask:function(Ue){Re!==Ue&&!X&&(i.colorMask(Ue,Ue,Ue,Ue),Re=Ue)},setLocked:function(Ue){X=Ue},setClear:function(Ue,rt,Xe,Ae,Ie){Ie===!0&&(Ue*=Ae,rt*=Ae,Xe*=Ae),he.set(Ue,rt,Xe,Ae),we.equals(he)===!1&&(i.clearColor(Ue,rt,Xe,Ae),we.copy(he))},reset:function(){X=!1,Re=null,we.set(-1,0,0,0)}}}a(r,"ColorBuffer");function s(){let X=!1,he=null,Re=null,we=null;return{setTest:function(Ue){Ue?qe(i.DEPTH_TEST):Ze(i.DEPTH_TEST)},setMask:function(Ue){he!==Ue&&!X&&(i.depthMask(Ue),he=Ue)},setFunc:function(Ue){if(Re!==Ue){switch(Ue){case KT:i.depthFunc(i.NEVER);break;case QT:i.depthFunc(i.ALWAYS);break;case BT:i.depthFunc(i.LESS);break;case Wh:i.depthFunc(i.LEQUAL);break;case JT:i.depthFunc(i.EQUAL);break;case zT:i.depthFunc(i.GEQUAL);break;case $T:i.depthFunc(i.GREATER);break;case jT:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}Re=Ue}},setLocked:function(Ue){X=Ue},setClear:function(Ue){we!==Ue&&(i.clearDepth(Ue),we=Ue)},reset:function(){X=!1,he=null,Re=null,we=null}}}a(s,"DepthBuffer");function o(){let X=!1,he=null,Re=null,we=null,Ue=null,rt=null,Xe=null,Ae=null,Ie=null;return{setTest:function(ye){X||(ye?qe(i.STENCIL_TEST):Ze(i.STENCIL_TEST))},setMask:function(ye){he!==ye&&!X&&(i.stencilMask(ye),he=ye)},setFunc:function(ye,Fe,Qe){(Re!==ye||we!==Fe||Ue!==Qe)&&(i.stencilFunc(ye,Fe,Qe),Re=ye,we=Fe,Ue=Qe)},setOp:function(ye,Fe,Qe){(rt!==ye||Xe!==Fe||Ae!==Qe)&&(i.stencilOp(ye,Fe,Qe),rt=ye,Xe=Fe,Ae=Qe)},setLocked:function(ye){X=ye},setClear:function(ye){Ie!==ye&&(i.clearStencil(ye),Ie=ye)},reset:function(){X=!1,he=null,Re=null,we=null,Ue=null,rt=null,Xe=null,Ae=null,Ie=null}}}a(o,"StencilBuffer");let l=new r,c=new s,u=new o,h=new WeakMap,d=new WeakMap,f={},m={},_=new WeakMap,M=[],g=null,R=!1,y=null,b=null,S=null,C=null,W=null,F=null,ee=null,P=new ct(0,0,0),U=0,j=!1,ae=null,_e=null,D=null,z=null,se=null,fe=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS),le=!1,ce=0,ge=i.getParameter(i.VERSION);ge.indexOf("WebGL")!==-1?(ce=parseFloat(/^WebGL (\d)/.exec(ge)[1]),le=ce>=1):ge.indexOf("OpenGL ES")!==-1&&(ce=parseFloat(/^OpenGL ES (\d)/.exec(ge)[1]),le=ce>=2);let be=null,Oe={},$=i.getParameter(i.SCISSOR_BOX),me=i.getParameter(i.VIEWPORT),Se=new Tn().fromArray($),Be=new Tn().fromArray(me);function Le(X,he,Re,we){let Ue=new Uint8Array(4),rt=i.createTexture();i.bindTexture(X,rt),i.texParameteri(X,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(X,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let Xe=0;Xe<Re;Xe++)n&&(X===i.TEXTURE_3D||X===i.TEXTURE_2D_ARRAY)?i.texImage3D(he,0,i.RGBA,1,1,we,0,i.RGBA,i.UNSIGNED_BYTE,Ue):i.texImage2D(he+Xe,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,Ue);return rt}a(Le,"createTexture");let ze={};ze[i.TEXTURE_2D]=Le(i.TEXTURE_2D,i.TEXTURE_2D,1),ze[i.TEXTURE_CUBE_MAP]=Le(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),n&&(ze[i.TEXTURE_2D_ARRAY]=Le(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),ze[i.TEXTURE_3D]=Le(i.TEXTURE_3D,i.TEXTURE_3D,1,1)),l.setClear(0,0,0,1),c.setClear(1),u.setClear(0),qe(i.DEPTH_TEST),c.setFunc(Wh),at(!1),L(cg),qe(i.CULL_FACE),De(Rs);function qe(X){f[X]!==!0&&(i.enable(X),f[X]=!0)}a(qe,"enable");function Ze(X){f[X]!==!1&&(i.disable(X),f[X]=!1)}a(Ze,"disable");function st(X,he){return m[X]!==he?(i.bindFramebuffer(X,he),m[X]=he,n&&(X===i.DRAW_FRAMEBUFFER&&(m[i.FRAMEBUFFER]=he),X===i.FRAMEBUFFER&&(m[i.DRAW_FRAMEBUFFER]=he)),!0):!1}a(st,"bindFramebuffer");function B(X,he){let Re=M,we=!1;if(X)if(Re=_.get(he),Re===void 0&&(Re=[],_.set(he,Re)),X.isWebGLMultipleRenderTargets){let Ue=X.texture;if(Re.length!==Ue.length||Re[0]!==i.COLOR_ATTACHMENT0){for(let rt=0,Xe=Ue.length;rt<Xe;rt++)Re[rt]=i.COLOR_ATTACHMENT0+rt;Re.length=Ue.length,we=!0}}else Re[0]!==i.COLOR_ATTACHMENT0&&(Re[0]=i.COLOR_ATTACHMENT0,we=!0);else Re[0]!==i.BACK&&(Re[0]=i.BACK,we=!0);we&&(t.isWebGL2?i.drawBuffers(Re):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Re))}a(B,"drawBuffers");function xt(X){return g!==X?(i.useProgram(X),g=X,!0):!1}a(xt,"useProgram");let Ge={[qs]:i.FUNC_ADD,[AT]:i.FUNC_SUBTRACT,[OT]:i.FUNC_REVERSE_SUBTRACT};if(n)Ge[fg]=i.MIN,Ge[pg]=i.MAX;else{let X=e.get("EXT_blend_minmax");X!==null&&(Ge[fg]=X.MIN_EXT,Ge[pg]=X.MAX_EXT)}let tt={[VT]:i.ZERO,[UT]:i.ONE,[IT]:i.SRC_COLOR,[P3]:i.SRC_ALPHA,[XT]:i.SRC_ALPHA_SATURATE,[ZT]:i.DST_COLOR,[WT]:i.DST_ALPHA,[FT]:i.ONE_MINUS_SRC_COLOR,[E3]:i.ONE_MINUS_SRC_ALPHA,[kT]:i.ONE_MINUS_DST_COLOR,[CT]:i.ONE_MINUS_DST_ALPHA,[HT]:i.CONSTANT_COLOR,[GT]:i.ONE_MINUS_CONSTANT_COLOR,[DT]:i.CONSTANT_ALPHA,[YT]:i.ONE_MINUS_CONSTANT_ALPHA};function De(X,he,Re,we,Ue,rt,Xe,Ae,Ie,ye){if(X===Rs){R===!0&&(Ze(i.BLEND),R=!1);return}if(R===!1&&(qe(i.BLEND),R=!0),X!==LT){if(X!==y||ye!==j){if((b!==qs||W!==qs)&&(i.blendEquation(i.FUNC_ADD),b=qs,W=qs),ye)switch(X){case La:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case ug:i.blendFunc(i.ONE,i.ONE);break;case hg:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case dg:i.blendFuncSeparate(i.ZERO,i.SRC_COLOR,i.ZERO,i.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",X);break}else switch(X){case La:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case ug:i.blendFunc(i.SRC_ALPHA,i.ONE);break;case hg:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case dg:i.blendFunc(i.ZERO,i.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",X);break}S=null,C=null,F=null,ee=null,P.set(0,0,0),U=0,y=X,j=ye}return}Ue=Ue||he,rt=rt||Re,Xe=Xe||we,(he!==b||Ue!==W)&&(i.blendEquationSeparate(Ge[he],Ge[Ue]),b=he,W=Ue),(Re!==S||we!==C||rt!==F||Xe!==ee)&&(i.blendFuncSeparate(tt[Re],tt[we],tt[rt],tt[Xe]),S=Re,C=we,F=rt,ee=Xe),(Ae.equals(P)===!1||Ie!==U)&&(i.blendColor(Ae.r,Ae.g,Ae.b,Ie),P.copy(Ae),U=Ie),y=X,j=!1}a(De,"setBlending");function St(X,he){X.side===Ci?Ze(i.CULL_FACE):qe(i.CULL_FACE);let Re=X.side===Ln;he&&(Re=!Re),at(Re),X.blending===La&&X.transparent===!1?De(Rs):De(X.blending,X.blendEquation,X.blendSrc,X.blendDst,X.blendEquationAlpha,X.blendSrcAlpha,X.blendDstAlpha,X.blendColor,X.blendAlpha,X.premultipliedAlpha),c.setFunc(X.depthFunc),c.setTest(X.depthTest),c.setMask(X.depthWrite),l.setMask(X.colorWrite);let we=X.stencilWrite;u.setTest(we),we&&(u.setMask(X.stencilWriteMask),u.setFunc(X.stencilFunc,X.stencilRef,X.stencilFuncMask),u.setOp(X.stencilFail,X.stencilZFail,X.stencilZPass)),te(X.polygonOffset,X.polygonOffsetFactor,X.polygonOffsetUnits),X.alphaToCoverage===!0?qe(i.SAMPLE_ALPHA_TO_COVERAGE):Ze(i.SAMPLE_ALPHA_TO_COVERAGE)}a(St,"setMaterial");function at(X){ae!==X&&(X?i.frontFace(i.CW):i.frontFace(i.CCW),ae=X)}a(at,"setFlipSided");function L(X){X!==PT?(qe(i.CULL_FACE),X!==_e&&(X===cg?i.cullFace(i.BACK):X===ET?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):Ze(i.CULL_FACE),_e=X}a(L,"setCullFace");function T(X){X!==D&&(le&&i.lineWidth(X),D=X)}a(T,"setLineWidth");function te(X,he,Re){X?(qe(i.POLYGON_OFFSET_FILL),(z!==he||se!==Re)&&(i.polygonOffset(he,Re),z=he,se=Re)):Ze(i.POLYGON_OFFSET_FILL)}a(te,"setPolygonOffset");function xe(X){X?qe(i.SCISSOR_TEST):Ze(i.SCISSOR_TEST)}a(xe,"setScissorTest");function O(X){X===void 0&&(X=i.TEXTURE0+fe-1),be!==X&&(i.activeTexture(X),be=X)}a(O,"activeTexture");function N(X,he,Re){Re===void 0&&(be===null?Re=i.TEXTURE0+fe-1:Re=be);let we=Oe[Re];we===void 0&&(we={type:void 0,texture:void 0},Oe[Re]=we),(we.type!==X||we.texture!==he)&&(be!==Re&&(i.activeTexture(Re),be=Re),i.bindTexture(X,he||ze[X]),we.type=X,we.texture=he)}a(N,"bindTexture");function I(){let X=Oe[be];X!==void 0&&X.type!==void 0&&(i.bindTexture(X.type,null),X.type=void 0,X.texture=void 0)}a(I,"unbindTexture");function Z(){try{i.compressedTexImage2D.apply(i,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}a(Z,"compressedTexImage2D");function V(){try{i.compressedTexImage3D.apply(i,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}a(V,"compressedTexImage3D");function G(){try{i.texSubImage2D.apply(i,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}a(G,"texSubImage2D");function Y(){try{i.texSubImage3D.apply(i,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}a(Y,"texSubImage3D");function k(){try{i.compressedTexSubImage2D.apply(i,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}a(k,"compressedTexSubImage2D");function q(){try{i.compressedTexSubImage3D.apply(i,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}a(q,"compressedTexSubImage3D");function v(){try{i.texStorage2D.apply(i,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}a(v,"texStorage2D");function Q(){try{i.texStorage3D.apply(i,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}a(Q,"texStorage3D");function H(){try{i.texImage2D.apply(i,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}a(H,"texImage2D");function ue(){try{i.texImage3D.apply(i,arguments)}catch(X){console.error("THREE.WebGLState:",X)}}a(ue,"texImage3D");function Pe(X){Se.equals(X)===!1&&(i.scissor(X.x,X.y,X.z,X.w),Se.copy(X))}a(Pe,"scissor");function Ce(X){Be.equals(X)===!1&&(i.viewport(X.x,X.y,X.z,X.w),Be.copy(X))}a(Ce,"viewport");function Ee(X,he){let Re=d.get(he);Re===void 0&&(Re=new WeakMap,d.set(he,Re));let we=Re.get(X);we===void 0&&(we=i.getUniformBlockIndex(he,X.name),Re.set(X,we))}a(Ee,"updateUBOMapping");function ve(X,he){let we=d.get(he).get(X);h.get(he)!==we&&(i.uniformBlockBinding(he,we,X.__bindingPointIndex),h.set(he,we))}a(ve,"uniformBlockBinding");function pe(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),n===!0&&(i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null)),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),f={},be=null,Oe={},m={},_=new WeakMap,M=[],g=null,R=!1,y=null,b=null,S=null,C=null,W=null,F=null,ee=null,P=new ct(0,0,0),U=0,j=!1,ae=null,_e=null,D=null,z=null,se=null,Se.set(0,0,i.canvas.width,i.canvas.height),Be.set(0,0,i.canvas.width,i.canvas.height),l.reset(),c.reset(),u.reset()}return a(pe,"reset"),{buffers:{color:l,depth:c,stencil:u},enable:qe,disable:Ze,bindFramebuffer:st,drawBuffers:B,useProgram:xt,setBlending:De,setMaterial:St,setFlipSided:at,setCullFace:L,setLineWidth:T,setPolygonOffset:te,setScissorTest:xe,activeTexture:O,bindTexture:N,unbindTexture:I,compressedTexImage2D:Z,compressedTexImage3D:V,texImage2D:H,texImage3D:ue,updateUBOMapping:Ee,uniformBlockBinding:ve,texStorage2D:v,texStorage3D:Q,texSubImage2D:G,texSubImage3D:Y,compressedTexSubImage2D:k,compressedTexSubImage3D:q,scissor:Pe,viewport:Ce,reset:pe}}a(Nw,"WebGLState");function Pw(i,e,t,n,r,s,o){let l=r.isWebGL2,c=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,u=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),h=new WeakMap,d,f=new WeakMap,m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _(L,T){return m?new OffscreenCanvas(L,T):vc("canvas")}a(_,"createCanvas");function M(L,T,te,xe){let O=1;if((L.width>xe||L.height>xe)&&(O=xe/Math.max(L.width,L.height)),O<1||T===!0)if(typeof HTMLImageElement<"u"&&L instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&L instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&L instanceof ImageBitmap){let N=T?Dh:Math.floor,I=N(O*L.width),Z=N(O*L.height);d===void 0&&(d=_(I,Z));let V=te?_(I,Z):d;return V.width=I,V.height=Z,V.getContext("2d").drawImage(L,0,0,I,Z),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+L.width+"x"+L.height+") to ("+I+"x"+Z+")."),V}else return"data"in L&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+L.width+"x"+L.height+")."),L;return L}a(M,"resizeImage");function g(L){return V3(L.width)&&V3(L.height)}a(g,"isPowerOfTwo$1");function R(L){return l?!1:L.wrapS!==kn||L.wrapT!==kn||L.minFilter!==wn&&L.minFilter!==Ti}a(R,"textureNeedsPowerOfTwo");function y(L,T){return L.generateMipmaps&&T&&L.minFilter!==wn&&L.minFilter!==Ti}a(y,"textureNeedsGenerateMipmaps");function b(L){i.generateMipmap(L)}a(b,"generateMipmap");function S(L,T,te,xe,O=!1){if(l===!1)return T;if(L!==null){if(i[L]!==void 0)return i[L];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+L+"'")}let N=T;if(T===i.RED&&(te===i.FLOAT&&(N=i.R32F),te===i.HALF_FLOAT&&(N=i.R16F),te===i.UNSIGNED_BYTE&&(N=i.R8)),T===i.RED_INTEGER&&(te===i.UNSIGNED_BYTE&&(N=i.R8UI),te===i.UNSIGNED_SHORT&&(N=i.R16UI),te===i.UNSIGNED_INT&&(N=i.R32UI),te===i.BYTE&&(N=i.R8I),te===i.SHORT&&(N=i.R16I),te===i.INT&&(N=i.R32I)),T===i.RG&&(te===i.FLOAT&&(N=i.RG32F),te===i.HALF_FLOAT&&(N=i.RG16F),te===i.UNSIGNED_BYTE&&(N=i.RG8)),T===i.RGBA){let I=O?kh:vt.getTransfer(xe);te===i.FLOAT&&(N=i.RGBA32F),te===i.HALF_FLOAT&&(N=i.RGBA16F),te===i.UNSIGNED_BYTE&&(N=I===Ut?i.SRGB8_ALPHA8:i.RGBA8),te===i.UNSIGNED_SHORT_4_4_4_4&&(N=i.RGBA4),te===i.UNSIGNED_SHORT_5_5_5_1&&(N=i.RGB5_A1)}return(N===i.R16F||N===i.R32F||N===i.RG16F||N===i.RG32F||N===i.RGBA16F||N===i.RGBA32F)&&e.get("EXT_color_buffer_float"),N}a(S,"getInternalFormat");function C(L,T,te){return y(L,te)===!0||L.isFramebufferTexture&&L.minFilter!==wn&&L.minFilter!==Ti?Math.log2(Math.max(T.width,T.height))+1:L.mipmaps!==void 0&&L.mipmaps.length>0?L.mipmaps.length:L.isCompressedTexture&&Array.isArray(L.image)?T.mipmaps.length:1}a(C,"getMipLevels");function W(L){return L===wn||L===mg||L===zp?i.NEAREST:i.LINEAR}a(W,"filterFallback");function F(L){let T=L.target;T.removeEventListener("dispose",F),P(T),T.isVideoTexture&&h.delete(T)}a(F,"onTextureDispose");function ee(L){let T=L.target;T.removeEventListener("dispose",ee),j(T)}a(ee,"onRenderTargetDispose");function P(L){let T=n.get(L);if(T.__webglInit===void 0)return;let te=L.source,xe=f.get(te);if(xe){let O=xe[T.__cacheKey];O.usedTimes--,O.usedTimes===0&&U(L),Object.keys(xe).length===0&&f.delete(te)}n.remove(L)}a(P,"deallocateTexture");function U(L){let T=n.get(L);i.deleteTexture(T.__webglTexture);let te=L.source,xe=f.get(te);delete xe[T.__cacheKey],o.memory.textures--}a(U,"deleteTexture");function j(L){let T=L.texture,te=n.get(L),xe=n.get(T);if(xe.__webglTexture!==void 0&&(i.deleteTexture(xe.__webglTexture),o.memory.textures--),L.depthTexture&&L.depthTexture.dispose(),L.isWebGLCubeRenderTarget)for(let O=0;O<6;O++){if(Array.isArray(te.__webglFramebuffer[O]))for(let N=0;N<te.__webglFramebuffer[O].length;N++)i.deleteFramebuffer(te.__webglFramebuffer[O][N]);else i.deleteFramebuffer(te.__webglFramebuffer[O]);te.__webglDepthbuffer&&i.deleteRenderbuffer(te.__webglDepthbuffer[O])}else{if(Array.isArray(te.__webglFramebuffer))for(let O=0;O<te.__webglFramebuffer.length;O++)i.deleteFramebuffer(te.__webglFramebuffer[O]);else i.deleteFramebuffer(te.__webglFramebuffer);if(te.__webglDepthbuffer&&i.deleteRenderbuffer(te.__webglDepthbuffer),te.__webglMultisampledFramebuffer&&i.deleteFramebuffer(te.__webglMultisampledFramebuffer),te.__webglColorRenderbuffer)for(let O=0;O<te.__webglColorRenderbuffer.length;O++)te.__webglColorRenderbuffer[O]&&i.deleteRenderbuffer(te.__webglColorRenderbuffer[O]);te.__webglDepthRenderbuffer&&i.deleteRenderbuffer(te.__webglDepthRenderbuffer)}if(L.isWebGLMultipleRenderTargets)for(let O=0,N=T.length;O<N;O++){let I=n.get(T[O]);I.__webglTexture&&(i.deleteTexture(I.__webglTexture),o.memory.textures--),n.remove(T[O])}n.remove(T),n.remove(L)}a(j,"deallocateRenderTarget");let ae=0;function _e(){ae=0}a(_e,"resetTextureUnits");function D(){let L=ae;return L>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+L+" texture units while this GPU supports only "+r.maxTextures),ae+=1,L}a(D,"allocateTextureUnit");function z(L){let T=[];return T.push(L.wrapS),T.push(L.wrapT),T.push(L.wrapR||0),T.push(L.magFilter),T.push(L.minFilter),T.push(L.anisotropy),T.push(L.internalFormat),T.push(L.format),T.push(L.type),T.push(L.generateMipmaps),T.push(L.premultiplyAlpha),T.push(L.flipY),T.push(L.unpackAlignment),T.push(L.colorSpace),T.join()}a(z,"getTextureCacheKey");function se(L,T){let te=n.get(L);if(L.isVideoTexture&&St(L),L.isRenderTargetTexture===!1&&L.version>0&&te.__version!==L.version){let xe=L.image;if(xe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(xe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Se(te,L,T);return}}t.bindTexture(i.TEXTURE_2D,te.__webglTexture,i.TEXTURE0+T)}a(se,"setTexture2D");function fe(L,T){let te=n.get(L);if(L.version>0&&te.__version!==L.version){Se(te,L,T);return}t.bindTexture(i.TEXTURE_2D_ARRAY,te.__webglTexture,i.TEXTURE0+T)}a(fe,"setTexture2DArray");function le(L,T){let te=n.get(L);if(L.version>0&&te.__version!==L.version){Se(te,L,T);return}t.bindTexture(i.TEXTURE_3D,te.__webglTexture,i.TEXTURE0+T)}a(le,"setTexture3D");function ce(L,T){let te=n.get(L);if(L.version>0&&te.__version!==L.version){Be(te,L,T);return}t.bindTexture(i.TEXTURE_CUBE_MAP,te.__webglTexture,i.TEXTURE0+T)}a(ce,"setTextureCube");let ge={[bs]:i.REPEAT,[kn]:i.CLAMP_TO_EDGE,[A3]:i.MIRRORED_REPEAT},be={[wn]:i.NEAREST,[mg]:i.NEAREST_MIPMAP_NEAREST,[zp]:i.NEAREST_MIPMAP_LINEAR,[Ti]:i.LINEAR,[av]:i.LINEAR_MIPMAP_NEAREST,[yc]:i.LINEAR_MIPMAP_LINEAR},Oe={[bv]:i.NEVER,[vv]:i.ALWAYS,[Mv]:i.LESS,[eb]:i.LEQUAL,[xv]:i.EQUAL,[Tv]:i.GEQUAL,[yv]:i.GREATER,[Sv]:i.NOTEQUAL};function $(L,T,te){if(te?(i.texParameteri(L,i.TEXTURE_WRAP_S,ge[T.wrapS]),i.texParameteri(L,i.TEXTURE_WRAP_T,ge[T.wrapT]),(L===i.TEXTURE_3D||L===i.TEXTURE_2D_ARRAY)&&i.texParameteri(L,i.TEXTURE_WRAP_R,ge[T.wrapR]),i.texParameteri(L,i.TEXTURE_MAG_FILTER,be[T.magFilter]),i.texParameteri(L,i.TEXTURE_MIN_FILTER,be[T.minFilter])):(i.texParameteri(L,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(L,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),(L===i.TEXTURE_3D||L===i.TEXTURE_2D_ARRAY)&&i.texParameteri(L,i.TEXTURE_WRAP_R,i.CLAMP_TO_EDGE),(T.wrapS!==kn||T.wrapT!==kn)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),i.texParameteri(L,i.TEXTURE_MAG_FILTER,W(T.magFilter)),i.texParameteri(L,i.TEXTURE_MIN_FILTER,W(T.minFilter)),T.minFilter!==wn&&T.minFilter!==Ti&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),T.compareFunction&&(i.texParameteri(L,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(L,i.TEXTURE_COMPARE_FUNC,Oe[T.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){let xe=e.get("EXT_texture_filter_anisotropic");if(T.magFilter===wn||T.minFilter!==zp&&T.minFilter!==yc||T.type===ms&&e.has("OES_texture_float_linear")===!1||l===!1&&T.type===Sc&&e.has("OES_texture_half_float_linear")===!1)return;(T.anisotropy>1||n.get(T).__currentAnisotropy)&&(i.texParameterf(L,xe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(T.anisotropy,r.getMaxAnisotropy())),n.get(T).__currentAnisotropy=T.anisotropy)}}a($,"setTextureParameters");function me(L,T){let te=!1;L.__webglInit===void 0&&(L.__webglInit=!0,T.addEventListener("dispose",F));let xe=T.source,O=f.get(xe);O===void 0&&(O={},f.set(xe,O));let N=z(T);if(N!==L.__cacheKey){O[N]===void 0&&(O[N]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,te=!0),O[N].usedTimes++;let I=O[L.__cacheKey];I!==void 0&&(O[L.__cacheKey].usedTimes--,I.usedTimes===0&&U(T)),L.__cacheKey=N,L.__webglTexture=O[N].texture}return te}a(me,"initTexture");function Se(L,T,te){let xe=i.TEXTURE_2D;(T.isDataArrayTexture||T.isCompressedArrayTexture)&&(xe=i.TEXTURE_2D_ARRAY),T.isData3DTexture&&(xe=i.TEXTURE_3D);let O=me(L,T),N=T.source;t.bindTexture(xe,L.__webglTexture,i.TEXTURE0+te);let I=n.get(N);if(N.version!==I.__version||O===!0){t.activeTexture(i.TEXTURE0+te);let Z=vt.getPrimaries(vt.workingColorSpace),V=T.colorSpace===vi?null:vt.getPrimaries(T.colorSpace),G=T.colorSpace===vi||Z===V?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,T.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,T.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,T.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,G);let Y=R(T)&&g(T.image)===!1,k=M(T.image,Y,!1,r.maxTextureSize);k=at(T,k);let q=g(k)||l,v=s.convert(T.format,T.colorSpace),Q=s.convert(T.type),H=S(T.internalFormat,v,Q,T.colorSpace,T.isVideoTexture);$(xe,T,q);let ue,Pe=T.mipmaps,Ce=l&&T.isVideoTexture!==!0&&H!==$_,Ee=I.__version===void 0||O===!0,ve=C(T,k,q);if(T.isDepthTexture)H=i.DEPTH_COMPONENT,l?T.type===ms?H=i.DEPTH_COMPONENT32F:T.type===ps?H=i.DEPTH_COMPONENT24:T.type===to?H=i.DEPTH24_STENCIL8:H=i.DEPTH_COMPONENT16:T.type===ms&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),T.format===no&&H===i.DEPTH_COMPONENT&&T.type!==mm&&T.type!==ps&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),T.type=ps,Q=s.convert(T.type)),T.format===Ia&&H===i.DEPTH_COMPONENT&&(H=i.DEPTH_STENCIL,T.type!==to&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),T.type=to,Q=s.convert(T.type))),Ee&&(Ce?t.texStorage2D(i.TEXTURE_2D,1,H,k.width,k.height):t.texImage2D(i.TEXTURE_2D,0,H,k.width,k.height,0,v,Q,null));else if(T.isDataTexture)if(Pe.length>0&&q){Ce&&Ee&&t.texStorage2D(i.TEXTURE_2D,ve,H,Pe[0].width,Pe[0].height);for(let pe=0,X=Pe.length;pe<X;pe++)ue=Pe[pe],Ce?t.texSubImage2D(i.TEXTURE_2D,pe,0,0,ue.width,ue.height,v,Q,ue.data):t.texImage2D(i.TEXTURE_2D,pe,H,ue.width,ue.height,0,v,Q,ue.data);T.generateMipmaps=!1}else Ce?(Ee&&t.texStorage2D(i.TEXTURE_2D,ve,H,k.width,k.height),t.texSubImage2D(i.TEXTURE_2D,0,0,0,k.width,k.height,v,Q,k.data)):t.texImage2D(i.TEXTURE_2D,0,H,k.width,k.height,0,v,Q,k.data);else if(T.isCompressedTexture)if(T.isCompressedArrayTexture){Ce&&Ee&&t.texStorage3D(i.TEXTURE_2D_ARRAY,ve,H,Pe[0].width,Pe[0].height,k.depth);for(let pe=0,X=Pe.length;pe<X;pe++)ue=Pe[pe],T.format!==Zi?v!==null?Ce?t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,pe,0,0,0,ue.width,ue.height,k.depth,v,ue.data,0,0):t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,pe,H,ue.width,ue.height,k.depth,0,ue.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ce?t.texSubImage3D(i.TEXTURE_2D_ARRAY,pe,0,0,0,ue.width,ue.height,k.depth,v,Q,ue.data):t.texImage3D(i.TEXTURE_2D_ARRAY,pe,H,ue.width,ue.height,k.depth,0,v,Q,ue.data)}else{Ce&&Ee&&t.texStorage2D(i.TEXTURE_2D,ve,H,Pe[0].width,Pe[0].height);for(let pe=0,X=Pe.length;pe<X;pe++)ue=Pe[pe],T.format!==Zi?v!==null?Ce?t.compressedTexSubImage2D(i.TEXTURE_2D,pe,0,0,ue.width,ue.height,v,ue.data):t.compressedTexImage2D(i.TEXTURE_2D,pe,H,ue.width,ue.height,0,ue.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ce?t.texSubImage2D(i.TEXTURE_2D,pe,0,0,ue.width,ue.height,v,Q,ue.data):t.texImage2D(i.TEXTURE_2D,pe,H,ue.width,ue.height,0,v,Q,ue.data)}else if(T.isDataArrayTexture)Ce?(Ee&&t.texStorage3D(i.TEXTURE_2D_ARRAY,ve,H,k.width,k.height,k.depth),t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,k.width,k.height,k.depth,v,Q,k.data)):t.texImage3D(i.TEXTURE_2D_ARRAY,0,H,k.width,k.height,k.depth,0,v,Q,k.data);else if(T.isData3DTexture)Ce?(Ee&&t.texStorage3D(i.TEXTURE_3D,ve,H,k.width,k.height,k.depth),t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,k.width,k.height,k.depth,v,Q,k.data)):t.texImage3D(i.TEXTURE_3D,0,H,k.width,k.height,k.depth,0,v,Q,k.data);else if(T.isFramebufferTexture){if(Ee)if(Ce)t.texStorage2D(i.TEXTURE_2D,ve,H,k.width,k.height);else{let pe=k.width,X=k.height;for(let he=0;he<ve;he++)t.texImage2D(i.TEXTURE_2D,he,H,pe,X,0,v,Q,null),pe>>=1,X>>=1}}else if(Pe.length>0&&q){Ce&&Ee&&t.texStorage2D(i.TEXTURE_2D,ve,H,Pe[0].width,Pe[0].height);for(let pe=0,X=Pe.length;pe<X;pe++)ue=Pe[pe],Ce?t.texSubImage2D(i.TEXTURE_2D,pe,0,0,v,Q,ue):t.texImage2D(i.TEXTURE_2D,pe,H,v,Q,ue);T.generateMipmaps=!1}else Ce?(Ee&&t.texStorage2D(i.TEXTURE_2D,ve,H,k.width,k.height),t.texSubImage2D(i.TEXTURE_2D,0,0,0,v,Q,k)):t.texImage2D(i.TEXTURE_2D,0,H,v,Q,k);y(T,q)&&b(xe),I.__version=N.version,T.onUpdate&&T.onUpdate(T)}L.__version=T.version}a(Se,"uploadTexture");function Be(L,T,te){if(T.image.length!==6)return;let xe=me(L,T),O=T.source;t.bindTexture(i.TEXTURE_CUBE_MAP,L.__webglTexture,i.TEXTURE0+te);let N=n.get(O);if(O.version!==N.__version||xe===!0){t.activeTexture(i.TEXTURE0+te);let I=vt.getPrimaries(vt.workingColorSpace),Z=T.colorSpace===vi?null:vt.getPrimaries(T.colorSpace),V=T.colorSpace===vi||I===Z?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,T.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,T.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,T.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,V);let G=T.isCompressedTexture||T.image[0].isCompressedTexture,Y=T.image[0]&&T.image[0].isDataTexture,k=[];for(let pe=0;pe<6;pe++)!G&&!Y?k[pe]=M(T.image[pe],!1,!0,r.maxCubemapSize):k[pe]=Y?T.image[pe].image:T.image[pe],k[pe]=at(T,k[pe]);let q=k[0],v=g(q)||l,Q=s.convert(T.format,T.colorSpace),H=s.convert(T.type),ue=S(T.internalFormat,Q,H,T.colorSpace),Pe=l&&T.isVideoTexture!==!0,Ce=N.__version===void 0||xe===!0,Ee=C(T,q,v);$(i.TEXTURE_CUBE_MAP,T,v);let ve;if(G){Pe&&Ce&&t.texStorage2D(i.TEXTURE_CUBE_MAP,Ee,ue,q.width,q.height);for(let pe=0;pe<6;pe++){ve=k[pe].mipmaps;for(let X=0;X<ve.length;X++){let he=ve[X];T.format!==Zi?Q!==null?Pe?t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+pe,X,0,0,he.width,he.height,Q,he.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+pe,X,ue,he.width,he.height,0,he.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Pe?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+pe,X,0,0,he.width,he.height,Q,H,he.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+pe,X,ue,he.width,he.height,0,Q,H,he.data)}}}else{ve=T.mipmaps,Pe&&Ce&&(ve.length>0&&Ee++,t.texStorage2D(i.TEXTURE_CUBE_MAP,Ee,ue,k[0].width,k[0].height));for(let pe=0;pe<6;pe++)if(Y){Pe?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,0,0,k[pe].width,k[pe].height,Q,H,k[pe].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,ue,k[pe].width,k[pe].height,0,Q,H,k[pe].data);for(let X=0;X<ve.length;X++){let Re=ve[X].image[pe].image;Pe?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+pe,X+1,0,0,Re.width,Re.height,Q,H,Re.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+pe,X+1,ue,Re.width,Re.height,0,Q,H,Re.data)}}else{Pe?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,0,0,Q,H,k[pe]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+pe,0,ue,Q,H,k[pe]);for(let X=0;X<ve.length;X++){let he=ve[X];Pe?t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+pe,X+1,0,0,Q,H,he.image[pe]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+pe,X+1,ue,Q,H,he.image[pe])}}}y(T,v)&&b(i.TEXTURE_CUBE_MAP),N.__version=O.version,T.onUpdate&&T.onUpdate(T)}L.__version=T.version}a(Be,"uploadCubeTexture");function Le(L,T,te,xe,O,N){let I=s.convert(te.format,te.colorSpace),Z=s.convert(te.type),V=S(te.internalFormat,I,Z,te.colorSpace);if(!n.get(T).__hasExternalTextures){let Y=Math.max(1,T.width>>N),k=Math.max(1,T.height>>N);O===i.TEXTURE_3D||O===i.TEXTURE_2D_ARRAY?t.texImage3D(O,N,V,Y,k,T.depth,0,I,Z,null):t.texImage2D(O,N,V,Y,k,0,I,Z,null)}t.bindFramebuffer(i.FRAMEBUFFER,L),De(T)?c.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,xe,O,n.get(te).__webglTexture,0,tt(T)):(O===i.TEXTURE_2D||O>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&O<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,xe,O,n.get(te).__webglTexture,N),t.bindFramebuffer(i.FRAMEBUFFER,null)}a(Le,"setupFrameBufferTexture");function ze(L,T,te){if(i.bindRenderbuffer(i.RENDERBUFFER,L),T.depthBuffer&&!T.stencilBuffer){let xe=l===!0?i.DEPTH_COMPONENT24:i.DEPTH_COMPONENT16;if(te||De(T)){let O=T.depthTexture;O&&O.isDepthTexture&&(O.type===ms?xe=i.DEPTH_COMPONENT32F:O.type===ps&&(xe=i.DEPTH_COMPONENT24));let N=tt(T);De(T)?c.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,N,xe,T.width,T.height):i.renderbufferStorageMultisample(i.RENDERBUFFER,N,xe,T.width,T.height)}else i.renderbufferStorage(i.RENDERBUFFER,xe,T.width,T.height);i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.RENDERBUFFER,L)}else if(T.depthBuffer&&T.stencilBuffer){let xe=tt(T);te&&De(T)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,xe,i.DEPTH24_STENCIL8,T.width,T.height):De(T)?c.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,xe,i.DEPTH24_STENCIL8,T.width,T.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,T.width,T.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,L)}else{let xe=T.isWebGLMultipleRenderTargets===!0?T.texture:[T.texture];for(let O=0;O<xe.length;O++){let N=xe[O],I=s.convert(N.format,N.colorSpace),Z=s.convert(N.type),V=S(N.internalFormat,I,Z,N.colorSpace),G=tt(T);te&&De(T)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,G,V,T.width,T.height):De(T)?c.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,G,V,T.width,T.height):i.renderbufferStorage(i.RENDERBUFFER,V,T.width,T.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}a(ze,"setupRenderBufferStorage");function qe(L,T){if(T&&T.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,L),!(T.depthTexture&&T.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!n.get(T.depthTexture).__webglTexture||T.depthTexture.image.width!==T.width||T.depthTexture.image.height!==T.height)&&(T.depthTexture.image.width=T.width,T.depthTexture.image.height=T.height,T.depthTexture.needsUpdate=!0),se(T.depthTexture,0);let xe=n.get(T.depthTexture).__webglTexture,O=tt(T);if(T.depthTexture.format===no)De(T)?c.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,xe,0,O):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,xe,0);else if(T.depthTexture.format===Ia)De(T)?c.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,xe,0,O):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,xe,0);else throw new Error("Unknown depthTexture format")}a(qe,"setupDepthTexture");function Ze(L){let T=n.get(L),te=L.isWebGLCubeRenderTarget===!0;if(L.depthTexture&&!T.__autoAllocateDepthBuffer){if(te)throw new Error("target.depthTexture not supported in Cube render targets");qe(T.__webglFramebuffer,L)}else if(te){T.__webglDepthbuffer=[];for(let xe=0;xe<6;xe++)t.bindFramebuffer(i.FRAMEBUFFER,T.__webglFramebuffer[xe]),T.__webglDepthbuffer[xe]=i.createRenderbuffer(),ze(T.__webglDepthbuffer[xe],L,!1)}else t.bindFramebuffer(i.FRAMEBUFFER,T.__webglFramebuffer),T.__webglDepthbuffer=i.createRenderbuffer(),ze(T.__webglDepthbuffer,L,!1);t.bindFramebuffer(i.FRAMEBUFFER,null)}a(Ze,"setupDepthRenderbuffer");function st(L,T,te){let xe=n.get(L);T!==void 0&&Le(xe.__webglFramebuffer,L,L.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),te!==void 0&&Ze(L)}a(st,"rebindTextures");function B(L){let T=L.texture,te=n.get(L),xe=n.get(T);L.addEventListener("dispose",ee),L.isWebGLMultipleRenderTargets!==!0&&(xe.__webglTexture===void 0&&(xe.__webglTexture=i.createTexture()),xe.__version=T.version,o.memory.textures++);let O=L.isWebGLCubeRenderTarget===!0,N=L.isWebGLMultipleRenderTargets===!0,I=g(L)||l;if(O){te.__webglFramebuffer=[];for(let Z=0;Z<6;Z++)if(l&&T.mipmaps&&T.mipmaps.length>0){te.__webglFramebuffer[Z]=[];for(let V=0;V<T.mipmaps.length;V++)te.__webglFramebuffer[Z][V]=i.createFramebuffer()}else te.__webglFramebuffer[Z]=i.createFramebuffer()}else{if(l&&T.mipmaps&&T.mipmaps.length>0){te.__webglFramebuffer=[];for(let Z=0;Z<T.mipmaps.length;Z++)te.__webglFramebuffer[Z]=i.createFramebuffer()}else te.__webglFramebuffer=i.createFramebuffer();if(N)if(r.drawBuffers){let Z=L.texture;for(let V=0,G=Z.length;V<G;V++){let Y=n.get(Z[V]);Y.__webglTexture===void 0&&(Y.__webglTexture=i.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(l&&L.samples>0&&De(L)===!1){let Z=N?T:[T];te.__webglMultisampledFramebuffer=i.createFramebuffer(),te.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,te.__webglMultisampledFramebuffer);for(let V=0;V<Z.length;V++){let G=Z[V];te.__webglColorRenderbuffer[V]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,te.__webglColorRenderbuffer[V]);let Y=s.convert(G.format,G.colorSpace),k=s.convert(G.type),q=S(G.internalFormat,Y,k,G.colorSpace,L.isXRRenderTarget===!0),v=tt(L);i.renderbufferStorageMultisample(i.RENDERBUFFER,v,q,L.width,L.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+V,i.RENDERBUFFER,te.__webglColorRenderbuffer[V])}i.bindRenderbuffer(i.RENDERBUFFER,null),L.depthBuffer&&(te.__webglDepthRenderbuffer=i.createRenderbuffer(),ze(te.__webglDepthRenderbuffer,L,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(O){t.bindTexture(i.TEXTURE_CUBE_MAP,xe.__webglTexture),$(i.TEXTURE_CUBE_MAP,T,I);for(let Z=0;Z<6;Z++)if(l&&T.mipmaps&&T.mipmaps.length>0)for(let V=0;V<T.mipmaps.length;V++)Le(te.__webglFramebuffer[Z][V],L,T,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Z,V);else Le(te.__webglFramebuffer[Z],L,T,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Z,0);y(T,I)&&b(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(N){let Z=L.texture;for(let V=0,G=Z.length;V<G;V++){let Y=Z[V],k=n.get(Y);t.bindTexture(i.TEXTURE_2D,k.__webglTexture),$(i.TEXTURE_2D,Y,I),Le(te.__webglFramebuffer,L,Y,i.COLOR_ATTACHMENT0+V,i.TEXTURE_2D,0),y(Y,I)&&b(i.TEXTURE_2D)}t.unbindTexture()}else{let Z=i.TEXTURE_2D;if((L.isWebGL3DRenderTarget||L.isWebGLArrayRenderTarget)&&(l?Z=L.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(Z,xe.__webglTexture),$(Z,T,I),l&&T.mipmaps&&T.mipmaps.length>0)for(let V=0;V<T.mipmaps.length;V++)Le(te.__webglFramebuffer[V],L,T,i.COLOR_ATTACHMENT0,Z,V);else Le(te.__webglFramebuffer,L,T,i.COLOR_ATTACHMENT0,Z,0);y(T,I)&&b(Z),t.unbindTexture()}L.depthBuffer&&Ze(L)}a(B,"setupRenderTarget");function xt(L){let T=g(L)||l,te=L.isWebGLMultipleRenderTargets===!0?L.texture:[L.texture];for(let xe=0,O=te.length;xe<O;xe++){let N=te[xe];if(y(N,T)){let I=L.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:i.TEXTURE_2D,Z=n.get(N).__webglTexture;t.bindTexture(I,Z),b(I),t.unbindTexture()}}}a(xt,"updateRenderTargetMipmap");function Ge(L){if(l&&L.samples>0&&De(L)===!1){let T=L.isWebGLMultipleRenderTargets?L.texture:[L.texture],te=L.width,xe=L.height,O=i.COLOR_BUFFER_BIT,N=[],I=L.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Z=n.get(L),V=L.isWebGLMultipleRenderTargets===!0;if(V)for(let G=0;G<T.length;G++)t.bindFramebuffer(i.FRAMEBUFFER,Z.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+G,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,Z.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+G,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,Z.__webglMultisampledFramebuffer),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Z.__webglFramebuffer);for(let G=0;G<T.length;G++){N.push(i.COLOR_ATTACHMENT0+G),L.depthBuffer&&N.push(I);let Y=Z.__ignoreDepthValues!==void 0?Z.__ignoreDepthValues:!1;if(Y===!1&&(L.depthBuffer&&(O|=i.DEPTH_BUFFER_BIT),L.stencilBuffer&&(O|=i.STENCIL_BUFFER_BIT)),V&&i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,Z.__webglColorRenderbuffer[G]),Y===!0&&(i.invalidateFramebuffer(i.READ_FRAMEBUFFER,[I]),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[I])),V){let k=n.get(T[G]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,k,0)}i.blitFramebuffer(0,0,te,xe,0,0,te,xe,O,i.NEAREST),u&&i.invalidateFramebuffer(i.READ_FRAMEBUFFER,N)}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),V)for(let G=0;G<T.length;G++){t.bindFramebuffer(i.FRAMEBUFFER,Z.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+G,i.RENDERBUFFER,Z.__webglColorRenderbuffer[G]);let Y=n.get(T[G]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,Z.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+G,i.TEXTURE_2D,Y,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Z.__webglMultisampledFramebuffer)}}a(Ge,"updateMultisampleRenderTarget");function tt(L){return Math.min(r.maxSamples,L.samples)}a(tt,"getRenderTargetSamples");function De(L){let T=n.get(L);return l&&L.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&T.__useRenderToTexture!==!1}a(De,"useMultisampledRTT");function St(L){let T=o.render.frame;h.get(L)!==T&&(h.set(L,T),L.update())}a(St,"updateVideoTexture");function at(L,T){let te=L.colorSpace,xe=L.format,O=L.type;return L.isCompressedTexture===!0||L.isVideoTexture===!0||L.format===O3||te!==Ur&&te!==vi&&(vt.getTransfer(te)===Ut?l===!1?e.has("EXT_sRGB")===!0&&xe===Zi?(L.format=O3,L.minFilter=Ti,L.generateMipmaps=!1):T=Yh.sRGBToLinear(T):(xe!==Zi||O!==_s)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",te)),T}a(at,"verifyColorSpace"),this.allocateTextureUnit=D,this.resetTextureUnits=_e,this.setTexture2D=se,this.setTexture2DArray=fe,this.setTexture3D=le,this.setTextureCube=ce,this.rebindTextures=st,this.setupRenderTarget=B,this.updateRenderTargetMipmap=xt,this.updateMultisampleRenderTarget=Ge,this.setupDepthRenderbuffer=Ze,this.setupFrameBufferTexture=Le,this.useMultisampledRTT=De}a(Pw,"WebGLTextures");function Ew(i,e,t){let n=t.isWebGL2;function r(s,o=vi){let l,c=vt.getTransfer(o);if(s===_s)return i.UNSIGNED_BYTE;if(s===K_)return i.UNSIGNED_SHORT_4_4_4_4;if(s===Q_)return i.UNSIGNED_SHORT_5_5_5_1;if(s===lv)return i.BYTE;if(s===cv)return i.SHORT;if(s===mm)return i.UNSIGNED_SHORT;if(s===Y_)return i.INT;if(s===ps)return i.UNSIGNED_INT;if(s===ms)return i.FLOAT;if(s===Sc)return n?i.HALF_FLOAT:(l=e.get("OES_texture_half_float"),l!==null?l.HALF_FLOAT_OES:null);if(s===uv)return i.ALPHA;if(s===Zi)return i.RGBA;if(s===hv)return i.LUMINANCE;if(s===dv)return i.LUMINANCE_ALPHA;if(s===no)return i.DEPTH_COMPONENT;if(s===Ia)return i.DEPTH_STENCIL;if(s===O3)return l=e.get("EXT_sRGB"),l!==null?l.SRGB_ALPHA_EXT:null;if(s===fv)return i.RED;if(s===B_)return i.RED_INTEGER;if(s===pv)return i.RG;if(s===J_)return i.RG_INTEGER;if(s===z_)return i.RGBA_INTEGER;if(s===$p||s===jp||s===qp||s===e3)if(c===Ut)if(l=e.get("WEBGL_compressed_texture_s3tc_srgb"),l!==null){if(s===$p)return l.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===jp)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===qp)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===e3)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(l=e.get("WEBGL_compressed_texture_s3tc"),l!==null){if(s===$p)return l.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===jp)return l.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===qp)return l.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===e3)return l.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===Rg||s===gg||s===_g||s===bg)if(l=e.get("WEBGL_compressed_texture_pvrtc"),l!==null){if(s===Rg)return l.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===gg)return l.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===_g)return l.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===bg)return l.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===$_)return l=e.get("WEBGL_compressed_texture_etc1"),l!==null?l.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===Mg||s===xg)if(l=e.get("WEBGL_compressed_texture_etc"),l!==null){if(s===Mg)return c===Ut?l.COMPRESSED_SRGB8_ETC2:l.COMPRESSED_RGB8_ETC2;if(s===xg)return c===Ut?l.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:l.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===yg||s===Sg||s===Tg||s===vg||s===Ng||s===Pg||s===Eg||s===wg||s===Lg||s===Ag||s===Og||s===Vg||s===Ug||s===Ig)if(l=e.get("WEBGL_compressed_texture_astc"),l!==null){if(s===yg)return c===Ut?l.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:l.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===Sg)return c===Ut?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:l.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===Tg)return c===Ut?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:l.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===vg)return c===Ut?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:l.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===Ng)return c===Ut?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:l.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===Pg)return c===Ut?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:l.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===Eg)return c===Ut?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:l.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===wg)return c===Ut?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:l.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===Lg)return c===Ut?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:l.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===Ag)return c===Ut?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:l.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===Og)return c===Ut?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:l.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===Vg)return c===Ut?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:l.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===Ug)return c===Ut?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:l.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===Ig)return c===Ut?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:l.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===t3||s===Fg||s===Wg)if(l=e.get("EXT_texture_compression_bptc"),l!==null){if(s===t3)return c===Ut?l.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:l.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(s===Fg)return l.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(s===Wg)return l.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(s===mv||s===Cg||s===Zg||s===kg)if(l=e.get("EXT_texture_compression_rgtc"),l!==null){if(s===t3)return l.COMPRESSED_RED_RGTC1_EXT;if(s===Cg)return l.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===Zg)return l.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===kg)return l.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===to?n?i.UNSIGNED_INT_24_8:(l=e.get("WEBGL_depth_texture"),l!==null?l.UNSIGNED_INT_24_8_WEBGL:null):i[s]!==void 0?i[s]:null}return a(r,"convert"),{convert:r}}a(Ew,"WebGLUtils");var Q3=class extends Kn{static{a(this,"ArrayCamera")}constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}},Vr=class extends ln{static{a(this,"Group")}constructor(){super(),this.isGroup=!0,this.type="Group"}},ww={type:"move"},xc=class{static{a(this,"WebXRController")}constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Vr,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Vr,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new K,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new K),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Vr,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new K,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new K),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){let t=this._hand;if(t)for(let n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let r=null,s=null,o=null,l=this._targetRay,c=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(let M of e.hand.values()){let g=t.getJointPose(M,n),R=this._getHandJoint(u,M);g!==null&&(R.matrix.fromArray(g.transform.matrix),R.matrix.decompose(R.position,R.rotation,R.scale),R.matrixWorldNeedsUpdate=!0,R.jointRadius=g.radius),R.visible=g!==null}let h=u.joints["index-finger-tip"],d=u.joints["thumb-tip"],f=h.position.distanceTo(d.position),m=.02,_=.005;u.inputState.pinching&&f>m+_?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&f<=m-_&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));l!==null&&(r=t.getPose(e.targetRaySpace,n),r===null&&s!==null&&(r=s),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(ww)))}return l!==null&&(l.visible=r!==null),c!==null&&(c.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){let n=new Vr;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}},B3=class extends er{static{a(this,"WebXRManager")}constructor(e,t){super();let n=this,r=null,s=1,o=null,l="local-floor",c=1,u=null,h=null,d=null,f=null,m=null,_=null,M=t.getContextAttributes(),g=null,R=null,y=[],b=[],S=new nt,C=null,W=new Kn;W.layers.enable(1),W.viewport=new Tn;let F=new Kn;F.layers.enable(2),F.viewport=new Tn;let ee=[W,F],P=new Q3;P.layers.enable(1),P.layers.enable(2);let U=null,j=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function($){let me=y[$];return me===void 0&&(me=new xc,y[$]=me),me.getTargetRaySpace()},this.getControllerGrip=function($){let me=y[$];return me===void 0&&(me=new xc,y[$]=me),me.getGripSpace()},this.getHand=function($){let me=y[$];return me===void 0&&(me=new xc,y[$]=me),me.getHandSpace()};function ae($){let me=b.indexOf($.inputSource);if(me===-1)return;let Se=y[me];Se!==void 0&&(Se.update($.inputSource,$.frame,u||o),Se.dispatchEvent({type:$.type,data:$.inputSource}))}a(ae,"onSessionEvent");function _e(){r.removeEventListener("select",ae),r.removeEventListener("selectstart",ae),r.removeEventListener("selectend",ae),r.removeEventListener("squeeze",ae),r.removeEventListener("squeezestart",ae),r.removeEventListener("squeezeend",ae),r.removeEventListener("end",_e),r.removeEventListener("inputsourceschange",D);for(let $=0;$<y.length;$++){let me=b[$];me!==null&&(b[$]=null,y[$].disconnect(me))}U=null,j=null,e.setRenderTarget(g),m=null,f=null,d=null,r=null,R=null,Oe.stop(),n.isPresenting=!1,e.setPixelRatio(C),e.setSize(S.width,S.height,!1),n.dispatchEvent({type:"sessionend"})}a(_e,"onSessionEnd"),this.setFramebufferScaleFactor=function($){s=$,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function($){l=$,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function($){u=$},this.getBaseLayer=function(){return f!==null?f:m},this.getBinding=function(){return d},this.getFrame=function(){return _},this.getSession=function(){return r},this.setSession=async function($){if(r=$,r!==null){if(g=e.getRenderTarget(),r.addEventListener("select",ae),r.addEventListener("selectstart",ae),r.addEventListener("selectend",ae),r.addEventListener("squeeze",ae),r.addEventListener("squeezestart",ae),r.addEventListener("squeezeend",ae),r.addEventListener("end",_e),r.addEventListener("inputsourceschange",D),M.xrCompatible!==!0&&await t.makeXRCompatible(),C=e.getPixelRatio(),e.getSize(S),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){let me={antialias:r.renderState.layers===void 0?M.antialias:!0,alpha:!0,depth:M.depth,stencil:M.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(r,t,me),r.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),R=new Ir(m.framebufferWidth,m.framebufferHeight,{format:Zi,type:_s,colorSpace:e.outputColorSpace,stencilBuffer:M.stencil})}else{let me=null,Se=null,Be=null;M.depth&&(Be=M.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,me=M.stencil?Ia:no,Se=M.stencil?to:ps);let Le={colorFormat:t.RGBA8,depthFormat:Be,scaleFactor:s};d=new XRWebGLBinding(r,t),f=d.createProjectionLayer(Le),r.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),R=new Ir(f.textureWidth,f.textureHeight,{format:Zi,type:_s,depthTexture:new nd(f.textureWidth,f.textureHeight,Se,void 0,void 0,void 0,void 0,void 0,void 0,me),stencilBuffer:M.stencil,colorSpace:e.outputColorSpace,samples:M.antialias?4:0});let ze=e.properties.get(R);ze.__ignoreDepthValues=f.ignoreDepthValues}R.isXRRenderTarget=!0,this.setFoveation(c),u=null,o=await r.requestReferenceSpace(l),Oe.setContext(r),Oe.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function D($){for(let me=0;me<$.removed.length;me++){let Se=$.removed[me],Be=b.indexOf(Se);Be>=0&&(b[Be]=null,y[Be].disconnect(Se))}for(let me=0;me<$.added.length;me++){let Se=$.added[me],Be=b.indexOf(Se);if(Be===-1){for(let ze=0;ze<y.length;ze++)if(ze>=b.length){b.push(Se),Be=ze;break}else if(b[ze]===null){b[ze]=Se,Be=ze;break}if(Be===-1)break}let Le=y[Be];Le&&Le.connect(Se)}}a(D,"onInputSourcesChange");let z=new K,se=new K;function fe($,me,Se){z.setFromMatrixPosition(me.matrixWorld),se.setFromMatrixPosition(Se.matrixWorld);let Be=z.distanceTo(se),Le=me.projectionMatrix.elements,ze=Se.projectionMatrix.elements,qe=Le[14]/(Le[10]-1),Ze=Le[14]/(Le[10]+1),st=(Le[9]+1)/Le[5],B=(Le[9]-1)/Le[5],xt=(Le[8]-1)/Le[0],Ge=(ze[8]+1)/ze[0],tt=qe*xt,De=qe*Ge,St=Be/(-xt+Ge),at=St*-xt;me.matrixWorld.decompose($.position,$.quaternion,$.scale),$.translateX(at),$.translateZ(St),$.matrixWorld.compose($.position,$.quaternion,$.scale),$.matrixWorldInverse.copy($.matrixWorld).invert();let L=qe+St,T=Ze+St,te=tt-at,xe=De+(Be-at),O=st*Ze/T*L,N=B*Ze/T*L;$.projectionMatrix.makePerspective(te,xe,O,N,L,T),$.projectionMatrixInverse.copy($.projectionMatrix).invert()}a(fe,"setProjectionFromUnion");function le($,me){me===null?$.matrixWorld.copy($.matrix):$.matrixWorld.multiplyMatrices(me.matrixWorld,$.matrix),$.matrixWorldInverse.copy($.matrixWorld).invert()}a(le,"updateCamera"),this.updateCamera=function($){if(r===null)return;P.near=F.near=W.near=$.near,P.far=F.far=W.far=$.far,(U!==P.near||j!==P.far)&&(r.updateRenderState({depthNear:P.near,depthFar:P.far}),U=P.near,j=P.far);let me=$.parent,Se=P.cameras;le(P,me);for(let Be=0;Be<Se.length;Be++)le(Se[Be],me);Se.length===2?fe(P,W,F):P.projectionMatrix.copy(W.projectionMatrix),ce($,P,me)};function ce($,me,Se){Se===null?$.matrix.copy(me.matrixWorld):($.matrix.copy(Se.matrixWorld),$.matrix.invert(),$.matrix.multiply(me.matrixWorld)),$.matrix.decompose($.position,$.quaternion,$.scale),$.updateMatrixWorld(!0),$.projectionMatrix.copy(me.projectionMatrix),$.projectionMatrixInverse.copy(me.projectionMatrixInverse),$.isPerspectiveCamera&&($.fov=Tc*2*Math.atan(1/$.projectionMatrix.elements[5]),$.zoom=1)}a(ce,"updateUserCamera"),this.getCamera=function(){return P},this.getFoveation=function(){if(!(f===null&&m===null))return c},this.setFoveation=function($){c=$,f!==null&&(f.fixedFoveation=$),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=$)};let ge=null;function be($,me){if(h=me.getViewerPose(u||o),_=me,h!==null){let Se=h.views;m!==null&&(e.setRenderTargetFramebuffer(R,m.framebuffer),e.setRenderTarget(R));let Be=!1;Se.length!==P.cameras.length&&(P.cameras.length=0,Be=!0);for(let Le=0;Le<Se.length;Le++){let ze=Se[Le],qe=null;if(m!==null)qe=m.getViewport(ze);else{let st=d.getViewSubImage(f,ze);qe=st.viewport,Le===0&&(e.setRenderTargetTextures(R,st.colorTexture,f.ignoreDepthValues?void 0:st.depthStencilTexture),e.setRenderTarget(R))}let Ze=ee[Le];Ze===void 0&&(Ze=new Kn,Ze.layers.enable(Le),Ze.viewport=new Tn,ee[Le]=Ze),Ze.matrix.fromArray(ze.transform.matrix),Ze.matrix.decompose(Ze.position,Ze.quaternion,Ze.scale),Ze.projectionMatrix.fromArray(ze.projectionMatrix),Ze.projectionMatrixInverse.copy(Ze.projectionMatrix).invert(),Ze.viewport.set(qe.x,qe.y,qe.width,qe.height),Le===0&&(P.matrix.copy(Ze.matrix),P.matrix.decompose(P.position,P.quaternion,P.scale)),Be===!0&&P.cameras.push(Ze)}}for(let Se=0;Se<y.length;Se++){let Be=b[Se],Le=y[Se];Be!==null&&Le!==void 0&&Le.update(Be,me,u||o)}ge&&ge($,me),me.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:me}),_=null}a(be,"onAnimationFrame");let Oe=new sb;Oe.setAnimationLoop(be),this.setAnimationLoop=function($){ge=$},this.dispose=function(){}}};function Lw(i,e){function t(g,R){g.matrixAutoUpdate===!0&&g.updateMatrix(),R.value.copy(g.matrix)}a(t,"refreshTransformUniform");function n(g,R){R.color.getRGB(g.fogColor.value,rb(i)),R.isFog?(g.fogNear.value=R.near,g.fogFar.value=R.far):R.isFogExp2&&(g.fogDensity.value=R.density)}a(n,"refreshFogUniforms");function r(g,R,y,b,S){R.isMeshBasicMaterial||R.isMeshLambertMaterial?s(g,R):R.isMeshToonMaterial?(s(g,R),d(g,R)):R.isMeshPhongMaterial?(s(g,R),h(g,R)):R.isMeshStandardMaterial?(s(g,R),f(g,R),R.isMeshPhysicalMaterial&&m(g,R,S)):R.isMeshMatcapMaterial?(s(g,R),_(g,R)):R.isMeshDepthMaterial?s(g,R):R.isMeshDistanceMaterial?(s(g,R),M(g,R)):R.isMeshNormalMaterial?s(g,R):R.isLineBasicMaterial?(o(g,R),R.isLineDashedMaterial&&l(g,R)):R.isPointsMaterial?c(g,R,y,b):R.isSpriteMaterial?u(g,R):R.isShadowMaterial?(g.color.value.copy(R.color),g.opacity.value=R.opacity):R.isShaderMaterial&&(R.uniformsNeedUpdate=!1)}a(r,"refreshMaterialUniforms");function s(g,R){g.opacity.value=R.opacity,R.color&&g.diffuse.value.copy(R.color),R.emissive&&g.emissive.value.copy(R.emissive).multiplyScalar(R.emissiveIntensity),R.map&&(g.map.value=R.map,t(R.map,g.mapTransform)),R.alphaMap&&(g.alphaMap.value=R.alphaMap,t(R.alphaMap,g.alphaMapTransform)),R.bumpMap&&(g.bumpMap.value=R.bumpMap,t(R.bumpMap,g.bumpMapTransform),g.bumpScale.value=R.bumpScale,R.side===Ln&&(g.bumpScale.value*=-1)),R.normalMap&&(g.normalMap.value=R.normalMap,t(R.normalMap,g.normalMapTransform),g.normalScale.value.copy(R.normalScale),R.side===Ln&&g.normalScale.value.negate()),R.displacementMap&&(g.displacementMap.value=R.displacementMap,t(R.displacementMap,g.displacementMapTransform),g.displacementScale.value=R.displacementScale,g.displacementBias.value=R.displacementBias),R.emissiveMap&&(g.emissiveMap.value=R.emissiveMap,t(R.emissiveMap,g.emissiveMapTransform)),R.specularMap&&(g.specularMap.value=R.specularMap,t(R.specularMap,g.specularMapTransform)),R.alphaTest>0&&(g.alphaTest.value=R.alphaTest);let y=e.get(R).envMap;if(y&&(g.envMap.value=y,g.flipEnvMap.value=y.isCubeTexture&&y.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=R.reflectivity,g.ior.value=R.ior,g.refractionRatio.value=R.refractionRatio),R.lightMap){g.lightMap.value=R.lightMap;let b=i._useLegacyLights===!0?Math.PI:1;g.lightMapIntensity.value=R.lightMapIntensity*b,t(R.lightMap,g.lightMapTransform)}R.aoMap&&(g.aoMap.value=R.aoMap,g.aoMapIntensity.value=R.aoMapIntensity,t(R.aoMap,g.aoMapTransform))}a(s,"refreshUniformsCommon");function o(g,R){g.diffuse.value.copy(R.color),g.opacity.value=R.opacity,R.map&&(g.map.value=R.map,t(R.map,g.mapTransform))}a(o,"refreshUniformsLine");function l(g,R){g.dashSize.value=R.dashSize,g.totalSize.value=R.dashSize+R.gapSize,g.scale.value=R.scale}a(l,"refreshUniformsDash");function c(g,R,y,b){g.diffuse.value.copy(R.color),g.opacity.value=R.opacity,g.size.value=R.size*y,g.scale.value=b*.5,R.map&&(g.map.value=R.map,t(R.map,g.uvTransform)),R.alphaMap&&(g.alphaMap.value=R.alphaMap,t(R.alphaMap,g.alphaMapTransform)),R.alphaTest>0&&(g.alphaTest.value=R.alphaTest)}a(c,"refreshUniformsPoints");function u(g,R){g.diffuse.value.copy(R.color),g.opacity.value=R.opacity,g.rotation.value=R.rotation,R.map&&(g.map.value=R.map,t(R.map,g.mapTransform)),R.alphaMap&&(g.alphaMap.value=R.alphaMap,t(R.alphaMap,g.alphaMapTransform)),R.alphaTest>0&&(g.alphaTest.value=R.alphaTest)}a(u,"refreshUniformsSprites");function h(g,R){g.specular.value.copy(R.specular),g.shininess.value=Math.max(R.shininess,1e-4)}a(h,"refreshUniformsPhong");function d(g,R){R.gradientMap&&(g.gradientMap.value=R.gradientMap)}a(d,"refreshUniformsToon");function f(g,R){g.metalness.value=R.metalness,R.metalnessMap&&(g.metalnessMap.value=R.metalnessMap,t(R.metalnessMap,g.metalnessMapTransform)),g.roughness.value=R.roughness,R.roughnessMap&&(g.roughnessMap.value=R.roughnessMap,t(R.roughnessMap,g.roughnessMapTransform)),e.get(R).envMap&&(g.envMapIntensity.value=R.envMapIntensity)}a(f,"refreshUniformsStandard");function m(g,R,y){g.ior.value=R.ior,R.sheen>0&&(g.sheenColor.value.copy(R.sheenColor).multiplyScalar(R.sheen),g.sheenRoughness.value=R.sheenRoughness,R.sheenColorMap&&(g.sheenColorMap.value=R.sheenColorMap,t(R.sheenColorMap,g.sheenColorMapTransform)),R.sheenRoughnessMap&&(g.sheenRoughnessMap.value=R.sheenRoughnessMap,t(R.sheenRoughnessMap,g.sheenRoughnessMapTransform))),R.clearcoat>0&&(g.clearcoat.value=R.clearcoat,g.clearcoatRoughness.value=R.clearcoatRoughness,R.clearcoatMap&&(g.clearcoatMap.value=R.clearcoatMap,t(R.clearcoatMap,g.clearcoatMapTransform)),R.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=R.clearcoatRoughnessMap,t(R.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),R.clearcoatNormalMap&&(g.clearcoatNormalMap.value=R.clearcoatNormalMap,t(R.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(R.clearcoatNormalScale),R.side===Ln&&g.clearcoatNormalScale.value.negate())),R.iridescence>0&&(g.iridescence.value=R.iridescence,g.iridescenceIOR.value=R.iridescenceIOR,g.iridescenceThicknessMinimum.value=R.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=R.iridescenceThicknessRange[1],R.iridescenceMap&&(g.iridescenceMap.value=R.iridescenceMap,t(R.iridescenceMap,g.iridescenceMapTransform)),R.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=R.iridescenceThicknessMap,t(R.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),R.transmission>0&&(g.transmission.value=R.transmission,g.transmissionSamplerMap.value=y.texture,g.transmissionSamplerSize.value.set(y.width,y.height),R.transmissionMap&&(g.transmissionMap.value=R.transmissionMap,t(R.transmissionMap,g.transmissionMapTransform)),g.thickness.value=R.thickness,R.thicknessMap&&(g.thicknessMap.value=R.thicknessMap,t(R.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=R.attenuationDistance,g.attenuationColor.value.copy(R.attenuationColor)),R.anisotropy>0&&(g.anisotropyVector.value.set(R.anisotropy*Math.cos(R.anisotropyRotation),R.anisotropy*Math.sin(R.anisotropyRotation)),R.anisotropyMap&&(g.anisotropyMap.value=R.anisotropyMap,t(R.anisotropyMap,g.anisotropyMapTransform))),g.specularIntensity.value=R.specularIntensity,g.specularColor.value.copy(R.specularColor),R.specularColorMap&&(g.specularColorMap.value=R.specularColorMap,t(R.specularColorMap,g.specularColorMapTransform)),R.specularIntensityMap&&(g.specularIntensityMap.value=R.specularIntensityMap,t(R.specularIntensityMap,g.specularIntensityMapTransform))}a(m,"refreshUniformsPhysical");function _(g,R){R.matcap&&(g.matcap.value=R.matcap)}a(_,"refreshUniformsMatcap");function M(g,R){let y=e.get(R).light;g.referencePosition.value.setFromMatrixPosition(y.matrixWorld),g.nearDistance.value=y.shadow.camera.near,g.farDistance.value=y.shadow.camera.far}return a(M,"refreshUniformsDistance"),{refreshFogUniforms:n,refreshMaterialUniforms:r}}a(Lw,"WebGLMaterials");function Aw(i,e,t,n){let r={},s={},o=[],l=t.isWebGL2?i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS):0;function c(y,b){let S=b.program;n.uniformBlockBinding(y,S)}a(c,"bind");function u(y,b){let S=r[y.id];S===void 0&&(_(y),S=h(y),r[y.id]=S,y.addEventListener("dispose",g));let C=b.program;n.updateUBOMapping(y,C);let W=e.render.frame;s[y.id]!==W&&(f(y),s[y.id]=W)}a(u,"update");function h(y){let b=d();y.__bindingPointIndex=b;let S=i.createBuffer(),C=y.__size,W=y.usage;return i.bindBuffer(i.UNIFORM_BUFFER,S),i.bufferData(i.UNIFORM_BUFFER,C,W),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,b,S),S}a(h,"createBuffer");function d(){for(let y=0;y<l;y++)if(o.indexOf(y)===-1)return o.push(y),y;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}a(d,"allocateBindingPointIndex");function f(y){let b=r[y.id],S=y.uniforms,C=y.__cache;i.bindBuffer(i.UNIFORM_BUFFER,b);for(let W=0,F=S.length;W<F;W++){let ee=Array.isArray(S[W])?S[W]:[S[W]];for(let P=0,U=ee.length;P<U;P++){let j=ee[P];if(m(j,W,P,C)===!0){let ae=j.__offset,_e=Array.isArray(j.value)?j.value:[j.value],D=0;for(let z=0;z<_e.length;z++){let se=_e[z],fe=M(se);typeof se=="number"||typeof se=="boolean"?(j.__data[0]=se,i.bufferSubData(i.UNIFORM_BUFFER,ae+D,j.__data)):se.isMatrix3?(j.__data[0]=se.elements[0],j.__data[1]=se.elements[1],j.__data[2]=se.elements[2],j.__data[3]=0,j.__data[4]=se.elements[3],j.__data[5]=se.elements[4],j.__data[6]=se.elements[5],j.__data[7]=0,j.__data[8]=se.elements[6],j.__data[9]=se.elements[7],j.__data[10]=se.elements[8],j.__data[11]=0):(se.toArray(j.__data,D),D+=fe.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,ae,j.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}a(f,"updateBufferData");function m(y,b,S,C){let W=y.value,F=b+"_"+S;if(C[F]===void 0)return typeof W=="number"||typeof W=="boolean"?C[F]=W:C[F]=W.clone(),!0;{let ee=C[F];if(typeof W=="number"||typeof W=="boolean"){if(ee!==W)return C[F]=W,!0}else if(ee.equals(W)===!1)return ee.copy(W),!0}return!1}a(m,"hasUniformChanged");function _(y){let b=y.uniforms,S=0,C=16;for(let F=0,ee=b.length;F<ee;F++){let P=Array.isArray(b[F])?b[F]:[b[F]];for(let U=0,j=P.length;U<j;U++){let ae=P[U],_e=Array.isArray(ae.value)?ae.value:[ae.value];for(let D=0,z=_e.length;D<z;D++){let se=_e[D],fe=M(se),le=S%C;le!==0&&C-le<fe.boundary&&(S+=C-le),ae.__data=new Float32Array(fe.storage/Float32Array.BYTES_PER_ELEMENT),ae.__offset=S,S+=fe.storage}}}let W=S%C;return W>0&&(S+=C-W),y.__size=S,y.__cache={},this}a(_,"prepareUniformsGroup");function M(y){let b={boundary:0,storage:0};return typeof y=="number"||typeof y=="boolean"?(b.boundary=4,b.storage=4):y.isVector2?(b.boundary=8,b.storage=8):y.isVector3||y.isColor?(b.boundary=16,b.storage=12):y.isVector4?(b.boundary=16,b.storage=16):y.isMatrix3?(b.boundary=48,b.storage=48):y.isMatrix4?(b.boundary=64,b.storage=64):y.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",y),b}a(M,"getUniformSize");function g(y){let b=y.target;b.removeEventListener("dispose",g);let S=o.indexOf(b.__bindingPointIndex);o.splice(S,1),i.deleteBuffer(r[b.id]),delete r[b.id],delete s[b.id]}a(g,"onUniformsGroupsDispose");function R(){for(let y in r)i.deleteBuffer(r[y]);o=[],r={},s={}}return a(R,"dispose"),{bind:c,update:u,dispose:R}}a(Aw,"WebGLUniformsGroups");var Pc=class{static{a(this,"WebGLRenderer")}constructor(e={}){let{canvas:t=kv(),context:n=null,depth:r=!0,stencil:s=!0,alpha:o=!1,antialias:l=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:u=!1,powerPreference:h="default",failIfMajorPerformanceCaveat:d=!1}=e;this.isWebGLRenderer=!0;let f;n!==null?f=n.getContextAttributes().alpha:f=o;let m=new Uint32Array(4),_=new Int32Array(4),M=null,g=null,R=[],y=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=on,this._useLegacyLights=!1,this.toneMapping=gs,this.toneMappingExposure=1;let b=this,S=!1,C=0,W=0,F=null,ee=-1,P=null,U=new Tn,j=new Tn,ae=null,_e=new ct(0),D=0,z=t.width,se=t.height,fe=1,le=null,ce=null,ge=new Tn(0,0,z,se),be=new Tn(0,0,z,se),Oe=!1,$=new Nc,me=!1,Se=!1,Be=null,Le=new an,ze=new nt,qe=new K,Ze={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function st(){return F===null?fe:1}a(st,"getTargetPixelRatio");let B=n;function xt(E,J){for(let ie=0;ie<E.length;ie++){let oe=E[ie],ne=t.getContext(oe,J);if(ne!==null)return ne}return null}a(xt,"getContext");try{let E={alpha:!0,depth:r,stencil:s,antialias:l,premultipliedAlpha:c,preserveDrawingBuffer:u,powerPreference:h,failIfMajorPerformanceCaveat:d};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${fm}`),t.addEventListener("webglcontextlost",pe,!1),t.addEventListener("webglcontextrestored",X,!1),t.addEventListener("webglcontextcreationerror",he,!1),B===null){let J=["webgl2","webgl","experimental-webgl"];if(b.isWebGL1Renderer===!0&&J.shift(),B=xt(J,E),B===null)throw xt(J)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&B instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),B.getShaderPrecisionFormat===void 0&&(B.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(E){throw console.error("THREE.WebGLRenderer: "+E.message),E}let Ge,tt,De,St,at,L,T,te,xe,O,N,I,Z,V,G,Y,k,q,v,Q,H,ue,Pe,Ce;function Ee(){Ge=new zP(B),tt=new DP(B,Ge,e),Ge.init(tt),ue=new Ew(B,Ge,tt),De=new Nw(B,Ge,tt),St=new qP(B),at=new pw,L=new Pw(B,Ge,De,at,tt,ue,St),T=new KP(b),te=new JP(b),xe=new a0(B,tt),Pe=new HP(B,Ge,xe,tt),O=new $P(B,xe,St,Pe),N=new iE(B,O,xe,St),v=new nE(B,tt,L),Y=new YP(at),I=new fw(b,T,te,Ge,tt,Pe,Y),Z=new Lw(b,at),V=new Rw,G=new yw(Ge,tt),q=new XP(b,T,te,De,N,f,c),k=new vw(b,N,tt),Ce=new Aw(B,St,tt,De),Q=new GP(B,Ge,St,tt),H=new jP(B,Ge,St,tt),St.programs=I.programs,b.capabilities=tt,b.extensions=Ge,b.properties=at,b.renderLists=V,b.shadowMap=k,b.state=De,b.info=St}a(Ee,"initGLContext"),Ee();let ve=new B3(b,B);this.xr=ve,this.getContext=function(){return B},this.getContextAttributes=function(){return B.getContextAttributes()},this.forceContextLoss=function(){let E=Ge.get("WEBGL_lose_context");E&&E.loseContext()},this.forceContextRestore=function(){let E=Ge.get("WEBGL_lose_context");E&&E.restoreContext()},this.getPixelRatio=function(){return fe},this.setPixelRatio=function(E){E!==void 0&&(fe=E,this.setSize(z,se,!1))},this.getSize=function(E){return E.set(z,se)},this.setSize=function(E,J,ie=!0){if(ve.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}z=E,se=J,t.width=Math.floor(E*fe),t.height=Math.floor(J*fe),ie===!0&&(t.style.width=E+"px",t.style.height=J+"px"),this.setViewport(0,0,E,J)},this.getDrawingBufferSize=function(E){return E.set(z*fe,se*fe).floor()},this.setDrawingBufferSize=function(E,J,ie){z=E,se=J,fe=ie,t.width=Math.floor(E*ie),t.height=Math.floor(J*ie),this.setViewport(0,0,E,J)},this.getCurrentViewport=function(E){return E.copy(U)},this.getViewport=function(E){return E.copy(ge)},this.setViewport=function(E,J,ie,oe){E.isVector4?ge.set(E.x,E.y,E.z,E.w):ge.set(E,J,ie,oe),De.viewport(U.copy(ge).multiplyScalar(fe).floor())},this.getScissor=function(E){return E.copy(be)},this.setScissor=function(E,J,ie,oe){E.isVector4?be.set(E.x,E.y,E.z,E.w):be.set(E,J,ie,oe),De.scissor(j.copy(be).multiplyScalar(fe).floor())},this.getScissorTest=function(){return Oe},this.setScissorTest=function(E){De.setScissorTest(Oe=E)},this.setOpaqueSort=function(E){le=E},this.setTransparentSort=function(E){ce=E},this.getClearColor=function(E){return E.copy(q.getClearColor())},this.setClearColor=function(){q.setClearColor.apply(q,arguments)},this.getClearAlpha=function(){return q.getClearAlpha()},this.setClearAlpha=function(){q.setClearAlpha.apply(q,arguments)},this.clear=function(E=!0,J=!0,ie=!0){let oe=0;if(E){let ne=!1;if(F!==null){let ke=F.texture.format;ne=ke===z_||ke===J_||ke===B_}if(ne){let ke=F.texture.type,et=ke===_s||ke===ps||ke===mm||ke===to||ke===K_||ke===Q_,ot=q.getClearColor(),lt=q.getClearAlpha(),pt=ot.r,ut=ot.g,ht=ot.b;et?(m[0]=pt,m[1]=ut,m[2]=ht,m[3]=lt,B.clearBufferuiv(B.COLOR,0,m)):(_[0]=pt,_[1]=ut,_[2]=ht,_[3]=lt,B.clearBufferiv(B.COLOR,0,_))}else oe|=B.COLOR_BUFFER_BIT}J&&(oe|=B.DEPTH_BUFFER_BIT),ie&&(oe|=B.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),B.clear(oe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",pe,!1),t.removeEventListener("webglcontextrestored",X,!1),t.removeEventListener("webglcontextcreationerror",he,!1),V.dispose(),G.dispose(),at.dispose(),T.dispose(),te.dispose(),N.dispose(),Pe.dispose(),Ce.dispose(),I.dispose(),ve.dispose(),ve.removeEventListener("sessionstart",Ie),ve.removeEventListener("sessionend",ye),Be&&(Be.dispose(),Be=null),Fe.stop()};function pe(E){E.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),S=!0}a(pe,"onContextLost");function X(){console.log("THREE.WebGLRenderer: Context Restored."),S=!1;let E=St.autoReset,J=k.enabled,ie=k.autoUpdate,oe=k.needsUpdate,ne=k.type;Ee(),St.autoReset=E,k.enabled=J,k.autoUpdate=ie,k.needsUpdate=oe,k.type=ne}a(X,"onContextRestore");function he(E){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",E.statusMessage)}a(he,"onContextCreationError");function Re(E){let J=E.target;J.removeEventListener("dispose",Re),we(J)}a(Re,"onMaterialDispose");function we(E){Ue(E),at.remove(E)}a(we,"deallocateMaterial");function Ue(E){let J=at.get(E).programs;J!==void 0&&(J.forEach(function(ie){I.releaseProgram(ie)}),E.isShaderMaterial&&I.releaseShaderCache(E))}a(Ue,"releaseMaterialProgramReferences"),this.renderBufferDirect=function(E,J,ie,oe,ne,ke){J===null&&(J=Ze);let et=ne.isMesh&&ne.matrixWorld.determinant()<0,ot=_S(E,J,ie,oe,ne);De.setMaterial(oe,et);let lt=ie.index,pt=1;if(oe.wireframe===!0){if(lt=O.getWireframeAttribute(ie),lt===void 0)return;pt=2}let ut=ie.drawRange,ht=ie.attributes.position,qt=ut.start*pt,ci=(ut.start+ut.count)*pt;ke!==null&&(qt=Math.max(qt,ke.start*pt),ci=Math.min(ci,(ke.start+ke.count)*pt)),lt!==null?(qt=Math.max(qt,0),ci=Math.min(ci,lt.count)):ht!=null&&(qt=Math.max(qt,0),ci=Math.min(ci,ht.count));let xn=ci-qt;if(xn<0||xn===1/0)return;Pe.setup(ne,oe,ot,ie,lt);let dr,Xt=Q;if(lt!==null&&(dr=xe.get(lt),Xt=H,Xt.setIndex(dr)),ne.isMesh)oe.wireframe===!0?(De.setLineWidth(oe.wireframeLinewidth*st()),Xt.setMode(B.LINES)):Xt.setMode(B.TRIANGLES);else if(ne.isLine){let mt=oe.linewidth;mt===void 0&&(mt=1),De.setLineWidth(mt*st()),ne.isLineSegments?Xt.setMode(B.LINES):ne.isLineLoop?Xt.setMode(B.LINE_LOOP):Xt.setMode(B.LINE_STRIP)}else ne.isPoints?Xt.setMode(B.POINTS):ne.isSprite&&Xt.setMode(B.TRIANGLES);if(ne.isBatchedMesh)Xt.renderMultiDraw(ne._multiDrawStarts,ne._multiDrawCounts,ne._multiDrawCount);else if(ne.isInstancedMesh)Xt.renderInstances(qt,xn,ne.count);else if(ie.isInstancedBufferGeometry){let mt=ie._maxInstanceCount!==void 0?ie._maxInstanceCount:1/0,Ff=Math.min(ie.instanceCount,mt);Xt.renderInstances(qt,xn,Ff)}else Xt.render(qt,xn)};function rt(E,J,ie){E.transparent===!0&&E.side===Ci&&E.forceSinglePass===!1?(E.side=Ln,E.needsUpdate=!0,lu(E,J,ie),E.side=qi,E.needsUpdate=!0,lu(E,J,ie),E.side=Ci):lu(E,J,ie)}a(rt,"prepareMaterial"),this.compile=function(E,J,ie=null){ie===null&&(ie=E),g=G.get(ie),g.init(),y.push(g),ie.traverseVisible(function(ne){ne.isLight&&ne.layers.test(J.layers)&&(g.pushLight(ne),ne.castShadow&&g.pushShadow(ne))}),E!==ie&&E.traverseVisible(function(ne){ne.isLight&&ne.layers.test(J.layers)&&(g.pushLight(ne),ne.castShadow&&g.pushShadow(ne))}),g.setupLights(b._useLegacyLights);let oe=new Set;return E.traverse(function(ne){let ke=ne.material;if(ke)if(Array.isArray(ke))for(let et=0;et<ke.length;et++){let ot=ke[et];rt(ot,ie,ne),oe.add(ot)}else rt(ke,ie,ne),oe.add(ke)}),y.pop(),g=null,oe},this.compileAsync=function(E,J,ie=null){let oe=this.compile(E,J,ie);return new Promise(ne=>{function ke(){if(oe.forEach(function(et){at.get(et).currentProgram.isReady()&&oe.delete(et)}),oe.size===0){ne(E);return}setTimeout(ke,10)}a(ke,"checkMaterialsReady"),Ge.get("KHR_parallel_shader_compile")!==null?ke():setTimeout(ke,10)})};let Xe=null;function Ae(E){Xe&&Xe(E)}a(Ae,"onAnimationFrame");function Ie(){Fe.stop()}a(Ie,"onXRSessionStart");function ye(){Fe.start()}a(ye,"onXRSessionEnd");let Fe=new sb;Fe.setAnimationLoop(Ae),typeof self<"u"&&Fe.setContext(self),this.setAnimationLoop=function(E){Xe=E,ve.setAnimationLoop(E),E===null?Fe.stop():Fe.start()},ve.addEventListener("sessionstart",Ie),ve.addEventListener("sessionend",ye),this.render=function(E,J){if(J!==void 0&&J.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(S===!0)return;E.matrixWorldAutoUpdate===!0&&E.updateMatrixWorld(),J.parent===null&&J.matrixWorldAutoUpdate===!0&&J.updateMatrixWorld(),ve.enabled===!0&&ve.isPresenting===!0&&(ve.cameraAutoUpdate===!0&&ve.updateCamera(J),J=ve.getCamera()),E.isScene===!0&&E.onBeforeRender(b,E,J,F),g=G.get(E,y.length),g.init(),y.push(g),Le.multiplyMatrices(J.projectionMatrix,J.matrixWorldInverse),$.setFromProjectionMatrix(Le),Se=this.localClippingEnabled,me=Y.init(this.clippingPlanes,Se),M=V.get(E,R.length),M.init(),R.push(M),Qe(E,J,0,b.sortObjects),M.finish(),b.sortObjects===!0&&M.sort(le,ce),this.info.render.frame++,me===!0&&Y.beginShadows();let ie=g.state.shadowsArray;if(k.render(ie,E,J),me===!0&&Y.endShadows(),this.info.autoReset===!0&&this.info.reset(),q.render(M,E),g.setupLights(b._useLegacyLights),J.isArrayCamera){let oe=J.cameras;for(let ne=0,ke=oe.length;ne<ke;ne++){let et=oe[ne];Pt(M,E,et,et.viewport)}}else Pt(M,E,J);F!==null&&(L.updateMultisampleRenderTarget(F),L.updateRenderTargetMipmap(F)),E.isScene===!0&&E.onAfterRender(b,E,J),Pe.resetDefaultState(),ee=-1,P=null,y.pop(),y.length>0?g=y[y.length-1]:g=null,R.pop(),R.length>0?M=R[R.length-1]:M=null};function Qe(E,J,ie,oe){if(E.visible===!1)return;if(E.layers.test(J.layers)){if(E.isGroup)ie=E.renderOrder;else if(E.isLOD)E.autoUpdate===!0&&E.update(J);else if(E.isLight)g.pushLight(E),E.castShadow&&g.pushShadow(E);else if(E.isSprite){if(!E.frustumCulled||$.intersectsSprite(E)){oe&&qe.setFromMatrixPosition(E.matrixWorld).applyMatrix4(Le);let et=N.update(E),ot=E.material;ot.visible&&M.push(E,et,ot,ie,qe.z,null)}}else if((E.isMesh||E.isLine||E.isPoints)&&(!E.frustumCulled||$.intersectsObject(E))){let et=N.update(E),ot=E.material;if(oe&&(E.boundingSphere!==void 0?(E.boundingSphere===null&&E.computeBoundingSphere(),qe.copy(E.boundingSphere.center)):(et.boundingSphere===null&&et.computeBoundingSphere(),qe.copy(et.boundingSphere.center)),qe.applyMatrix4(E.matrixWorld).applyMatrix4(Le)),Array.isArray(ot)){let lt=et.groups;for(let pt=0,ut=lt.length;pt<ut;pt++){let ht=lt[pt],qt=ot[ht.materialIndex];qt&&qt.visible&&M.push(E,et,qt,ie,qe.z,ht)}}else ot.visible&&M.push(E,et,ot,ie,qe.z,null)}}let ke=E.children;for(let et=0,ot=ke.length;et<ot;et++)Qe(ke[et],J,ie,oe)}a(Qe,"projectObject");function Pt(E,J,ie,oe){let ne=E.opaque,ke=E.transmissive,et=E.transparent;g.setupLightsView(ie),me===!0&&Y.setGlobalState(b.clippingPlanes,ie),ke.length>0&&Yi(ne,ke,J,ie),oe&&De.viewport(U.copy(oe)),ne.length>0&&li(ne,J,ie),ke.length>0&&li(ke,J,ie),et.length>0&&li(et,J,ie),De.buffers.depth.setTest(!0),De.buffers.depth.setMask(!0),De.buffers.color.setMask(!0),De.setPolygonOffset(!1)}a(Pt,"renderScene");function Yi(E,J,ie,oe){if((ie.isScene===!0?ie.overrideMaterial:null)!==null)return;let ke=tt.isWebGL2;Be===null&&(Be=new Ir(1,1,{generateMipmaps:!0,type:Ge.has("EXT_color_buffer_half_float")?Sc:_s,minFilter:yc,samples:ke?4:0})),b.getDrawingBufferSize(ze),ke?Be.setSize(ze.x,ze.y):Be.setSize(Dh(ze.x),Dh(ze.y));let et=b.getRenderTarget();b.setRenderTarget(Be),b.getClearColor(_e),D=b.getClearAlpha(),D<1&&b.setClearColor(16777215,.5),b.clear();let ot=b.toneMapping;b.toneMapping=gs,li(E,ie,oe),L.updateMultisampleRenderTarget(Be),L.updateRenderTargetMipmap(Be);let lt=!1;for(let pt=0,ut=J.length;pt<ut;pt++){let ht=J[pt],qt=ht.object,ci=ht.geometry,xn=ht.material,dr=ht.group;if(xn.side===Ci&&qt.layers.test(oe.layers)){let Xt=xn.side;xn.side=Ln,xn.needsUpdate=!0,So(qt,ie,oe,ci,xn,dr),xn.side=Xt,xn.needsUpdate=!0,lt=!0}}lt===!0&&(L.updateMultisampleRenderTarget(Be),L.updateRenderTargetMipmap(Be)),b.setRenderTarget(et),b.setClearColor(_e,D),b.toneMapping=ot}a(Yi,"renderTransmissionPass");function li(E,J,ie){let oe=J.isScene===!0?J.overrideMaterial:null;for(let ne=0,ke=E.length;ne<ke;ne++){let et=E[ne],ot=et.object,lt=et.geometry,pt=oe===null?et.material:oe,ut=et.group;ot.layers.test(ie.layers)&&So(ot,J,ie,lt,pt,ut)}}a(li,"renderObjects");function So(E,J,ie,oe,ne,ke){E.onBeforeRender(b,J,ie,oe,ne,ke),E.modelViewMatrix.multiplyMatrices(ie.matrixWorldInverse,E.matrixWorld),E.normalMatrix.getNormalMatrix(E.modelViewMatrix),ne.onBeforeRender(b,J,ie,oe,E,ke),ne.transparent===!0&&ne.side===Ci&&ne.forceSinglePass===!1?(ne.side=Ln,ne.needsUpdate=!0,b.renderBufferDirect(ie,J,oe,ne,E,ke),ne.side=qi,ne.needsUpdate=!0,b.renderBufferDirect(ie,J,oe,ne,E,ke),ne.side=Ci):b.renderBufferDirect(ie,J,oe,ne,E,ke),E.onAfterRender(b,J,ie,oe,ne,ke)}a(So,"renderObject");function lu(E,J,ie){J.isScene!==!0&&(J=Ze);let oe=at.get(E),ne=g.state.lights,ke=g.state.shadowsArray,et=ne.state.version,ot=I.getParameters(E,ne.state,ke,J,ie),lt=I.getProgramCacheKey(ot),pt=oe.programs;oe.environment=E.isMeshStandardMaterial?J.environment:null,oe.fog=J.fog,oe.envMap=(E.isMeshStandardMaterial?te:T).get(E.envMap||oe.environment),pt===void 0&&(E.addEventListener("dispose",Re),pt=new Map,oe.programs=pt);let ut=pt.get(lt);if(ut!==void 0){if(oe.currentProgram===ut&&oe.lightsStateVersion===et)return hR(E,ot),ut}else ot.uniforms=I.getUniforms(E),E.onBuild(ie,ot,b),E.onBeforeCompile(ot,b),ut=I.acquireProgram(ot,lt),pt.set(lt,ut),oe.uniforms=ot.uniforms;let ht=oe.uniforms;return(!E.isShaderMaterial&&!E.isRawShaderMaterial||E.clipping===!0)&&(ht.clippingPlanes=Y.uniform),hR(E,ot),oe.needsLights=MS(E),oe.lightsStateVersion=et,oe.needsLights&&(ht.ambientLightColor.value=ne.state.ambient,ht.lightProbe.value=ne.state.probe,ht.directionalLights.value=ne.state.directional,ht.directionalLightShadows.value=ne.state.directionalShadow,ht.spotLights.value=ne.state.spot,ht.spotLightShadows.value=ne.state.spotShadow,ht.rectAreaLights.value=ne.state.rectArea,ht.ltc_1.value=ne.state.rectAreaLTC1,ht.ltc_2.value=ne.state.rectAreaLTC2,ht.pointLights.value=ne.state.point,ht.pointLightShadows.value=ne.state.pointShadow,ht.hemisphereLights.value=ne.state.hemi,ht.directionalShadowMap.value=ne.state.directionalShadowMap,ht.directionalShadowMatrix.value=ne.state.directionalShadowMatrix,ht.spotShadowMap.value=ne.state.spotShadowMap,ht.spotLightMatrix.value=ne.state.spotLightMatrix,ht.spotLightMap.value=ne.state.spotLightMap,ht.pointShadowMap.value=ne.state.pointShadowMap,ht.pointShadowMatrix.value=ne.state.pointShadowMatrix),oe.currentProgram=ut,oe.uniformsList=null,ut}a(lu,"getProgram");function uR(E){if(E.uniformsList===null){let J=E.currentProgram.getUniforms();E.uniformsList=Oa.seqWithValue(J.seq,E.uniforms)}return E.uniformsList}a(uR,"getUniformList");function hR(E,J){let ie=at.get(E);ie.outputColorSpace=J.outputColorSpace,ie.batching=J.batching,ie.instancing=J.instancing,ie.instancingColor=J.instancingColor,ie.skinning=J.skinning,ie.morphTargets=J.morphTargets,ie.morphNormals=J.morphNormals,ie.morphColors=J.morphColors,ie.morphTargetsCount=J.morphTargetsCount,ie.numClippingPlanes=J.numClippingPlanes,ie.numIntersection=J.numClipIntersection,ie.vertexAlphas=J.vertexAlphas,ie.vertexTangents=J.vertexTangents,ie.toneMapping=J.toneMapping}a(hR,"updateCommonMaterialProperties");function _S(E,J,ie,oe,ne){J.isScene!==!0&&(J=Ze),L.resetTextureUnits();let ke=J.fog,et=oe.isMeshStandardMaterial?J.environment:null,ot=F===null?b.outputColorSpace:F.isXRRenderTarget===!0?F.texture.colorSpace:Ur,lt=(oe.isMeshStandardMaterial?te:T).get(oe.envMap||et),pt=oe.vertexColors===!0&&!!ie.attributes.color&&ie.attributes.color.itemSize===4,ut=!!ie.attributes.tangent&&(!!oe.normalMap||oe.anisotropy>0),ht=!!ie.morphAttributes.position,qt=!!ie.morphAttributes.normal,ci=!!ie.morphAttributes.color,xn=gs;oe.toneMapped&&(F===null||F.isXRRenderTarget===!0)&&(xn=b.toneMapping);let dr=ie.morphAttributes.position||ie.morphAttributes.normal||ie.morphAttributes.color,Xt=dr!==void 0?dr.length:0,mt=at.get(oe),Ff=g.state.lights;if(me===!0&&(Se===!0||E!==P)){let _i=E===P&&oe.id===ee;Y.setState(oe,E,_i)}let Bt=!1;oe.version===mt.__version?(mt.needsLights&&mt.lightsStateVersion!==Ff.state.version||mt.outputColorSpace!==ot||ne.isBatchedMesh&&mt.batching===!1||!ne.isBatchedMesh&&mt.batching===!0||ne.isInstancedMesh&&mt.instancing===!1||!ne.isInstancedMesh&&mt.instancing===!0||ne.isSkinnedMesh&&mt.skinning===!1||!ne.isSkinnedMesh&&mt.skinning===!0||ne.isInstancedMesh&&mt.instancingColor===!0&&ne.instanceColor===null||ne.isInstancedMesh&&mt.instancingColor===!1&&ne.instanceColor!==null||mt.envMap!==lt||oe.fog===!0&&mt.fog!==ke||mt.numClippingPlanes!==void 0&&(mt.numClippingPlanes!==Y.numPlanes||mt.numIntersection!==Y.numIntersection)||mt.vertexAlphas!==pt||mt.vertexTangents!==ut||mt.morphTargets!==ht||mt.morphNormals!==qt||mt.morphColors!==ci||mt.toneMapping!==xn||tt.isWebGL2===!0&&mt.morphTargetsCount!==Xt)&&(Bt=!0):(Bt=!0,mt.__version=oe.version);let Ws=mt.currentProgram;Bt===!0&&(Ws=lu(oe,J,ne));let dR=!1,Sl=!1,Wf=!1,On=Ws.getUniforms(),Cs=mt.uniforms;if(De.useProgram(Ws.program)&&(dR=!0,Sl=!0,Wf=!0),oe.id!==ee&&(ee=oe.id,Sl=!0),dR||P!==E){On.setValue(B,"projectionMatrix",E.projectionMatrix),On.setValue(B,"viewMatrix",E.matrixWorldInverse);let _i=On.map.cameraPosition;_i!==void 0&&_i.setValue(B,qe.setFromMatrixPosition(E.matrixWorld)),tt.logarithmicDepthBuffer&&On.setValue(B,"logDepthBufFC",2/(Math.log(E.far+1)/Math.LN2)),(oe.isMeshPhongMaterial||oe.isMeshToonMaterial||oe.isMeshLambertMaterial||oe.isMeshBasicMaterial||oe.isMeshStandardMaterial||oe.isShaderMaterial)&&On.setValue(B,"isOrthographic",E.isOrthographicCamera===!0),P!==E&&(P=E,Sl=!0,Wf=!0)}if(ne.isSkinnedMesh){On.setOptional(B,ne,"bindMatrix"),On.setOptional(B,ne,"bindMatrixInverse");let _i=ne.skeleton;_i&&(tt.floatVertexTextures?(_i.boneTexture===null&&_i.computeBoneTexture(),On.setValue(B,"boneTexture",_i.boneTexture,L)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}ne.isBatchedMesh&&(On.setOptional(B,ne,"batchingTexture"),On.setValue(B,"batchingTexture",ne._matricesTexture,L));let Cf=ie.morphAttributes;if((Cf.position!==void 0||Cf.normal!==void 0||Cf.color!==void 0&&tt.isWebGL2===!0)&&v.update(ne,ie,Ws),(Sl||mt.receiveShadow!==ne.receiveShadow)&&(mt.receiveShadow=ne.receiveShadow,On.setValue(B,"receiveShadow",ne.receiveShadow)),oe.isMeshGouraudMaterial&&oe.envMap!==null&&(Cs.envMap.value=lt,Cs.flipEnvMap.value=lt.isCubeTexture&&lt.isRenderTargetTexture===!1?-1:1),Sl&&(On.setValue(B,"toneMappingExposure",b.toneMappingExposure),mt.needsLights&&bS(Cs,Wf),ke&&oe.fog===!0&&Z.refreshFogUniforms(Cs,ke),Z.refreshMaterialUniforms(Cs,oe,fe,se,Be),Oa.upload(B,uR(mt),Cs,L)),oe.isShaderMaterial&&oe.uniformsNeedUpdate===!0&&(Oa.upload(B,uR(mt),Cs,L),oe.uniformsNeedUpdate=!1),oe.isSpriteMaterial&&On.setValue(B,"center",ne.center),On.setValue(B,"modelViewMatrix",ne.modelViewMatrix),On.setValue(B,"normalMatrix",ne.normalMatrix),On.setValue(B,"modelMatrix",ne.matrixWorld),oe.isShaderMaterial||oe.isRawShaderMaterial){let _i=oe.uniformsGroups;for(let Zf=0,xS=_i.length;Zf<xS;Zf++)if(tt.isWebGL2){let fR=_i[Zf];Ce.update(fR,Ws),Ce.bind(fR,Ws)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Ws}a(_S,"setProgram");function bS(E,J){E.ambientLightColor.needsUpdate=J,E.lightProbe.needsUpdate=J,E.directionalLights.needsUpdate=J,E.directionalLightShadows.needsUpdate=J,E.pointLights.needsUpdate=J,E.pointLightShadows.needsUpdate=J,E.spotLights.needsUpdate=J,E.spotLightShadows.needsUpdate=J,E.rectAreaLights.needsUpdate=J,E.hemisphereLights.needsUpdate=J}a(bS,"markUniformsLightsNeedsUpdate");function MS(E){return E.isMeshLambertMaterial||E.isMeshToonMaterial||E.isMeshPhongMaterial||E.isMeshStandardMaterial||E.isShadowMaterial||E.isShaderMaterial&&E.lights===!0}a(MS,"materialNeedsLights"),this.getActiveCubeFace=function(){return C},this.getActiveMipmapLevel=function(){return W},this.getRenderTarget=function(){return F},this.setRenderTargetTextures=function(E,J,ie){at.get(E.texture).__webglTexture=J,at.get(E.depthTexture).__webglTexture=ie;let oe=at.get(E);oe.__hasExternalTextures=!0,oe.__hasExternalTextures&&(oe.__autoAllocateDepthBuffer=ie===void 0,oe.__autoAllocateDepthBuffer||Ge.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),oe.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(E,J){let ie=at.get(E);ie.__webglFramebuffer=J,ie.__useDefaultFramebuffer=J===void 0},this.setRenderTarget=function(E,J=0,ie=0){F=E,C=J,W=ie;let oe=!0,ne=null,ke=!1,et=!1;if(E){let lt=at.get(E);lt.__useDefaultFramebuffer!==void 0?(De.bindFramebuffer(B.FRAMEBUFFER,null),oe=!1):lt.__webglFramebuffer===void 0?L.setupRenderTarget(E):lt.__hasExternalTextures&&L.rebindTextures(E,at.get(E.texture).__webglTexture,at.get(E.depthTexture).__webglTexture);let pt=E.texture;(pt.isData3DTexture||pt.isDataArrayTexture||pt.isCompressedArrayTexture)&&(et=!0);let ut=at.get(E).__webglFramebuffer;E.isWebGLCubeRenderTarget?(Array.isArray(ut[J])?ne=ut[J][ie]:ne=ut[J],ke=!0):tt.isWebGL2&&E.samples>0&&L.useMultisampledRTT(E)===!1?ne=at.get(E).__webglMultisampledFramebuffer:Array.isArray(ut)?ne=ut[ie]:ne=ut,U.copy(E.viewport),j.copy(E.scissor),ae=E.scissorTest}else U.copy(ge).multiplyScalar(fe).floor(),j.copy(be).multiplyScalar(fe).floor(),ae=Oe;if(De.bindFramebuffer(B.FRAMEBUFFER,ne)&&tt.drawBuffers&&oe&&De.drawBuffers(E,ne),De.viewport(U),De.scissor(j),De.setScissorTest(ae),ke){let lt=at.get(E.texture);B.framebufferTexture2D(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,B.TEXTURE_CUBE_MAP_POSITIVE_X+J,lt.__webglTexture,ie)}else if(et){let lt=at.get(E.texture),pt=J||0;B.framebufferTextureLayer(B.FRAMEBUFFER,B.COLOR_ATTACHMENT0,lt.__webglTexture,ie||0,pt)}ee=-1},this.readRenderTargetPixels=function(E,J,ie,oe,ne,ke,et){if(!(E&&E.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ot=at.get(E).__webglFramebuffer;if(E.isWebGLCubeRenderTarget&&et!==void 0&&(ot=ot[et]),ot){De.bindFramebuffer(B.FRAMEBUFFER,ot);try{let lt=E.texture,pt=lt.format,ut=lt.type;if(pt!==Zi&&ue.convert(pt)!==B.getParameter(B.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}let ht=ut===Sc&&(Ge.has("EXT_color_buffer_half_float")||tt.isWebGL2&&Ge.has("EXT_color_buffer_float"));if(ut!==_s&&ue.convert(ut)!==B.getParameter(B.IMPLEMENTATION_COLOR_READ_TYPE)&&!(ut===ms&&(tt.isWebGL2||Ge.has("OES_texture_float")||Ge.has("WEBGL_color_buffer_float")))&&!ht){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}J>=0&&J<=E.width-oe&&ie>=0&&ie<=E.height-ne&&B.readPixels(J,ie,oe,ne,ue.convert(pt),ue.convert(ut),ke)}finally{let lt=F!==null?at.get(F).__webglFramebuffer:null;De.bindFramebuffer(B.FRAMEBUFFER,lt)}}},this.copyFramebufferToTexture=function(E,J,ie=0){let oe=Math.pow(2,-ie),ne=Math.floor(J.image.width*oe),ke=Math.floor(J.image.height*oe);L.setTexture2D(J,0),B.copyTexSubImage2D(B.TEXTURE_2D,ie,0,0,E.x,E.y,ne,ke),De.unbindTexture()},this.copyTextureToTexture=function(E,J,ie,oe=0){let ne=J.image.width,ke=J.image.height,et=ue.convert(ie.format),ot=ue.convert(ie.type);L.setTexture2D(ie,0),B.pixelStorei(B.UNPACK_FLIP_Y_WEBGL,ie.flipY),B.pixelStorei(B.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ie.premultiplyAlpha),B.pixelStorei(B.UNPACK_ALIGNMENT,ie.unpackAlignment),J.isDataTexture?B.texSubImage2D(B.TEXTURE_2D,oe,E.x,E.y,ne,ke,et,ot,J.image.data):J.isCompressedTexture?B.compressedTexSubImage2D(B.TEXTURE_2D,oe,E.x,E.y,J.mipmaps[0].width,J.mipmaps[0].height,et,J.mipmaps[0].data):B.texSubImage2D(B.TEXTURE_2D,oe,E.x,E.y,et,ot,J.image),oe===0&&ie.generateMipmaps&&B.generateMipmap(B.TEXTURE_2D),De.unbindTexture()},this.copyTextureToTexture3D=function(E,J,ie,oe,ne=0){if(b.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}let ke=E.max.x-E.min.x+1,et=E.max.y-E.min.y+1,ot=E.max.z-E.min.z+1,lt=ue.convert(oe.format),pt=ue.convert(oe.type),ut;if(oe.isData3DTexture)L.setTexture3D(oe,0),ut=B.TEXTURE_3D;else if(oe.isDataArrayTexture||oe.isCompressedArrayTexture)L.setTexture2DArray(oe,0),ut=B.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}B.pixelStorei(B.UNPACK_FLIP_Y_WEBGL,oe.flipY),B.pixelStorei(B.UNPACK_PREMULTIPLY_ALPHA_WEBGL,oe.premultiplyAlpha),B.pixelStorei(B.UNPACK_ALIGNMENT,oe.unpackAlignment);let ht=B.getParameter(B.UNPACK_ROW_LENGTH),qt=B.getParameter(B.UNPACK_IMAGE_HEIGHT),ci=B.getParameter(B.UNPACK_SKIP_PIXELS),xn=B.getParameter(B.UNPACK_SKIP_ROWS),dr=B.getParameter(B.UNPACK_SKIP_IMAGES),Xt=ie.isCompressedTexture?ie.mipmaps[ne]:ie.image;B.pixelStorei(B.UNPACK_ROW_LENGTH,Xt.width),B.pixelStorei(B.UNPACK_IMAGE_HEIGHT,Xt.height),B.pixelStorei(B.UNPACK_SKIP_PIXELS,E.min.x),B.pixelStorei(B.UNPACK_SKIP_ROWS,E.min.y),B.pixelStorei(B.UNPACK_SKIP_IMAGES,E.min.z),ie.isDataTexture||ie.isData3DTexture?B.texSubImage3D(ut,ne,J.x,J.y,J.z,ke,et,ot,lt,pt,Xt.data):ie.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),B.compressedTexSubImage3D(ut,ne,J.x,J.y,J.z,ke,et,ot,lt,Xt.data)):B.texSubImage3D(ut,ne,J.x,J.y,J.z,ke,et,ot,lt,pt,Xt),B.pixelStorei(B.UNPACK_ROW_LENGTH,ht),B.pixelStorei(B.UNPACK_IMAGE_HEIGHT,qt),B.pixelStorei(B.UNPACK_SKIP_PIXELS,ci),B.pixelStorei(B.UNPACK_SKIP_ROWS,xn),B.pixelStorei(B.UNPACK_SKIP_IMAGES,dr),ne===0&&oe.generateMipmaps&&B.generateMipmap(ut),De.unbindTexture()},this.initTexture=function(E){E.isCubeTexture?L.setTextureCube(E,0):E.isData3DTexture?L.setTexture3D(E,0):E.isDataArrayTexture||E.isCompressedArrayTexture?L.setTexture2DArray(E,0):L.setTexture2D(E,0),De.unbindTexture()},this.resetState=function(){C=0,W=0,F=null,De.reset(),Pe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Or}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;let t=this.getContext();t.drawingBufferColorSpace=e===Rm?"display-p3":"srgb",t.unpackColorSpace=vt.workingColorSpace===gd?"display-p3":"srgb"}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===on?io:j_}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===io?on:Ur}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}},J3=class extends Pc{static{a(this,"WebGL1Renderer")}};J3.prototype.isWebGL1Renderer=!0;var Wa=class extends ln{static{a(this,"Scene")}constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){let t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}};var id=class extends mi{static{a(this,"DataTexture")}constructor(e=null,t=1,n=1,r,s,o,l,c,u=wn,h=wn,d,f){super(null,o,l,c,u,h,r,s,d,f),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var Ec=class extends Fr{static{a(this,"LineBasicMaterial")}constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new ct(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}},A_=new K,O_=new K,V_=new an,v3=new oo,Ah=new so,z3=class extends ln{static{a(this,"Line")}constructor(e=new vn,t=new Ec){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,n=[0];for(let r=1,s=t.count;r<s;r++)A_.fromBufferAttribute(t,r-1),O_.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=A_.distanceTo(O_);e.setAttribute("lineDistance",new gt(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){let n=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Ah.copy(n.boundingSphere),Ah.applyMatrix4(r),Ah.radius+=s,e.ray.intersectsSphere(Ah)===!1)return;V_.copy(r).invert(),v3.copy(e.ray).applyMatrix4(V_);let l=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,u=new K,h=new K,d=new K,f=new K,m=this.isLineSegments?2:1,_=n.index,g=n.attributes.position;if(_!==null){let R=Math.max(0,o.start),y=Math.min(_.count,o.start+o.count);for(let b=R,S=y-1;b<S;b+=m){let C=_.getX(b),W=_.getX(b+1);if(u.fromBufferAttribute(g,C),h.fromBufferAttribute(g,W),v3.distanceSqToSegment(u,h,f,d)>c)continue;f.applyMatrix4(this.matrixWorld);let ee=e.ray.origin.distanceTo(f);ee<e.near||ee>e.far||t.push({distance:ee,point:d.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else{let R=Math.max(0,o.start),y=Math.min(g.count,o.start+o.count);for(let b=R,S=y-1;b<S;b+=m){if(u.fromBufferAttribute(g,b),h.fromBufferAttribute(g,b+1),v3.distanceSqToSegment(u,h,f,d)>c)continue;f.applyMatrix4(this.matrixWorld);let W=e.ray.origin.distanceTo(f);W<e.near||W>e.far||t.push({distance:W,point:d.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){let t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){let r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){let l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}},U_=new K,I_=new K,rd=class extends z3{static{a(this,"LineSegments")}constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let e=this.geometry;if(e.index===null){let t=e.attributes.position,n=[];for(let r=0,s=t.count;r<s;r+=2)U_.fromBufferAttribute(t,r),I_.fromBufferAttribute(t,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+U_.distanceTo(I_);e.setAttribute("lineDistance",new gt(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}};var wc=class extends Fr{static{a(this,"PointsMaterial")}constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new ct(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}},F_=new an,$3=new oo,Oh=new so,Vh=new K,sd=class extends ln{static{a(this,"Points")}constructor(e=new vn,t=new wc){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){let n=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Oh.copy(n.boundingSphere),Oh.applyMatrix4(r),Oh.radius+=s,e.ray.intersectsSphere(Oh)===!1)return;F_.copy(r).invert(),$3.copy(e.ray).applyMatrix4(F_);let l=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,u=n.index,d=n.attributes.position;if(u!==null){let f=Math.max(0,o.start),m=Math.min(u.count,o.start+o.count);for(let _=f,M=m;_<M;_++){let g=u.getX(_);Vh.fromBufferAttribute(d,g),W_(Vh,g,c,r,e,t,this)}}else{let f=Math.max(0,o.start),m=Math.min(d.count,o.start+o.count);for(let _=f,M=m;_<M;_++)Vh.fromBufferAttribute(d,_),W_(Vh,_,c,r,e,t,this)}}updateMorphTargets(){let t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){let r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){let l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}};function W_(i,e,t,n,r,s,o){let l=$3.distanceSqToPoint(i);if(l<t){let c=new K;$3.closestPointToPoint(i,c),c.applyMatrix4(n);let u=r.ray.origin.distanceTo(c);if(u<r.near||u>r.far)return;s.push({distance:u,distanceToRay:Math.sqrt(l),point:c,index:e,face:null,object:o})}}a(W_,"testPoint");var Lc=class i extends vn{static{a(this,"CylinderGeometry")}constructor(e=1,t=1,n=1,r=32,s=1,o=!1,l=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:l,thetaLength:c};let u=this;r=Math.floor(r),s=Math.floor(s);let h=[],d=[],f=[],m=[],_=0,M=[],g=n/2,R=0;y(),o===!1&&(e>0&&b(!0),t>0&&b(!1)),this.setIndex(h),this.setAttribute("position",new gt(d,3)),this.setAttribute("normal",new gt(f,3)),this.setAttribute("uv",new gt(m,2));function y(){let S=new K,C=new K,W=0,F=(t-e)/n;for(let ee=0;ee<=s;ee++){let P=[],U=ee/s,j=U*(t-e)+e;for(let ae=0;ae<=r;ae++){let _e=ae/r,D=_e*c+l,z=Math.sin(D),se=Math.cos(D);C.x=j*z,C.y=-U*n+g,C.z=j*se,d.push(C.x,C.y,C.z),S.set(z,F,se).normalize(),f.push(S.x,S.y,S.z),m.push(_e,1-U),P.push(_++)}M.push(P)}for(let ee=0;ee<r;ee++)for(let P=0;P<s;P++){let U=M[P][ee],j=M[P+1][ee],ae=M[P+1][ee+1],_e=M[P][ee+1];h.push(U,j,_e),h.push(j,ae,_e),W+=6}u.addGroup(R,W,0),R+=W}a(y,"generateTorso");function b(S){let C=_,W=new nt,F=new K,ee=0,P=S===!0?e:t,U=S===!0?1:-1;for(let ae=1;ae<=r;ae++)d.push(0,g*U,0),f.push(0,U,0),m.push(.5,.5),_++;let j=_;for(let ae=0;ae<=r;ae++){let D=ae/r*c+l,z=Math.cos(D),se=Math.sin(D);F.x=P*se,F.y=g*U,F.z=P*z,d.push(F.x,F.y,F.z),f.push(0,U,0),W.x=z*.5+.5,W.y=se*.5*U+.5,m.push(W.x,W.y),_++}for(let ae=0;ae<r;ae++){let _e=C+ae,D=j+ae;S===!0?h.push(D,D+1,_e):h.push(D+1,D,_e),ee+=3}u.addGroup(R,ee,S===!0?1:2),R+=ee}a(b,"generateCap")}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new i(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}},od=class i extends Lc{static{a(this,"ConeGeometry")}constructor(e=1,t=1,n=32,r=1,s=!1,o=0,l=Math.PI*2){super(0,e,t,n,r,s,o,l),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:l}}static fromJSON(e){return new i(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}};var Ow={triangulate:function(i,e,t=2){let n=e&&e.length,r=n?e[0]*t:i.length,s=hb(i,0,r,t,!0),o=[];if(!s||s.next===s.prev)return o;let l,c,u,h,d,f,m;if(n&&(s=Ww(i,e,s,t)),i.length>80*t){l=u=i[0],c=h=i[1];for(let _=t;_<r;_+=t)d=i[_],f=i[_+1],d<l&&(l=d),f<c&&(c=f),d>u&&(u=d),f>h&&(h=f);m=Math.max(u-l,h-c),m=m!==0?32767/m:0}return Ac(s,o,t,l,c,m,0),o}};function hb(i,e,t,n,r){let s,o;if(r===Bw(i,e,t,n)>0)for(s=e;s<t;s+=n)o=C_(s,i[s],i[s+1],o);else for(s=t-n;s>=e;s-=n)o=C_(s,i[s],i[s+1],o);return o&&bd(o,o.next)&&(Vc(o),o=o.next),o}a(hb,"linkedList");function lo(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(bd(t,t.next)||Dt(t.prev,t,t.next)===0)){if(Vc(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}a(lo,"filterPoints");function Ac(i,e,t,n,r,s,o){if(!i)return;!o&&s&&Hw(i,n,r,s);let l=i,c,u;for(;i.prev!==i.next;){if(c=i.prev,u=i.next,s?Uw(i,n,r,s):Vw(i)){e.push(c.i/t|0),e.push(i.i/t|0),e.push(u.i/t|0),Vc(i),i=u.next,l=u.next;continue}if(i=u,i===l){o?o===1?(i=Iw(lo(i),e,t),Ac(i,e,t,n,r,s,2)):o===2&&Fw(i,e,t,n,r,s):Ac(lo(i),e,t,n,r,s,1);break}}}a(Ac,"earcutLinked");function Vw(i){let e=i.prev,t=i,n=i.next;if(Dt(e,t,n)>=0)return!1;let r=e.x,s=t.x,o=n.x,l=e.y,c=t.y,u=n.y,h=r<s?r<o?r:o:s<o?s:o,d=l<c?l<u?l:u:c<u?c:u,f=r>s?r>o?r:o:s>o?s:o,m=l>c?l>u?l:u:c>u?c:u,_=n.next;for(;_!==e;){if(_.x>=h&&_.x<=f&&_.y>=d&&_.y<=m&&wa(r,l,s,c,o,u,_.x,_.y)&&Dt(_.prev,_,_.next)>=0)return!1;_=_.next}return!0}a(Vw,"isEar");function Uw(i,e,t,n){let r=i.prev,s=i,o=i.next;if(Dt(r,s,o)>=0)return!1;let l=r.x,c=s.x,u=o.x,h=r.y,d=s.y,f=o.y,m=l<c?l<u?l:u:c<u?c:u,_=h<d?h<f?h:f:d<f?d:f,M=l>c?l>u?l:u:c>u?c:u,g=h>d?h>f?h:f:d>f?d:f,R=j3(m,_,e,t,n),y=j3(M,g,e,t,n),b=i.prevZ,S=i.nextZ;for(;b&&b.z>=R&&S&&S.z<=y;){if(b.x>=m&&b.x<=M&&b.y>=_&&b.y<=g&&b!==r&&b!==o&&wa(l,h,c,d,u,f,b.x,b.y)&&Dt(b.prev,b,b.next)>=0||(b=b.prevZ,S.x>=m&&S.x<=M&&S.y>=_&&S.y<=g&&S!==r&&S!==o&&wa(l,h,c,d,u,f,S.x,S.y)&&Dt(S.prev,S,S.next)>=0))return!1;S=S.nextZ}for(;b&&b.z>=R;){if(b.x>=m&&b.x<=M&&b.y>=_&&b.y<=g&&b!==r&&b!==o&&wa(l,h,c,d,u,f,b.x,b.y)&&Dt(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;S&&S.z<=y;){if(S.x>=m&&S.x<=M&&S.y>=_&&S.y<=g&&S!==r&&S!==o&&wa(l,h,c,d,u,f,S.x,S.y)&&Dt(S.prev,S,S.next)>=0)return!1;S=S.nextZ}return!0}a(Uw,"isEarHashed");function Iw(i,e,t){let n=i;do{let r=n.prev,s=n.next.next;!bd(r,s)&&db(r,n,n.next,s)&&Oc(r,s)&&Oc(s,r)&&(e.push(r.i/t|0),e.push(n.i/t|0),e.push(s.i/t|0),Vc(n),Vc(n.next),n=i=s),n=n.next}while(n!==i);return lo(n)}a(Iw,"cureLocalIntersections");function Fw(i,e,t,n,r,s){let o=i;do{let l=o.next.next;for(;l!==o.prev;){if(o.i!==l.i&&Yw(o,l)){let c=fb(o,l);o=lo(o,o.next),c=lo(c,c.next),Ac(o,e,t,n,r,s,0),Ac(c,e,t,n,r,s,0);return}l=l.next}o=o.next}while(o!==i)}a(Fw,"splitEarcut");function Ww(i,e,t,n){let r=[],s,o,l,c,u;for(s=0,o=e.length;s<o;s++)l=e[s]*n,c=s<o-1?e[s+1]*n:i.length,u=hb(i,l,c,n,!1),u===u.next&&(u.steiner=!0),r.push(Dw(u));for(r.sort(Cw),s=0;s<r.length;s++)t=Zw(r[s],t);return t}a(Ww,"eliminateHoles");function Cw(i,e){return i.x-e.x}a(Cw,"compareX");function Zw(i,e){let t=kw(i,e);if(!t)return e;let n=fb(t,i);return lo(n,n.next),lo(t,t.next)}a(Zw,"eliminateHole");function kw(i,e){let t=e,n=-1/0,r,s=i.x,o=i.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){let f=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(f<=s&&f>n&&(n=f,r=t.x<t.next.x?t:t.next,f===s))return r}t=t.next}while(t!==e);if(!r)return null;let l=r,c=r.x,u=r.y,h=1/0,d;t=r;do s>=t.x&&t.x>=c&&s!==t.x&&wa(o<u?s:n,o,c,u,o<u?n:s,o,t.x,t.y)&&(d=Math.abs(o-t.y)/(s-t.x),Oc(t,i)&&(d<h||d===h&&(t.x>r.x||t.x===r.x&&Xw(r,t)))&&(r=t,h=d)),t=t.next;while(t!==l);return r}a(kw,"findHoleBridge");function Xw(i,e){return Dt(i.prev,i,e.prev)<0&&Dt(e.next,i,i.next)<0}a(Xw,"sectorContainsSector");function Hw(i,e,t,n){let r=i;do r.z===0&&(r.z=j3(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,Gw(r)}a(Hw,"indexCurve");function Gw(i){let e,t,n,r,s,o,l,c,u=1;do{for(t=i,i=null,s=null,o=0;t;){for(o++,n=t,l=0,e=0;e<u&&(l++,n=n.nextZ,!!n);e++);for(c=u;l>0||c>0&&n;)l!==0&&(c===0||!n||t.z<=n.z)?(r=t,t=t.nextZ,l--):(r=n,n=n.nextZ,c--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;t=n}s.nextZ=null,u*=2}while(o>1);return i}a(Gw,"sortLinked");function j3(i,e,t,n,r){return i=(i-t)*r|0,e=(e-n)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}a(j3,"zOrder");function Dw(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}a(Dw,"getLeftmost");function wa(i,e,t,n,r,s,o,l){return(r-o)*(e-l)>=(i-o)*(s-l)&&(i-o)*(n-l)>=(t-o)*(e-l)&&(t-o)*(s-l)>=(r-o)*(n-l)}a(wa,"pointInTriangle");function Yw(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!Kw(i,e)&&(Oc(i,e)&&Oc(e,i)&&Qw(i,e)&&(Dt(i.prev,i,e.prev)||Dt(i,e.prev,e))||bd(i,e)&&Dt(i.prev,i,i.next)>0&&Dt(e.prev,e,e.next)>0)}a(Yw,"isValidDiagonal");function Dt(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}a(Dt,"area");function bd(i,e){return i.x===e.x&&i.y===e.y}a(bd,"equals");function db(i,e,t,n){let r=Ih(Dt(i,e,t)),s=Ih(Dt(i,e,n)),o=Ih(Dt(t,n,i)),l=Ih(Dt(t,n,e));return!!(r!==s&&o!==l||r===0&&Uh(i,t,e)||s===0&&Uh(i,n,e)||o===0&&Uh(t,i,n)||l===0&&Uh(t,e,n))}a(db,"intersects");function Uh(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}a(Uh,"onSegment");function Ih(i){return i>0?1:i<0?-1:0}a(Ih,"sign");function Kw(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&db(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}a(Kw,"intersectsPolygon");function Oc(i,e){return Dt(i.prev,i,i.next)<0?Dt(i,e,i.next)>=0&&Dt(i,i.prev,e)>=0:Dt(i,e,i.prev)<0||Dt(i,i.next,e)<0}a(Oc,"locallyInside");function Qw(i,e){let t=i,n=!1,r=(i.x+e.x)/2,s=(i.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}a(Qw,"middleInside");function fb(i,e){let t=new q3(i.i,i.x,i.y),n=new q3(e.i,e.x,e.y),r=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}a(fb,"splitPolygon");function C_(i,e,t,n){let r=new q3(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}a(C_,"insertNode");function Vc(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}a(Vc,"removeNode");function q3(i,e,t){this.i=i,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}a(q3,"Node");function Bw(i,e,t,n){let r=0;for(let s=e,o=t-n;s<t;s+=n)r+=(i[o]-i[s])*(i[s+1]+i[o+1]),o=s;return r}a(Bw,"signedArea");var ad=class i{static{a(this,"ShapeUtils")}static area(e){let t=e.length,n=0;for(let r=t-1,s=0;s<t;r=s++)n+=e[r].x*e[s].y-e[s].x*e[r].y;return n*.5}static isClockWise(e){return i.area(e)<0}static triangulateShape(e,t){let n=[],r=[],s=[];Z_(e),k_(n,e);let o=e.length;t.forEach(Z_);for(let c=0;c<t.length;c++)r.push(o),o+=t[c].length,k_(n,t[c]);let l=Ow.triangulate(n,r);for(let c=0;c<l.length;c+=3)s.push(l.slice(c,c+3));return s}};function Z_(i){let e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}a(Z_,"removeDupEndPts");function k_(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}a(k_,"addContour");var Ca=class i extends vn{static{a(this,"SphereGeometry")}constructor(e=1,t=32,n=16,r=0,s=Math.PI*2,o=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:s,thetaStart:o,thetaLength:l},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));let c=Math.min(o+l,Math.PI),u=0,h=[],d=new K,f=new K,m=[],_=[],M=[],g=[];for(let R=0;R<=n;R++){let y=[],b=R/n,S=0;R===0&&o===0?S=.5/t:R===n&&c===Math.PI&&(S=-.5/t);for(let C=0;C<=t;C++){let W=C/t;d.x=-e*Math.cos(r+W*s)*Math.sin(o+b*l),d.y=e*Math.cos(o+b*l),d.z=e*Math.sin(r+W*s)*Math.sin(o+b*l),_.push(d.x,d.y,d.z),f.copy(d).normalize(),M.push(f.x,f.y,f.z),g.push(W+S,1-b),y.push(u++)}h.push(y)}for(let R=0;R<n;R++)for(let y=0;y<t;y++){let b=h[R][y+1],S=h[R][y],C=h[R+1][y],W=h[R+1][y+1];(R!==0||o>0)&&m.push(b,S,W),(R!==n-1||c<Math.PI)&&m.push(S,C,W)}this.setIndex(m),this.setAttribute("position",new gt(_,3)),this.setAttribute("normal",new gt(M,3)),this.setAttribute("uv",new gt(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new i(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}};var ld=class extends Fr{static{a(this,"MeshPhongMaterial")}constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new ct(16777215),this.specular=new ct(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new ct(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=q_,this.normalScale=new nt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=pm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}};function Fh(i,e,t){return!i||!t&&i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}a(Fh,"convertArray");function Jw(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}a(Jw,"isTypedArray");var Za=class{static{a(this,"Interpolant")}constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){let t=this.parameterPositions,n=this._cachedIndex,r=t[n],s=t[n-1];e:{t:{let o;n:{i:if(!(e<r)){for(let l=n+2;;){if(r===void 0){if(e<s)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===l)break;if(s=r,r=t[++n],e<r)break t}o=t.length;break n}if(!(e>=s)){let l=t[1];e<l&&(n=2,s=l);for(let c=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===c)break;if(r=s,s=t[--n-1],e>=s)break t}o=n,n=0;break n}break e}for(;n<o;){let l=n+o>>>1;e<t[l]?o=l:n=l+1}if(r=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){let t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=n[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},em=class extends Za{static{a(this,"CubicInterpolant")}constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Xg,endingEnd:Xg}}intervalChanged_(e,t,n){let r=this.parameterPositions,s=e-2,o=e+1,l=r[s],c=r[o];if(l===void 0)switch(this.getSettings_().endingStart){case Hg:s=e,l=2*t-n;break;case Gg:s=r.length-2,l=t+r[s]-r[s+1];break;default:s=e,l=n}if(c===void 0)switch(this.getSettings_().endingEnd){case Hg:o=e,c=2*n-t;break;case Gg:o=1,c=n+r[1]-r[0];break;default:o=e-1,c=t}let u=(n-t)*.5,h=this.valueSize;this._weightPrev=u/(t-l),this._weightNext=u/(c-n),this._offsetPrev=s*h,this._offsetNext=o*h}interpolate_(e,t,n,r){let s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=e*l,u=c-l,h=this._offsetPrev,d=this._offsetNext,f=this._weightPrev,m=this._weightNext,_=(n-t)/(r-t),M=_*_,g=M*_,R=-f*g+2*f*M-f*_,y=(1+f)*g+(-1.5-2*f)*M+(-.5+f)*_+1,b=(-1-m)*g+(1.5+m)*M+.5*_,S=m*g-m*M;for(let C=0;C!==l;++C)s[C]=R*o[h+C]+y*o[u+C]+b*o[c+C]+S*o[d+C];return s}},tm=class extends Za{static{a(this,"LinearInterpolant")}constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){let s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=e*l,u=c-l,h=(n-t)/(r-t),d=1-h;for(let f=0;f!==l;++f)s[f]=o[u+f]*d+o[c+f]*h;return s}},nm=class extends Za{static{a(this,"DiscreteInterpolant")}constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}},ki=class{static{a(this,"KeyframeTrack")}constructor(e,t,n,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Fh(t,this.TimeBufferType),this.values=Fh(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){let t=e.constructor,n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:Fh(e.times,Array),values:Fh(e.values,Array)};let r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new nm(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new tm(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new em(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Ch:t=this.InterpolantFactoryMethodDiscrete;break;case Zh:t=this.InterpolantFactoryMethodLinear;break;case n3:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){let n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ch;case this.InterpolantFactoryMethodLinear:return Zh;case this.InterpolantFactoryMethodSmooth:return n3}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){let t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(e!==1){let t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){let n=this.times,r=n.length,s=0,o=r-1;for(;s!==r&&n[s]<e;)++s;for(;o!==-1&&n[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);let l=this.getValueSize();this.times=n.slice(s,o),this.values=this.values.slice(s*l,o*l)}return this}validate(){let e=!0,t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);let n=this.times,r=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let l=0;l!==s;l++){let c=n[l];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,c),e=!1;break}if(o!==null&&o>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,c,o),e=!1;break}o=c}if(r!==void 0&&Jw(r))for(let l=0,c=r.length;l!==c;++l){let u=r[l];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,u),e=!1;break}}return e}optimize(){let e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===n3,s=e.length-1,o=1;for(let l=1;l<s;++l){let c=!1,u=e[l],h=e[l+1];if(u!==h&&(l!==1||u!==e[0]))if(r)c=!0;else{let d=l*n,f=d-n,m=d+n;for(let _=0;_!==n;++_){let M=t[d+_];if(M!==t[f+_]||M!==t[m+_]){c=!0;break}}}if(c){if(l!==o){e[o]=e[l];let d=l*n,f=o*n;for(let m=0;m!==n;++m)t[f+m]=t[d+m]}++o}}if(s>0){e[o]=e[s];for(let l=s*n,c=o*n,u=0;u!==n;++u)t[c+u]=t[l+u];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*n)):(this.times=e,this.values=t),this}clone(){let e=this.times.slice(),t=this.values.slice(),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}};ki.prototype.TimeBufferType=Float32Array;ki.prototype.ValueBufferType=Float32Array;ki.prototype.DefaultInterpolation=Zh;var co=class extends ki{static{a(this,"BooleanKeyframeTrack")}};co.prototype.ValueTypeName="bool";co.prototype.ValueBufferType=Array;co.prototype.DefaultInterpolation=Ch;co.prototype.InterpolantFactoryMethodLinear=void 0;co.prototype.InterpolantFactoryMethodSmooth=void 0;var im=class extends ki{static{a(this,"ColorKeyframeTrack")}};im.prototype.ValueTypeName="color";var rm=class extends ki{static{a(this,"NumberKeyframeTrack")}};rm.prototype.ValueTypeName="number";var sm=class extends Za{static{a(this,"QuaternionLinearInterpolant")}constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){let s=this.resultBuffer,o=this.sampleValues,l=this.valueSize,c=(n-t)/(r-t),u=e*l;for(let h=u+l;u!==h;u+=4)Ri.slerpFlat(s,0,o,u-l,o,u,c);return s}},Uc=class extends ki{static{a(this,"QuaternionKeyframeTrack")}InterpolantFactoryMethodLinear(e){return new sm(this.times,this.values,this.getValueSize(),e)}};Uc.prototype.ValueTypeName="quaternion";Uc.prototype.DefaultInterpolation=Zh;Uc.prototype.InterpolantFactoryMethodSmooth=void 0;var uo=class extends ki{static{a(this,"StringKeyframeTrack")}};uo.prototype.ValueTypeName="string";uo.prototype.ValueBufferType=Array;uo.prototype.DefaultInterpolation=Ch;uo.prototype.InterpolantFactoryMethodLinear=void 0;uo.prototype.InterpolantFactoryMethodSmooth=void 0;var om=class extends ki{static{a(this,"VectorKeyframeTrack")}};om.prototype.ValueTypeName="vector";var cd={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}},am=class{static{a(this,"LoadingManager")}constructor(e,t,n){let r=this,s=!1,o=0,l=0,c,u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(h){l++,s===!1&&r.onStart!==void 0&&r.onStart(h,o,l),s=!0},this.itemEnd=function(h){o++,r.onProgress!==void 0&&r.onProgress(h,o,l),o===l&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(h){r.onError!==void 0&&r.onError(h)},this.resolveURL=function(h){return c?c(h):h},this.setURLModifier=function(h){return c=h,this},this.addHandler=function(h,d){return u.push(h,d),this},this.removeHandler=function(h){let d=u.indexOf(h);return d!==-1&&u.splice(d,2),this},this.getHandler=function(h){for(let d=0,f=u.length;d<f;d+=2){let m=u[d],_=u[d+1];if(m.global&&(m.lastIndex=0),m.test(h))return _}return null}}},zw=new am,Ni=class{static{a(this,"Loader")}constructor(e){this.manager=e!==void 0?e:zw,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){let n=this;return new Promise(function(r,s){n.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};Ni.DEFAULT_MATERIAL_NAME="__DEFAULT";var Lr={},lm=class extends Error{static{a(this,"HttpError")}constructor(e,t){super(e),this.response=t}},ud=class extends Ni{static{a(this,"FileLoader")}constructor(e){super(e)}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let s=cd.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Lr[e]!==void 0){Lr[e].push({onLoad:t,onProgress:n,onError:r});return}Lr[e]=[],Lr[e].push({onLoad:t,onProgress:n,onError:r});let o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,c=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;let h=Lr[e],d=u.body.getReader(),f=u.headers.get("Content-Length")||u.headers.get("X-File-Size"),m=f?parseInt(f):0,_=m!==0,M=0,g=new ReadableStream({start(R){y();function y(){d.read().then(({done:b,value:S})=>{if(b)R.close();else{M+=S.byteLength;let C=new ProgressEvent("progress",{lengthComputable:_,loaded:M,total:m});for(let W=0,F=h.length;W<F;W++){let ee=h[W];ee.onProgress&&ee.onProgress(C)}R.enqueue(S),y()}})}a(y,"readData")}});return new Response(g)}else throw new lm(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(c){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(h=>new DOMParser().parseFromString(h,l));case"json":return u.json();default:if(l===void 0)return u.text();{let d=/charset="?([^;"\s]*)"?/i.exec(l),f=d&&d[1]?d[1].toLowerCase():void 0,m=new TextDecoder(f);return u.arrayBuffer().then(_=>m.decode(_))}}}).then(u=>{cd.add(e,u);let h=Lr[e];delete Lr[e];for(let d=0,f=h.length;d<f;d++){let m=h[d];m.onLoad&&m.onLoad(u)}}).catch(u=>{let h=Lr[e];if(h===void 0)throw this.manager.itemError(e),u;delete Lr[e];for(let d=0,f=h.length;d<f;d++){let m=h[d];m.onError&&m.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}};var cm=class extends Ni{static{a(this,"ImageLoader")}constructor(e){super(e)}load(e,t,n,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);let s=this,o=cd.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;let l=vc("img");function c(){h(),cd.add(e,this),t&&t(this),s.manager.itemEnd(e)}a(c,"onImageLoad");function u(d){h(),r&&r(d),s.manager.itemError(e),s.manager.itemEnd(e)}a(u,"onImageError");function h(){l.removeEventListener("load",c,!1),l.removeEventListener("error",u,!1)}return a(h,"removeEventListeners"),l.addEventListener("load",c,!1),l.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),s.manager.itemStart(e),l.src=e,l}};var hd=class extends Ni{static{a(this,"TextureLoader")}constructor(e){super(e)}load(e,t,n,r){let s=new mi,o=new cm(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(l){s.image=l,s.needsUpdate=!0,t!==void 0&&t(s)},n,r),s}},dd=class extends ln{static{a(this,"Light")}constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new ct(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){let t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}};var N3=new an,X_=new K,H_=new K,um=class{static{a(this,"LightShadow")}constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new nt(512,512),this.map=null,this.mapPass=null,this.matrix=new an,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Nc,this._frameExtents=new nt(1,1),this._viewportCount=1,this._viewports=[new Tn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){let t=this.camera,n=this.matrix;X_.setFromMatrixPosition(e.matrixWorld),t.position.copy(X_),H_.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(H_),t.updateMatrixWorld(),N3.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(N3),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(N3)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}};var hm=class extends um{static{a(this,"DirectionalLightShadow")}constructor(){super(new ed(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},fd=class extends dd{static{a(this,"DirectionalLight")}constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ln.DEFAULT_UP),this.updateMatrix(),this.target=new ln,this.shadow=new hm}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}},pd=class extends dd{static{a(this,"AmbientLight")}constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}};var md=class{static{a(this,"LoaderUtils")}static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){let t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}};var bm="\\[\\]\\.:\\/",$w=new RegExp("["+bm+"]","g"),Mm="[^"+bm+"]",jw="[^"+bm.replace("\\.","")+"]",qw=/((?:WC+[\/:])*)/.source.replace("WC",Mm),eL=/(WCOD+)?/.source.replace("WCOD",jw),tL=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Mm),nL=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Mm),iL=new RegExp("^"+qw+eL+tL+nL+"$"),rL=["material","materials","bones","map"],dm=class{static{a(this,"Composite")}constructor(e,t,n){let r=n||Ct.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();let n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(e,t)}setValue(e,t){let n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(e,t)}bind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){let e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},Ct=class i{static{a(this,"PropertyBinding")}constructor(e,t,n){this.path=t,this.parsedPath=n||i.parseTrackName(t),this.node=i.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new i.Composite(e,t,n):new i(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace($w,"")}static parseTrackName(e){let t=iL.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);let n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){let s=n.nodeName.substring(r+1);rL.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){let n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){let n=a(function(s){for(let o=0;o<s.length;o++){let l=s[o];if(l.name===t||l.uuid===t)return l;let c=n(l.children);if(c)return c}return null},"searchNodeSubtree"),r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){let n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){let n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){let n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){let n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,s=t.propertyIndex;if(e||(e=i.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let u=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let h=0;h<e.length;h++)if(e[h].name===u){u=h;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}let o=e[r];if(o===void 0){let u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?l=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}c=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(c=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}};Ct.Composite=dm;Ct.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Ct.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Ct.prototype.GetterByBindingType=[Ct.prototype._getValue_direct,Ct.prototype._getValue_array,Ct.prototype._getValue_arrayElement,Ct.prototype._getValue_toArray];Ct.prototype.SetterByBindingTypeAndVersioning=[[Ct.prototype._setValue_direct,Ct.prototype._setValue_direct_setNeedsUpdate,Ct.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Ct.prototype._setValue_array,Ct.prototype._setValue_array_setNeedsUpdate,Ct.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Ct.prototype._setValue_arrayElement,Ct.prototype._setValue_arrayElement_setNeedsUpdate,Ct.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Ct.prototype._setValue_fromArray,Ct.prototype._setValue_fromArray_setNeedsUpdate,Ct.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var H5=new Float32Array(1);var Ic=class{static{a(this,"Spherical")}constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Zn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}};typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:fm}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=fm);var pb={type:"change"},xm={type:"start"},mb={type:"end"},Md=new oo,Rb=new Wi,oL=Math.cos(70*tb.DEG2RAD),xd=class extends er{static{a(this,"OrbitControls")}constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new K,this.cursor=new K,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:ho.ROTATE,MIDDLE:ho.DOLLY,RIGHT:ho.PAN},this.touches={ONE:fo.ROTATE,TWO:fo.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return l.phi},this.getAzimuthalAngle=function(){return l.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(v){v.addEventListener("keydown",N),this._domElementKeyEvents=v},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",N),this._domElementKeyEvents=null},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(pb),n.update(),s=r.NONE},this.update=function(){let v=new K,Q=new Ri().setFromUnitVectors(e.up,new K(0,1,0)),H=Q.clone().invert(),ue=new K,Pe=new Ri,Ce=new K,Ee=2*Math.PI;return a(function(pe=null){let X=n.object.position;v.copy(X).sub(n.target),v.applyQuaternion(Q),l.setFromVector3(v),n.autoRotate&&s===r.NONE&&j(P(pe)),n.enableDamping?(l.theta+=c.theta*n.dampingFactor,l.phi+=c.phi*n.dampingFactor):(l.theta+=c.theta,l.phi+=c.phi);let he=n.minAzimuthAngle,Re=n.maxAzimuthAngle;isFinite(he)&&isFinite(Re)&&(he<-Math.PI?he+=Ee:he>Math.PI&&(he-=Ee),Re<-Math.PI?Re+=Ee:Re>Math.PI&&(Re-=Ee),he<=Re?l.theta=Math.max(he,Math.min(Re,l.theta)):l.theta=l.theta>(he+Re)/2?Math.max(he,l.theta):Math.min(Re,l.theta)),l.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,l.phi)),l.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(h,n.dampingFactor):n.target.add(h),n.target.sub(n.cursor),n.target.clampLength(n.minTargetRadius,n.maxTargetRadius),n.target.add(n.cursor),n.zoomToCursor&&W||n.object.isOrthographicCamera?l.radius=ce(l.radius):l.radius=ce(l.radius*u),v.setFromSpherical(l),v.applyQuaternion(H),X.copy(n.target).add(v),n.object.lookAt(n.target),n.enableDamping===!0?(c.theta*=1-n.dampingFactor,c.phi*=1-n.dampingFactor,h.multiplyScalar(1-n.dampingFactor)):(c.set(0,0,0),h.set(0,0,0));let we=!1;if(n.zoomToCursor&&W){let Ue=null;if(n.object.isPerspectiveCamera){let rt=v.length();Ue=ce(rt*u);let Xe=rt-Ue;n.object.position.addScaledVector(S,Xe),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){let rt=new K(C.x,C.y,0);rt.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/u)),n.object.updateProjectionMatrix(),we=!0;let Xe=new K(C.x,C.y,0);Xe.unproject(n.object),n.object.position.sub(Xe).add(rt),n.object.updateMatrixWorld(),Ue=v.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;Ue!==null&&(this.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(Ue).add(n.object.position):(Md.origin.copy(n.object.position),Md.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(Md.direction))<oL?e.lookAt(n.target):(Rb.setFromNormalAndCoplanarPoint(n.object.up,n.target),Md.intersectPlane(Rb,n.target))))}else n.object.isOrthographicCamera&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/u)),n.object.updateProjectionMatrix(),we=!0);return u=1,W=!1,we||ue.distanceToSquared(n.object.position)>o||8*(1-Pe.dot(n.object.quaternion))>o||Ce.distanceToSquared(n.target)>0?(n.dispatchEvent(pb),ue.copy(n.object.position),Pe.copy(n.object.quaternion),Ce.copy(n.target),!0):!1},"update")}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",V),n.domElement.removeEventListener("pointerdown",at),n.domElement.removeEventListener("pointercancel",T),n.domElement.removeEventListener("wheel",O),n.domElement.removeEventListener("pointermove",L),n.domElement.removeEventListener("pointerup",T),n._domElementKeyEvents!==null&&(n._domElementKeyEvents.removeEventListener("keydown",N),n._domElementKeyEvents=null)};let n=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},s=r.NONE,o=1e-6,l=new Ic,c=new Ic,u=1,h=new K,d=new nt,f=new nt,m=new nt,_=new nt,M=new nt,g=new nt,R=new nt,y=new nt,b=new nt,S=new K,C=new nt,W=!1,F=[],ee={};function P(v){return v!==null?2*Math.PI/60*n.autoRotateSpeed*v:2*Math.PI/60/60*n.autoRotateSpeed}a(P,"getAutoRotationAngle");function U(v){let Q=Math.abs(v)/(100*(window.devicePixelRatio|0));return Math.pow(.95,n.zoomSpeed*Q)}a(U,"getZoomScale");function j(v){c.theta-=v}a(j,"rotateLeft");function ae(v){c.phi-=v}a(ae,"rotateUp");let _e=function(){let v=new K;return a(function(H,ue){v.setFromMatrixColumn(ue,0),v.multiplyScalar(-H),h.add(v)},"panLeft")}(),D=function(){let v=new K;return a(function(H,ue){n.screenSpacePanning===!0?v.setFromMatrixColumn(ue,1):(v.setFromMatrixColumn(ue,0),v.crossVectors(n.object.up,v)),v.multiplyScalar(H),h.add(v)},"panUp")}(),z=function(){let v=new K;return a(function(H,ue){let Pe=n.domElement;if(n.object.isPerspectiveCamera){let Ce=n.object.position;v.copy(Ce).sub(n.target);let Ee=v.length();Ee*=Math.tan(n.object.fov/2*Math.PI/180),_e(2*H*Ee/Pe.clientHeight,n.object.matrix),D(2*ue*Ee/Pe.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(_e(H*(n.object.right-n.object.left)/n.object.zoom/Pe.clientWidth,n.object.matrix),D(ue*(n.object.top-n.object.bottom)/n.object.zoom/Pe.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)},"pan")}();function se(v){n.object.isPerspectiveCamera||n.object.isOrthographicCamera?u/=v:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}a(se,"dollyOut");function fe(v){n.object.isPerspectiveCamera||n.object.isOrthographicCamera?u*=v:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}a(fe,"dollyIn");function le(v,Q){if(!n.zoomToCursor)return;W=!0;let H=n.domElement.getBoundingClientRect(),ue=v-H.left,Pe=Q-H.top,Ce=H.width,Ee=H.height;C.x=ue/Ce*2-1,C.y=-(Pe/Ee)*2+1,S.set(C.x,C.y,1).unproject(n.object).sub(n.object.position).normalize()}a(le,"updateZoomParameters");function ce(v){return Math.max(n.minDistance,Math.min(n.maxDistance,v))}a(ce,"clampDistance");function ge(v){d.set(v.clientX,v.clientY)}a(ge,"handleMouseDownRotate");function be(v){le(v.clientX,v.clientX),R.set(v.clientX,v.clientY)}a(be,"handleMouseDownDolly");function Oe(v){_.set(v.clientX,v.clientY)}a(Oe,"handleMouseDownPan");function $(v){f.set(v.clientX,v.clientY),m.subVectors(f,d).multiplyScalar(n.rotateSpeed);let Q=n.domElement;j(2*Math.PI*m.x/Q.clientHeight),ae(2*Math.PI*m.y/Q.clientHeight),d.copy(f),n.update()}a($,"handleMouseMoveRotate");function me(v){y.set(v.clientX,v.clientY),b.subVectors(y,R),b.y>0?se(U(b.y)):b.y<0&&fe(U(b.y)),R.copy(y),n.update()}a(me,"handleMouseMoveDolly");function Se(v){M.set(v.clientX,v.clientY),g.subVectors(M,_).multiplyScalar(n.panSpeed),z(g.x,g.y),_.copy(M),n.update()}a(Se,"handleMouseMovePan");function Be(v){le(v.clientX,v.clientY),v.deltaY<0?fe(U(v.deltaY)):v.deltaY>0&&se(U(v.deltaY)),n.update()}a(Be,"handleMouseWheel");function Le(v){let Q=!1;switch(v.code){case n.keys.UP:v.ctrlKey||v.metaKey||v.shiftKey?ae(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):z(0,n.keyPanSpeed),Q=!0;break;case n.keys.BOTTOM:v.ctrlKey||v.metaKey||v.shiftKey?ae(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):z(0,-n.keyPanSpeed),Q=!0;break;case n.keys.LEFT:v.ctrlKey||v.metaKey||v.shiftKey?j(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):z(n.keyPanSpeed,0),Q=!0;break;case n.keys.RIGHT:v.ctrlKey||v.metaKey||v.shiftKey?j(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):z(-n.keyPanSpeed,0),Q=!0;break}Q&&(v.preventDefault(),n.update())}a(Le,"handleKeyDown");function ze(v){if(F.length===1)d.set(v.pageX,v.pageY);else{let Q=q(v),H=.5*(v.pageX+Q.x),ue=.5*(v.pageY+Q.y);d.set(H,ue)}}a(ze,"handleTouchStartRotate");function qe(v){if(F.length===1)_.set(v.pageX,v.pageY);else{let Q=q(v),H=.5*(v.pageX+Q.x),ue=.5*(v.pageY+Q.y);_.set(H,ue)}}a(qe,"handleTouchStartPan");function Ze(v){let Q=q(v),H=v.pageX-Q.x,ue=v.pageY-Q.y,Pe=Math.sqrt(H*H+ue*ue);R.set(0,Pe)}a(Ze,"handleTouchStartDolly");function st(v){n.enableZoom&&Ze(v),n.enablePan&&qe(v)}a(st,"handleTouchStartDollyPan");function B(v){n.enableZoom&&Ze(v),n.enableRotate&&ze(v)}a(B,"handleTouchStartDollyRotate");function xt(v){if(F.length==1)f.set(v.pageX,v.pageY);else{let H=q(v),ue=.5*(v.pageX+H.x),Pe=.5*(v.pageY+H.y);f.set(ue,Pe)}m.subVectors(f,d).multiplyScalar(n.rotateSpeed);let Q=n.domElement;j(2*Math.PI*m.x/Q.clientHeight),ae(2*Math.PI*m.y/Q.clientHeight),d.copy(f)}a(xt,"handleTouchMoveRotate");function Ge(v){if(F.length===1)M.set(v.pageX,v.pageY);else{let Q=q(v),H=.5*(v.pageX+Q.x),ue=.5*(v.pageY+Q.y);M.set(H,ue)}g.subVectors(M,_).multiplyScalar(n.panSpeed),z(g.x,g.y),_.copy(M)}a(Ge,"handleTouchMovePan");function tt(v){let Q=q(v),H=v.pageX-Q.x,ue=v.pageY-Q.y,Pe=Math.sqrt(H*H+ue*ue);y.set(0,Pe),b.set(0,Math.pow(y.y/R.y,n.zoomSpeed)),se(b.y),R.copy(y);let Ce=(v.pageX+Q.x)*.5,Ee=(v.pageY+Q.y)*.5;le(Ce,Ee)}a(tt,"handleTouchMoveDolly");function De(v){n.enableZoom&&tt(v),n.enablePan&&Ge(v)}a(De,"handleTouchMoveDollyPan");function St(v){n.enableZoom&&tt(v),n.enableRotate&&xt(v)}a(St,"handleTouchMoveDollyRotate");function at(v){n.enabled!==!1&&(F.length===0&&(n.domElement.setPointerCapture(v.pointerId),n.domElement.addEventListener("pointermove",L),n.domElement.addEventListener("pointerup",T)),G(v),v.pointerType==="touch"?I(v):te(v))}a(at,"onPointerDown");function L(v){n.enabled!==!1&&(v.pointerType==="touch"?Z(v):xe(v))}a(L,"onPointerMove");function T(v){Y(v),F.length===0&&(n.domElement.releasePointerCapture(v.pointerId),n.domElement.removeEventListener("pointermove",L),n.domElement.removeEventListener("pointerup",T)),n.dispatchEvent(mb),s=r.NONE}a(T,"onPointerUp");function te(v){let Q;switch(v.button){case 0:Q=n.mouseButtons.LEFT;break;case 1:Q=n.mouseButtons.MIDDLE;break;case 2:Q=n.mouseButtons.RIGHT;break;default:Q=-1}switch(Q){case ho.DOLLY:if(n.enableZoom===!1)return;be(v),s=r.DOLLY;break;case ho.ROTATE:if(v.ctrlKey||v.metaKey||v.shiftKey){if(n.enablePan===!1)return;Oe(v),s=r.PAN}else{if(n.enableRotate===!1)return;ge(v),s=r.ROTATE}break;case ho.PAN:if(v.ctrlKey||v.metaKey||v.shiftKey){if(n.enableRotate===!1)return;ge(v),s=r.ROTATE}else{if(n.enablePan===!1)return;Oe(v),s=r.PAN}break;default:s=r.NONE}s!==r.NONE&&n.dispatchEvent(xm)}a(te,"onMouseDown");function xe(v){switch(s){case r.ROTATE:if(n.enableRotate===!1)return;$(v);break;case r.DOLLY:if(n.enableZoom===!1)return;me(v);break;case r.PAN:if(n.enablePan===!1)return;Se(v);break}}a(xe,"onMouseMove");function O(v){n.enabled===!1||n.enableZoom===!1||s!==r.NONE||(v.preventDefault(),n.dispatchEvent(xm),Be(v),n.dispatchEvent(mb))}a(O,"onMouseWheel");function N(v){n.enabled===!1||n.enablePan===!1||Le(v)}a(N,"onKeyDown");function I(v){switch(k(v),F.length){case 1:switch(n.touches.ONE){case fo.ROTATE:if(n.enableRotate===!1)return;ze(v),s=r.TOUCH_ROTATE;break;case fo.PAN:if(n.enablePan===!1)return;qe(v),s=r.TOUCH_PAN;break;default:s=r.NONE}break;case 2:switch(n.touches.TWO){case fo.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;st(v),s=r.TOUCH_DOLLY_PAN;break;case fo.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;B(v),s=r.TOUCH_DOLLY_ROTATE;break;default:s=r.NONE}break;default:s=r.NONE}s!==r.NONE&&n.dispatchEvent(xm)}a(I,"onTouchStart");function Z(v){switch(k(v),s){case r.TOUCH_ROTATE:if(n.enableRotate===!1)return;xt(v),n.update();break;case r.TOUCH_PAN:if(n.enablePan===!1)return;Ge(v),n.update();break;case r.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;De(v),n.update();break;case r.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;St(v),n.update();break;default:s=r.NONE}}a(Z,"onTouchMove");function V(v){n.enabled!==!1&&v.preventDefault()}a(V,"onContextMenu");function G(v){F.push(v.pointerId)}a(G,"addPointer");function Y(v){delete ee[v.pointerId];for(let Q=0;Q<F.length;Q++)if(F[Q]==v.pointerId){F.splice(Q,1);return}}a(Y,"removePointer");function k(v){let Q=ee[v.pointerId];Q===void 0&&(Q=new nt,ee[v.pointerId]=Q),Q.set(v.pageX,v.pageY)}a(k,"trackPointer");function q(v){let Q=v.pointerId===F[0]?F[1]:F[0];return ee[Q]}a(q,"getSecondPointerPosition"),n.domElement.addEventListener("contextmenu",V),n.domElement.addEventListener("pointerdown",at),n.domElement.addEventListener("pointercancel",T),n.domElement.addEventListener("wheel",O,{passive:!1}),this.update()}};var aL=typeof global=="object"&&global&&global.Object===Object&&global,yd=aL;var lL=typeof self=="object"&&self&&self.Object===Object&&self,cL=yd||lL||Function("return this")(),cn=cL;var uL=cn.Symbol,Nn=uL;var gb=Object.prototype,hL=gb.hasOwnProperty,dL=gb.toString,Fc=Nn?Nn.toStringTag:void 0;function fL(i){var e=hL.call(i,Fc),t=i[Fc];try{i[Fc]=void 0;var n=!0}catch{}var r=dL.call(i);return n&&(e?i[Fc]=t:delete i[Fc]),r}a(fL,"getRawTag");var _b=fL;var pL=Object.prototype,mL=pL.toString;function RL(i){return mL.call(i)}a(RL,"objectToString");var bb=RL;var gL="[object Null]",_L="[object Undefined]",Mb=Nn?Nn.toStringTag:void 0;function bL(i){return i==null?i===void 0?_L:gL:Mb&&Mb in Object(i)?_b(i):bb(i)}a(bL,"baseGetTag");var Qn=bL;function ML(i){return i!=null&&typeof i=="object"}a(ML,"isObjectLike");var en=ML;var xL="[object Symbol]";function yL(i){return typeof i=="symbol"||en(i)&&Qn(i)==xL}a(yL,"isSymbol");var Ms=yL;function SL(i,e){for(var t=-1,n=i==null?0:i.length,r=Array(n);++t<n;)r[t]=e(i[t],t,i);return r}a(SL,"arrayMap");var tr=SL;var TL=Array.isArray,$e=TL;var vL=1/0,xb=Nn?Nn.prototype:void 0,yb=xb?xb.toString:void 0;function Sb(i){if(typeof i=="string")return i;if($e(i))return tr(i,Sb)+"";if(Ms(i))return yb?yb.call(i):"";var e=i+"";return e=="0"&&1/i==-vL?"-0":e}a(Sb,"baseToString");var Tb=Sb;var NL=/\s/;function PL(i){for(var e=i.length;e--&&NL.test(i.charAt(e)););return e}a(PL,"trimmedEndIndex");var vb=PL;var EL=/^\s+/;function wL(i){return i&&i.slice(0,vb(i)+1).replace(EL,"")}a(wL,"baseTrim");var Nb=wL;function LL(i){var e=typeof i;return i!=null&&(e=="object"||e=="function")}a(LL,"isObject");var Yt=LL;var Pb=0/0,AL=/^[-+]0x[0-9a-f]+$/i,OL=/^0b[01]+$/i,VL=/^0o[0-7]+$/i,UL=parseInt;function IL(i){if(typeof i=="number")return i;if(Ms(i))return Pb;if(Yt(i)){var e=typeof i.valueOf=="function"?i.valueOf():i;i=Yt(e)?e+"":e}if(typeof i!="string")return i===0?i:+i;i=Nb(i);var t=OL.test(i);return t||VL.test(i)?UL(i.slice(2),t?2:8):AL.test(i)?Pb:+i}a(IL,"toNumber");var Eb=IL;var wb=1/0,FL=17976931348623157e292;function WL(i){if(!i)return i===0?i:0;if(i=Eb(i),i===wb||i===-wb){var e=i<0?-1:1;return e*FL}return i===i?i:0}a(WL,"toFinite");var Lb=WL;function CL(i){var e=Lb(i),t=e%1;return e===e?t?e-t:e:0}a(CL,"toInteger");var nr=CL;function ZL(i){return i}a(ZL,"identity");var Pi=ZL;var kL="[object AsyncFunction]",XL="[object Function]",HL="[object GeneratorFunction]",GL="[object Proxy]";function DL(i){if(!Yt(i))return!1;var e=Qn(i);return e==XL||e==HL||e==kL||e==GL}a(DL,"isFunction");var Bn=DL;var YL=cn["__core-js_shared__"],Sd=YL;var Ab=function(){var i=/[^.]+$/.exec(Sd&&Sd.keys&&Sd.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}();function KL(i){return!!Ab&&Ab in i}a(KL,"isMasked");var Ob=KL;var QL=Function.prototype,BL=QL.toString;function JL(i){if(i!=null){try{return BL.call(i)}catch{}try{return i+""}catch{}}return""}a(JL,"toSource");var Zr=JL;var zL=/[\\^$.*+?()[\]{}|]/g,$L=/^\[object .+?Constructor\]$/,jL=Function.prototype,qL=Object.prototype,eA=jL.toString,tA=qL.hasOwnProperty,nA=RegExp("^"+eA.call(tA).replace(zL,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function iA(i){if(!Yt(i)||Ob(i))return!1;var e=Bn(i)?nA:$L;return e.test(Zr(i))}a(iA,"baseIsNative");var Vb=iA;function rA(i,e){return i?.[e]}a(rA,"getValue");var Ub=rA;function sA(i,e){var t=Ub(i,e);return Vb(t)?t:void 0}a(sA,"getNative");var ri=sA;var oA=ri(cn,"WeakMap"),Td=oA;var Ib=Object.create,aA=function(){function i(){}return a(i,"object"),function(e){if(!Yt(e))return{};if(Ib)return Ib(e);i.prototype=e;var t=new i;return i.prototype=void 0,t}}(),Fb=aA;function lA(i,e,t){switch(t.length){case 0:return i.call(e);case 1:return i.call(e,t[0]);case 2:return i.call(e,t[0],t[1]);case 3:return i.call(e,t[0],t[1],t[2])}return i.apply(e,t)}a(lA,"apply");var Wb=lA;function cA(){}a(cA,"noop");var Kt=cA;function uA(i,e){var t=-1,n=i.length;for(e||(e=Array(n));++t<n;)e[t]=i[t];return e}a(uA,"copyArray");var Cb=uA;var hA=800,dA=16,fA=Date.now;function pA(i){var e=0,t=0;return function(){var n=fA(),r=dA-(n-t);if(t=n,r>0){if(++e>=hA)return arguments[0]}else e=0;return i.apply(void 0,arguments)}}a(pA,"shortOut");var Zb=pA;function mA(i){return function(){return i}}a(mA,"constant");var kb=mA;var RA=function(){try{var i=ri(Object,"defineProperty");return i({},"",{}),i}catch{}}(),Ha=RA;var gA=Ha?function(i,e){return Ha(i,"toString",{configurable:!0,enumerable:!1,value:kb(e),writable:!0})}:Pi,Xb=gA;var _A=Zb(Xb),Hb=_A;function bA(i,e){for(var t=-1,n=i==null?0:i.length;++t<n&&e(i[t],t,i)!==!1;);return i}a(bA,"arrayEach");var vd=bA;function MA(i,e,t,n){for(var r=i.length,s=t+(n?1:-1);n?s--:++s<r;)if(e(i[s],s,i))return s;return-1}a(MA,"baseFindIndex");var Nd=MA;function xA(i){return i!==i}a(xA,"baseIsNaN");var Gb=xA;function yA(i,e,t){for(var n=t-1,r=i.length;++n<r;)if(i[n]===e)return n;return-1}a(yA,"strictIndexOf");var Db=yA;function SA(i,e,t){return e===e?Db(i,e,t):Nd(i,Gb,t)}a(SA,"baseIndexOf");var Ga=SA;function TA(i,e){var t=i==null?0:i.length;return!!t&&Ga(i,e,0)>-1}a(TA,"arrayIncludes");var Pd=TA;var vA=9007199254740991,NA=/^(?:0|[1-9]\d*)$/;function PA(i,e){var t=typeof i;return e=e??vA,!!e&&(t=="number"||t!="symbol"&&NA.test(i))&&i>-1&&i%1==0&&i<e}a(PA,"isIndex");var xs=PA;function EA(i,e,t){e=="__proto__"&&Ha?Ha(i,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):i[e]=t}a(EA,"baseAssignValue");var Da=EA;function wA(i,e){return i===e||i!==i&&e!==e}a(wA,"eq");var ir=wA;var LA=Object.prototype,AA=LA.hasOwnProperty;function OA(i,e,t){var n=i[e];(!(AA.call(i,e)&&ir(n,t))||t===void 0&&!(e in i))&&Da(i,e,t)}a(OA,"assignValue");var ys=OA;function VA(i,e,t,n){var r=!t;t||(t={});for(var s=-1,o=e.length;++s<o;){var l=e[s],c=n?n(t[l],i[l],l,t,i):void 0;c===void 0&&(c=i[l]),r?Da(t,l,c):ys(t,l,c)}return t}a(VA,"copyObject");var rr=VA;var Yb=Math.max;function UA(i,e,t){return e=Yb(e===void 0?i.length-1:e,0),function(){for(var n=arguments,r=-1,s=Yb(n.length-e,0),o=Array(s);++r<s;)o[r]=n[e+r];r=-1;for(var l=Array(e+1);++r<e;)l[r]=n[r];return l[e]=t(o),Wb(i,this,l)}}a(UA,"overRest");var Kb=UA;function IA(i,e){return Hb(Kb(i,e,Pi),i+"")}a(IA,"baseRest");var Ya=IA;var FA=9007199254740991;function WA(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=FA}a(WA,"isLength");var Ka=WA;function CA(i){return i!=null&&Ka(i.length)&&!Bn(i)}a(CA,"isArrayLike");var un=CA;function ZA(i,e,t){if(!Yt(t))return!1;var n=typeof e;return(n=="number"?un(t)&&xs(e,t.length):n=="string"&&e in t)?ir(t[e],i):!1}a(ZA,"isIterateeCall");var Ss=ZA;function kA(i){return Ya(function(e,t){var n=-1,r=t.length,s=r>1?t[r-1]:void 0,o=r>2?t[2]:void 0;for(s=i.length>3&&typeof s=="function"?(r--,s):void 0,o&&Ss(t[0],t[1],o)&&(s=r<3?void 0:s,r=1),e=Object(e);++n<r;){var l=t[n];l&&i(e,l,n,s)}return e})}a(kA,"createAssigner");var Qb=kA;var XA=Object.prototype;function HA(i){var e=i&&i.constructor,t=typeof e=="function"&&e.prototype||XA;return i===t}a(HA,"isPrototype");var sr=HA;function GA(i,e){for(var t=-1,n=Array(i);++t<i;)n[t]=e(t);return n}a(GA,"baseTimes");var Bb=GA;var DA="[object Arguments]";function YA(i){return en(i)&&Qn(i)==DA}a(YA,"baseIsArguments");var ym=YA;var Jb=Object.prototype,KA=Jb.hasOwnProperty,QA=Jb.propertyIsEnumerable,BA=ym(function(){return arguments}())?ym:function(i){return en(i)&&KA.call(i,"callee")&&!QA.call(i,"callee")},Ts=BA;function JA(){return!1}a(JA,"stubFalse");var zb=JA;var qb=typeof exports=="object"&&exports&&!exports.nodeType&&exports,$b=qb&&typeof module=="object"&&module&&!module.nodeType&&module,zA=$b&&$b.exports===qb,jb=zA?cn.Buffer:void 0,$A=jb?jb.isBuffer:void 0,jA=$A||zb,kr=jA;var qA="[object Arguments]",eO="[object Array]",tO="[object Boolean]",nO="[object Date]",iO="[object Error]",rO="[object Function]",sO="[object Map]",oO="[object Number]",aO="[object Object]",lO="[object RegExp]",cO="[object Set]",uO="[object String]",hO="[object WeakMap]",dO="[object ArrayBuffer]",fO="[object DataView]",pO="[object Float32Array]",mO="[object Float64Array]",RO="[object Int8Array]",gO="[object Int16Array]",_O="[object Int32Array]",bO="[object Uint8Array]",MO="[object Uint8ClampedArray]",xO="[object Uint16Array]",yO="[object Uint32Array]",It={};It[pO]=It[mO]=It[RO]=It[gO]=It[_O]=It[bO]=It[MO]=It[xO]=It[yO]=!0;It[qA]=It[eO]=It[dO]=It[tO]=It[fO]=It[nO]=It[iO]=It[rO]=It[sO]=It[oO]=It[aO]=It[lO]=It[cO]=It[uO]=It[hO]=!1;function SO(i){return en(i)&&Ka(i.length)&&!!It[Qn(i)]}a(SO,"baseIsTypedArray");var eM=SO;function TO(i){return function(e){return i(e)}}a(TO,"baseUnary");var or=TO;var tM=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Wc=tM&&typeof module=="object"&&module&&!module.nodeType&&module,vO=Wc&&Wc.exports===tM,Sm=vO&&yd.process,NO=function(){try{var i=Wc&&Wc.require&&Wc.require("util").types;return i||Sm&&Sm.binding&&Sm.binding("util")}catch{}}(),Ei=NO;var nM=Ei&&Ei.isTypedArray,PO=nM?or(nM):eM,Qa=PO;var EO=Object.prototype,wO=EO.hasOwnProperty;function LO(i,e){var t=$e(i),n=!t&&Ts(i),r=!t&&!n&&kr(i),s=!t&&!n&&!r&&Qa(i),o=t||n||r||s,l=o?Bb(i.length,String):[],c=l.length;for(var u in i)(e||wO.call(i,u))&&!(o&&(u=="length"||r&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||xs(u,c)))&&l.push(u);return l}a(LO,"arrayLikeKeys");var Ed=LO;function AO(i,e){return function(t){return i(e(t))}}a(AO,"overArg");var wd=AO;var OO=wd(Object.keys,Object),iM=OO;var VO=Object.prototype,UO=VO.hasOwnProperty;function IO(i){if(!sr(i))return iM(i);var e=[];for(var t in Object(i))UO.call(i,t)&&t!="constructor"&&e.push(t);return e}a(IO,"baseKeys");var Ld=IO;function FO(i){return un(i)?Ed(i):Ld(i)}a(FO,"keys");var wt=FO;var WO=Object.prototype,CO=WO.hasOwnProperty,ZO=Qb(function(i,e){if(sr(e)||un(e)){rr(e,wt(e),i);return}for(var t in e)CO.call(e,t)&&ys(i,t,e[t])}),An=ZO;function kO(i){var e=[];if(i!=null)for(var t in Object(i))e.push(t);return e}a(kO,"nativeKeysIn");var rM=kO;var XO=Object.prototype,HO=XO.hasOwnProperty;function GO(i){if(!Yt(i))return rM(i);var e=sr(i),t=[];for(var n in i)n=="constructor"&&(e||!HO.call(i,n))||t.push(n);return t}a(GO,"baseKeysIn");var sM=GO;function DO(i){return un(i)?Ed(i,!0):sM(i)}a(DO,"keysIn");var vs=DO;var YO=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,KO=/^\w*$/;function QO(i,e){if($e(i))return!1;var t=typeof i;return t=="number"||t=="symbol"||t=="boolean"||i==null||Ms(i)?!0:KO.test(i)||!YO.test(i)||e!=null&&i in Object(e)}a(QO,"isKey");var Ba=QO;var BO=ri(Object,"create"),Xr=BO;function JO(){this.__data__=Xr?Xr(null):{},this.size=0}a(JO,"hashClear");var oM=JO;function zO(i){var e=this.has(i)&&delete this.__data__[i];return this.size-=e?1:0,e}a(zO,"hashDelete");var aM=zO;var $O="__lodash_hash_undefined__",jO=Object.prototype,qO=jO.hasOwnProperty;function eV(i){var e=this.__data__;if(Xr){var t=e[i];return t===$O?void 0:t}return qO.call(e,i)?e[i]:void 0}a(eV,"hashGet");var lM=eV;var tV=Object.prototype,nV=tV.hasOwnProperty;function iV(i){var e=this.__data__;return Xr?e[i]!==void 0:nV.call(e,i)}a(iV,"hashHas");var cM=iV;var rV="__lodash_hash_undefined__";function sV(i,e){var t=this.__data__;return this.size+=this.has(i)?0:1,t[i]=Xr&&e===void 0?rV:e,this}a(sV,"hashSet");var uM=sV;function Ja(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}a(Ja,"Hash");Ja.prototype.clear=oM;Ja.prototype.delete=aM;Ja.prototype.get=lM;Ja.prototype.has=cM;Ja.prototype.set=uM;var Tm=Ja;function oV(){this.__data__=[],this.size=0}a(oV,"listCacheClear");var hM=oV;function aV(i,e){for(var t=i.length;t--;)if(ir(i[t][0],e))return t;return-1}a(aV,"assocIndexOf");var Ns=aV;var lV=Array.prototype,cV=lV.splice;function uV(i){var e=this.__data__,t=Ns(e,i);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():cV.call(e,t,1),--this.size,!0}a(uV,"listCacheDelete");var dM=uV;function hV(i){var e=this.__data__,t=Ns(e,i);return t<0?void 0:e[t][1]}a(hV,"listCacheGet");var fM=hV;function dV(i){return Ns(this.__data__,i)>-1}a(dV,"listCacheHas");var pM=dV;function fV(i,e){var t=this.__data__,n=Ns(t,i);return n<0?(++this.size,t.push([i,e])):t[n][1]=e,this}a(fV,"listCacheSet");var mM=fV;function za(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}a(za,"ListCache");za.prototype.clear=hM;za.prototype.delete=dM;za.prototype.get=fM;za.prototype.has=pM;za.prototype.set=mM;var Ps=za;var pV=ri(cn,"Map"),Es=pV;function mV(){this.size=0,this.__data__={hash:new Tm,map:new(Es||Ps),string:new Tm}}a(mV,"mapCacheClear");var RM=mV;function RV(i){var e=typeof i;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?i!=="__proto__":i===null}a(RV,"isKeyable");var gM=RV;function gV(i,e){var t=i.__data__;return gM(e)?t[typeof e=="string"?"string":"hash"]:t.map}a(gV,"getMapData");var ws=gV;function _V(i){var e=ws(this,i).delete(i);return this.size-=e?1:0,e}a(_V,"mapCacheDelete");var _M=_V;function bV(i){return ws(this,i).get(i)}a(bV,"mapCacheGet");var bM=bV;function MV(i){return ws(this,i).has(i)}a(MV,"mapCacheHas");var MM=MV;function xV(i,e){var t=ws(this,i),n=t.size;return t.set(i,e),this.size+=t.size==n?0:1,this}a(xV,"mapCacheSet");var xM=xV;function $a(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}a($a,"MapCache");$a.prototype.clear=RM;$a.prototype.delete=_M;$a.prototype.get=bM;$a.prototype.has=MM;$a.prototype.set=xM;var po=$a;var yV="Expected a function";function vm(i,e){if(typeof i!="function"||e!=null&&typeof e!="function")throw new TypeError(yV);var t=a(function(){var n=arguments,r=e?e.apply(this,n):n[0],s=t.cache;if(s.has(r))return s.get(r);var o=i.apply(this,n);return t.cache=s.set(r,o)||s,o},"memoized");return t.cache=new(vm.Cache||po),t}a(vm,"memoize");vm.Cache=po;var yM=vm;var SV=500;function TV(i){var e=yM(i,function(n){return t.size===SV&&t.clear(),n}),t=e.cache;return e}a(TV,"memoizeCapped");var SM=TV;var vV=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,NV=/\\(\\)?/g,PV=SM(function(i){var e=[];return i.charCodeAt(0)===46&&e.push(""),i.replace(vV,function(t,n,r,s){e.push(r?s.replace(NV,"$1"):n||t)}),e}),TM=PV;function EV(i){return i==null?"":Tb(i)}a(EV,"toString");var vM=EV;function wV(i,e){return $e(i)?i:Ba(i,e)?[i]:TM(vM(i))}a(wV,"castPath");var Ls=wV;var LV=1/0;function AV(i){if(typeof i=="string"||Ms(i))return i;var e=i+"";return e=="0"&&1/i==-LV?"-0":e}a(AV,"toKey");var ar=AV;function OV(i,e){e=Ls(e,i);for(var t=0,n=e.length;i!=null&&t<n;)i=i[ar(e[t++])];return t&&t==n?i:void 0}a(OV,"baseGet");var ja=OV;function VV(i,e,t){var n=i==null?void 0:ja(i,e);return n===void 0?t:n}a(VV,"get");var NM=VV;function UV(i,e){for(var t=-1,n=e.length,r=i.length;++t<n;)i[r+t]=e[t];return i}a(UV,"arrayPush");var qa=UV;var PM=Nn?Nn.isConcatSpreadable:void 0;function IV(i){return $e(i)||Ts(i)||!!(PM&&i&&i[PM])}a(IV,"isFlattenable");var EM=IV;function wM(i,e,t,n,r){var s=-1,o=i.length;for(t||(t=EM),r||(r=[]);++s<o;){var l=i[s];e>0&&t(l)?e>1?wM(l,e-1,t,n,r):qa(r,l):n||(r[r.length]=l)}return r}a(wM,"baseFlatten");var el=wM;function FV(i){var e=i==null?0:i.length;return e?el(i,1):[]}a(FV,"flatten");var _n=FV;var WV=wd(Object.getPrototypeOf,Object),Ad=WV;function CV(i,e,t){var n=-1,r=i.length;e<0&&(e=-e>r?0:r+e),t=t>r?r:t,t<0&&(t+=r),r=e>t?0:t-e>>>0,e>>>=0;for(var s=Array(r);++n<r;)s[n]=i[n+e];return s}a(CV,"baseSlice");var Od=CV;function ZV(i,e,t,n){var r=-1,s=i==null?0:i.length;for(n&&s&&(t=i[++r]);++r<s;)t=e(t,i[r],r,i);return t}a(ZV,"arrayReduce");var LM=ZV;function kV(){this.__data__=new Ps,this.size=0}a(kV,"stackClear");var AM=kV;function XV(i){var e=this.__data__,t=e.delete(i);return this.size=e.size,t}a(XV,"stackDelete");var OM=XV;function HV(i){return this.__data__.get(i)}a(HV,"stackGet");var VM=HV;function GV(i){return this.__data__.has(i)}a(GV,"stackHas");var UM=GV;var DV=200;function YV(i,e){var t=this.__data__;if(t instanceof Ps){var n=t.__data__;if(!Es||n.length<DV-1)return n.push([i,e]),this.size=++t.size,this;t=this.__data__=new po(n)}return t.set(i,e),this.size=t.size,this}a(YV,"stackSet");var IM=YV;function tl(i){var e=this.__data__=new Ps(i);this.size=e.size}a(tl,"Stack");tl.prototype.clear=AM;tl.prototype.delete=OM;tl.prototype.get=VM;tl.prototype.has=UM;tl.prototype.set=IM;var As=tl;function KV(i,e){return i&&rr(e,wt(e),i)}a(KV,"baseAssign");var FM=KV;function QV(i,e){return i&&rr(e,vs(e),i)}a(QV,"baseAssignIn");var WM=QV;var XM=typeof exports=="object"&&exports&&!exports.nodeType&&exports,CM=XM&&typeof module=="object"&&module&&!module.nodeType&&module,BV=CM&&CM.exports===XM,ZM=BV?cn.Buffer:void 0,kM=ZM?ZM.allocUnsafe:void 0;function JV(i,e){if(e)return i.slice();var t=i.length,n=kM?kM(t):new i.constructor(t);return i.copy(n),n}a(JV,"cloneBuffer");var HM=JV;function zV(i,e){for(var t=-1,n=i==null?0:i.length,r=0,s=[];++t<n;){var o=i[t];e(o,t,i)&&(s[r++]=o)}return s}a(zV,"arrayFilter");var nl=zV;function $V(){return[]}a($V,"stubArray");var Vd=$V;var jV=Object.prototype,qV=jV.propertyIsEnumerable,GM=Object.getOwnPropertySymbols,e1=GM?function(i){return i==null?[]:(i=Object(i),nl(GM(i),function(e){return qV.call(i,e)}))}:Vd,il=e1;function t1(i,e){return rr(i,il(i),e)}a(t1,"copySymbols");var DM=t1;var n1=Object.getOwnPropertySymbols,i1=n1?function(i){for(var e=[];i;)qa(e,il(i)),i=Ad(i);return e}:Vd,Ud=i1;function r1(i,e){return rr(i,Ud(i),e)}a(r1,"copySymbolsIn");var YM=r1;function s1(i,e,t){var n=e(i);return $e(i)?n:qa(n,t(i))}a(s1,"baseGetAllKeys");var Id=s1;function o1(i){return Id(i,wt,il)}a(o1,"getAllKeys");var Cc=o1;function a1(i){return Id(i,vs,Ud)}a(a1,"getAllKeysIn");var Fd=a1;var l1=ri(cn,"DataView"),Wd=l1;var c1=ri(cn,"Promise"),Cd=c1;var u1=ri(cn,"Set"),Os=u1;var KM="[object Map]",h1="[object Object]",QM="[object Promise]",BM="[object Set]",JM="[object WeakMap]",zM="[object DataView]",d1=Zr(Wd),f1=Zr(Es),p1=Zr(Cd),m1=Zr(Os),R1=Zr(Td),mo=Qn;(Wd&&mo(new Wd(new ArrayBuffer(1)))!=zM||Es&&mo(new Es)!=KM||Cd&&mo(Cd.resolve())!=QM||Os&&mo(new Os)!=BM||Td&&mo(new Td)!=JM)&&(mo=a(function(i){var e=Qn(i),t=e==h1?i.constructor:void 0,n=t?Zr(t):"";if(n)switch(n){case d1:return zM;case f1:return KM;case p1:return QM;case m1:return BM;case R1:return JM}return e},"getTag"));var Xi=mo;var g1=Object.prototype,_1=g1.hasOwnProperty;function b1(i){var e=i.length,t=new i.constructor(e);return e&&typeof i[0]=="string"&&_1.call(i,"index")&&(t.index=i.index,t.input=i.input),t}a(b1,"initCloneArray");var $M=b1;var M1=cn.Uint8Array,rl=M1;function x1(i){var e=new i.constructor(i.byteLength);return new rl(e).set(new rl(i)),e}a(x1,"cloneArrayBuffer");var sl=x1;function y1(i,e){var t=e?sl(i.buffer):i.buffer;return new i.constructor(t,i.byteOffset,i.byteLength)}a(y1,"cloneDataView");var jM=y1;var S1=/\w*$/;function T1(i){var e=new i.constructor(i.source,S1.exec(i));return e.lastIndex=i.lastIndex,e}a(T1,"cloneRegExp");var qM=T1;var ex=Nn?Nn.prototype:void 0,tx=ex?ex.valueOf:void 0;function v1(i){return tx?Object(tx.call(i)):{}}a(v1,"cloneSymbol");var nx=v1;function N1(i,e){var t=e?sl(i.buffer):i.buffer;return new i.constructor(t,i.byteOffset,i.length)}a(N1,"cloneTypedArray");var ix=N1;var P1="[object Boolean]",E1="[object Date]",w1="[object Map]",L1="[object Number]",A1="[object RegExp]",O1="[object Set]",V1="[object String]",U1="[object Symbol]",I1="[object ArrayBuffer]",F1="[object DataView]",W1="[object Float32Array]",C1="[object Float64Array]",Z1="[object Int8Array]",k1="[object Int16Array]",X1="[object Int32Array]",H1="[object Uint8Array]",G1="[object Uint8ClampedArray]",D1="[object Uint16Array]",Y1="[object Uint32Array]";function K1(i,e,t){var n=i.constructor;switch(e){case I1:return sl(i);case P1:case E1:return new n(+i);case F1:return jM(i,t);case W1:case C1:case Z1:case k1:case X1:case H1:case G1:case D1:case Y1:return ix(i,t);case w1:return new n;case L1:case V1:return new n(i);case A1:return qM(i);case O1:return new n;case U1:return nx(i)}}a(K1,"initCloneByTag");var rx=K1;function Q1(i){return typeof i.constructor=="function"&&!sr(i)?Fb(Ad(i)):{}}a(Q1,"initCloneObject");var sx=Q1;var B1="[object Map]";function J1(i){return en(i)&&Xi(i)==B1}a(J1,"baseIsMap");var ox=J1;var ax=Ei&&Ei.isMap,z1=ax?or(ax):ox,lx=z1;var $1="[object Set]";function j1(i){return en(i)&&Xi(i)==$1}a(j1,"baseIsSet");var cx=j1;var ux=Ei&&Ei.isSet,q1=ux?or(ux):cx,hx=q1;var eU=1,tU=2,nU=4,dx="[object Arguments]",iU="[object Array]",rU="[object Boolean]",sU="[object Date]",oU="[object Error]",fx="[object Function]",aU="[object GeneratorFunction]",lU="[object Map]",cU="[object Number]",px="[object Object]",uU="[object RegExp]",hU="[object Set]",dU="[object String]",fU="[object Symbol]",pU="[object WeakMap]",mU="[object ArrayBuffer]",RU="[object DataView]",gU="[object Float32Array]",_U="[object Float64Array]",bU="[object Int8Array]",MU="[object Int16Array]",xU="[object Int32Array]",yU="[object Uint8Array]",SU="[object Uint8ClampedArray]",TU="[object Uint16Array]",vU="[object Uint32Array]",Lt={};Lt[dx]=Lt[iU]=Lt[mU]=Lt[RU]=Lt[rU]=Lt[sU]=Lt[gU]=Lt[_U]=Lt[bU]=Lt[MU]=Lt[xU]=Lt[lU]=Lt[cU]=Lt[px]=Lt[uU]=Lt[hU]=Lt[dU]=Lt[fU]=Lt[yU]=Lt[SU]=Lt[TU]=Lt[vU]=!0;Lt[oU]=Lt[fx]=Lt[pU]=!1;function Zd(i,e,t,n,r,s){var o,l=e&eU,c=e&tU,u=e&nU;if(t&&(o=r?t(i,n,r,s):t(i)),o!==void 0)return o;if(!Yt(i))return i;var h=$e(i);if(h){if(o=$M(i),!l)return Cb(i,o)}else{var d=Xi(i),f=d==fx||d==aU;if(kr(i))return HM(i,l);if(d==px||d==dx||f&&!r){if(o=c||f?{}:sx(i),!l)return c?YM(i,WM(o,i)):DM(i,FM(o,i))}else{if(!Lt[d])return r?i:{};o=rx(i,d,l)}}s||(s=new As);var m=s.get(i);if(m)return m;s.set(i,o),hx(i)?i.forEach(function(g){o.add(Zd(g,e,t,g,i,s))}):lx(i)&&i.forEach(function(g,R){o.set(R,Zd(g,e,t,R,i,s))});var _=u?c?Fd:Cc:c?vs:wt,M=h?void 0:_(i);return vd(M||i,function(g,R){M&&(R=g,g=i[R]),ys(o,R,Zd(g,e,t,R,i,s))}),o}a(Zd,"baseClone");var mx=Zd;var NU=4;function PU(i){return mx(i,NU)}a(PU,"clone");var At=PU;function EU(i){for(var e=-1,t=i==null?0:i.length,n=0,r=[];++e<t;){var s=i[e];s&&(r[n++]=s)}return r}a(EU,"compact");var lr=EU;var wU="__lodash_hash_undefined__";function LU(i){return this.__data__.set(i,wU),this}a(LU,"setCacheAdd");var Rx=LU;function AU(i){return this.__data__.has(i)}a(AU,"setCacheHas");var gx=AU;function kd(i){var e=-1,t=i==null?0:i.length;for(this.__data__=new po;++e<t;)this.add(i[e])}a(kd,"SetCache");kd.prototype.add=kd.prototype.push=Rx;kd.prototype.has=gx;var ol=kd;function OU(i,e){for(var t=-1,n=i==null?0:i.length;++t<n;)if(e(i[t],t,i))return!0;return!1}a(OU,"arraySome");var Xd=OU;function VU(i,e){return i.has(e)}a(VU,"cacheHas");var al=VU;var UU=1,IU=2;function FU(i,e,t,n,r,s){var o=t&UU,l=i.length,c=e.length;if(l!=c&&!(o&&c>l))return!1;var u=s.get(i),h=s.get(e);if(u&&h)return u==e&&h==i;var d=-1,f=!0,m=t&IU?new ol:void 0;for(s.set(i,e),s.set(e,i);++d<l;){var _=i[d],M=e[d];if(n)var g=o?n(M,_,d,e,i,s):n(_,M,d,i,e,s);if(g!==void 0){if(g)continue;f=!1;break}if(m){if(!Xd(e,function(R,y){if(!al(m,y)&&(_===R||r(_,R,t,n,s)))return m.push(y)})){f=!1;break}}else if(!(_===M||r(_,M,t,n,s))){f=!1;break}}return s.delete(i),s.delete(e),f}a(FU,"equalArrays");var Hd=FU;function WU(i){var e=-1,t=Array(i.size);return i.forEach(function(n,r){t[++e]=[r,n]}),t}a(WU,"mapToArray");var _x=WU;function CU(i){var e=-1,t=Array(i.size);return i.forEach(function(n){t[++e]=n}),t}a(CU,"setToArray");var ll=CU;var ZU=1,kU=2,XU="[object Boolean]",HU="[object Date]",GU="[object Error]",DU="[object Map]",YU="[object Number]",KU="[object RegExp]",QU="[object Set]",BU="[object String]",JU="[object Symbol]",zU="[object ArrayBuffer]",$U="[object DataView]",bx=Nn?Nn.prototype:void 0,Nm=bx?bx.valueOf:void 0;function jU(i,e,t,n,r,s,o){switch(t){case $U:if(i.byteLength!=e.byteLength||i.byteOffset!=e.byteOffset)return!1;i=i.buffer,e=e.buffer;case zU:return!(i.byteLength!=e.byteLength||!s(new rl(i),new rl(e)));case XU:case HU:case YU:return ir(+i,+e);case GU:return i.name==e.name&&i.message==e.message;case KU:case BU:return i==e+"";case DU:var l=_x;case QU:var c=n&ZU;if(l||(l=ll),i.size!=e.size&&!c)return!1;var u=o.get(i);if(u)return u==e;n|=kU,o.set(i,e);var h=Hd(l(i),l(e),n,r,s,o);return o.delete(i),h;case JU:if(Nm)return Nm.call(i)==Nm.call(e)}return!1}a(jU,"equalByTag");var Mx=jU;var qU=1,eI=Object.prototype,tI=eI.hasOwnProperty;function nI(i,e,t,n,r,s){var o=t&qU,l=Cc(i),c=l.length,u=Cc(e),h=u.length;if(c!=h&&!o)return!1;for(var d=c;d--;){var f=l[d];if(!(o?f in e:tI.call(e,f)))return!1}var m=s.get(i),_=s.get(e);if(m&&_)return m==e&&_==i;var M=!0;s.set(i,e),s.set(e,i);for(var g=o;++d<c;){f=l[d];var R=i[f],y=e[f];if(n)var b=o?n(y,R,f,e,i,s):n(R,y,f,i,e,s);if(!(b===void 0?R===y||r(R,y,t,n,s):b)){M=!1;break}g||(g=f=="constructor")}if(M&&!g){var S=i.constructor,C=e.constructor;S!=C&&"constructor"in i&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof C=="function"&&C instanceof C)&&(M=!1)}return s.delete(i),s.delete(e),M}a(nI,"equalObjects");var xx=nI;var iI=1,yx="[object Arguments]",Sx="[object Array]",Gd="[object Object]",rI=Object.prototype,Tx=rI.hasOwnProperty;function sI(i,e,t,n,r,s){var o=$e(i),l=$e(e),c=o?Sx:Xi(i),u=l?Sx:Xi(e);c=c==yx?Gd:c,u=u==yx?Gd:u;var h=c==Gd,d=u==Gd,f=c==u;if(f&&kr(i)){if(!kr(e))return!1;o=!0,h=!1}if(f&&!h)return s||(s=new As),o||Qa(i)?Hd(i,e,t,n,r,s):Mx(i,e,c,t,n,r,s);if(!(t&iI)){var m=h&&Tx.call(i,"__wrapped__"),_=d&&Tx.call(e,"__wrapped__");if(m||_){var M=m?i.value():i,g=_?e.value():e;return s||(s=new As),r(M,g,t,n,s)}}return f?(s||(s=new As),xx(i,e,t,n,r,s)):!1}a(sI,"baseIsEqualDeep");var vx=sI;function Nx(i,e,t,n,r){return i===e?!0:i==null||e==null||!en(i)&&!en(e)?i!==i&&e!==e:vx(i,e,t,n,Nx,r)}a(Nx,"baseIsEqual");var Dd=Nx;var oI=1,aI=2;function lI(i,e,t,n){var r=t.length,s=r,o=!n;if(i==null)return!s;for(i=Object(i);r--;){var l=t[r];if(o&&l[2]?l[1]!==i[l[0]]:!(l[0]in i))return!1}for(;++r<s;){l=t[r];var c=l[0],u=i[c],h=l[1];if(o&&l[2]){if(u===void 0&&!(c in i))return!1}else{var d=new As;if(n)var f=n(u,h,c,i,e,d);if(!(f===void 0?Dd(h,u,oI|aI,n,d):f))return!1}}return!0}a(lI,"baseIsMatch");var Px=lI;function cI(i){return i===i&&!Yt(i)}a(cI,"isStrictComparable");var Yd=cI;function uI(i){for(var e=wt(i),t=e.length;t--;){var n=e[t],r=i[n];e[t]=[n,r,Yd(r)]}return e}a(uI,"getMatchData");var Ex=uI;function hI(i,e){return function(t){return t==null?!1:t[i]===e&&(e!==void 0||i in Object(t))}}a(hI,"matchesStrictComparable");var Kd=hI;function dI(i){var e=Ex(i);return e.length==1&&e[0][2]?Kd(e[0][0],e[0][1]):function(t){return t===i||Px(t,i,e)}}a(dI,"baseMatches");var wx=dI;function fI(i,e){return i!=null&&e in Object(i)}a(fI,"baseHasIn");var Lx=fI;function pI(i,e,t){e=Ls(e,i);for(var n=-1,r=e.length,s=!1;++n<r;){var o=ar(e[n]);if(!(s=i!=null&&t(i,o)))break;i=i[o]}return s||++n!=r?s:(r=i==null?0:i.length,!!r&&Ka(r)&&xs(o,r)&&($e(i)||Ts(i)))}a(pI,"hasPath");var Qd=pI;function mI(i,e){return i!=null&&Qd(i,e,Lx)}a(mI,"hasIn");var Ax=mI;var RI=1,gI=2;function _I(i,e){return Ba(i)&&Yd(e)?Kd(ar(i),e):function(t){var n=NM(t,i);return n===void 0&&n===e?Ax(t,i):Dd(e,n,RI|gI)}}a(_I,"baseMatchesProperty");var Ox=_I;function bI(i){return function(e){return e?.[i]}}a(bI,"baseProperty");var Vx=bI;function MI(i){return function(e){return ja(e,i)}}a(MI,"basePropertyDeep");var Ux=MI;function xI(i){return Ba(i)?Vx(ar(i)):Ux(i)}a(xI,"property");var Ix=xI;function yI(i){return typeof i=="function"?i:i==null?Pi:typeof i=="object"?$e(i)?Ox(i[0],i[1]):wx(i):Ix(i)}a(yI,"baseIteratee");var hn=yI;function SI(i,e,t,n){for(var r=-1,s=i==null?0:i.length;++r<s;){var o=i[r];e(n,o,t(o),i)}return n}a(SI,"arrayAggregator");var Fx=SI;function TI(i){return function(e,t,n){for(var r=-1,s=Object(e),o=n(e),l=o.length;l--;){var c=o[i?l:++r];if(t(s[c],c,s)===!1)break}return e}}a(TI,"createBaseFor");var Wx=TI;var vI=Wx(),Cx=vI;function NI(i,e){return i&&Cx(i,e,wt)}a(NI,"baseForOwn");var Zx=NI;function PI(i,e){return function(t,n){if(t==null)return t;if(!un(t))return i(t,n);for(var r=t.length,s=e?r:-1,o=Object(t);(e?s--:++s<r)&&n(o[s],s,o)!==!1;);return t}}a(PI,"createBaseEach");var kx=PI;var EI=kx(Zx),si=EI;function wI(i,e,t,n){return si(i,function(r,s,o){e(n,r,t(r),o)}),n}a(wI,"baseAggregator");var Xx=wI;function LI(i,e){return function(t,n){var r=$e(t)?Fx:Xx,s=e?e():{};return r(t,i,hn(n,2),s)}}a(LI,"createAggregator");var Hx=LI;var Gx=Object.prototype,AI=Gx.hasOwnProperty,OI=Ya(function(i,e){i=Object(i);var t=-1,n=e.length,r=n>2?e[2]:void 0;for(r&&Ss(e[0],e[1],r)&&(n=1);++t<n;)for(var s=e[t],o=vs(s),l=-1,c=o.length;++l<c;){var u=o[l],h=i[u];(h===void 0||ir(h,Gx[u])&&!AI.call(i,u))&&(i[u]=s[u])}return i}),cl=OI;function VI(i){return en(i)&&un(i)}a(VI,"isArrayLikeObject");var Pm=VI;function UI(i,e,t){for(var n=-1,r=i==null?0:i.length;++n<r;)if(t(e,i[n]))return!0;return!1}a(UI,"arrayIncludesWith");var Bd=UI;var II=200;function FI(i,e,t,n){var r=-1,s=Pd,o=!0,l=i.length,c=[],u=e.length;if(!l)return c;t&&(e=tr(e,or(t))),n?(s=Bd,o=!1):e.length>=II&&(s=al,o=!1,e=new ol(e));e:for(;++r<l;){var h=i[r],d=t==null?h:t(h);if(h=n||h!==0?h:0,o&&d===d){for(var f=u;f--;)if(e[f]===d)continue e;c.push(h)}else s(e,d,n)||c.push(h)}return c}a(FI,"baseDifference");var Dx=FI;var WI=Ya(function(i,e){return Pm(i)?Dx(i,el(e,1,Pm,!0)):[]}),Vs=WI;function CI(i){var e=i==null?0:i.length;return e?i[e-1]:void 0}a(CI,"last");var cr=CI;function ZI(i,e,t){var n=i==null?0:i.length;return n?(e=t||e===void 0?1:nr(e),Od(i,e<0?0:e,n)):[]}a(ZI,"drop");var tn=ZI;function kI(i,e,t){var n=i==null?0:i.length;return n?(e=t||e===void 0?1:nr(e),e=n-e,Od(i,0,e<0?0:e)):[]}a(kI,"dropRight");var Hr=kI;function XI(i){return typeof i=="function"?i:Pi}a(XI,"castFunction");var Yx=XI;function HI(i,e){var t=$e(i)?vd:si;return t(i,Yx(e))}a(HI,"forEach");var He=HI;function GI(i,e){for(var t=-1,n=i==null?0:i.length;++t<n;)if(!e(i[t],t,i))return!1;return!0}a(GI,"arrayEvery");var Kx=GI;function DI(i,e){var t=!0;return si(i,function(n,r,s){return t=!!e(n,r,s),t}),t}a(DI,"baseEvery");var Qx=DI;function YI(i,e,t){var n=$e(i)?Kx:Qx;return t&&Ss(i,e,t)&&(e=void 0),n(i,hn(e,3))}a(YI,"every");var Xn=YI;function KI(i,e){var t=[];return si(i,function(n,r,s){e(n,r,s)&&t.push(n)}),t}a(KI,"baseFilter");var Jd=KI;function QI(i,e){var t=$e(i)?nl:Jd;return t(i,hn(e,3))}a(QI,"filter");var Hn=QI;function BI(i){return function(e,t,n){var r=Object(e);if(!un(e)){var s=hn(t,3);e=wt(e),t=a(function(l){return s(r[l],l,r)},"predicate")}var o=i(e,t,n);return o>-1?r[s?e[o]:o]:void 0}}a(BI,"createFind");var Bx=BI;var JI=Math.max;function zI(i,e,t){var n=i==null?0:i.length;if(!n)return-1;var r=t==null?0:nr(t);return r<0&&(r=JI(n+r,0)),Nd(i,hn(e,3),r)}a(zI,"findIndex");var Jx=zI;var $I=Bx(Jx),ur=$I;function jI(i){return i&&i.length?i[0]:void 0}a(jI,"head");var Pn=jI;function qI(i,e){var t=-1,n=un(i)?Array(i.length):[];return si(i,function(r,s,o){n[++t]=e(r,s,o)}),n}a(qI,"baseMap");var zx=qI;function eF(i,e){var t=$e(i)?tr:zx;return t(i,hn(e,3))}a(eF,"map");var We=eF;function tF(i,e){return el(We(i,e),1)}a(tF,"flatMap");var Jn=tF;var nF=Object.prototype,iF=nF.hasOwnProperty,rF=Hx(function(i,e,t){iF.call(i,t)?i[t].push(e):Da(i,t,[e])}),Em=rF;var sF=Object.prototype,oF=sF.hasOwnProperty;function aF(i,e){return i!=null&&oF.call(i,e)}a(aF,"baseHas");var $x=aF;function lF(i,e){return i!=null&&Qd(i,e,$x)}a(lF,"has");var Ke=lF;var cF="[object String]";function uF(i){return typeof i=="string"||!$e(i)&&en(i)&&Qn(i)==cF}a(uF,"isString");var bn=uF;function hF(i,e){return tr(e,function(t){return i[t]})}a(hF,"baseValues");var jx=hF;function dF(i){return i==null?[]:jx(i,wt(i))}a(dF,"values");var Nt=dF;var fF=Math.max;function pF(i,e,t,n){i=un(i)?i:Nt(i),t=t&&!n?nr(t):0;var r=i.length;return t<0&&(t=fF(r+t,0)),bn(i)?t<=r&&i.indexOf(e,t)>-1:!!r&&Ga(i,e,t)>-1}a(pF,"includes");var Zt=pF;var mF=Math.max;function RF(i,e,t){var n=i==null?0:i.length;if(!n)return-1;var r=t==null?0:nr(t);return r<0&&(r=mF(n+r,0)),Ga(i,e,r)}a(RF,"indexOf");var zd=RF;var gF="[object Map]",_F="[object Set]",bF=Object.prototype,MF=bF.hasOwnProperty;function xF(i){if(i==null)return!0;if(un(i)&&($e(i)||typeof i=="string"||typeof i.splice=="function"||kr(i)||Qa(i)||Ts(i)))return!i.length;var e=Xi(i);if(e==gF||e==_F)return!i.size;if(sr(i))return!Ld(i).length;for(var t in i)if(MF.call(i,t))return!1;return!0}a(xF,"isEmpty");var _t=xF;var yF="[object RegExp]";function SF(i){return en(i)&&Qn(i)==yF}a(SF,"baseIsRegExp");var qx=SF;var ey=Ei&&Ei.isRegExp,TF=ey?or(ey):qx,wi=TF;function vF(i){return i===void 0}a(vF,"isUndefined");var Gn=vF;var NF="Expected a function";function PF(i){if(typeof i!="function")throw new TypeError(NF);return function(){var e=arguments;switch(e.length){case 0:return!i.call(this);case 1:return!i.call(this,e[0]);case 2:return!i.call(this,e[0],e[1]);case 3:return!i.call(this,e[0],e[1],e[2])}return!i.apply(this,e)}}a(PF,"negate");var ty=PF;function EF(i,e,t,n){if(!Yt(i))return i;e=Ls(e,i);for(var r=-1,s=e.length,o=s-1,l=i;l!=null&&++r<s;){var c=ar(e[r]),u=t;if(c==="__proto__"||c==="constructor"||c==="prototype")return i;if(r!=o){var h=l[c];u=n?n(h,c,l):void 0,u===void 0&&(u=Yt(h)?h:xs(e[r+1])?[]:{})}ys(l,c,u),l=l[c]}return i}a(EF,"baseSet");var ny=EF;function wF(i,e,t){for(var n=-1,r=e.length,s={};++n<r;){var o=e[n],l=ja(i,o);t(l,o)&&ny(s,Ls(o,i),l)}return s}a(wF,"basePickBy");var iy=wF;function LF(i,e){if(i==null)return{};var t=tr(Fd(i),function(n){return[n]});return e=hn(e),iy(i,t,function(n,r){return e(n,r[0])})}a(LF,"pickBy");var oi=LF;function AF(i,e,t,n,r){return r(i,function(s,o,l){t=n?(n=!1,s):e(t,s,o,l)}),t}a(AF,"baseReduce");var ry=AF;function OF(i,e,t){var n=$e(i)?LM:ry,r=arguments.length<3;return n(i,hn(e,4),t,r,si)}a(OF,"reduce");var dn=OF;function VF(i,e){var t=$e(i)?nl:Jd;return t(i,ty(hn(e,3)))}a(VF,"reject");var Us=VF;function UF(i,e){var t;return si(i,function(n,r,s){return t=e(n,r,s),!t}),!!t}a(UF,"baseSome");var sy=UF;function IF(i,e,t){var n=$e(i)?Xd:sy;return t&&Ss(i,e,t)&&(e=void 0),n(i,hn(e,3))}a(IF,"some");var Zc=IF;var FF=1/0,WF=Os&&1/ll(new Os([,-0]))[1]==FF?function(i){return new Os(i)}:Kt,oy=WF;var CF=200;function ZF(i,e,t){var n=-1,r=Pd,s=i.length,o=!0,l=[],c=l;if(t)o=!1,r=Bd;else if(s>=CF){var u=e?null:oy(i);if(u)return ll(u);o=!1,r=al,c=new ol}else c=e?[]:l;e:for(;++n<s;){var h=i[n],d=e?e(h):h;if(h=t||h!==0?h:0,o&&d===d){for(var f=c.length;f--;)if(c[f]===d)continue e;e&&c.push(d),l.push(h)}else r(c,d,t)||(c!==l&&c.push(d),l.push(h))}return l}a(ZF,"baseUniq");var ay=ZF;function kF(i){return i&&i.length?ay(i):[]}a(kF,"uniq");var ul=kF;function hl(i){console&&console.error&&console.error(`Error: ${i}`)}a(hl,"PRINT_ERROR");function kc(i){console&&console.warn&&console.warn(`Warning: ${i}`)}a(kc,"PRINT_WARNING");function Xc(i){let e=new Date().getTime(),t=i();return{time:new Date().getTime()-e,value:t}}a(Xc,"timer");function Hc(i){function e(){}a(e,"FakeConstructor"),e.prototype=i;let t=new e;function n(){return typeof t.bar}return a(n,"fakeAccess"),n(),n(),i;(0,eval)(i)}a(Hc,"toFastProperties");function XF(i){return HF(i)?i.LABEL:i.name}a(XF,"tokenLabel");function HF(i){return bn(i.LABEL)&&i.LABEL!==""}a(HF,"hasTokenLabel");var gi=class{static{a(this,"AbstractProduction")}get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){this._definition=e}accept(e){e.visit(this),He(this.definition,t=>{t.accept(e)})}},Ot=class extends gi{static{a(this,"NonTerminal")}constructor(e){super([]),this.idx=1,An(this,oi(e,t=>t!==void 0))}set definition(e){}get definition(){return this.referencedRule!==void 0?this.referencedRule.definition:[]}accept(e){e.visit(this)}},zn=class extends gi{static{a(this,"Rule")}constructor(e){super(e.definition),this.orgText="",An(this,oi(e,t=>t!==void 0))}},Vt=class extends gi{static{a(this,"Alternative")}constructor(e){super(e.definition),this.ignoreAmbiguities=!1,An(this,oi(e,t=>t!==void 0))}},Ft=class extends gi{static{a(this,"Option")}constructor(e){super(e.definition),this.idx=1,An(this,oi(e,t=>t!==void 0))}},nn=class extends gi{static{a(this,"RepetitionMandatory")}constructor(e){super(e.definition),this.idx=1,An(this,oi(e,t=>t!==void 0))}},rn=class extends gi{static{a(this,"RepetitionMandatoryWithSeparator")}constructor(e){super(e.definition),this.idx=1,An(this,oi(e,t=>t!==void 0))}},yt=class extends gi{static{a(this,"Repetition")}constructor(e){super(e.definition),this.idx=1,An(this,oi(e,t=>t!==void 0))}},zt=class extends gi{static{a(this,"RepetitionWithSeparator")}constructor(e){super(e.definition),this.idx=1,An(this,oi(e,t=>t!==void 0))}},$t=class extends gi{static{a(this,"Alternation")}get definition(){return this._definition}set definition(e){this._definition=e}constructor(e){super(e.definition),this.idx=1,this.ignoreAmbiguities=!1,this.hasPredicates=!1,An(this,oi(e,t=>t!==void 0))}},Mt=class{static{a(this,"Terminal")}constructor(e){this.idx=1,An(this,oi(e,t=>t!==void 0))}accept(e){e.visit(this)}};function $d(i){return We(i,dl)}a($d,"serializeGrammar");function dl(i){function e(t){return We(t,dl)}if(a(e,"convertDefinition"),i instanceof Ot){let t={type:"NonTerminal",name:i.nonTerminalName,idx:i.idx};return bn(i.label)&&(t.label=i.label),t}else{if(i instanceof Vt)return{type:"Alternative",definition:e(i.definition)};if(i instanceof Ft)return{type:"Option",idx:i.idx,definition:e(i.definition)};if(i instanceof nn)return{type:"RepetitionMandatory",idx:i.idx,definition:e(i.definition)};if(i instanceof rn)return{type:"RepetitionMandatoryWithSeparator",idx:i.idx,separator:dl(new Mt({terminalType:i.separator})),definition:e(i.definition)};if(i instanceof zt)return{type:"RepetitionWithSeparator",idx:i.idx,separator:dl(new Mt({terminalType:i.separator})),definition:e(i.definition)};if(i instanceof yt)return{type:"Repetition",idx:i.idx,definition:e(i.definition)};if(i instanceof $t)return{type:"Alternation",idx:i.idx,definition:e(i.definition)};if(i instanceof Mt){let t={type:"Terminal",name:i.terminalType.name,label:XF(i.terminalType),idx:i.idx};bn(i.label)&&(t.terminalLabel=i.label);let n=i.terminalType.PATTERN;return i.terminalType.PATTERN&&(t.pattern=wi(n)?n.source:n),t}else{if(i instanceof zn)return{type:"Rule",name:i.name,orgText:i.orgText,definition:e(i.definition)};throw Error("non exhaustive match")}}}a(dl,"serializeProduction");var $n=class{static{a(this,"GAstVisitor")}visit(e){let t=e;switch(t.constructor){case Ot:return this.visitNonTerminal(t);case Vt:return this.visitAlternative(t);case Ft:return this.visitOption(t);case nn:return this.visitRepetitionMandatory(t);case rn:return this.visitRepetitionMandatoryWithSeparator(t);case zt:return this.visitRepetitionWithSeparator(t);case yt:return this.visitRepetition(t);case $t:return this.visitAlternation(t);case Mt:return this.visitTerminal(t);case zn:return this.visitRule(t);default:throw Error("non exhaustive match")}}visitNonTerminal(e){}visitAlternative(e){}visitOption(e){}visitRepetition(e){}visitRepetitionMandatory(e){}visitRepetitionMandatoryWithSeparator(e){}visitRepetitionWithSeparator(e){}visitAlternation(e){}visitTerminal(e){}visitRule(e){}};function wm(i){return i instanceof Vt||i instanceof Ft||i instanceof yt||i instanceof nn||i instanceof rn||i instanceof zt||i instanceof Mt||i instanceof zn}a(wm,"isSequenceProd");function Ro(i,e=[]){return i instanceof Ft||i instanceof yt||i instanceof zt?!0:i instanceof $t?Zc(i.definition,n=>Ro(n,e)):i instanceof Ot&&Zt(e,i)?!1:i instanceof gi?(i instanceof Ot&&e.push(i),Xn(i.definition,n=>Ro(n,e))):!1}a(Ro,"isOptionalProd");function Lm(i){return i instanceof $t}a(Lm,"isBranchingProd");function ai(i){if(i instanceof Ot)return"SUBRULE";if(i instanceof Ft)return"OPTION";if(i instanceof $t)return"OR";if(i instanceof nn)return"AT_LEAST_ONE";if(i instanceof rn)return"AT_LEAST_ONE_SEP";if(i instanceof zt)return"MANY_SEP";if(i instanceof yt)return"MANY";if(i instanceof Mt)return"CONSUME";throw Error("non exhaustive match")}a(ai,"getProductionDslName");var Gr=class{static{a(this,"RestWalker")}walk(e,t=[]){He(e.definition,(n,r)=>{let s=tn(e.definition,r+1);if(n instanceof Ot)this.walkProdRef(n,s,t);else if(n instanceof Mt)this.walkTerminal(n,s,t);else if(n instanceof Vt)this.walkFlat(n,s,t);else if(n instanceof Ft)this.walkOption(n,s,t);else if(n instanceof nn)this.walkAtLeastOne(n,s,t);else if(n instanceof rn)this.walkAtLeastOneSep(n,s,t);else if(n instanceof zt)this.walkManySep(n,s,t);else if(n instanceof yt)this.walkMany(n,s,t);else if(n instanceof $t)this.walkOr(n,s,t);else throw Error("non exhaustive match")})}walkTerminal(e,t,n){}walkProdRef(e,t,n){}walkFlat(e,t,n){let r=t.concat(n);this.walk(e,r)}walkOption(e,t,n){let r=t.concat(n);this.walk(e,r)}walkAtLeastOne(e,t,n){let r=[new Ft({definition:e.definition})].concat(t,n);this.walk(e,r)}walkAtLeastOneSep(e,t,n){let r=ly(e,t,n);this.walk(e,r)}walkMany(e,t,n){let r=[new Ft({definition:e.definition})].concat(t,n);this.walk(e,r)}walkManySep(e,t,n){let r=ly(e,t,n);this.walk(e,r)}walkOr(e,t,n){let r=t.concat(n);He(e.definition,s=>{let o=new Vt({definition:[s]});this.walk(o,r)})}};function ly(i,e,t){return[new Ft({definition:[new Mt({terminalType:i.separator})].concat(i.definition)})].concat(e,t)}a(ly,"restForRepetitionWithSeparator");function go(i){if(i instanceof Ot)return go(i.referencedRule);if(i instanceof Mt)return YF(i);if(wm(i))return GF(i);if(Lm(i))return DF(i);throw Error("non exhaustive match")}a(go,"first");function GF(i){let e=[],t=i.definition,n=0,r=t.length>n,s,o=!0;for(;r&&o;)s=t[n],o=Ro(s),e=e.concat(go(s)),n=n+1,r=t.length>n;return ul(e)}a(GF,"firstForSequence");function DF(i){let e=We(i.definition,t=>go(t));return ul(_n(e))}a(DF,"firstForBranching");function YF(i){return[i.terminalType]}a(YF,"firstForTerminal");var jd="_~IN~_";var Am=class extends Gr{static{a(this,"ResyncFollowsWalker")}constructor(e){super(),this.topProd=e,this.follows={}}startWalking(){return this.walk(this.topProd),this.follows}walkTerminal(e,t,n){}walkProdRef(e,t,n){let r=KF(e.referencedRule,e.idx)+this.topProd.name,s=t.concat(n),o=new Vt({definition:s}),l=go(o);this.follows[r]=l}};function cy(i){let e={};return He(i,t=>{let n=new Am(t).startWalking();An(e,n)}),e}a(cy,"computeAllProdsFollows");function KF(i,e){return i.name+e+jd}a(KF,"buildBetweenProdsFollowPrefix");function it(i){return i.charCodeAt(0)}a(it,"cc");function qd(i,e){Array.isArray(i)?i.forEach(function(t){e.push(t)}):e.push(i)}a(qd,"insertToSet");function fl(i,e){if(i[e]===!0)throw"duplicate flag "+e;let t=i[e];i[e]=!0}a(fl,"addFlag");function _o(i){if(i===void 0)throw Error("Internal Error - Should never get here!");return!0}a(_o,"ASSERT_EXISTS");function Gc(){throw Error("Internal Error - Should never get here!")}a(Gc,"ASSERT_NEVER_REACH_HERE");function Om(i){return i.type==="Character"}a(Om,"isCharacter");var Dc=[];for(let i=it("0");i<=it("9");i++)Dc.push(i);var Yc=[it("_")].concat(Dc);for(let i=it("a");i<=it("z");i++)Yc.push(i);for(let i=it("A");i<=it("Z");i++)Yc.push(i);var Vm=[it(" "),it("\f"),it(`
`),it("\r"),it("	"),it("\v"),it("	"),it("\xA0"),it("\u1680"),it("\u2000"),it("\u2001"),it("\u2002"),it("\u2003"),it("\u2004"),it("\u2005"),it("\u2006"),it("\u2007"),it("\u2008"),it("\u2009"),it("\u200A"),it("\u2028"),it("\u2029"),it("\u202F"),it("\u205F"),it("\u3000"),it("\uFEFF")];var QF=/[0-9a-fA-F]/,ef=/[0-9]/,BF=/[1-9]/,Kc=class{static{a(this,"RegExpParser")}constructor(){this.idx=0,this.input="",this.groupIdx=0}saveState(){return{idx:this.idx,input:this.input,groupIdx:this.groupIdx}}restoreState(e){this.idx=e.idx,this.input=e.input,this.groupIdx=e.groupIdx}pattern(e){this.idx=0,this.input=e,this.groupIdx=0,this.consumeChar("/");let t=this.disjunction();this.consumeChar("/");let n={type:"Flags",loc:{begin:this.idx,end:e.length},global:!1,ignoreCase:!1,multiLine:!1,unicode:!1,sticky:!1};for(;this.isRegExpFlag();)switch(this.popChar()){case"g":fl(n,"global");break;case"i":fl(n,"ignoreCase");break;case"m":fl(n,"multiLine");break;case"u":fl(n,"unicode");break;case"y":fl(n,"sticky");break}if(this.idx!==this.input.length)throw Error("Redundant input: "+this.input.substring(this.idx));return{type:"Pattern",flags:n,value:t,loc:this.loc(0)}}disjunction(){let e=[],t=this.idx;for(e.push(this.alternative());this.peekChar()==="|";)this.consumeChar("|"),e.push(this.alternative());return{type:"Disjunction",value:e,loc:this.loc(t)}}alternative(){let e=[],t=this.idx;for(;this.isTerm();)e.push(this.term());return{type:"Alternative",value:e,loc:this.loc(t)}}term(){return this.isAssertion()?this.assertion():this.atom()}assertion(){let e=this.idx;switch(this.popChar()){case"^":return{type:"StartAnchor",loc:this.loc(e)};case"$":return{type:"EndAnchor",loc:this.loc(e)};case"\\":switch(this.popChar()){case"b":return{type:"WordBoundary",loc:this.loc(e)};case"B":return{type:"NonWordBoundary",loc:this.loc(e)}}throw Error("Invalid Assertion Escape");case"(":this.consumeChar("?");let t;switch(this.popChar()){case"=":t="Lookahead";break;case"!":t="NegativeLookahead";break}_o(t);let n=this.disjunction();return this.consumeChar(")"),{type:t,value:n,loc:this.loc(e)}}return Gc()}quantifier(e=!1){let t,n=this.idx;switch(this.popChar()){case"*":t={atLeast:0,atMost:1/0};break;case"+":t={atLeast:1,atMost:1/0};break;case"?":t={atLeast:0,atMost:1};break;case"{":let r=this.integerIncludingZero();switch(this.popChar()){case"}":t={atLeast:r,atMost:r};break;case",":let s;this.isDigit()?(s=this.integerIncludingZero(),t={atLeast:r,atMost:s}):t={atLeast:r,atMost:1/0},this.consumeChar("}");break}if(e===!0&&t===void 0)return;_o(t);break}if(!(e===!0&&t===void 0)&&_o(t))return this.peekChar(0)==="?"?(this.consumeChar("?"),t.greedy=!1):t.greedy=!0,t.type="Quantifier",t.loc=this.loc(n),t}atom(){let e,t=this.idx;switch(this.peekChar()){case".":e=this.dotAll();break;case"\\":e=this.atomEscape();break;case"[":e=this.characterClass();break;case"(":e=this.group();break}return e===void 0&&this.isPatternCharacter()&&(e=this.patternCharacter()),_o(e)?(e.loc=this.loc(t),this.isQuantifier()&&(e.quantifier=this.quantifier()),e):Gc()}dotAll(){return this.consumeChar("."),{type:"Set",complement:!0,value:[it(`
`),it("\r"),it("\u2028"),it("\u2029")]}}atomEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return this.decimalEscapeAtom();case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}decimalEscapeAtom(){return{type:"GroupBackReference",value:this.positiveInteger()}}characterClassEscape(){let e,t=!1;switch(this.popChar()){case"d":e=Dc;break;case"D":e=Dc,t=!0;break;case"s":e=Vm;break;case"S":e=Vm,t=!0;break;case"w":e=Yc;break;case"W":e=Yc,t=!0;break}return _o(e)?{type:"Set",value:e,complement:t}:Gc()}controlEscapeAtom(){let e;switch(this.popChar()){case"f":e=it("\f");break;case"n":e=it(`
`);break;case"r":e=it("\r");break;case"t":e=it("	");break;case"v":e=it("\v");break}return _o(e)?{type:"Character",value:e}:Gc()}controlLetterEscapeAtom(){this.consumeChar("c");let e=this.popChar();if(/[a-zA-Z]/.test(e)===!1)throw Error("Invalid ");return{type:"Character",value:e.toUpperCase().charCodeAt(0)-64}}nulCharacterAtom(){return this.consumeChar("0"),{type:"Character",value:it("\0")}}hexEscapeSequenceAtom(){return this.consumeChar("x"),this.parseHexDigits(2)}regExpUnicodeEscapeSequenceAtom(){return this.consumeChar("u"),this.parseHexDigits(4)}identityEscapeAtom(){let e=this.popChar();return{type:"Character",value:it(e)}}classPatternCharacterAtom(){switch(this.peekChar()){case`
`:case"\r":case"\u2028":case"\u2029":case"\\":case"]":throw Error("TBD");default:let e=this.popChar();return{type:"Character",value:it(e)}}}characterClass(){let e=[],t=!1;for(this.consumeChar("["),this.peekChar(0)==="^"&&(this.consumeChar("^"),t=!0);this.isClassAtom();){let n=this.classAtom(),r=n.type==="Character";if(Om(n)&&this.isRangeDash()){this.consumeChar("-");let s=this.classAtom(),o=s.type==="Character";if(Om(s)){if(s.value<n.value)throw Error("Range out of order in character class");e.push({from:n.value,to:s.value})}else qd(n.value,e),e.push(it("-")),qd(s.value,e)}else qd(n.value,e)}return this.consumeChar("]"),{type:"Set",complement:t,value:e}}classAtom(){switch(this.peekChar()){case"]":case`
`:case"\r":case"\u2028":case"\u2029":throw Error("TBD");case"\\":return this.classEscape();default:return this.classPatternCharacterAtom()}}classEscape(){switch(this.consumeChar("\\"),this.peekChar()){case"b":return this.consumeChar("b"),{type:"Character",value:it("\b")};case"d":case"D":case"s":case"S":case"w":case"W":return this.characterClassEscape();case"f":case"n":case"r":case"t":case"v":return this.controlEscapeAtom();case"c":return this.controlLetterEscapeAtom();case"0":return this.nulCharacterAtom();case"x":return this.hexEscapeSequenceAtom();case"u":return this.regExpUnicodeEscapeSequenceAtom();default:return this.identityEscapeAtom()}}group(){let e=!0;switch(this.consumeChar("("),this.peekChar(0)){case"?":this.consumeChar("?"),this.consumeChar(":"),e=!1;break;default:this.groupIdx++;break}let t=this.disjunction();this.consumeChar(")");let n={type:"Group",capturing:e,value:t};return e&&(n.idx=this.groupIdx),n}positiveInteger(){let e=this.popChar();if(BF.test(e)===!1)throw Error("Expecting a positive integer");for(;ef.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}integerIncludingZero(){let e=this.popChar();if(ef.test(e)===!1)throw Error("Expecting an integer");for(;ef.test(this.peekChar(0));)e+=this.popChar();return parseInt(e,10)}patternCharacter(){let e=this.popChar();switch(e){case`
`:case"\r":case"\u2028":case"\u2029":case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":throw Error("TBD");default:return{type:"Character",value:it(e)}}}isRegExpFlag(){switch(this.peekChar(0)){case"g":case"i":case"m":case"u":case"y":return!0;default:return!1}}isRangeDash(){return this.peekChar()==="-"&&this.isClassAtom(1)}isDigit(){return ef.test(this.peekChar(0))}isClassAtom(e=0){switch(this.peekChar(e)){case"]":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}isTerm(){return this.isAtom()||this.isAssertion()}isAtom(){if(this.isPatternCharacter())return!0;switch(this.peekChar(0)){case".":case"\\":case"[":case"(":return!0;default:return!1}}isAssertion(){switch(this.peekChar(0)){case"^":case"$":return!0;case"\\":switch(this.peekChar(1)){case"b":case"B":return!0;default:return!1}case"(":return this.peekChar(1)==="?"&&(this.peekChar(2)==="="||this.peekChar(2)==="!");default:return!1}}isQuantifier(){let e=this.saveState();try{return this.quantifier(!0)!==void 0}catch{return!1}finally{this.restoreState(e)}}isPatternCharacter(){switch(this.peekChar()){case"^":case"$":case"\\":case".":case"*":case"+":case"?":case"(":case")":case"[":case"|":case"/":case`
`:case"\r":case"\u2028":case"\u2029":return!1;default:return!0}}parseHexDigits(e){let t="";for(let r=0;r<e;r++){let s=this.popChar();if(QF.test(s)===!1)throw Error("Expecting a HexDecimal digits");t+=s}return{type:"Character",value:parseInt(t,16)}}peekChar(e=0){return this.input[this.idx+e]}popChar(){let e=this.peekChar(0);return this.consumeChar(void 0),e}consumeChar(e){if(e!==void 0&&this.input[this.idx]!==e)throw Error("Expected: '"+e+"' but found: '"+this.input[this.idx]+"' at offset: "+this.idx);if(this.idx>=this.input.length)throw Error("Unexpected end of input");this.idx++}loc(e){return{begin:e,end:this.idx}}};var Is=class{static{a(this,"BaseRegExpVisitor")}visitChildren(e){for(let t in e){let n=e[t];e.hasOwnProperty(t)&&(n.type!==void 0?this.visit(n):Array.isArray(n)&&n.forEach(r=>{this.visit(r)},this))}}visit(e){switch(e.type){case"Pattern":this.visitPattern(e);break;case"Flags":this.visitFlags(e);break;case"Disjunction":this.visitDisjunction(e);break;case"Alternative":this.visitAlternative(e);break;case"StartAnchor":this.visitStartAnchor(e);break;case"EndAnchor":this.visitEndAnchor(e);break;case"WordBoundary":this.visitWordBoundary(e);break;case"NonWordBoundary":this.visitNonWordBoundary(e);break;case"Lookahead":this.visitLookahead(e);break;case"NegativeLookahead":this.visitNegativeLookahead(e);break;case"Character":this.visitCharacter(e);break;case"Set":this.visitSet(e);break;case"Group":this.visitGroup(e);break;case"GroupBackReference":this.visitGroupBackReference(e);break;case"Quantifier":this.visitQuantifier(e);break}this.visitChildren(e)}visitPattern(e){}visitFlags(e){}visitDisjunction(e){}visitAlternative(e){}visitStartAnchor(e){}visitEndAnchor(e){}visitWordBoundary(e){}visitNonWordBoundary(e){}visitLookahead(e){}visitNegativeLookahead(e){}visitCharacter(e){}visitSet(e){}visitGroup(e){}visitGroupBackReference(e){}visitQuantifier(e){}};var tf={},JF=new Kc;function pl(i){let e=i.toString();if(tf.hasOwnProperty(e))return tf[e];{let t=JF.pattern(e);return tf[e]=t,t}}a(pl,"getRegExpAst");function uy(){tf={}}a(uy,"clearRegExpParserCache");var dy="Complement Sets are not supported for first char optimization",Qc=`Unable to use "first char" lexer optimizations:
`;function fy(i,e=!1){try{let t=pl(i);return Um(t.value,{},t.flags.ignoreCase)}catch(t){if(t.message===dy)e&&kc(`${Qc}	Unable to optimize: < ${i.toString()} >
	Complement Sets cannot be automatically optimized.
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#COMPLEMENT for details.`);else{let n="";e&&(n=`
	This will disable the lexer's first char optimizations.
	See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#REGEXP_PARSING for details.`),hl(`${Qc}
	Failed parsing: < ${i.toString()} >
	Using the @chevrotain/regexp-to-ast library
	Please open an issue at: https://github.com/chevrotain/chevrotain/issues`+n)}}return[]}a(fy,"getOptimizedStartCodesIndices");function Um(i,e,t){switch(i.type){case"Disjunction":for(let r=0;r<i.value.length;r++)Um(i.value[r],e,t);break;case"Alternative":let n=i.value;for(let r=0;r<n.length;r++){let s=n[r];switch(s.type){case"EndAnchor":case"GroupBackReference":case"Lookahead":case"NegativeLookahead":case"StartAnchor":case"WordBoundary":case"NonWordBoundary":continue}let o=s;switch(o.type){case"Character":nf(o.value,e,t);break;case"Set":if(o.complement===!0)throw Error(dy);He(o.value,c=>{if(typeof c=="number")nf(c,e,t);else{let u=c;if(t===!0)for(let h=u.from;h<=u.to;h++)nf(h,e,t);else{for(let h=u.from;h<=u.to&&h<ml;h++)nf(h,e,t);if(u.to>=ml){let h=u.from>=ml?u.from:ml,d=u.to,f=hr(h),m=hr(d);for(let _=f;_<=m;_++)e[_]=_}}}});break;case"Group":Um(o.value,e,t);break;default:throw Error("Non Exhaustive Match")}let l=o.quantifier!==void 0&&o.quantifier.atLeast===0;if(o.type==="Group"&&Im(o)===!1||o.type!=="Group"&&l===!1)break}break;default:throw Error("non exhaustive match!")}return Nt(e)}a(Um,"firstCharOptimizedIndices");function nf(i,e,t){let n=hr(i);e[n]=n,t===!0&&zF(i,e)}a(nf,"addOptimizedIdxToResult");function zF(i,e){let t=String.fromCharCode(i),n=t.toUpperCase();if(n!==t){let r=hr(n.charCodeAt(0));e[r]=r}else{let r=t.toLowerCase();if(r!==t){let s=hr(r.charCodeAt(0));e[s]=s}}}a(zF,"handleIgnoreCase");function hy(i,e){return ur(i.value,t=>{if(typeof t=="number")return Zt(e,t);{let n=t;return ur(e,r=>n.from<=r&&r<=n.to)!==void 0}})}a(hy,"findCode");function Im(i){let e=i.quantifier;return e&&e.atLeast===0?!0:i.value?$e(i.value)?Xn(i.value,Im):Im(i.value):!1}a(Im,"isWholeOptional");var Fm=class extends Is{static{a(this,"CharCodeFinder")}constructor(e){super(),this.targetCharCodes=e,this.found=!1}visitChildren(e){if(this.found!==!0){switch(e.type){case"Lookahead":this.visitLookahead(e);return;case"NegativeLookahead":this.visitNegativeLookahead(e);return}super.visitChildren(e)}}visitCharacter(e){Zt(this.targetCharCodes,e.value)&&(this.found=!0)}visitSet(e){e.complement?hy(e,this.targetCharCodes)===void 0&&(this.found=!0):hy(e,this.targetCharCodes)!==void 0&&(this.found=!0)}};function rf(i,e){if(e instanceof RegExp){let t=pl(e),n=new Fm(i);return n.visit(t),n.found}else return ur(e,t=>Zt(i,t.charCodeAt(0)))!==void 0}a(rf,"canMatchCharCode");var bo="PATTERN",Rl="defaultMode",sf="modes",Cm=typeof new RegExp("(?:)").sticky=="boolean";function Ry(i,e){e=cl(e,{useSticky:Cm,debug:!1,safeMode:!1,positionTracking:"full",lineTerminatorCharacters:["\r",`
`],tracer:(y,b)=>b()});let t=e.tracer;t("initCharCodeToOptimizedIndexMap",()=>{pW()});let n;t("Reject Lexer.NA",()=>{n=Us(i,y=>y[bo]===jt.NA)});let r=!1,s;t("Transform Patterns",()=>{r=!1,s=We(n,y=>{let b=y[bo];if(wi(b)){let S=b.source;return S.length===1&&S!=="^"&&S!=="$"&&S!=="."&&!b.ignoreCase?S:S.length===2&&S[0]==="\\"&&!Zt(["d","D","s","S","t","r","n","t","0","c","b","B","f","v","w","W"],S[1])?S[1]:e.useSticky?my(b):py(b)}else{if(Bn(b))return r=!0,{exec:b};if(typeof b=="object")return r=!0,b;if(typeof b=="string"){if(b.length===1)return b;{let S=b.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),C=new RegExp(S);return e.useSticky?my(C):py(C)}}else throw Error("non exhaustive match")}})});let o,l,c,u,h;t("misc mapping",()=>{o=We(n,y=>y.tokenTypeIdx),l=We(n,y=>{let b=y.GROUP;if(b!==jt.SKIPPED){if(bn(b))return b;if(Gn(b))return!1;throw Error("non exhaustive match")}}),c=We(n,y=>{let b=y.LONGER_ALT;if(b)return $e(b)?We(b,C=>zd(n,C)):[zd(n,b)]}),u=We(n,y=>y.PUSH_MODE),h=We(n,y=>Ke(y,"POP_MODE"))});let d;t("Line Terminator Handling",()=>{let y=Ty(e.lineTerminatorCharacters);d=We(n,b=>!1),e.positionTracking!=="onlyOffset"&&(d=We(n,b=>Ke(b,"LINE_BREAKS")?!!b.LINE_BREAKS:Sy(b,y)===!1&&rf(y,b.PATTERN)))});let f,m,_,M;t("Misc Mapping #2",()=>{f=We(n,xy),m=We(s,dW),_=dn(n,(y,b)=>{let S=b.GROUP;return bn(S)&&S!==jt.SKIPPED&&(y[S]=[]),y},{}),M=We(s,(y,b)=>({pattern:s[b],longerAlt:c[b],canLineTerminator:d[b],isCustom:f[b],short:m[b],group:l[b],push:u[b],pop:h[b],tokenTypeIdx:o[b],tokenType:n[b]}))});let g=!0,R=[];return e.safeMode||t("First Char Optimization",()=>{R=dn(n,(y,b,S)=>{if(typeof b.PATTERN=="string"){let C=b.PATTERN.charCodeAt(0),W=hr(C);Wm(y,W,M[S])}else if($e(b.START_CHARS_HINT)){let C;He(b.START_CHARS_HINT,W=>{let F=typeof W=="string"?W.charCodeAt(0):W,ee=hr(F);C!==ee&&(C=ee,Wm(y,ee,M[S]))})}else if(wi(b.PATTERN))if(b.PATTERN.unicode)g=!1,e.ensureOptimizations&&hl(`${Qc}	Unable to analyze < ${b.PATTERN.toString()} > pattern.
	The regexp unicode flag is not currently supported by the regexp-to-ast library.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNICODE_OPTIMIZE`);else{let C=fy(b.PATTERN,e.ensureOptimizations);_t(C)&&(g=!1),He(C,W=>{Wm(y,W,M[S])})}else e.ensureOptimizations&&hl(`${Qc}	TokenType: <${b.name}> is using a custom token pattern without providing <start_chars_hint> parameter.
	This will disable the lexer's first char optimizations.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_OPTIMIZE`),g=!1;return y},[])}),{emptyGroups:_,patternIdxToConfig:M,charCodeToPatternIdxToConfig:R,hasCustom:r,canBeOptimized:g}}a(Ry,"analyzeTokenTypes");function gy(i,e){let t=[],n=jF(i);t=t.concat(n.errors);let r=qF(n.valid),s=r.valid;return t=t.concat(r.errors),t=t.concat($F(s)),t=t.concat(aW(s)),t=t.concat(lW(s,e)),t=t.concat(cW(s)),t}a(gy,"validatePatterns");function $F(i){let e=[],t=Hn(i,n=>wi(n[bo]));return e=e.concat(tW(t)),e=e.concat(rW(t)),e=e.concat(sW(t)),e=e.concat(oW(t)),e=e.concat(nW(t)),e}a($F,"validateRegExpPattern");function jF(i){let e=Hn(i,r=>!Ke(r,bo)),t=We(e,r=>({message:"Token Type: ->"+r.name+"<- missing static 'PATTERN' property",type:kt.MISSING_PATTERN,tokenTypes:[r]})),n=Vs(i,e);return{errors:t,valid:n}}a(jF,"findMissingPatterns");function qF(i){let e=Hn(i,r=>{let s=r[bo];return!wi(s)&&!Bn(s)&&!Ke(s,"exec")&&!bn(s)}),t=We(e,r=>({message:"Token Type: ->"+r.name+"<- static 'PATTERN' can only be a RegExp, a Function matching the {CustomPatternMatcherFunc} type or an Object matching the {ICustomPattern} interface.",type:kt.INVALID_PATTERN,tokenTypes:[r]})),n=Vs(i,e);return{errors:t,valid:n}}a(qF,"findInvalidPatterns");var eW=/[^\\][$]/;function tW(i){class e extends Is{static{a(this,"EndAnchorFinder")}constructor(){super(...arguments),this.found=!1}visitEndAnchor(s){this.found=!0}}let t=Hn(i,r=>{let s=r.PATTERN;try{let o=pl(s),l=new e;return l.visit(o),l.found}catch{return eW.test(s.source)}});return We(t,r=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+r.name+`<- static 'PATTERN' cannot contain end of input anchor '$'
	See chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:kt.EOI_ANCHOR_FOUND,tokenTypes:[r]}))}a(tW,"findEndOfInputAnchor");function nW(i){let e=Hn(i,n=>n.PATTERN.test(""));return We(e,n=>({message:"Token Type: ->"+n.name+"<- static 'PATTERN' must not match an empty string",type:kt.EMPTY_MATCH_PATTERN,tokenTypes:[n]}))}a(nW,"findEmptyMatchRegExps");var iW=/[^\\[][\^]|^\^/;function rW(i){class e extends Is{static{a(this,"StartAnchorFinder")}constructor(){super(...arguments),this.found=!1}visitStartAnchor(s){this.found=!0}}let t=Hn(i,r=>{let s=r.PATTERN;try{let o=pl(s),l=new e;return l.visit(o),l.found}catch{return iW.test(s.source)}});return We(t,r=>({message:`Unexpected RegExp Anchor Error:
	Token Type: ->`+r.name+`<- static 'PATTERN' cannot contain start of input anchor '^'
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#ANCHORS	for details.`,type:kt.SOI_ANCHOR_FOUND,tokenTypes:[r]}))}a(rW,"findStartOfInputAnchor");function sW(i){let e=Hn(i,n=>{let r=n[bo];return r instanceof RegExp&&(r.multiline||r.global)});return We(e,n=>({message:"Token Type: ->"+n.name+"<- static 'PATTERN' may NOT contain global('g') or multiline('m')",type:kt.UNSUPPORTED_FLAGS_FOUND,tokenTypes:[n]}))}a(sW,"findUnsupportedFlags");function oW(i){let e=[],t=We(i,s=>dn(i,(o,l)=>(s.PATTERN.source===l.PATTERN.source&&!Zt(e,l)&&l.PATTERN!==jt.NA&&(e.push(l),o.push(l)),o),[]));t=lr(t);let n=Hn(t,s=>s.length>1);return We(n,s=>{let o=We(s,c=>c.name);return{message:`The same RegExp pattern ->${Pn(s).PATTERN}<-has been used in all of the following Token Types: ${o.join(", ")} <-`,type:kt.DUPLICATE_PATTERNS_FOUND,tokenTypes:s}})}a(oW,"findDuplicatePatterns");function aW(i){let e=Hn(i,n=>{if(!Ke(n,"GROUP"))return!1;let r=n.GROUP;return r!==jt.SKIPPED&&r!==jt.NA&&!bn(r)});return We(e,n=>({message:"Token Type: ->"+n.name+"<- static 'GROUP' can only be Lexer.SKIPPED/Lexer.NA/A String",type:kt.INVALID_GROUP_TYPE_FOUND,tokenTypes:[n]}))}a(aW,"findInvalidGroupType");function lW(i,e){let t=Hn(i,r=>r.PUSH_MODE!==void 0&&!Zt(e,r.PUSH_MODE));return We(t,r=>({message:`Token Type: ->${r.name}<- static 'PUSH_MODE' value cannot refer to a Lexer Mode ->${r.PUSH_MODE}<-which does not exist`,type:kt.PUSH_MODE_DOES_NOT_EXIST,tokenTypes:[r]}))}a(lW,"findModesThatDoNotExist");function cW(i){let e=[],t=dn(i,(n,r,s)=>{let o=r.PATTERN;return o===jt.NA||(bn(o)?n.push({str:o,idx:s,tokenType:r}):wi(o)&&hW(o)&&n.push({str:o.source,idx:s,tokenType:r})),n},[]);return He(i,(n,r)=>{He(t,({str:s,idx:o,tokenType:l})=>{if(r<o&&uW(s,n.PATTERN)){let c=`Token: ->${l.name}<- can never be matched.
Because it appears AFTER the Token Type ->${n.name}<-in the lexer's definition.
See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#UNREACHABLE`;e.push({message:c,type:kt.UNREACHABLE_PATTERN,tokenTypes:[n,l]})}})}),e}a(cW,"findUnreachablePatterns");function uW(i,e){if(wi(e)){let t=e.exec(i);return t!==null&&t.index===0}else{if(Bn(e))return e(i,0,[],{});if(Ke(e,"exec"))return e.exec(i,0,[],{});if(typeof e=="string")return e===i;throw Error("non exhaustive match")}}a(uW,"testTokenType");function hW(i){return ur([".","\\","[","]","|","^","$","(",")","?","*","+","{"],t=>i.source.indexOf(t)!==-1)===void 0}a(hW,"noMetaChar");function py(i){let e=i.ignoreCase?"i":"";return new RegExp(`^(?:${i.source})`,e)}a(py,"addStartOfInput");function my(i){let e=i.ignoreCase?"iy":"y";return new RegExp(`${i.source}`,e)}a(my,"addStickyFlag");function _y(i,e,t){let n=[];return Ke(i,Rl)||n.push({message:"A MultiMode Lexer cannot be initialized without a <"+Rl+`> property in its definition
`,type:kt.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE}),Ke(i,sf)||n.push({message:"A MultiMode Lexer cannot be initialized without a <"+sf+`> property in its definition
`,type:kt.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY}),Ke(i,sf)&&Ke(i,Rl)&&!Ke(i.modes,i.defaultMode)&&n.push({message:`A MultiMode Lexer cannot be initialized with a ${Rl}: <${i.defaultMode}>which does not exist
`,type:kt.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST}),Ke(i,sf)&&He(i.modes,(r,s)=>{He(r,(o,l)=>{if(Gn(o))n.push({message:`A Lexer cannot be initialized using an undefined Token Type. Mode:<${s}> at index: <${l}>
`,type:kt.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED});else if(Ke(o,"LONGER_ALT")){let c=$e(o.LONGER_ALT)?o.LONGER_ALT:[o.LONGER_ALT];He(c,u=>{!Gn(u)&&!Zt(r,u)&&n.push({message:`A MultiMode Lexer cannot be initialized with a longer_alt <${u.name}> on token <${o.name}> outside of mode <${s}>
`,type:kt.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE})})}})}),n}a(_y,"performRuntimeChecks");function by(i,e,t){let n=[],r=!1,s=lr(_n(Nt(i.modes))),o=Us(s,c=>c[bo]===jt.NA),l=Ty(t);return e&&He(o,c=>{let u=Sy(c,l);if(u!==!1){let d={message:fW(c,u),type:u.issue,tokenType:c};n.push(d)}else Ke(c,"LINE_BREAKS")?c.LINE_BREAKS===!0&&(r=!0):rf(l,c.PATTERN)&&(r=!0)}),e&&!r&&n.push({message:`Warning: No LINE_BREAKS Found.
	This Lexer has been defined to track line and column information,
	But none of the Token Types can be identified as matching a line terminator.
	See https://chevrotain.io/docs/guide/resolving_lexer_errors.html#LINE_BREAKS 
	for details.`,type:kt.NO_LINE_BREAKS_FLAGS}),n}a(by,"performWarningRuntimeChecks");function My(i){let e={},t=wt(i);return He(t,n=>{let r=i[n];if($e(r))e[n]=[];else throw Error("non exhaustive match")}),e}a(My,"cloneEmptyGroups");function xy(i){let e=i.PATTERN;if(wi(e))return!1;if(Bn(e))return!0;if(Ke(e,"exec"))return!0;if(bn(e))return!1;throw Error("non exhaustive match")}a(xy,"isCustomPattern");function dW(i){return bn(i)&&i.length===1?i.charCodeAt(0):!1}a(dW,"isShortPattern");var yy={test:function(i){let e=i.length;for(let t=this.lastIndex;t<e;t++){let n=i.charCodeAt(t);if(n===10)return this.lastIndex=t+1,!0;if(n===13)return i.charCodeAt(t+1)===10?this.lastIndex=t+2:this.lastIndex=t+1,!0}return!1},lastIndex:0};function Sy(i,e){if(Ke(i,"LINE_BREAKS"))return!1;if(wi(i.PATTERN)){try{rf(e,i.PATTERN)}catch(t){return{issue:kt.IDENTIFY_TERMINATOR,errMsg:t.message}}return!1}else{if(bn(i.PATTERN))return!1;if(xy(i))return{issue:kt.CUSTOM_LINE_BREAK};throw Error("non exhaustive match")}}a(Sy,"checkLineBreaksIssues");function fW(i,e){if(e.issue===kt.IDENTIFY_TERMINATOR)return`Warning: unable to identify line terminator usage in pattern.
	The problem is in the <${i.name}> Token Type
	 Root cause: ${e.errMsg}.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#IDENTIFY_TERMINATOR`;if(e.issue===kt.CUSTOM_LINE_BREAK)return`Warning: A Custom Token Pattern should specify the <line_breaks> option.
	The problem is in the <${i.name}> Token Type
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#CUSTOM_LINE_BREAK`;throw Error("non exhaustive match")}a(fW,"buildLineBreakIssueMessage");function Ty(i){return We(i,t=>bn(t)?t.charCodeAt(0):t)}a(Ty,"getCharCodes");function Wm(i,e,t){i[e]===void 0?i[e]=[t]:i[e].push(t)}a(Wm,"addToMapOfArrays");var ml=256,of=[];function hr(i){return i<ml?i:of[i]}a(hr,"charCodeToOptimizedIndex");function pW(){if(_t(of)){of=new Array(65536);for(let i=0;i<65536;i++)of[i]=i>255?255+~~(i/255):i}}a(pW,"initCharCodeToOptimizedIndexMap");function Dr(i,e){let t=i.tokenTypeIdx;return t===e.tokenTypeIdx?!0:e.isParent===!0&&e.categoryMatchesMap[t]===!0}a(Dr,"tokenStructuredMatcher");function gl(i,e){return i.tokenTypeIdx===e.tokenTypeIdx}a(gl,"tokenStructuredMatcherNoCategories");var vy=1,Py={};function Yr(i){let e=mW(i);RW(e),_W(e),gW(e),He(e,t=>{t.isParent=t.categoryMatches.length>0})}a(Yr,"augmentTokenTypes");function mW(i){let e=At(i),t=i,n=!0;for(;n;){t=lr(_n(We(t,s=>s.CATEGORIES)));let r=Vs(t,e);e=e.concat(r),_t(r)?n=!1:t=r}return e}a(mW,"expandCategories");function RW(i){He(i,e=>{Zm(e)||(Py[vy]=e,e.tokenTypeIdx=vy++),Ny(e)&&!$e(e.CATEGORIES)&&(e.CATEGORIES=[e.CATEGORIES]),Ny(e)||(e.CATEGORIES=[]),bW(e)||(e.categoryMatches=[]),MW(e)||(e.categoryMatchesMap={})})}a(RW,"assignTokenDefaultProps");function gW(i){He(i,e=>{e.categoryMatches=[],He(e.categoryMatchesMap,(t,n)=>{e.categoryMatches.push(Py[n].tokenTypeIdx)})})}a(gW,"assignCategoriesTokensProp");function _W(i){He(i,e=>{Ey([],e)})}a(_W,"assignCategoriesMapProp");function Ey(i,e){He(i,t=>{e.categoryMatchesMap[t.tokenTypeIdx]=!0}),He(e.CATEGORIES,t=>{let n=i.concat(e);Zt(n,t)||Ey(n,t)})}a(Ey,"singleAssignCategoriesToksMap");function Zm(i){return Ke(i,"tokenTypeIdx")}a(Zm,"hasShortKeyProperty");function Ny(i){return Ke(i,"CATEGORIES")}a(Ny,"hasCategoriesProperty");function bW(i){return Ke(i,"categoryMatches")}a(bW,"hasExtendingTokensTypesProperty");function MW(i){return Ke(i,"categoryMatchesMap")}a(MW,"hasExtendingTokensTypesMapProperty");function wy(i){return Ke(i,"tokenTypeIdx")}a(wy,"isTokenType");var km={buildUnableToPopLexerModeMessage(i){return`Unable to pop Lexer Mode after encountering Token ->${i.image}<- The Mode Stack is empty`},buildUnexpectedCharactersMessage(i,e,t,n,r){return`unexpected character: ->${i.charAt(e)}<- at offset: ${e}, skipped ${t} characters.`}};var kt;(function(i){i[i.MISSING_PATTERN=0]="MISSING_PATTERN",i[i.INVALID_PATTERN=1]="INVALID_PATTERN",i[i.EOI_ANCHOR_FOUND=2]="EOI_ANCHOR_FOUND",i[i.UNSUPPORTED_FLAGS_FOUND=3]="UNSUPPORTED_FLAGS_FOUND",i[i.DUPLICATE_PATTERNS_FOUND=4]="DUPLICATE_PATTERNS_FOUND",i[i.INVALID_GROUP_TYPE_FOUND=5]="INVALID_GROUP_TYPE_FOUND",i[i.PUSH_MODE_DOES_NOT_EXIST=6]="PUSH_MODE_DOES_NOT_EXIST",i[i.MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE=7]="MULTI_MODE_LEXER_WITHOUT_DEFAULT_MODE",i[i.MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY=8]="MULTI_MODE_LEXER_WITHOUT_MODES_PROPERTY",i[i.MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST=9]="MULTI_MODE_LEXER_DEFAULT_MODE_VALUE_DOES_NOT_EXIST",i[i.LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED=10]="LEXER_DEFINITION_CANNOT_CONTAIN_UNDEFINED",i[i.SOI_ANCHOR_FOUND=11]="SOI_ANCHOR_FOUND",i[i.EMPTY_MATCH_PATTERN=12]="EMPTY_MATCH_PATTERN",i[i.NO_LINE_BREAKS_FLAGS=13]="NO_LINE_BREAKS_FLAGS",i[i.UNREACHABLE_PATTERN=14]="UNREACHABLE_PATTERN",i[i.IDENTIFY_TERMINATOR=15]="IDENTIFY_TERMINATOR",i[i.CUSTOM_LINE_BREAK=16]="CUSTOM_LINE_BREAK",i[i.MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE=17]="MULTI_MODE_LEXER_LONGER_ALT_NOT_IN_CURRENT_MODE"})(kt||(kt={}));var Bc={deferDefinitionErrorsHandling:!1,positionTracking:"full",lineTerminatorsPattern:/\n|\r\n?/g,lineTerminatorCharacters:[`
`,"\r"],ensureOptimizations:!1,safeMode:!1,errorMessageProvider:km,traceInitPerf:!1,skipValidations:!1,recoveryEnabled:!0};Object.freeze(Bc);var jt=class{static{a(this,"Lexer")}constructor(e,t=Bc){if(this.lexerDefinition=e,this.lexerDefinitionErrors=[],this.lexerDefinitionWarning=[],this.patternIdxToConfig={},this.charCodeToPatternIdxToConfig={},this.modes=[],this.emptyGroups={},this.trackStartLines=!0,this.trackEndLines=!0,this.hasCustom=!1,this.canModeBeOptimized={},this.TRACE_INIT=(r,s)=>{if(this.traceInitPerf===!0){this.traceInitIndent++;let o=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${o}--> <${r}>`);let{time:l,value:c}=Xc(s),u=l>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&u(`${o}<-- <${r}> time: ${l}ms`),this.traceInitIndent--,c}else return s()},typeof t=="boolean")throw Error(`The second argument to the Lexer constructor is now an ILexerConfig Object.
a boolean 2nd argument is no longer supported`);this.config=An({},Bc,t);let n=this.config.traceInitPerf;n===!0?(this.traceInitMaxIdent=1/0,this.traceInitPerf=!0):typeof n=="number"&&(this.traceInitMaxIdent=n,this.traceInitPerf=!0),this.traceInitIndent=-1,this.TRACE_INIT("Lexer Constructor",()=>{let r,s=!0;this.TRACE_INIT("Lexer Config handling",()=>{if(this.config.lineTerminatorsPattern===Bc.lineTerminatorsPattern)this.config.lineTerminatorsPattern=yy;else if(this.config.lineTerminatorCharacters===Bc.lineTerminatorCharacters)throw Error(`Error: Missing <lineTerminatorCharacters> property on the Lexer config.
	For details See: https://chevrotain.io/docs/guide/resolving_lexer_errors.html#MISSING_LINE_TERM_CHARS`);if(t.safeMode&&t.ensureOptimizations)throw Error('"safeMode" and "ensureOptimizations" flags are mutually exclusive.');this.trackStartLines=/full|onlyStart/i.test(this.config.positionTracking),this.trackEndLines=/full/i.test(this.config.positionTracking),$e(e)?r={modes:{defaultMode:At(e)},defaultMode:Rl}:(s=!1,r=At(e))}),this.config.skipValidations===!1&&(this.TRACE_INIT("performRuntimeChecks",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(_y(r,this.trackStartLines,this.config.lineTerminatorCharacters))}),this.TRACE_INIT("performWarningRuntimeChecks",()=>{this.lexerDefinitionWarning=this.lexerDefinitionWarning.concat(by(r,this.trackStartLines,this.config.lineTerminatorCharacters))})),r.modes=r.modes?r.modes:{},He(r.modes,(l,c)=>{r.modes[c]=Us(l,u=>Gn(u))});let o=wt(r.modes);if(He(r.modes,(l,c)=>{this.TRACE_INIT(`Mode: <${c}> processing`,()=>{if(this.modes.push(c),this.config.skipValidations===!1&&this.TRACE_INIT("validatePatterns",()=>{this.lexerDefinitionErrors=this.lexerDefinitionErrors.concat(gy(l,o))}),_t(this.lexerDefinitionErrors)){Yr(l);let u;this.TRACE_INIT("analyzeTokenTypes",()=>{u=Ry(l,{lineTerminatorCharacters:this.config.lineTerminatorCharacters,positionTracking:t.positionTracking,ensureOptimizations:t.ensureOptimizations,safeMode:t.safeMode,tracer:this.TRACE_INIT})}),this.patternIdxToConfig[c]=u.patternIdxToConfig,this.charCodeToPatternIdxToConfig[c]=u.charCodeToPatternIdxToConfig,this.emptyGroups=An({},this.emptyGroups,u.emptyGroups),this.hasCustom=u.hasCustom||this.hasCustom,this.canModeBeOptimized[c]=u.canBeOptimized}})}),this.defaultMode=r.defaultMode,!_t(this.lexerDefinitionErrors)&&!this.config.deferDefinitionErrorsHandling){let c=We(this.lexerDefinitionErrors,u=>u.message).join(`-----------------------
`);throw new Error(`Errors detected in definition of Lexer:
`+c)}He(this.lexerDefinitionWarning,l=>{kc(l.message)}),this.TRACE_INIT("Choosing sub-methods implementations",()=>{if(Cm?(this.chopInput=Pi,this.match=this.matchWithTest):(this.updateLastIndex=Kt,this.match=this.matchWithExec),s&&(this.handleModes=Kt),this.trackStartLines===!1&&(this.computeNewColumn=Pi),this.trackEndLines===!1&&(this.updateTokenEndLineColumnLocation=Kt),/full/i.test(this.config.positionTracking))this.createTokenInstance=this.createFullToken;else if(/onlyStart/i.test(this.config.positionTracking))this.createTokenInstance=this.createStartOnlyToken;else if(/onlyOffset/i.test(this.config.positionTracking))this.createTokenInstance=this.createOffsetOnlyToken;else throw Error(`Invalid <positionTracking> config option: "${this.config.positionTracking}"`);this.hasCustom?(this.addToken=this.addTokenUsingPush,this.handlePayload=this.handlePayloadWithCustom):(this.addToken=this.addTokenUsingMemberAccess,this.handlePayload=this.handlePayloadNoCustom)}),this.TRACE_INIT("Failed Optimization Warnings",()=>{let l=dn(this.canModeBeOptimized,(c,u,h)=>(u===!1&&c.push(h),c),[]);if(t.ensureOptimizations&&!_t(l))throw Error(`Lexer Modes: < ${l.join(", ")} > cannot be optimized.
	 Disable the "ensureOptimizations" lexer config flag to silently ignore this and run the lexer in an un-optimized mode.
	 Or inspect the console log for details on how to resolve these issues.`)}),this.TRACE_INIT("clearRegExpParserCache",()=>{uy()}),this.TRACE_INIT("toFastProperties",()=>{Hc(this)})})}tokenize(e,t=this.defaultMode){if(!_t(this.lexerDefinitionErrors)){let r=We(this.lexerDefinitionErrors,s=>s.message).join(`-----------------------
`);throw new Error(`Unable to Tokenize because Errors detected in definition of Lexer:
`+r)}return this.tokenizeInternal(e,t)}tokenizeInternal(e,t){let n,r,s,o,l,c,u,h,d,f,m,_,M,g,R,y,b=e,S=b.length,C=0,W=0,F=this.hasCustom?0:Math.floor(e.length/10),ee=new Array(F),P=[],U=this.trackStartLines?1:void 0,j=this.trackStartLines?1:void 0,ae=My(this.emptyGroups),_e=this.trackStartLines,D=this.config.lineTerminatorsPattern,z=0,se=[],fe=[],le=[],ce=[];Object.freeze(ce);let ge;function be(){return se}a(be,"getPossiblePatternsSlow");function Oe(Le){let ze=hr(Le),qe=fe[ze];return qe===void 0?ce:qe}a(Oe,"getPossiblePatternsOptimized");let $=a(Le=>{if(le.length===1&&Le.tokenType.PUSH_MODE===void 0){let ze=this.config.errorMessageProvider.buildUnableToPopLexerModeMessage(Le);P.push({offset:Le.startOffset,line:Le.startLine,column:Le.startColumn,length:Le.image.length,message:ze})}else{le.pop();let ze=cr(le);se=this.patternIdxToConfig[ze],fe=this.charCodeToPatternIdxToConfig[ze],z=se.length;let qe=this.canModeBeOptimized[ze]&&this.config.safeMode===!1;fe&&qe?ge=Oe:ge=be}},"pop_mode");function me(Le){le.push(Le),fe=this.charCodeToPatternIdxToConfig[Le],se=this.patternIdxToConfig[Le],z=se.length,z=se.length;let ze=this.canModeBeOptimized[Le]&&this.config.safeMode===!1;fe&&ze?ge=Oe:ge=be}a(me,"push_mode"),me.call(this,t);let Se,Be=this.config.recoveryEnabled;for(;C<S;){c=null;let Le=b.charCodeAt(C),ze=ge(Le),qe=ze.length;for(n=0;n<qe;n++){Se=ze[n];let Ze=Se.pattern;u=null;let st=Se.short;if(st!==!1?Le===st&&(c=Ze):Se.isCustom===!0?(y=Ze.exec(b,C,ee,ae),y!==null?(c=y[0],y.payload!==void 0&&(u=y.payload)):c=null):(this.updateLastIndex(Ze,C),c=this.match(Ze,e,C)),c!==null){if(l=Se.longerAlt,l!==void 0){let B=l.length;for(s=0;s<B;s++){let xt=se[l[s]],Ge=xt.pattern;if(h=null,xt.isCustom===!0?(y=Ge.exec(b,C,ee,ae),y!==null?(o=y[0],y.payload!==void 0&&(h=y.payload)):o=null):(this.updateLastIndex(Ge,C),o=this.match(Ge,e,C)),o&&o.length>c.length){c=o,u=h,Se=xt;break}}}break}}if(c!==null){if(d=c.length,f=Se.group,f!==void 0&&(m=Se.tokenTypeIdx,_=this.createTokenInstance(c,C,m,Se.tokenType,U,j,d),this.handlePayload(_,u),f===!1?W=this.addToken(ee,W,_):ae[f].push(_)),e=this.chopInput(e,d),C=C+d,j=this.computeNewColumn(j,d),_e===!0&&Se.canLineTerminator===!0){let Ze=0,st,B;D.lastIndex=0;do st=D.test(c),st===!0&&(B=D.lastIndex-1,Ze++);while(st===!0);Ze!==0&&(U=U+Ze,j=d-B,this.updateTokenEndLineColumnLocation(_,f,B,Ze,U,j,d))}this.handleModes(Se,$,me,_)}else{let Ze=C,st=U,B=j,xt=Be===!1;for(;xt===!1&&C<S;)for(e=this.chopInput(e,1),C++,r=0;r<z;r++){let Ge=se[r],tt=Ge.pattern,De=Ge.short;if(De!==!1?b.charCodeAt(C)===De&&(xt=!0):Ge.isCustom===!0?xt=tt.exec(b,C,ee,ae)!==null:(this.updateLastIndex(tt,C),xt=tt.exec(e)!==null),xt===!0)break}if(M=C-Ze,j=this.computeNewColumn(j,M),R=this.config.errorMessageProvider.buildUnexpectedCharactersMessage(b,Ze,M,st,B),P.push({offset:Ze,line:st,column:B,length:M,message:R}),Be===!1)break}}return this.hasCustom||(ee.length=W),{tokens:ee,groups:ae,errors:P}}handleModes(e,t,n,r){if(e.pop===!0){let s=e.push;t(r),s!==void 0&&n.call(this,s)}else e.push!==void 0&&n.call(this,e.push)}chopInput(e,t){return e.substring(t)}updateLastIndex(e,t){e.lastIndex=t}updateTokenEndLineColumnLocation(e,t,n,r,s,o,l){let c,u;t!==void 0&&(c=n===l-1,u=c?-1:0,r===1&&c===!0||(e.endLine=s+u,e.endColumn=o-1+-u))}computeNewColumn(e,t){return e+t}createOffsetOnlyToken(e,t,n,r){return{image:e,startOffset:t,tokenTypeIdx:n,tokenType:r}}createStartOnlyToken(e,t,n,r,s,o){return{image:e,startOffset:t,startLine:s,startColumn:o,tokenTypeIdx:n,tokenType:r}}createFullToken(e,t,n,r,s,o,l){return{image:e,startOffset:t,endOffset:t+l-1,startLine:s,endLine:s,startColumn:o,endColumn:o+l-1,tokenTypeIdx:n,tokenType:r}}addTokenUsingPush(e,t,n){return e.push(n),t}addTokenUsingMemberAccess(e,t,n){return e[t]=n,t++,t}handlePayloadNoCustom(e,t){}handlePayloadWithCustom(e,t){t!==null&&(e.payload=t)}matchWithTest(e,t,n){return e.test(t)===!0?t.substring(n,e.lastIndex):null}matchWithExec(e,t){let n=e.exec(t);return n!==null?n[0]:null}};jt.SKIPPED="This marks a skipped Token pattern, this means each token identified by it willbe consumed and then thrown into oblivion, this can be used to for example to completely ignore whitespace.";jt.NA=/NOT_APPLICABLE/;function Mo(i){return Xm(i)?i.LABEL:i.name}a(Mo,"tokenLabel");function Xm(i){return bn(i.LABEL)&&i.LABEL!==""}a(Xm,"hasTokenLabel");var xW="parent",Ly="categories",Ay="label",Oy="group",Vy="push_mode",Uy="pop_mode",Iy="longer_alt",Fy="line_breaks",Wy="start_chars_hint";function _l(i){return yW(i)}a(_l,"createToken");function yW(i){let e=i.pattern,t={};if(t.name=i.name,Gn(e)||(t.PATTERN=e),Ke(i,xW))throw`The parent property is no longer supported.
See: https://github.com/chevrotain/chevrotain/issues/564#issuecomment-349062346 for details.`;return Ke(i,Ly)&&(t.CATEGORIES=i[Ly]),Yr([t]),Ke(i,Ay)&&(t.LABEL=i[Ay]),Ke(i,Oy)&&(t.GROUP=i[Oy]),Ke(i,Uy)&&(t.POP_MODE=i[Uy]),Ke(i,Vy)&&(t.PUSH_MODE=i[Vy]),Ke(i,Iy)&&(t.LONGER_ALT=i[Iy]),Ke(i,Fy)&&(t.LINE_BREAKS=i[Fy]),Ke(i,Wy)&&(t.START_CHARS_HINT=i[Wy]),t}a(yW,"createTokenInternal");var Hi=_l({name:"EOF",pattern:jt.NA});Yr([Hi]);function xo(i,e,t,n,r,s,o,l){return{image:e,startOffset:t,endOffset:n,startLine:r,endLine:s,startColumn:o,endColumn:l,tokenTypeIdx:i.tokenTypeIdx,tokenType:i}}a(xo,"createTokenInstance");function Hm(i,e){return Dr(i,e)}a(Hm,"tokenMatcher");var af={buildMismatchTokenMessage({expected:i,actual:e,previous:t,ruleName:n}){return`Expecting ${Xm(i)?`--> ${Mo(i)} <--`:`token of type --> ${i.name} <--`} but found --> '${e.image}' <--`},buildNotAllInputParsedMessage({firstRedundant:i,ruleName:e}){return"Redundant input, expecting EOF but found: "+i.image},buildNoViableAltMessage({expectedPathsPerAlt:i,actual:e,previous:t,customUserDescription:n,ruleName:r}){let s="Expecting: ",l=`
but found: '`+Pn(e).image+"'";if(n)return s+n+l;{let c=dn(i,(f,m)=>f.concat(m),[]),u=We(c,f=>`[${We(f,m=>Mo(m)).join(", ")}]`),d=`one of these possible Token sequences:
${We(u,(f,m)=>`  ${m+1}. ${f}`).join(`
`)}`;return s+d+l}},buildEarlyExitMessage({expectedIterationPaths:i,actual:e,customUserDescription:t,ruleName:n}){let r="Expecting: ",o=`
but found: '`+Pn(e).image+"'";if(t)return r+t+o;{let c=`expecting at least one iteration which starts with one of these possible Token sequences::
  <${We(i,u=>`[${We(u,h=>Mo(h)).join(",")}]`).join(" ,")}>`;return r+c+o}}};Object.freeze(af);var Cy={buildRuleNotFoundError(i,e){return"Invalid grammar, reference to a rule which is not defined: ->"+e.nonTerminalName+`<-
inside top level rule: ->`+i.name+"<-"}},Gi={buildDuplicateFoundError(i,e){function t(h){return h instanceof Mt?h.terminalType.name:h instanceof Ot?h.nonTerminalName:""}a(t,"getExtraProductionArgument");let n=i.name,r=Pn(e),s=r.idx,o=ai(r),l=t(r),c=s>0,u=`->${o}${c?s:""}<- ${l?`with argument: ->${l}<-`:""}
                  appears more than once (${e.length} times) in the top level rule: ->${n}<-.                  
                  For further details see: https://chevrotain.io/docs/FAQ.html#NUMERICAL_SUFFIXES 
                  `;return u=u.replace(/[ \t]+/g," "),u=u.replace(/\s\s+/g,`
`),u},buildNamespaceConflictError(i){return`Namespace conflict found in grammar.
The grammar has both a Terminal(Token) and a Non-Terminal(Rule) named: <${i.name}>.
To resolve this make sure each Terminal and Non-Terminal names are unique
This is easy to accomplish by using the convention that Terminal names start with an uppercase letter
and Non-Terminal names start with a lower case letter.`},buildAlternationPrefixAmbiguityError(i){let e=We(i.prefixPath,r=>Mo(r)).join(", "),t=i.alternation.idx===0?"":i.alternation.idx;return`Ambiguous alternatives: <${i.ambiguityIndices.join(" ,")}> due to common lookahead prefix
in <OR${t}> inside <${i.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#COMMON_PREFIX
For Further details.`},buildAlternationAmbiguityError(i){let e=We(i.prefixPath,r=>Mo(r)).join(", "),t=i.alternation.idx===0?"":i.alternation.idx,n=`Ambiguous Alternatives Detected: <${i.ambiguityIndices.join(" ,")}> in <OR${t}> inside <${i.topLevelRule.name}> Rule,
<${e}> may appears as a prefix path in all these alternatives.
`;return n=n+`See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#AMBIGUOUS_ALTERNATIVES
For Further details.`,n},buildEmptyRepetitionError(i){let e=ai(i.repetition);return i.repetition.idx!==0&&(e+=i.repetition.idx),`The repetition <${e}> within Rule <${i.topLevelRule.name}> can never consume any tokens.
This could lead to an infinite loop.`},buildTokenNameError(i){return"deprecated"},buildEmptyAlternationError(i){return`Ambiguous empty alternative: <${i.emptyChoiceIdx+1}> in <OR${i.alternation.idx}> inside <${i.topLevelRule.name}> Rule.
Only the last alternative may be an empty alternative.`},buildTooManyAlternativesError(i){return`An Alternation cannot have more than 256 alternatives:
<OR${i.alternation.idx}> inside <${i.topLevelRule.name}> Rule.
 has ${i.alternation.definition.length+1} alternatives.`},buildLeftRecursionError(i){let e=i.topLevelRule.name,t=We(i.leftRecursionPath,s=>s.name),n=`${e} --> ${t.concat([e]).join(" --> ")}`;return`Left Recursion found in grammar.
rule: <${e}> can be invoked from itself (directly or indirectly)
without consuming any Tokens. The grammar path that causes this is: 
 ${n}
 To fix this refactor your grammar to remove the left recursion.
see: https://en.wikipedia.org/wiki/LL_parser#Left_factoring.`},buildInvalidRuleNameError(i){return"deprecated"},buildDuplicateRuleNameError(i){let e;return i.topLevelRule instanceof zn?e=i.topLevelRule.name:e=i.topLevelRule,`Duplicate definition, rule: ->${e}<- is already defined in the grammar: ->${i.grammarName}<-`}};function Zy(i,e){let t=new Gm(i,e);return t.resolveRefs(),t.errors}a(Zy,"resolveGrammar");var Gm=class extends $n{static{a(this,"GastRefResolverVisitor")}constructor(e,t){super(),this.nameToTopRule=e,this.errMsgProvider=t,this.errors=[]}resolveRefs(){He(Nt(this.nameToTopRule),e=>{this.currTopLevel=e,e.accept(this)})}visitNonTerminal(e){let t=this.nameToTopRule[e.nonTerminalName];if(t)e.referencedRule=t;else{let n=this.errMsgProvider.buildRuleNotFoundError(this.currTopLevel,e);this.errors.push({message:n,type:Mn.UNRESOLVED_SUBRULE_REF,ruleName:this.currTopLevel.name,unresolvedRefName:e.nonTerminalName})}}};var Dm=class extends Gr{static{a(this,"AbstractNextPossibleTokensWalker")}constructor(e,t){super(),this.topProd=e,this.path=t,this.possibleTokTypes=[],this.nextProductionName="",this.nextProductionOccurrence=0,this.found=!1,this.isAtEndOfPath=!1}startWalking(){if(this.found=!1,this.path.ruleStack[0]!==this.topProd.name)throw Error("The path does not start with the walker's top Rule!");return this.ruleStack=At(this.path.ruleStack).reverse(),this.occurrenceStack=At(this.path.occurrenceStack).reverse(),this.ruleStack.pop(),this.occurrenceStack.pop(),this.updateExpectedNext(),this.walk(this.topProd),this.possibleTokTypes}walk(e,t=[]){this.found||super.walk(e,t)}walkProdRef(e,t,n){if(e.referencedRule.name===this.nextProductionName&&e.idx===this.nextProductionOccurrence){let r=t.concat(n);this.updateExpectedNext(),this.walk(e.referencedRule,r)}}updateExpectedNext(){_t(this.ruleStack)?(this.nextProductionName="",this.nextProductionOccurrence=0,this.isAtEndOfPath=!0):(this.nextProductionName=this.ruleStack.pop(),this.nextProductionOccurrence=this.occurrenceStack.pop())}},lf=class extends Dm{static{a(this,"NextAfterTokenWalker")}constructor(e,t){super(e,t),this.path=t,this.nextTerminalName="",this.nextTerminalOccurrence=0,this.nextTerminalName=this.path.lastTok.name,this.nextTerminalOccurrence=this.path.lastTokOccurrence}walkTerminal(e,t,n){if(this.isAtEndOfPath&&e.terminalType.name===this.nextTerminalName&&e.idx===this.nextTerminalOccurrence&&!this.found){let r=t.concat(n),s=new Vt({definition:r});this.possibleTokTypes=go(s),this.found=!0}}},bl=class extends Gr{static{a(this,"AbstractNextTerminalAfterProductionWalker")}constructor(e,t){super(),this.topRule=e,this.occurrence=t,this.result={token:void 0,occurrence:void 0,isEndOfRule:void 0}}startWalking(){return this.walk(this.topRule),this.result}},cf=class extends bl{static{a(this,"NextTerminalAfterManyWalker")}walkMany(e,t,n){if(e.idx===this.occurrence){let r=Pn(t.concat(n));this.result.isEndOfRule=r===void 0,r instanceof Mt&&(this.result.token=r.terminalType,this.result.occurrence=r.idx)}else super.walkMany(e,t,n)}},Jc=class extends bl{static{a(this,"NextTerminalAfterManySepWalker")}walkManySep(e,t,n){if(e.idx===this.occurrence){let r=Pn(t.concat(n));this.result.isEndOfRule=r===void 0,r instanceof Mt&&(this.result.token=r.terminalType,this.result.occurrence=r.idx)}else super.walkManySep(e,t,n)}},uf=class extends bl{static{a(this,"NextTerminalAfterAtLeastOneWalker")}walkAtLeastOne(e,t,n){if(e.idx===this.occurrence){let r=Pn(t.concat(n));this.result.isEndOfRule=r===void 0,r instanceof Mt&&(this.result.token=r.terminalType,this.result.occurrence=r.idx)}else super.walkAtLeastOne(e,t,n)}},zc=class extends bl{static{a(this,"NextTerminalAfterAtLeastOneSepWalker")}walkAtLeastOneSep(e,t,n){if(e.idx===this.occurrence){let r=Pn(t.concat(n));this.result.isEndOfRule=r===void 0,r instanceof Mt&&(this.result.token=r.terminalType,this.result.occurrence=r.idx)}else super.walkAtLeastOneSep(e,t,n)}};function hf(i,e,t=[]){t=At(t);let n=[],r=0;function s(l){return l.concat(tn(i,r+1))}a(s,"remainingPathWith");function o(l){let c=hf(s(l),e,t);return n.concat(c)}for(a(o,"getAlternativesForProd");t.length<e&&r<i.length;){let l=i[r];if(l instanceof Vt)return o(l.definition);if(l instanceof Ot)return o(l.definition);if(l instanceof Ft)n=o(l.definition);else if(l instanceof nn){let c=l.definition.concat([new yt({definition:l.definition})]);return o(c)}else if(l instanceof rn){let c=[new Vt({definition:l.definition}),new yt({definition:[new Mt({terminalType:l.separator})].concat(l.definition)})];return o(c)}else if(l instanceof zt){let c=l.definition.concat([new yt({definition:[new Mt({terminalType:l.separator})].concat(l.definition)})]);n=o(c)}else if(l instanceof yt){let c=l.definition.concat([new yt({definition:l.definition})]);n=o(c)}else{if(l instanceof $t)return He(l.definition,c=>{_t(c.definition)===!1&&(n=o(c.definition))}),n;if(l instanceof Mt)t.push(l.terminalType);else throw Error("non exhaustive match")}r++}return n.push({partialPath:t,suffixDef:tn(i,r)}),n}a(hf,"possiblePathsFrom");function df(i,e,t,n){let r="EXIT_NONE_TERMINAL",s=[r],o="EXIT_ALTERNATIVE",l=!1,c=e.length,u=c-n-1,h=[],d=[];for(d.push({idx:-1,def:i,ruleStack:[],occurrenceStack:[]});!_t(d);){let f=d.pop();if(f===o){l&&cr(d).idx<=u&&d.pop();continue}let m=f.def,_=f.idx,M=f.ruleStack,g=f.occurrenceStack;if(_t(m))continue;let R=m[0];if(R===r){let y={idx:_,def:tn(m),ruleStack:Hr(M),occurrenceStack:Hr(g)};d.push(y)}else if(R instanceof Mt)if(_<c-1){let y=_+1,b=e[y];if(t(b,R.terminalType)){let S={idx:y,def:tn(m),ruleStack:M,occurrenceStack:g};d.push(S)}}else if(_===c-1)h.push({nextTokenType:R.terminalType,nextTokenOccurrence:R.idx,ruleStack:M,occurrenceStack:g}),l=!0;else throw Error("non exhaustive match");else if(R instanceof Ot){let y=At(M);y.push(R.nonTerminalName);let b=At(g);b.push(R.idx);let S={idx:_,def:R.definition.concat(s,tn(m)),ruleStack:y,occurrenceStack:b};d.push(S)}else if(R instanceof Ft){let y={idx:_,def:tn(m),ruleStack:M,occurrenceStack:g};d.push(y),d.push(o);let b={idx:_,def:R.definition.concat(tn(m)),ruleStack:M,occurrenceStack:g};d.push(b)}else if(R instanceof nn){let y=new yt({definition:R.definition,idx:R.idx}),b=R.definition.concat([y],tn(m)),S={idx:_,def:b,ruleStack:M,occurrenceStack:g};d.push(S)}else if(R instanceof rn){let y=new Mt({terminalType:R.separator}),b=new yt({definition:[y].concat(R.definition),idx:R.idx}),S=R.definition.concat([b],tn(m)),C={idx:_,def:S,ruleStack:M,occurrenceStack:g};d.push(C)}else if(R instanceof zt){let y={idx:_,def:tn(m),ruleStack:M,occurrenceStack:g};d.push(y),d.push(o);let b=new Mt({terminalType:R.separator}),S=new yt({definition:[b].concat(R.definition),idx:R.idx}),C=R.definition.concat([S],tn(m)),W={idx:_,def:C,ruleStack:M,occurrenceStack:g};d.push(W)}else if(R instanceof yt){let y={idx:_,def:tn(m),ruleStack:M,occurrenceStack:g};d.push(y),d.push(o);let b=new yt({definition:R.definition,idx:R.idx}),S=R.definition.concat([b],tn(m)),C={idx:_,def:S,ruleStack:M,occurrenceStack:g};d.push(C)}else if(R instanceof $t)for(let y=R.definition.length-1;y>=0;y--){let b=R.definition[y],S={idx:_,def:b.definition.concat(tn(m)),ruleStack:M,occurrenceStack:g};d.push(S),d.push(o)}else if(R instanceof Vt)d.push({idx:_,def:R.definition.concat(tn(m)),ruleStack:M,occurrenceStack:g});else if(R instanceof zn)d.push(SW(R,_,M,g));else throw Error("non exhaustive match")}return h}a(df,"nextPossibleTokensAfter");function SW(i,e,t,n){let r=At(t);r.push(i.name);let s=At(n);return s.push(1),{idx:e,def:i.definition,ruleStack:r,occurrenceStack:s}}a(SW,"expandTopLevelRule");var Qt;(function(i){i[i.OPTION=0]="OPTION",i[i.REPETITION=1]="REPETITION",i[i.REPETITION_MANDATORY=2]="REPETITION_MANDATORY",i[i.REPETITION_MANDATORY_WITH_SEPARATOR=3]="REPETITION_MANDATORY_WITH_SEPARATOR",i[i.REPETITION_WITH_SEPARATOR=4]="REPETITION_WITH_SEPARATOR",i[i.ALTERNATION=5]="ALTERNATION"})(Qt||(Qt={}));function pf(i){if(i instanceof Ft||i==="Option")return Qt.OPTION;if(i instanceof yt||i==="Repetition")return Qt.REPETITION;if(i instanceof nn||i==="RepetitionMandatory")return Qt.REPETITION_MANDATORY;if(i instanceof rn||i==="RepetitionMandatoryWithSeparator")return Qt.REPETITION_MANDATORY_WITH_SEPARATOR;if(i instanceof zt||i==="RepetitionWithSeparator")return Qt.REPETITION_WITH_SEPARATOR;if(i instanceof $t||i==="Alternation")return Qt.ALTERNATION;throw Error("non exhaustive match")}a(pf,"getProdType");function Xy(i,e,t,n,r,s){let o=$c(i,e,t),l=Qy(o)?gl:Dr;return s(o,n,l,r)}a(Xy,"buildLookaheadFuncForOr");function Hy(i,e,t,n,r,s){let o=jc(i,e,r,t),l=Qy(o)?gl:Dr;return s(o[0],l,n)}a(Hy,"buildLookaheadFuncForOptionalProd");function Gy(i,e,t,n){let r=i.length,s=Xn(i,o=>Xn(o,l=>l.length===1));if(e)return function(o){let l=We(o,c=>c.GATE);for(let c=0;c<r;c++){let u=i[c],h=u.length,d=l[c];if(!(d!==void 0&&d.call(this)===!1))e:for(let f=0;f<h;f++){let m=u[f],_=m.length;for(let M=0;M<_;M++){let g=this.LA(M+1);if(t(g,m[M])===!1)continue e}return c}}};if(s&&!n){let o=We(i,c=>_n(c)),l=dn(o,(c,u,h)=>(He(u,d=>{Ke(c,d.tokenTypeIdx)||(c[d.tokenTypeIdx]=h),He(d.categoryMatches,f=>{Ke(c,f)||(c[f]=h)})}),c),{});return function(){let c=this.LA(1);return l[c.tokenTypeIdx]}}else return function(){for(let o=0;o<r;o++){let l=i[o],c=l.length;e:for(let u=0;u<c;u++){let h=l[u],d=h.length;for(let f=0;f<d;f++){let m=this.LA(f+1);if(t(m,h[f])===!1)continue e}return o}}}}a(Gy,"buildAlternativesLookAheadFunc");function Dy(i,e,t){let n=Xn(i,s=>s.length===1),r=i.length;if(n&&!t){let s=_n(i);if(s.length===1&&_t(s[0].categoryMatches)){let l=s[0].tokenTypeIdx;return function(){return this.LA(1).tokenTypeIdx===l}}else{let o=dn(s,(l,c,u)=>(l[c.tokenTypeIdx]=!0,He(c.categoryMatches,h=>{l[h]=!0}),l),[]);return function(){let l=this.LA(1);return o[l.tokenTypeIdx]===!0}}}else return function(){e:for(let s=0;s<r;s++){let o=i[s],l=o.length;for(let c=0;c<l;c++){let u=this.LA(c+1);if(e(u,o[c])===!1)continue e}return!0}return!1}}a(Dy,"buildSingleAlternativeLookaheadFunction");var Km=class extends Gr{static{a(this,"RestDefinitionFinderWalker")}constructor(e,t,n){super(),this.topProd=e,this.targetOccurrence=t,this.targetProdType=n}startWalking(){return this.walk(this.topProd),this.restDef}checkIsTarget(e,t,n,r){return e.idx===this.targetOccurrence&&this.targetProdType===t?(this.restDef=n.concat(r),!0):!1}walkOption(e,t,n){this.checkIsTarget(e,Qt.OPTION,t,n)||super.walkOption(e,t,n)}walkAtLeastOne(e,t,n){this.checkIsTarget(e,Qt.REPETITION_MANDATORY,t,n)||super.walkOption(e,t,n)}walkAtLeastOneSep(e,t,n){this.checkIsTarget(e,Qt.REPETITION_MANDATORY_WITH_SEPARATOR,t,n)||super.walkOption(e,t,n)}walkMany(e,t,n){this.checkIsTarget(e,Qt.REPETITION,t,n)||super.walkOption(e,t,n)}walkManySep(e,t,n){this.checkIsTarget(e,Qt.REPETITION_WITH_SEPARATOR,t,n)||super.walkOption(e,t,n)}},ff=class extends $n{static{a(this,"InsideDefinitionFinderVisitor")}constructor(e,t,n){super(),this.targetOccurrence=e,this.targetProdType=t,this.targetRef=n,this.result=[]}checkIsTarget(e,t){e.idx===this.targetOccurrence&&this.targetProdType===t&&(this.targetRef===void 0||e===this.targetRef)&&(this.result=e.definition)}visitOption(e){this.checkIsTarget(e,Qt.OPTION)}visitRepetition(e){this.checkIsTarget(e,Qt.REPETITION)}visitRepetitionMandatory(e){this.checkIsTarget(e,Qt.REPETITION_MANDATORY)}visitRepetitionMandatoryWithSeparator(e){this.checkIsTarget(e,Qt.REPETITION_MANDATORY_WITH_SEPARATOR)}visitRepetitionWithSeparator(e){this.checkIsTarget(e,Qt.REPETITION_WITH_SEPARATOR)}visitAlternation(e){this.checkIsTarget(e,Qt.ALTERNATION)}};function ky(i){let e=new Array(i);for(let t=0;t<i;t++)e[t]=[];return e}a(ky,"initializeArrayOfArrays");function Ym(i){let e=[""];for(let t=0;t<i.length;t++){let n=i[t],r=[];for(let s=0;s<e.length;s++){let o=e[s];r.push(o+"_"+n.tokenTypeIdx);for(let l=0;l<n.categoryMatches.length;l++){let c="_"+n.categoryMatches[l];r.push(o+c)}}e=r}return e}a(Ym,"pathToHashKeys");function TW(i,e,t){for(let n=0;n<i.length;n++){if(n===t)continue;let r=i[n];for(let s=0;s<e.length;s++){let o=e[s];if(r[o]===!0)return!1}}return!0}a(TW,"isUniquePrefixHash");function Yy(i,e){let t=We(i,o=>hf([o],1)),n=ky(t.length),r=We(t,o=>{let l={};return He(o,c=>{let u=Ym(c.partialPath);He(u,h=>{l[h]=!0})}),l}),s=t;for(let o=1;o<=e;o++){let l=s;s=ky(l.length);for(let c=0;c<l.length;c++){let u=l[c];for(let h=0;h<u.length;h++){let d=u[h].partialPath,f=u[h].suffixDef,m=Ym(d);if(TW(r,m,c)||_t(f)||d.length===e){let M=n[c];if(mf(M,d)===!1){M.push(d);for(let g=0;g<m.length;g++){let R=m[g];r[c][R]=!0}}}else{let M=hf(f,o+1,d);s[c]=s[c].concat(M),He(M,g=>{let R=Ym(g.partialPath);He(R,y=>{r[c][y]=!0})})}}}}return n}a(Yy,"lookAheadSequenceFromAlternatives");function $c(i,e,t,n){let r=new ff(i,Qt.ALTERNATION,n);return e.accept(r),Yy(r.result,t)}a($c,"getLookaheadPathsForOr");function jc(i,e,t,n){let r=new ff(i,t);e.accept(r);let s=r.result,l=new Km(e,i,t).startWalking(),c=new Vt({definition:s}),u=new Vt({definition:l});return Yy([c,u],n)}a(jc,"getLookaheadPathsForOptionalProd");function mf(i,e){e:for(let t=0;t<i.length;t++){let n=i[t];if(n.length===e.length){for(let r=0;r<n.length;r++){let s=e[r],o=n[r];if((s===o||o.categoryMatchesMap[s.tokenTypeIdx]!==void 0)===!1)continue e}return!0}}return!1}a(mf,"containsPath");function Ky(i,e){return i.length<e.length&&Xn(i,(t,n)=>{let r=e[n];return t===r||r.categoryMatchesMap[t.tokenTypeIdx]})}a(Ky,"isStrictPrefixOfPath");function Qy(i){return Xn(i,e=>Xn(e,t=>Xn(t,n=>_t(n.categoryMatches))))}a(Qy,"areTokenCategoriesNotUsed");function By(i){let e=i.lookaheadStrategy.validate({rules:i.rules,tokenTypes:i.tokenTypes,grammarName:i.grammarName});return We(e,t=>Object.assign({type:Mn.CUSTOM_LOOKAHEAD_VALIDATION},t))}a(By,"validateLookahead");function Jy(i,e,t,n){let r=Jn(i,c=>vW(c,t)),s=AW(i,e,t),o=Jn(i,c=>EW(c,t)),l=Jn(i,c=>PW(c,i,n,t));return r.concat(s,o,l)}a(Jy,"validateGrammar");function vW(i,e){let t=new Qm;i.accept(t);let n=t.allProductions,r=Em(n,NW),s=oi(r,l=>l.length>1);return We(Nt(s),l=>{let c=Pn(l),u=e.buildDuplicateFoundError(i,l),h=ai(c),d={message:u,type:Mn.DUPLICATE_PRODUCTIONS,ruleName:i.name,dslName:h,occurrence:c.idx},f=zy(c);return f&&(d.parameter=f),d})}a(vW,"validateDuplicateProductions");function NW(i){return`${ai(i)}_#_${i.idx}_#_${zy(i)}`}a(NW,"identifyProductionForDuplicates");function zy(i){return i instanceof Mt?i.terminalType.name:i instanceof Ot?i.nonTerminalName:""}a(zy,"getExtraProductionArgument");var Qm=class extends $n{static{a(this,"OccurrenceValidationCollector")}constructor(){super(...arguments),this.allProductions=[]}visitNonTerminal(e){this.allProductions.push(e)}visitOption(e){this.allProductions.push(e)}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}visitAlternation(e){this.allProductions.push(e)}visitTerminal(e){this.allProductions.push(e)}};function PW(i,e,t,n){let r=[];if(dn(e,(o,l)=>l.name===i.name?o+1:o,0)>1){let o=n.buildDuplicateRuleNameError({topLevelRule:i,grammarName:t});r.push({message:o,type:Mn.DUPLICATE_RULE_NAME,ruleName:i.name})}return r}a(PW,"validateRuleDoesNotAlreadyExist");function $y(i,e,t){let n=[],r;return Zt(e,i)||(r=`Invalid rule override, rule: ->${i}<- cannot be overridden in the grammar: ->${t}<-as it is not defined in any of the super grammars `,n.push({message:r,type:Mn.INVALID_RULE_OVERRIDE,ruleName:i})),n}a($y,"validateRuleIsOverridden");function Jm(i,e,t,n=[]){let r=[],s=Rf(e.definition);if(_t(s))return[];{let o=i.name;Zt(s,i)&&r.push({message:t.buildLeftRecursionError({topLevelRule:i,leftRecursionPath:n}),type:Mn.LEFT_RECURSION,ruleName:o});let c=Vs(s,n.concat([i])),u=Jn(c,h=>{let d=At(n);return d.push(h),Jm(i,h,t,d)});return r.concat(u)}}a(Jm,"validateNoLeftRecursion");function Rf(i){let e=[];if(_t(i))return e;let t=Pn(i);if(t instanceof Ot)e.push(t.referencedRule);else if(t instanceof Vt||t instanceof Ft||t instanceof nn||t instanceof rn||t instanceof zt||t instanceof yt)e=e.concat(Rf(t.definition));else if(t instanceof $t)e=_n(We(t.definition,s=>Rf(s.definition)));else if(!(t instanceof Mt))throw Error("non exhaustive match");let n=Ro(t),r=i.length>1;if(n&&r){let s=tn(i);return e.concat(Rf(s))}else return e}a(Rf,"getFirstNoneTerminal");var qc=class extends $n{static{a(this,"OrCollector")}constructor(){super(...arguments),this.alternations=[]}visitAlternation(e){this.alternations.push(e)}};function jy(i,e){let t=new qc;i.accept(t);let n=t.alternations;return Jn(n,s=>{let o=Hr(s.definition);return Jn(o,(l,c)=>{let u=df([l],[],Dr,1);return _t(u)?[{message:e.buildEmptyAlternationError({topLevelRule:i,alternation:s,emptyChoiceIdx:c}),type:Mn.NONE_LAST_EMPTY_ALT,ruleName:i.name,occurrence:s.idx,alternative:c+1}]:[]})})}a(jy,"validateEmptyOrAlternative");function qy(i,e,t){let n=new qc;i.accept(n);let r=n.alternations;return r=Us(r,o=>o.ignoreAmbiguities===!0),Jn(r,o=>{let l=o.idx,c=o.maxLookahead||e,u=$c(l,i,c,o),h=wW(u,o,i,t),d=LW(u,o,i,t);return h.concat(d)})}a(qy,"validateAmbiguousAlternationAlternatives");var Bm=class extends $n{static{a(this,"RepetitionCollector")}constructor(){super(...arguments),this.allProductions=[]}visitRepetitionWithSeparator(e){this.allProductions.push(e)}visitRepetitionMandatory(e){this.allProductions.push(e)}visitRepetitionMandatoryWithSeparator(e){this.allProductions.push(e)}visitRepetition(e){this.allProductions.push(e)}};function EW(i,e){let t=new qc;i.accept(t);let n=t.alternations;return Jn(n,s=>s.definition.length>255?[{message:e.buildTooManyAlternativesError({topLevelRule:i,alternation:s}),type:Mn.TOO_MANY_ALTS,ruleName:i.name,occurrence:s.idx}]:[])}a(EW,"validateTooManyAlts");function eS(i,e,t){let n=[];return He(i,r=>{let s=new Bm;r.accept(s);let o=s.allProductions;He(o,l=>{let c=pf(l),u=l.maxLookahead||e,h=l.idx,f=jc(h,r,c,u)[0];if(_t(_n(f))){let m=t.buildEmptyRepetitionError({topLevelRule:r,repetition:l});n.push({message:m,type:Mn.NO_NON_EMPTY_LOOKAHEAD,ruleName:r.name})}})}),n}a(eS,"validateSomeNonEmptyLookaheadPath");function wW(i,e,t,n){let r=[],s=dn(i,(l,c,u)=>(e.definition[u].ignoreAmbiguities===!0||He(c,h=>{let d=[u];He(i,(f,m)=>{u!==m&&mf(f,h)&&e.definition[m].ignoreAmbiguities!==!0&&d.push(m)}),d.length>1&&!mf(r,h)&&(r.push(h),l.push({alts:d,path:h}))}),l),[]);return We(s,l=>{let c=We(l.alts,h=>h+1);return{message:n.buildAlternationAmbiguityError({topLevelRule:t,alternation:e,ambiguityIndices:c,prefixPath:l.path}),type:Mn.AMBIGUOUS_ALTS,ruleName:t.name,occurrence:e.idx,alternatives:l.alts}})}a(wW,"checkAlternativesAmbiguities");function LW(i,e,t,n){let r=dn(i,(o,l,c)=>{let u=We(l,h=>({idx:c,path:h}));return o.concat(u)},[]);return lr(Jn(r,o=>{if(e.definition[o.idx].ignoreAmbiguities===!0)return[];let c=o.idx,u=o.path,h=Hn(r,f=>e.definition[f.idx].ignoreAmbiguities!==!0&&f.idx<c&&Ky(f.path,u));return We(h,f=>{let m=[f.idx+1,c+1],_=e.idx===0?"":e.idx;return{message:n.buildAlternationPrefixAmbiguityError({topLevelRule:t,alternation:e,ambiguityIndices:m,prefixPath:f.path}),type:Mn.AMBIGUOUS_PREFIX_ALTS,ruleName:t.name,occurrence:_,alternatives:m}})}))}a(LW,"checkPrefixAlternativesAmbiguities");function AW(i,e,t){let n=[],r=We(e,s=>s.name);return He(i,s=>{let o=s.name;if(Zt(r,o)){let l=t.buildNamespaceConflictError(s);n.push({message:l,type:Mn.CONFLICT_TOKENS_RULES_NAMESPACE,ruleName:o})}}),n}a(AW,"checkTerminalAndNoneTerminalsNameSpace");function tS(i){let e=cl(i,{errMsgProvider:Cy}),t={};return He(i.rules,n=>{t[n.name]=n}),Zy(t,e.errMsgProvider)}a(tS,"resolveGrammar");function nS(i){return i=cl(i,{errMsgProvider:Gi}),Jy(i.rules,i.tokenTypes,i.errMsgProvider,i.grammarName)}a(nS,"validateGrammar");var iS="MismatchedTokenException",rS="NoViableAltException",sS="EarlyExitException",oS="NotAllInputParsedException",aS=[iS,rS,sS,oS];Object.freeze(aS);function Fs(i){return Zt(aS,i.name)}a(Fs,"isRecognitionException");var Ml=class extends Error{static{a(this,"RecognitionException")}constructor(e,t){super(e),this.token=t,this.resyncedTokens=[],Object.setPrototypeOf(this,new.target.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},yo=class extends Ml{static{a(this,"MismatchedTokenException")}constructor(e,t,n){super(e,t),this.previousToken=n,this.name=iS}},eu=class extends Ml{static{a(this,"NoViableAltException")}constructor(e,t,n){super(e,t),this.previousToken=n,this.name=rS}},tu=class extends Ml{static{a(this,"NotAllInputParsedException")}constructor(e,t){super(e,t),this.name=oS}},nu=class extends Ml{static{a(this,"EarlyExitException")}constructor(e,t,n){super(e,t),this.previousToken=n,this.name=sS}};var zm={},jm="InRuleRecoveryException",$m=class extends Error{static{a(this,"InRuleRecoveryException")}constructor(e){super(e),this.name=jm}},gf=class{static{a(this,"Recoverable")}initRecoverable(e){this.firstAfterRepMap={},this.resyncFollows={},this.recoveryEnabled=Ke(e,"recoveryEnabled")?e.recoveryEnabled:jn.recoveryEnabled,this.recoveryEnabled&&(this.attemptInRepetitionRecovery=OW)}getTokenToInsert(e){let t=xo(e,"",NaN,NaN,NaN,NaN,NaN,NaN);return t.isInsertedInRecovery=!0,t}canTokenTypeBeInsertedInRecovery(e){return!0}canTokenTypeBeDeletedInRecovery(e){return!0}tryInRepetitionRecovery(e,t,n,r){let s=this.findReSyncTokenType(),o=this.exportLexerState(),l=[],c=!1,u=this.LA(1),h=this.LA(1),d=a(()=>{let f=this.LA(0),m=this.errorMessageProvider.buildMismatchTokenMessage({expected:r,actual:u,previous:f,ruleName:this.getCurrRuleFullName()}),_=new yo(m,u,this.LA(0));_.resyncedTokens=Hr(l),this.SAVE_ERROR(_)},"generateErrorMessage");for(;!c;)if(this.tokenMatcher(h,r)){d();return}else if(n.call(this)){d(),e.apply(this,t);return}else this.tokenMatcher(h,s)?c=!0:(h=this.SKIP_TOKEN(),this.addToResyncTokens(h,l));this.importLexerState(o)}shouldInRepetitionRecoveryBeTried(e,t,n){return!(n===!1||this.tokenMatcher(this.LA(1),e)||this.isBackTracking()||this.canPerformInRuleRecovery(e,this.getFollowsForInRuleRecovery(e,t)))}getFollowsForInRuleRecovery(e,t){let n=this.getCurrentGrammarPath(e,t);return this.getNextPossibleTokenTypes(n)}tryInRuleRecovery(e,t){if(this.canRecoverWithSingleTokenInsertion(e,t))return this.getTokenToInsert(e);if(this.canRecoverWithSingleTokenDeletion(e)){let n=this.SKIP_TOKEN();return this.consumeToken(),n}throw new $m("sad sad panda")}canPerformInRuleRecovery(e,t){return this.canRecoverWithSingleTokenInsertion(e,t)||this.canRecoverWithSingleTokenDeletion(e)}canRecoverWithSingleTokenInsertion(e,t){if(!this.canTokenTypeBeInsertedInRecovery(e)||_t(t))return!1;let n=this.LA(1);return ur(t,s=>this.tokenMatcher(n,s))!==void 0}canRecoverWithSingleTokenDeletion(e){return this.canTokenTypeBeDeletedInRecovery(e)?this.tokenMatcher(this.LA(2),e):!1}isInCurrentRuleReSyncSet(e){let t=this.getCurrFollowKey(),n=this.getFollowSetFromFollowKey(t);return Zt(n,e)}findReSyncTokenType(){let e=this.flattenFollowSet(),t=this.LA(1),n=2;for(;;){let r=ur(e,s=>Hm(t,s));if(r!==void 0)return r;t=this.LA(n),n++}}getCurrFollowKey(){if(this.RULE_STACK.length===1)return zm;let e=this.getLastExplicitRuleShortName(),t=this.getLastExplicitRuleOccurrenceIndex(),n=this.getPreviousExplicitRuleShortName();return{ruleName:this.shortRuleNameToFullName(e),idxInCallingRule:t,inRule:this.shortRuleNameToFullName(n)}}buildFullFollowKeyStack(){let e=this.RULE_STACK,t=this.RULE_OCCURRENCE_STACK;return We(e,(n,r)=>r===0?zm:{ruleName:this.shortRuleNameToFullName(n),idxInCallingRule:t[r],inRule:this.shortRuleNameToFullName(e[r-1])})}flattenFollowSet(){let e=We(this.buildFullFollowKeyStack(),t=>this.getFollowSetFromFollowKey(t));return _n(e)}getFollowSetFromFollowKey(e){if(e===zm)return[Hi];let t=e.ruleName+e.idxInCallingRule+jd+e.inRule;return this.resyncFollows[t]}addToResyncTokens(e,t){return this.tokenMatcher(e,Hi)||t.push(e),t}reSyncTo(e){let t=[],n=this.LA(1);for(;this.tokenMatcher(n,e)===!1;)n=this.SKIP_TOKEN(),this.addToResyncTokens(n,t);return Hr(t)}attemptInRepetitionRecovery(e,t,n,r,s,o,l){}getCurrentGrammarPath(e,t){let n=this.getHumanReadableRuleStack(),r=At(this.RULE_OCCURRENCE_STACK);return{ruleStack:n,occurrenceStack:r,lastTok:e,lastTokOccurrence:t}}getHumanReadableRuleStack(){return We(this.RULE_STACK,e=>this.shortRuleNameToFullName(e))}};function OW(i,e,t,n,r,s,o){let l=this.getKeyForAutomaticLookahead(n,r),c=this.firstAfterRepMap[l];if(c===void 0){let f=this.getCurrRuleFullName(),m=this.getGAstProductions()[f];c=new s(m,r).startWalking(),this.firstAfterRepMap[l]=c}let u=c.token,h=c.occurrence,d=c.isEndOfRule;this.RULE_STACK.length===1&&d&&u===void 0&&(u=Hi,h=1),!(u===void 0||h===void 0)&&this.shouldInRepetitionRecoveryBeTried(u,h,o)&&this.tryInRepetitionRecovery(i,e,t,u)}a(OW,"attemptInRepetitionRecovery");function _f(i,e,t){return t|e|i}a(_f,"getKeyForAutomaticLookahead");var Yhe=32-8;var iu=class{static{a(this,"LLkLookaheadStrategy")}constructor(e){var t;this.maxLookahead=(t=e?.maxLookahead)!==null&&t!==void 0?t:jn.maxLookahead}validate(e){let t=this.validateNoLeftRecursion(e.rules);if(_t(t)){let n=this.validateEmptyOrAlternatives(e.rules),r=this.validateAmbiguousAlternationAlternatives(e.rules,this.maxLookahead),s=this.validateSomeNonEmptyLookaheadPath(e.rules,this.maxLookahead);return[...t,...n,...r,...s]}return t}validateNoLeftRecursion(e){return Jn(e,t=>Jm(t,t,Gi))}validateEmptyOrAlternatives(e){return Jn(e,t=>jy(t,Gi))}validateAmbiguousAlternationAlternatives(e,t){return Jn(e,n=>qy(n,t,Gi))}validateSomeNonEmptyLookaheadPath(e,t){return eS(e,t,Gi)}buildLookaheadForAlternation(e){return Xy(e.prodOccurrence,e.rule,e.maxLookahead,e.hasPredicates,e.dynamicTokensEnabled,Gy)}buildLookaheadForOptional(e){return Hy(e.prodOccurrence,e.rule,e.maxLookahead,e.dynamicTokensEnabled,pf(e.prodType),Dy)}};var Mf=class{static{a(this,"LooksAhead")}initLooksAhead(e){this.dynamicTokensEnabled=Ke(e,"dynamicTokensEnabled")?e.dynamicTokensEnabled:jn.dynamicTokensEnabled,this.maxLookahead=Ke(e,"maxLookahead")?e.maxLookahead:jn.maxLookahead,this.lookaheadStrategy=Ke(e,"lookaheadStrategy")?e.lookaheadStrategy:new iu({maxLookahead:this.maxLookahead}),this.lookAheadFuncsCache=new Map}preComputeLookaheadFunctions(e){He(e,t=>{this.TRACE_INIT(`${t.name} Rule Lookahead`,()=>{let{alternation:n,repetition:r,option:s,repetitionMandatory:o,repetitionMandatoryWithSeparator:l,repetitionWithSeparator:c}=VW(t);He(n,u=>{let h=u.idx===0?"":u.idx;this.TRACE_INIT(`${ai(u)}${h}`,()=>{let d=this.lookaheadStrategy.buildLookaheadForAlternation({prodOccurrence:u.idx,rule:t,maxLookahead:u.maxLookahead||this.maxLookahead,hasPredicates:u.hasPredicates,dynamicTokensEnabled:this.dynamicTokensEnabled}),f=_f(this.fullRuleNameToShort[t.name],256,u.idx);this.setLaFuncCache(f,d)})}),He(r,u=>{this.computeLookaheadFunc(t,u.idx,768,"Repetition",u.maxLookahead,ai(u))}),He(s,u=>{this.computeLookaheadFunc(t,u.idx,512,"Option",u.maxLookahead,ai(u))}),He(o,u=>{this.computeLookaheadFunc(t,u.idx,1024,"RepetitionMandatory",u.maxLookahead,ai(u))}),He(l,u=>{this.computeLookaheadFunc(t,u.idx,1536,"RepetitionMandatoryWithSeparator",u.maxLookahead,ai(u))}),He(c,u=>{this.computeLookaheadFunc(t,u.idx,1280,"RepetitionWithSeparator",u.maxLookahead,ai(u))})})})}computeLookaheadFunc(e,t,n,r,s,o){this.TRACE_INIT(`${o}${t===0?"":t}`,()=>{let l=this.lookaheadStrategy.buildLookaheadForOptional({prodOccurrence:t,rule:e,maxLookahead:s||this.maxLookahead,dynamicTokensEnabled:this.dynamicTokensEnabled,prodType:r}),c=_f(this.fullRuleNameToShort[e.name],n,t);this.setLaFuncCache(c,l)})}getKeyForAutomaticLookahead(e,t){let n=this.getLastExplicitRuleShortName();return _f(n,e,t)}getLaFuncFromCache(e){return this.lookAheadFuncsCache.get(e)}setLaFuncCache(e,t){this.lookAheadFuncsCache.set(e,t)}},qm=class extends $n{static{a(this,"DslMethodsCollectorVisitor")}constructor(){super(...arguments),this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}reset(){this.dslMethods={option:[],alternation:[],repetition:[],repetitionWithSeparator:[],repetitionMandatory:[],repetitionMandatoryWithSeparator:[]}}visitOption(e){this.dslMethods.option.push(e)}visitRepetitionWithSeparator(e){this.dslMethods.repetitionWithSeparator.push(e)}visitRepetitionMandatory(e){this.dslMethods.repetitionMandatory.push(e)}visitRepetitionMandatoryWithSeparator(e){this.dslMethods.repetitionMandatoryWithSeparator.push(e)}visitRepetition(e){this.dslMethods.repetition.push(e)}visitAlternation(e){this.dslMethods.alternation.push(e)}},bf=new qm;function VW(i){bf.reset(),i.accept(bf);let e=bf.dslMethods;return bf.reset(),e}a(VW,"collectMethods");function nR(i,e){isNaN(i.startOffset)===!0?(i.startOffset=e.startOffset,i.endOffset=e.endOffset):i.endOffset<e.endOffset&&(i.endOffset=e.endOffset)}a(nR,"setNodeLocationOnlyOffset");function iR(i,e){isNaN(i.startOffset)===!0?(i.startOffset=e.startOffset,i.startColumn=e.startColumn,i.startLine=e.startLine,i.endOffset=e.endOffset,i.endColumn=e.endColumn,i.endLine=e.endLine):i.endOffset<e.endOffset&&(i.endOffset=e.endOffset,i.endColumn=e.endColumn,i.endLine=e.endLine)}a(iR,"setNodeLocationFull");function lS(i,e,t){i.children[t]===void 0?i.children[t]=[e]:i.children[t].push(e)}a(lS,"addTerminalToCst");function cS(i,e,t){i.children[e]===void 0?i.children[e]=[t]:i.children[e].push(t)}a(cS,"addNoneTerminalToCst");var UW="name";function rR(i,e){Object.defineProperty(i,UW,{enumerable:!1,configurable:!0,writable:!1,value:e})}a(rR,"defineNameProp");function IW(i,e){let t=wt(i),n=t.length;for(let r=0;r<n;r++){let s=t[r],o=i[s],l=o.length;for(let c=0;c<l;c++){let u=o[c];u.tokenTypeIdx===void 0&&this[u.name](u.children,e)}}}a(IW,"defaultVisit");function uS(i,e){let t=a(function(){},"derivedConstructor");rR(t,i+"BaseSemantics");let n={visit:function(r,s){if($e(r)&&(r=r[0]),!Gn(r))return this[r.name](r.children,s)},validateVisitor:function(){let r=FW(this,e);if(!_t(r)){let s=We(r,o=>o.msg);throw Error(`Errors Detected in CST Visitor <${this.constructor.name}>:
	${s.join(`

`).replace(/\n/g,`
	`)}`)}}};return t.prototype=n,t.prototype.constructor=t,t._RULE_NAMES=e,t}a(uS,"createBaseSemanticVisitorConstructor");function hS(i,e,t){let n=a(function(){},"derivedConstructor");rR(n,i+"BaseSemanticsWithDefaults");let r=Object.create(t.prototype);return He(e,s=>{r[s]=IW}),n.prototype=r,n.prototype.constructor=n,n}a(hS,"createBaseVisitorConstructorWithDefaults");var sR;(function(i){i[i.REDUNDANT_METHOD=0]="REDUNDANT_METHOD",i[i.MISSING_METHOD=1]="MISSING_METHOD"})(sR||(sR={}));function FW(i,e){return WW(i,e)}a(FW,"validateVisitor");function WW(i,e){let t=Hn(e,r=>Bn(i[r])===!1),n=We(t,r=>({msg:`Missing visitor method: <${r}> on ${i.constructor.name} CST Visitor.`,type:sR.MISSING_METHOD,methodName:r}));return lr(n)}a(WW,"validateMissingCstMethods");var Tf=class{static{a(this,"TreeBuilder")}initTreeBuilder(e){if(this.CST_STACK=[],this.outputCst=e.outputCst,this.nodeLocationTracking=Ke(e,"nodeLocationTracking")?e.nodeLocationTracking:jn.nodeLocationTracking,!this.outputCst)this.cstInvocationStateUpdate=Kt,this.cstFinallyStateUpdate=Kt,this.cstPostTerminal=Kt,this.cstPostNonTerminal=Kt,this.cstPostRule=Kt;else if(/full/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=iR,this.setNodeLocationFromNode=iR,this.cstPostRule=Kt,this.setInitialNodeLocation=this.setInitialNodeLocationFullRecovery):(this.setNodeLocationFromToken=Kt,this.setNodeLocationFromNode=Kt,this.cstPostRule=this.cstPostRuleFull,this.setInitialNodeLocation=this.setInitialNodeLocationFullRegular);else if(/onlyOffset/i.test(this.nodeLocationTracking))this.recoveryEnabled?(this.setNodeLocationFromToken=nR,this.setNodeLocationFromNode=nR,this.cstPostRule=Kt,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRecovery):(this.setNodeLocationFromToken=Kt,this.setNodeLocationFromNode=Kt,this.cstPostRule=this.cstPostRuleOnlyOffset,this.setInitialNodeLocation=this.setInitialNodeLocationOnlyOffsetRegular);else if(/none/i.test(this.nodeLocationTracking))this.setNodeLocationFromToken=Kt,this.setNodeLocationFromNode=Kt,this.cstPostRule=Kt,this.setInitialNodeLocation=Kt;else throw Error(`Invalid <nodeLocationTracking> config option: "${e.nodeLocationTracking}"`)}setInitialNodeLocationOnlyOffsetRecovery(e){e.location={startOffset:NaN,endOffset:NaN}}setInitialNodeLocationOnlyOffsetRegular(e){e.location={startOffset:this.LA(1).startOffset,endOffset:NaN}}setInitialNodeLocationFullRecovery(e){e.location={startOffset:NaN,startLine:NaN,startColumn:NaN,endOffset:NaN,endLine:NaN,endColumn:NaN}}setInitialNodeLocationFullRegular(e){let t=this.LA(1);e.location={startOffset:t.startOffset,startLine:t.startLine,startColumn:t.startColumn,endOffset:NaN,endLine:NaN,endColumn:NaN}}cstInvocationStateUpdate(e){let t={name:e,children:Object.create(null)};this.setInitialNodeLocation(t),this.CST_STACK.push(t)}cstFinallyStateUpdate(){this.CST_STACK.pop()}cstPostRuleFull(e){let t=this.LA(0),n=e.location;n.startOffset<=t.startOffset?(n.endOffset=t.endOffset,n.endLine=t.endLine,n.endColumn=t.endColumn):(n.startOffset=NaN,n.startLine=NaN,n.startColumn=NaN)}cstPostRuleOnlyOffset(e){let t=this.LA(0),n=e.location;n.startOffset<=t.startOffset?n.endOffset=t.endOffset:n.startOffset=NaN}cstPostTerminal(e,t){let n=this.CST_STACK[this.CST_STACK.length-1];lS(n,t,e),this.setNodeLocationFromToken(n.location,t)}cstPostNonTerminal(e,t){let n=this.CST_STACK[this.CST_STACK.length-1];cS(n,t,e),this.setNodeLocationFromNode(n.location,e.location)}getBaseCstVisitorConstructor(){if(Gn(this.baseCstVisitorConstructor)){let e=uS(this.className,wt(this.gastProductionsCache));return this.baseCstVisitorConstructor=e,e}return this.baseCstVisitorConstructor}getBaseCstVisitorConstructorWithDefaults(){if(Gn(this.baseCstVisitorWithDefaultsConstructor)){let e=hS(this.className,wt(this.gastProductionsCache),this.getBaseCstVisitorConstructor());return this.baseCstVisitorWithDefaultsConstructor=e,e}return this.baseCstVisitorWithDefaultsConstructor}getLastExplicitRuleShortName(){let e=this.RULE_STACK;return e[e.length-1]}getPreviousExplicitRuleShortName(){let e=this.RULE_STACK;return e[e.length-2]}getLastExplicitRuleOccurrenceIndex(){let e=this.RULE_OCCURRENCE_STACK;return e[e.length-1]}};var vf=class{static{a(this,"LexerAdapter")}initLexerAdapter(){this.tokVector=[],this.tokVectorLength=0,this.currIdx=-1}set input(e){if(this.selfAnalysisDone!==!0)throw Error("Missing <performSelfAnalysis> invocation at the end of the Parser's constructor.");this.reset(),this.tokVector=e,this.tokVectorLength=e.length}get input(){return this.tokVector}SKIP_TOKEN(){return this.currIdx<=this.tokVector.length-2?(this.consumeToken(),this.LA(1)):xl}LA(e){let t=this.currIdx+e;return t<0||this.tokVectorLength<=t?xl:this.tokVector[t]}consumeToken(){this.currIdx++}exportLexerState(){return this.currIdx}importLexerState(e){this.currIdx=e}resetLexerState(){this.currIdx=-1}moveToTerminatedState(){this.currIdx=this.tokVector.length-1}getLexerPosition(){return this.exportLexerState()}};var Nf=class{static{a(this,"RecognizerApi")}ACTION(e){return e.call(this)}consume(e,t,n){return this.consumeInternal(t,e,n)}subrule(e,t,n){return this.subruleInternal(t,e,n)}option(e,t){return this.optionInternal(t,e)}or(e,t){return this.orInternal(t,e)}many(e,t){return this.manyInternal(e,t)}atLeastOne(e,t){return this.atLeastOneInternal(e,t)}CONSUME(e,t){return this.consumeInternal(e,0,t)}CONSUME1(e,t){return this.consumeInternal(e,1,t)}CONSUME2(e,t){return this.consumeInternal(e,2,t)}CONSUME3(e,t){return this.consumeInternal(e,3,t)}CONSUME4(e,t){return this.consumeInternal(e,4,t)}CONSUME5(e,t){return this.consumeInternal(e,5,t)}CONSUME6(e,t){return this.consumeInternal(e,6,t)}CONSUME7(e,t){return this.consumeInternal(e,7,t)}CONSUME8(e,t){return this.consumeInternal(e,8,t)}CONSUME9(e,t){return this.consumeInternal(e,9,t)}SUBRULE(e,t){return this.subruleInternal(e,0,t)}SUBRULE1(e,t){return this.subruleInternal(e,1,t)}SUBRULE2(e,t){return this.subruleInternal(e,2,t)}SUBRULE3(e,t){return this.subruleInternal(e,3,t)}SUBRULE4(e,t){return this.subruleInternal(e,4,t)}SUBRULE5(e,t){return this.subruleInternal(e,5,t)}SUBRULE6(e,t){return this.subruleInternal(e,6,t)}SUBRULE7(e,t){return this.subruleInternal(e,7,t)}SUBRULE8(e,t){return this.subruleInternal(e,8,t)}SUBRULE9(e,t){return this.subruleInternal(e,9,t)}OPTION(e){return this.optionInternal(e,0)}OPTION1(e){return this.optionInternal(e,1)}OPTION2(e){return this.optionInternal(e,2)}OPTION3(e){return this.optionInternal(e,3)}OPTION4(e){return this.optionInternal(e,4)}OPTION5(e){return this.optionInternal(e,5)}OPTION6(e){return this.optionInternal(e,6)}OPTION7(e){return this.optionInternal(e,7)}OPTION8(e){return this.optionInternal(e,8)}OPTION9(e){return this.optionInternal(e,9)}OR(e){return this.orInternal(e,0)}OR1(e){return this.orInternal(e,1)}OR2(e){return this.orInternal(e,2)}OR3(e){return this.orInternal(e,3)}OR4(e){return this.orInternal(e,4)}OR5(e){return this.orInternal(e,5)}OR6(e){return this.orInternal(e,6)}OR7(e){return this.orInternal(e,7)}OR8(e){return this.orInternal(e,8)}OR9(e){return this.orInternal(e,9)}MANY(e){this.manyInternal(0,e)}MANY1(e){this.manyInternal(1,e)}MANY2(e){this.manyInternal(2,e)}MANY3(e){this.manyInternal(3,e)}MANY4(e){this.manyInternal(4,e)}MANY5(e){this.manyInternal(5,e)}MANY6(e){this.manyInternal(6,e)}MANY7(e){this.manyInternal(7,e)}MANY8(e){this.manyInternal(8,e)}MANY9(e){this.manyInternal(9,e)}MANY_SEP(e){this.manySepFirstInternal(0,e)}MANY_SEP1(e){this.manySepFirstInternal(1,e)}MANY_SEP2(e){this.manySepFirstInternal(2,e)}MANY_SEP3(e){this.manySepFirstInternal(3,e)}MANY_SEP4(e){this.manySepFirstInternal(4,e)}MANY_SEP5(e){this.manySepFirstInternal(5,e)}MANY_SEP6(e){this.manySepFirstInternal(6,e)}MANY_SEP7(e){this.manySepFirstInternal(7,e)}MANY_SEP8(e){this.manySepFirstInternal(8,e)}MANY_SEP9(e){this.manySepFirstInternal(9,e)}AT_LEAST_ONE(e){this.atLeastOneInternal(0,e)}AT_LEAST_ONE1(e){return this.atLeastOneInternal(1,e)}AT_LEAST_ONE2(e){this.atLeastOneInternal(2,e)}AT_LEAST_ONE3(e){this.atLeastOneInternal(3,e)}AT_LEAST_ONE4(e){this.atLeastOneInternal(4,e)}AT_LEAST_ONE5(e){this.atLeastOneInternal(5,e)}AT_LEAST_ONE6(e){this.atLeastOneInternal(6,e)}AT_LEAST_ONE7(e){this.atLeastOneInternal(7,e)}AT_LEAST_ONE8(e){this.atLeastOneInternal(8,e)}AT_LEAST_ONE9(e){this.atLeastOneInternal(9,e)}AT_LEAST_ONE_SEP(e){this.atLeastOneSepFirstInternal(0,e)}AT_LEAST_ONE_SEP1(e){this.atLeastOneSepFirstInternal(1,e)}AT_LEAST_ONE_SEP2(e){this.atLeastOneSepFirstInternal(2,e)}AT_LEAST_ONE_SEP3(e){this.atLeastOneSepFirstInternal(3,e)}AT_LEAST_ONE_SEP4(e){this.atLeastOneSepFirstInternal(4,e)}AT_LEAST_ONE_SEP5(e){this.atLeastOneSepFirstInternal(5,e)}AT_LEAST_ONE_SEP6(e){this.atLeastOneSepFirstInternal(6,e)}AT_LEAST_ONE_SEP7(e){this.atLeastOneSepFirstInternal(7,e)}AT_LEAST_ONE_SEP8(e){this.atLeastOneSepFirstInternal(8,e)}AT_LEAST_ONE_SEP9(e){this.atLeastOneSepFirstInternal(9,e)}RULE(e,t,n=yl){if(Zt(this.definedRulesNames,e)){let o={message:Gi.buildDuplicateRuleNameError({topLevelRule:e,grammarName:this.className}),type:Mn.DUPLICATE_RULE_NAME,ruleName:e};this.definitionErrors.push(o)}this.definedRulesNames.push(e);let r=this.defineRule(e,t,n);return this[e]=r,r}OVERRIDE_RULE(e,t,n=yl){let r=$y(e,this.definedRulesNames,this.className);this.definitionErrors=this.definitionErrors.concat(r);let s=this.defineRule(e,t,n);return this[e]=s,s}BACKTRACK(e,t){return function(){this.isBackTrackingStack.push(1);let n=this.saveRecogState();try{return e.apply(this,t),!0}catch(r){if(Fs(r))return!1;throw r}finally{this.reloadRecogState(n),this.isBackTrackingStack.pop()}}}getGAstProductions(){return this.gastProductionsCache}getSerializedGastProductions(){return $d(Nt(this.gastProductionsCache))}};var Pf=class{static{a(this,"RecognizerEngine")}initRecognizerEngine(e,t){if(this.className=this.constructor.name,this.shortRuleNameToFull={},this.fullRuleNameToShort={},this.ruleShortNameIdx=256,this.tokenMatcher=gl,this.subruleIdx=0,this.definedRulesNames=[],this.tokensMap={},this.isBackTrackingStack=[],this.RULE_STACK=[],this.RULE_OCCURRENCE_STACK=[],this.gastProductionsCache={},Ke(t,"serializedGrammar"))throw Error(`The Parser's configuration can no longer contain a <serializedGrammar> property.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_6-0-0
	For Further details.`);if($e(e)){if(_t(e))throw Error(`A Token Vocabulary cannot be empty.
	Note that the first argument for the parser constructor
	is no longer a Token vector (since v4.0).`);if(typeof e[0].startOffset=="number")throw Error(`The Parser constructor no longer accepts a token vector as the first argument.
	See: https://chevrotain.io/docs/changes/BREAKING_CHANGES.html#_4-0-0
	For Further details.`)}if($e(e))this.tokensMap=dn(e,(s,o)=>(s[o.name]=o,s),{});else if(Ke(e,"modes")&&Xn(_n(Nt(e.modes)),wy)){let s=_n(Nt(e.modes)),o=ul(s);this.tokensMap=dn(o,(l,c)=>(l[c.name]=c,l),{})}else if(Yt(e))this.tokensMap=At(e);else throw new Error("<tokensDictionary> argument must be An Array of Token constructors, A dictionary of Token constructors or an IMultiModeLexerDefinition");this.tokensMap.EOF=Hi;let n=Ke(e,"modes")?_n(Nt(e.modes)):Nt(e),r=Xn(n,s=>_t(s.categoryMatches));this.tokenMatcher=r?gl:Dr,Yr(Nt(this.tokensMap))}defineRule(e,t,n){if(this.selfAnalysisDone)throw Error(`Grammar rule <${e}> may not be defined after the 'performSelfAnalysis' method has been called'
Make sure that all grammar rule definitions are done before 'performSelfAnalysis' is called.`);let r=Ke(n,"resyncEnabled")?n.resyncEnabled:yl.resyncEnabled,s=Ke(n,"recoveryValueFunc")?n.recoveryValueFunc:yl.recoveryValueFunc,o=this.ruleShortNameIdx<<4+8;this.ruleShortNameIdx++,this.shortRuleNameToFull[o]=e,this.fullRuleNameToShort[e]=o;let l;return this.outputCst===!0?l=a(function(...h){try{this.ruleInvocationStateUpdate(o,e,this.subruleIdx),t.apply(this,h);let d=this.CST_STACK[this.CST_STACK.length-1];return this.cstPostRule(d),d}catch(d){return this.invokeRuleCatch(d,r,s)}finally{this.ruleFinallyStateUpdate()}},"invokeRuleWithTry"):l=a(function(...h){try{return this.ruleInvocationStateUpdate(o,e,this.subruleIdx),t.apply(this,h)}catch(d){return this.invokeRuleCatch(d,r,s)}finally{this.ruleFinallyStateUpdate()}},"invokeRuleWithTryCst"),Object.assign(l,{ruleName:e,originalGrammarAction:t})}invokeRuleCatch(e,t,n){let r=this.RULE_STACK.length===1,s=t&&!this.isBackTracking()&&this.recoveryEnabled;if(Fs(e)){let o=e;if(s){let l=this.findReSyncTokenType();if(this.isInCurrentRuleReSyncSet(l))if(o.resyncedTokens=this.reSyncTo(l),this.outputCst){let c=this.CST_STACK[this.CST_STACK.length-1];return c.recoveredNode=!0,c}else return n(e);else{if(this.outputCst){let c=this.CST_STACK[this.CST_STACK.length-1];c.recoveredNode=!0,o.partialCstResult=c}throw o}}else{if(r)return this.moveToTerminatedState(),n(e);throw o}}else throw e}optionInternal(e,t){let n=this.getKeyForAutomaticLookahead(512,t);return this.optionInternalLogic(e,t,n)}optionInternalLogic(e,t,n){let r=this.getLaFuncFromCache(n),s;if(typeof e!="function"){s=e.DEF;let o=e.GATE;if(o!==void 0){let l=r;r=a(()=>o.call(this)&&l.call(this),"lookAheadFunc")}}else s=e;if(r.call(this)===!0)return s.call(this)}atLeastOneInternal(e,t){let n=this.getKeyForAutomaticLookahead(1024,e);return this.atLeastOneInternalLogic(e,t,n)}atLeastOneInternalLogic(e,t,n){let r=this.getLaFuncFromCache(n),s;if(typeof t!="function"){s=t.DEF;let o=t.GATE;if(o!==void 0){let l=r;r=a(()=>o.call(this)&&l.call(this),"lookAheadFunc")}}else s=t;if(r.call(this)===!0){let o=this.doSingleRepetition(s);for(;r.call(this)===!0&&o===!0;)o=this.doSingleRepetition(s)}else throw this.raiseEarlyExitException(e,Qt.REPETITION_MANDATORY,t.ERR_MSG);this.attemptInRepetitionRecovery(this.atLeastOneInternal,[e,t],r,1024,e,uf)}atLeastOneSepFirstInternal(e,t){let n=this.getKeyForAutomaticLookahead(1536,e);this.atLeastOneSepFirstInternalLogic(e,t,n)}atLeastOneSepFirstInternalLogic(e,t,n){let r=t.DEF,s=t.SEP;if(this.getLaFuncFromCache(n).call(this)===!0){r.call(this);let l=a(()=>this.tokenMatcher(this.LA(1),s),"separatorLookAheadFunc");for(;this.tokenMatcher(this.LA(1),s)===!0;)this.CONSUME(s),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,s,l,r,zc],l,1536,e,zc)}else throw this.raiseEarlyExitException(e,Qt.REPETITION_MANDATORY_WITH_SEPARATOR,t.ERR_MSG)}manyInternal(e,t){let n=this.getKeyForAutomaticLookahead(768,e);return this.manyInternalLogic(e,t,n)}manyInternalLogic(e,t,n){let r=this.getLaFuncFromCache(n),s;if(typeof t!="function"){s=t.DEF;let l=t.GATE;if(l!==void 0){let c=r;r=a(()=>l.call(this)&&c.call(this),"lookaheadFunction")}}else s=t;let o=!0;for(;r.call(this)===!0&&o===!0;)o=this.doSingleRepetition(s);this.attemptInRepetitionRecovery(this.manyInternal,[e,t],r,768,e,cf,o)}manySepFirstInternal(e,t){let n=this.getKeyForAutomaticLookahead(1280,e);this.manySepFirstInternalLogic(e,t,n)}manySepFirstInternalLogic(e,t,n){let r=t.DEF,s=t.SEP;if(this.getLaFuncFromCache(n).call(this)===!0){r.call(this);let l=a(()=>this.tokenMatcher(this.LA(1),s),"separatorLookAheadFunc");for(;this.tokenMatcher(this.LA(1),s)===!0;)this.CONSUME(s),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,s,l,r,Jc],l,1280,e,Jc)}}repetitionSepSecondInternal(e,t,n,r,s){for(;n();)this.CONSUME(t),r.call(this);this.attemptInRepetitionRecovery(this.repetitionSepSecondInternal,[e,t,n,r,s],n,1536,e,s)}doSingleRepetition(e){let t=this.getLexerPosition();return e.call(this),this.getLexerPosition()>t}orInternal(e,t){let n=this.getKeyForAutomaticLookahead(256,t),r=$e(e)?e:e.DEF,o=this.getLaFuncFromCache(n).call(this,r);if(o!==void 0)return r[o].ALT.call(this);this.raiseNoAltException(t,e.ERR_MSG)}ruleFinallyStateUpdate(){if(this.RULE_STACK.pop(),this.RULE_OCCURRENCE_STACK.pop(),this.cstFinallyStateUpdate(),this.RULE_STACK.length===0&&this.isAtEndOfInput()===!1){let e=this.LA(1),t=this.errorMessageProvider.buildNotAllInputParsedMessage({firstRedundant:e,ruleName:this.getCurrRuleFullName()});this.SAVE_ERROR(new tu(t,e))}}subruleInternal(e,t,n){let r;try{let s=n!==void 0?n.ARGS:void 0;return this.subruleIdx=t,r=e.apply(this,s),this.cstPostNonTerminal(r,n!==void 0&&n.LABEL!==void 0?n.LABEL:e.ruleName),r}catch(s){throw this.subruleInternalError(s,n,e.ruleName)}}subruleInternalError(e,t,n){throw Fs(e)&&e.partialCstResult!==void 0&&(this.cstPostNonTerminal(e.partialCstResult,t!==void 0&&t.LABEL!==void 0?t.LABEL:n),delete e.partialCstResult),e}consumeInternal(e,t,n){let r;try{let s=this.LA(1);this.tokenMatcher(s,e)===!0?(this.consumeToken(),r=s):this.consumeInternalError(e,s,n)}catch(s){r=this.consumeInternalRecovery(e,t,s)}return this.cstPostTerminal(n!==void 0&&n.LABEL!==void 0?n.LABEL:e.name,r),r}consumeInternalError(e,t,n){let r,s=this.LA(0);throw n!==void 0&&n.ERR_MSG?r=n.ERR_MSG:r=this.errorMessageProvider.buildMismatchTokenMessage({expected:e,actual:t,previous:s,ruleName:this.getCurrRuleFullName()}),this.SAVE_ERROR(new yo(r,t,s))}consumeInternalRecovery(e,t,n){if(this.recoveryEnabled&&n.name==="MismatchedTokenException"&&!this.isBackTracking()){let r=this.getFollowsForInRuleRecovery(e,t);try{return this.tryInRuleRecovery(e,r)}catch(s){throw s.name===jm?n:s}}else throw n}saveRecogState(){let e=this.errors,t=At(this.RULE_STACK);return{errors:e,lexerState:this.exportLexerState(),RULE_STACK:t,CST_STACK:this.CST_STACK}}reloadRecogState(e){this.errors=e.errors,this.importLexerState(e.lexerState),this.RULE_STACK=e.RULE_STACK}ruleInvocationStateUpdate(e,t,n){this.RULE_OCCURRENCE_STACK.push(n),this.RULE_STACK.push(e),this.cstInvocationStateUpdate(t)}isBackTracking(){return this.isBackTrackingStack.length!==0}getCurrRuleFullName(){let e=this.getLastExplicitRuleShortName();return this.shortRuleNameToFull[e]}shortRuleNameToFullName(e){return this.shortRuleNameToFull[e]}isAtEndOfInput(){return this.tokenMatcher(this.LA(1),Hi)}reset(){this.resetLexerState(),this.subruleIdx=0,this.isBackTrackingStack=[],this.errors=[],this.RULE_STACK=[],this.CST_STACK=[],this.RULE_OCCURRENCE_STACK=[]}};var Ef=class{static{a(this,"ErrorHandler")}initErrorHandler(e){this._errors=[],this.errorMessageProvider=Ke(e,"errorMessageProvider")?e.errorMessageProvider:jn.errorMessageProvider}SAVE_ERROR(e){if(Fs(e))return e.context={ruleStack:this.getHumanReadableRuleStack(),ruleOccurrenceStack:At(this.RULE_OCCURRENCE_STACK)},this._errors.push(e),e;throw Error("Trying to save an Error which is not a RecognitionException")}get errors(){return At(this._errors)}set errors(e){this._errors=e}raiseEarlyExitException(e,t,n){let r=this.getCurrRuleFullName(),s=this.getGAstProductions()[r],l=jc(e,s,t,this.maxLookahead)[0],c=[];for(let h=1;h<=this.maxLookahead;h++)c.push(this.LA(h));let u=this.errorMessageProvider.buildEarlyExitMessage({expectedIterationPaths:l,actual:c,previous:this.LA(0),customUserDescription:n,ruleName:r});throw this.SAVE_ERROR(new nu(u,this.LA(1),this.LA(0)))}raiseNoAltException(e,t){let n=this.getCurrRuleFullName(),r=this.getGAstProductions()[n],s=$c(e,r,this.maxLookahead),o=[];for(let u=1;u<=this.maxLookahead;u++)o.push(this.LA(u));let l=this.LA(0),c=this.errorMessageProvider.buildNoViableAltMessage({expectedPathsPerAlt:s,actual:o,previous:l,customUserDescription:t,ruleName:this.getCurrRuleFullName()});throw this.SAVE_ERROR(new eu(c,this.LA(1),l))}};var wf=class{static{a(this,"ContentAssist")}initContentAssist(){}computeContentAssist(e,t){let n=this.gastProductionsCache[e];if(Gn(n))throw Error(`Rule ->${e}<- does not exist in this grammar.`);return df([n],t,this.tokenMatcher,this.maxLookahead)}getNextPossibleTokenTypes(e){let t=Pn(e.ruleStack),r=this.getGAstProductions()[t];return new lf(r,e).startWalking()}};var Of={description:"This Object indicates the Parser is during Recording Phase"};Object.freeze(Of);var dS=!0,fS=Math.pow(2,8)-1,mS=_l({name:"RECORDING_PHASE_TOKEN",pattern:jt.NA});Yr([mS]);var RS=xo(mS,`This IToken indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,-1,-1,-1,-1,-1,-1);Object.freeze(RS);var ZW={name:`This CSTNode indicates the Parser is in Recording Phase
	See: https://chevrotain.io/docs/guide/internals.html#grammar-recording for details`,children:{}},Lf=class{static{a(this,"GastRecorder")}initGastRecorder(e){this.recordingProdStack=[],this.RECORDING_PHASE=!1}enableRecording(){this.RECORDING_PHASE=!0,this.TRACE_INIT("Enable Recording",()=>{for(let e=0;e<10;e++){let t=e>0?e:"";this[`CONSUME${t}`]=function(n,r){return this.consumeInternalRecord(n,e,r)},this[`SUBRULE${t}`]=function(n,r){return this.subruleInternalRecord(n,e,r)},this[`OPTION${t}`]=function(n){return this.optionInternalRecord(n,e)},this[`OR${t}`]=function(n){return this.orInternalRecord(n,e)},this[`MANY${t}`]=function(n){this.manyInternalRecord(e,n)},this[`MANY_SEP${t}`]=function(n){this.manySepFirstInternalRecord(e,n)},this[`AT_LEAST_ONE${t}`]=function(n){this.atLeastOneInternalRecord(e,n)},this[`AT_LEAST_ONE_SEP${t}`]=function(n){this.atLeastOneSepFirstInternalRecord(e,n)}}this.consume=function(e,t,n){return this.consumeInternalRecord(t,e,n)},this.subrule=function(e,t,n){return this.subruleInternalRecord(t,e,n)},this.option=function(e,t){return this.optionInternalRecord(t,e)},this.or=function(e,t){return this.orInternalRecord(t,e)},this.many=function(e,t){this.manyInternalRecord(e,t)},this.atLeastOne=function(e,t){this.atLeastOneInternalRecord(e,t)},this.ACTION=this.ACTION_RECORD,this.BACKTRACK=this.BACKTRACK_RECORD,this.LA=this.LA_RECORD})}disableRecording(){this.RECORDING_PHASE=!1,this.TRACE_INIT("Deleting Recording methods",()=>{let e=this;for(let t=0;t<10;t++){let n=t>0?t:"";delete e[`CONSUME${n}`],delete e[`SUBRULE${n}`],delete e[`OPTION${n}`],delete e[`OR${n}`],delete e[`MANY${n}`],delete e[`MANY_SEP${n}`],delete e[`AT_LEAST_ONE${n}`],delete e[`AT_LEAST_ONE_SEP${n}`]}delete e.consume,delete e.subrule,delete e.option,delete e.or,delete e.many,delete e.atLeastOne,delete e.ACTION,delete e.BACKTRACK,delete e.LA})}ACTION_RECORD(e){}BACKTRACK_RECORD(e,t){return()=>!0}LA_RECORD(e){return xl}topLevelRuleRecord(e,t){try{let n=new zn({definition:[],name:e});return n.name=e,this.recordingProdStack.push(n),t.call(this),this.recordingProdStack.pop(),n}catch(n){if(n.KNOWN_RECORDER_ERROR!==!0)try{n.message=n.message+`
	 This error was thrown during the "grammar recording phase" For more info see:
	https://chevrotain.io/docs/guide/internals.html#grammar-recording`}catch{throw n}throw n}}optionInternalRecord(e,t){return su.call(this,Ft,e,t)}atLeastOneInternalRecord(e,t){su.call(this,nn,t,e)}atLeastOneSepFirstInternalRecord(e,t){su.call(this,rn,t,e,dS)}manyInternalRecord(e,t){su.call(this,yt,t,e)}manySepFirstInternalRecord(e,t){su.call(this,zt,t,e,dS)}orInternalRecord(e,t){return kW.call(this,e,t)}subruleInternalRecord(e,t,n){if(Af(t),!e||Ke(e,"ruleName")===!1){let l=new Error(`<SUBRULE${pS(t)}> argument is invalid expecting a Parser method reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw l.KNOWN_RECORDER_ERROR=!0,l}let r=cr(this.recordingProdStack),s=e.ruleName,o=new Ot({idx:t,nonTerminalName:s,label:n?.LABEL,referencedRule:void 0});return r.definition.push(o),this.outputCst?ZW:Of}consumeInternalRecord(e,t,n){if(Af(t),!Zm(e)){let o=new Error(`<CONSUME${pS(t)}> argument is invalid expecting a TokenType reference but got: <${JSON.stringify(e)}>
 inside top level rule: <${this.recordingProdStack[0].name}>`);throw o.KNOWN_RECORDER_ERROR=!0,o}let r=cr(this.recordingProdStack),s=new Mt({idx:t,terminalType:e,label:n?.LABEL});return r.definition.push(s),RS}};function su(i,e,t,n=!1){Af(t);let r=cr(this.recordingProdStack),s=Bn(e)?e:e.DEF,o=new i({definition:[],idx:t});return n&&(o.separator=e.SEP),Ke(e,"MAX_LOOKAHEAD")&&(o.maxLookahead=e.MAX_LOOKAHEAD),this.recordingProdStack.push(o),s.call(this),r.definition.push(o),this.recordingProdStack.pop(),Of}a(su,"recordProd");function kW(i,e){Af(e);let t=cr(this.recordingProdStack),n=$e(i)===!1,r=n===!1?i:i.DEF,s=new $t({definition:[],idx:e,ignoreAmbiguities:n&&i.IGNORE_AMBIGUITIES===!0});Ke(i,"MAX_LOOKAHEAD")&&(s.maxLookahead=i.MAX_LOOKAHEAD);let o=Zc(r,l=>Bn(l.GATE));return s.hasPredicates=o,t.definition.push(s),He(r,l=>{let c=new Vt({definition:[]});s.definition.push(c),Ke(l,"IGNORE_AMBIGUITIES")?c.ignoreAmbiguities=l.IGNORE_AMBIGUITIES:Ke(l,"GATE")&&(c.ignoreAmbiguities=!0),this.recordingProdStack.push(c),l.ALT.call(this),this.recordingProdStack.pop()}),Of}a(kW,"recordOrProd");function pS(i){return i===0?"":`${i}`}a(pS,"getIdxSuffix");function Af(i){if(i<0||i>fS){let e=new Error(`Invalid DSL Method idx value: <${i}>
	Idx value must be a none negative value smaller than ${fS+1}`);throw e.KNOWN_RECORDER_ERROR=!0,e}}a(Af,"assertMethodIdxIsValid");var Vf=class{static{a(this,"PerformanceTracer")}initPerformanceTracer(e){if(Ke(e,"traceInitPerf")){let t=e.traceInitPerf,n=typeof t=="number";this.traceInitMaxIdent=n?t:1/0,this.traceInitPerf=n?t>0:t}else this.traceInitMaxIdent=0,this.traceInitPerf=jn.traceInitPerf;this.traceInitIndent=-1}TRACE_INIT(e,t){if(this.traceInitPerf===!0){this.traceInitIndent++;let n=new Array(this.traceInitIndent+1).join("	");this.traceInitIndent<this.traceInitMaxIdent&&console.log(`${n}--> <${e}>`);let{time:r,value:s}=Xc(t),o=r>10?console.warn:console.log;return this.traceInitIndent<this.traceInitMaxIdent&&o(`${n}<-- <${e}> time: ${r}ms`),this.traceInitIndent--,s}else return t()}};function gS(i,e){e.forEach(t=>{let n=t.prototype;Object.getOwnPropertyNames(n).forEach(r=>{if(r==="constructor")return;let s=Object.getOwnPropertyDescriptor(n,r);s&&(s.get||s.set)?Object.defineProperty(i.prototype,r,s):i.prototype[r]=t.prototype[r]})})}a(gS,"applyMixins");var xl=xo(Hi,"",NaN,NaN,NaN,NaN,NaN,NaN);Object.freeze(xl);var jn=Object.freeze({recoveryEnabled:!1,maxLookahead:3,dynamicTokensEnabled:!1,outputCst:!0,errorMessageProvider:af,nodeLocationTracking:"none",traceInitPerf:!1,skipValidations:!1}),yl=Object.freeze({recoveryValueFunc:()=>{},resyncEnabled:!0}),Mn;(function(i){i[i.INVALID_RULE_NAME=0]="INVALID_RULE_NAME",i[i.DUPLICATE_RULE_NAME=1]="DUPLICATE_RULE_NAME",i[i.INVALID_RULE_OVERRIDE=2]="INVALID_RULE_OVERRIDE",i[i.DUPLICATE_PRODUCTIONS=3]="DUPLICATE_PRODUCTIONS",i[i.UNRESOLVED_SUBRULE_REF=4]="UNRESOLVED_SUBRULE_REF",i[i.LEFT_RECURSION=5]="LEFT_RECURSION",i[i.NONE_LAST_EMPTY_ALT=6]="NONE_LAST_EMPTY_ALT",i[i.AMBIGUOUS_ALTS=7]="AMBIGUOUS_ALTS",i[i.CONFLICT_TOKENS_RULES_NAMESPACE=8]="CONFLICT_TOKENS_RULES_NAMESPACE",i[i.INVALID_TOKEN_NAME=9]="INVALID_TOKEN_NAME",i[i.NO_NON_EMPTY_LOOKAHEAD=10]="NO_NON_EMPTY_LOOKAHEAD",i[i.AMBIGUOUS_PREFIX_ALTS=11]="AMBIGUOUS_PREFIX_ALTS",i[i.TOO_MANY_ALTS=12]="TOO_MANY_ALTS",i[i.CUSTOM_LOOKAHEAD_VALIDATION=13]="CUSTOM_LOOKAHEAD_VALIDATION"})(Mn||(Mn={}));var ou=class i{static{a(this,"Parser")}static performSelfAnalysis(e){throw Error("The **static** `performSelfAnalysis` method has been deprecated.	\nUse the **instance** method with the same name instead.")}performSelfAnalysis(){this.TRACE_INIT("performSelfAnalysis",()=>{let e;this.selfAnalysisDone=!0;let t=this.className;this.TRACE_INIT("toFastProps",()=>{Hc(this)}),this.TRACE_INIT("Grammar Recording",()=>{try{this.enableRecording(),He(this.definedRulesNames,r=>{let o=this[r].originalGrammarAction,l;this.TRACE_INIT(`${r} Rule`,()=>{l=this.topLevelRuleRecord(r,o)}),this.gastProductionsCache[r]=l})}finally{this.disableRecording()}});let n=[];if(this.TRACE_INIT("Grammar Resolving",()=>{n=tS({rules:Nt(this.gastProductionsCache)}),this.definitionErrors=this.definitionErrors.concat(n)}),this.TRACE_INIT("Grammar Validations",()=>{if(_t(n)&&this.skipValidations===!1){let r=nS({rules:Nt(this.gastProductionsCache),tokenTypes:Nt(this.tokensMap),errMsgProvider:Gi,grammarName:t}),s=By({lookaheadStrategy:this.lookaheadStrategy,rules:Nt(this.gastProductionsCache),tokenTypes:Nt(this.tokensMap),grammarName:t});this.definitionErrors=this.definitionErrors.concat(r,s)}}),_t(this.definitionErrors)&&(this.recoveryEnabled&&this.TRACE_INIT("computeAllProdsFollows",()=>{let r=cy(Nt(this.gastProductionsCache));this.resyncFollows=r}),this.TRACE_INIT("ComputeLookaheadFunctions",()=>{var r,s;(s=(r=this.lookaheadStrategy).initialize)===null||s===void 0||s.call(r,{rules:Nt(this.gastProductionsCache)}),this.preComputeLookaheadFunctions(Nt(this.gastProductionsCache))})),!i.DEFER_DEFINITION_ERRORS_HANDLING&&!_t(this.definitionErrors))throw e=We(this.definitionErrors,r=>r.message),new Error(`Parser Definition Errors detected:
 ${e.join(`
-------------------------------
`)}`)})}constructor(e,t){this.definitionErrors=[],this.selfAnalysisDone=!1;let n=this;if(n.initErrorHandler(t),n.initLexerAdapter(),n.initLooksAhead(t),n.initRecognizerEngine(e,t),n.initRecoverable(t),n.initTreeBuilder(t),n.initContentAssist(),n.initGastRecorder(t),n.initPerformanceTracer(t),Ke(t,"ignoredIssues"))throw new Error(`The <ignoredIssues> IParserConfig property has been deprecated.
	Please use the <IGNORE_AMBIGUITIES> flag on the relevant DSL method instead.
	See: https://chevrotain.io/docs/guide/resolving_grammar_errors.html#IGNORING_AMBIGUITIES
	For further details.`);this.skipValidations=Ke(t,"skipValidations")?t.skipValidations:jn.skipValidations}};ou.DEFER_DEFINITION_ERRORS_HANDLING=!1;gS(ou,[gf,Mf,Tf,vf,Pf,Nf,Ef,wf,Lf,Vf]);var au=class extends ou{static{a(this,"CstParser")}constructor(e,t=jn){let n=At(t);n.outputCst=!0,super(e,n)}};var Uf=class extends Ni{static{a(this,"VRMLLoader")}constructor(e){super(e)}load(e,t,n,r){let s=this,o=s.path===""?md.extractUrlBase(e):s.path,l=new ud(s.manager);l.setPath(s.path),l.setRequestHeader(s.requestHeader),l.setWithCredentials(s.withCredentials),l.load(e,function(c){c=c+`  Background {
                    skyColor [ 1 1 1, 1 1 1, 1 1 1, 1 1 1, 1 1 1, 1 1 1 ]
                    skyAngle [ 1.35, 1.4, 1.45, 1.5, 1.55 ]
                    groundColor [ 1 1 1, 1 1 1, 1 1 1 ]
                    groundAngle [ 1.3, 1.57 ]
                  }
                `;try{t(s.parse(c,o))}catch(u){r?r(u):console.error(u),s.manager.itemError(e)}},n,r)}parse(e,t){let n={};function r(O){let N=s(),I=new aR(N.tokens),Z=new lR(N.tokenVocabulary),V=o(Z.getBaseCstVisitorConstructor()),G=I.lex(O);Z.input=G.tokens;let Y=Z.vrml();if(Z.errors.length>0)throw console.error(Z.errors),Error("THREE.VRMLLoader: Parsing errors detected.");return V.visit(Y)}a(r,"generateVRMLTree");function s(){let O=_l,N=O({name:"RouteIdentifier",pattern:/[^\x30-\x39\0-\x20\x22\x27\x23\x2b\x2c\x2d\x2e\x5b\x5d\x5c\x7b\x7d][^\0-\x20\x22\x27\x23\x2b\x2c\x2d\x2e\x5b\x5d\x5c\x7b\x7d]*[\.][^\x30-\x39\0-\x20\x22\x27\x23\x2b\x2c\x2d\x2e\x5b\x5d\x5c\x7b\x7d][^\0-\x20\x22\x27\x23\x2b\x2c\x2d\x2e\x5b\x5d\x5c\x7b\x7d]*/}),I=O({name:"Identifier",pattern:/[^\x30-\x39\0-\x20\x22\x27\x23\x2b\x2c\x2d\x2e\x5b\x5d\x5c\x7b\x7d]([^\0-\x20\x22\x27\x23\x2b\x2c\x2e\x5b\x5d\x5c\x7b\x7d])*/,longer_alt:N}),Z=["Anchor","Billboard","Collision","Group","Transform","Inline","LOD","Switch","AudioClip","DirectionalLight","PointLight","Script","Shape","Sound","SpotLight","WorldInfo","CylinderSensor","PlaneSensor","ProximitySensor","SphereSensor","TimeSensor","TouchSensor","VisibilitySensor","Box","Cone","Cylinder","ElevationGrid","Extrusion","IndexedFaceSet","IndexedLineSet","PointSet","Sphere","Color","Coordinate","Normal","TextureCoordinate","Appearance","FontStyle","ImageTexture","Material","MovieTexture","PixelTexture","TextureTransform","ColorInterpolator","CoordinateInterpolator","NormalInterpolator","OrientationInterpolator","PositionInterpolator","ScalarInterpolator","Background","Fog","NavigationInfo","Viewpoint","Text"],V=O({name:"Version",pattern:/#VRML.*/,longer_alt:I}),G=O({name:"NodeName",pattern:new RegExp(Z.join("|")),longer_alt:I}),Y=O({name:"DEF",pattern:/DEF/,longer_alt:I}),k=O({name:"USE",pattern:/USE/,longer_alt:I}),q=O({name:"ROUTE",pattern:/ROUTE/,longer_alt:I}),v=O({name:"TO",pattern:/TO/,longer_alt:I}),Q=O({name:"StringLiteral",pattern:/"(?:[^\\"\n\r]|\\[bfnrtv"\\/]|\\u[0-9a-fA-F][0-9a-fA-F][0-9a-fA-F][0-9a-fA-F])*"/}),H=O({name:"HexLiteral",pattern:/0[xX][0-9a-fA-F]+/}),ue=O({name:"NumberLiteral",pattern:/[-+]?[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?/}),Pe=O({name:"TrueLiteral",pattern:/TRUE/}),Ce=O({name:"FalseLiteral",pattern:/FALSE/}),Ee=O({name:"NullLiteral",pattern:/NULL/}),ve=O({name:"LSquare",pattern:/\[/}),pe=O({name:"RSquare",pattern:/]/}),X=O({name:"LCurly",pattern:/{/}),he=O({name:"RCurly",pattern:/}/}),Re=O({name:"Comment",pattern:/#.*/,group:jt.SKIPPED}),Ue=[O({name:"WhiteSpace",pattern:/[ ,\s]/,group:jt.SKIPPED}),G,Y,k,q,v,Pe,Ce,Ee,V,I,N,Q,H,ue,ve,pe,X,he,Re],rt={};for(let Xe=0,Ae=Ue.length;Xe<Ae;Xe++){let Ie=Ue[Xe];rt[Ie.name]=Ie}return{tokens:Ue,tokenVocabulary:rt}}a(s,"createTokens");function o(O){class N extends O{static{a(this,"VRMLToASTVisitor")}constructor(){super(),this.validateVisitor()}vrml(V){let G={version:this.visit(V.version),nodes:[],routes:[]};for(let Y=0,k=V.node.length;Y<k;Y++){let q=V.node[Y];G.nodes.push(this.visit(q))}if(V.route)for(let Y=0,k=V.route.length;Y<k;Y++){let q=V.route[Y];G.routes.push(this.visit(q))}return G}version(V){return V.Version[0].image}node(V){let G={name:V.NodeName[0].image,fields:[]};if(V.field)for(let Y=0,k=V.field.length;Y<k;Y++){let q=V.field[Y];G.fields.push(this.visit(q))}return V.def&&(G.DEF=this.visit(V.def[0])),G}field(V){let G={name:V.Identifier[0].image,type:null,values:null},Y;return V.singleFieldValue&&(Y=this.visit(V.singleFieldValue[0])),V.multiFieldValue&&(Y=this.visit(V.multiFieldValue[0])),G.type=Y.type,G.values=Y.values,G}def(V){return(V.Identifier||V.NodeName)[0].image}use(V){return{USE:(V.Identifier||V.NodeName)[0].image}}singleFieldValue(V){return I(this,V)}multiFieldValue(V){return I(this,V)}route(V){return{FROM:V.RouteIdentifier[0].image,TO:V.RouteIdentifier[1].image}}}function I(Z,V){let G={type:null,values:[]};if(V.node){G.type="node";for(let Y=0,k=V.node.length;Y<k;Y++){let q=V.node[Y];G.values.push(Z.visit(q))}}if(V.use){G.type="use";for(let Y=0,k=V.use.length;Y<k;Y++){let q=V.use[Y];G.values.push(Z.visit(q))}}if(V.StringLiteral){G.type="string";for(let Y=0,k=V.StringLiteral.length;Y<k;Y++){let q=V.StringLiteral[Y];G.values.push(q.image.replace(/'|"/g,""))}}if(V.NumberLiteral){G.type="number";for(let Y=0,k=V.NumberLiteral.length;Y<k;Y++){let q=V.NumberLiteral[Y];G.values.push(parseFloat(q.image))}}if(V.HexLiteral){G.type="hex";for(let Y=0,k=V.HexLiteral.length;Y<k;Y++){let q=V.HexLiteral[Y];G.values.push(q.image)}}if(V.TrueLiteral){G.type="boolean";for(let Y=0,k=V.TrueLiteral.length;Y<k;Y++)V.TrueLiteral[Y].image==="TRUE"&&G.values.push(!0)}if(V.FalseLiteral){G.type="boolean";for(let Y=0,k=V.FalseLiteral.length;Y<k;Y++)V.FalseLiteral[Y].image==="FALSE"&&G.values.push(!1)}return V.NullLiteral&&(G.type="null",V.NullLiteral.forEach(function(){G.values.push(null)})),G}return a(I,"processField"),new N}a(o,"createVisitor");function l(O){let N=O.nodes,I=new Wa;for(let Z=0,V=N.length;Z<V;Z++){let G=N[Z];c(G)}for(let Z=0,V=N.length;Z<V;Z++){let G=N[Z],Y=u(G);Y instanceof ln&&I.add(Y),G.name==="WorldInfo"&&(I.userData.worldInfo=Y)}return I}a(l,"parseTree");function c(O){O.DEF&&(n[O.DEF]=O);let N=O.fields;for(let I=0,Z=N.length;I<Z;I++){let V=N[I];if(V.type==="node"){let G=V.values;for(let Y=0,k=G.length;Y<k;Y++)c(G[Y])}}}a(c,"buildNodeMap");function u(O){return O.USE?se(O.USE):(O.build!==void 0||(O.build=h(O)),O.build)}a(u,"getNode");function h(O){let N=O.name,I;switch(N){case"Anchor":case"Group":case"Transform":case"Collision":I=d(O);break;case"Background":I=f(O);break;case"Shape":I=m(O);break;case"Appearance":I=_(O);break;case"Material":I=M(O);break;case"ImageTexture":I=b(O);break;case"PixelTexture":I=y(O);break;case"TextureTransform":I=S(O);break;case"IndexedFaceSet":I=F(O);break;case"IndexedLineSet":I=ee(O);break;case"PointSet":I=P(O);break;case"Box":I=U(O);break;case"Cone":I=j(O);break;case"Cylinder":I=ae(O);break;case"Sphere":I=_e(O);break;case"ElevationGrid":I=D(O);break;case"Extrusion":I=z(O);break;case"Color":case"Coordinate":case"Normal":case"TextureCoordinate":I=C(O);break;case"WorldInfo":I=W(O);break;case"Billboard":case"Inline":case"LOD":case"Switch":case"AudioClip":case"DirectionalLight":case"PointLight":case"Script":case"Sound":case"SpotLight":case"CylinderSensor":case"PlaneSensor":case"ProximitySensor":case"SphereSensor":case"TimeSensor":case"TouchSensor":case"VisibilitySensor":case"Text":case"FontStyle":case"MovieTexture":case"ColorInterpolator":case"CoordinateInterpolator":case"NormalInterpolator":case"OrientationInterpolator":case"PositionInterpolator":case"ScalarInterpolator":case"Fog":case"NavigationInfo":case"Viewpoint":break;default:console.warn("THREE.VRMLLoader: Unknown node:",N);break}return I!==void 0&&O.DEF!==void 0&&I.hasOwnProperty("name")===!0&&(I.name=O.DEF),I}a(h,"buildNode");function d(O){let N=new Vr,I=O.fields;for(let Z=0,V=I.length;Z<V;Z++){let G=I[Z],Y=G.name,k=G.values;switch(Y){case"bboxCenter":break;case"bboxSize":break;case"center":break;case"children":fe(k,N);break;case"description":break;case"collide":break;case"parameter":break;case"rotation":let q=new K(k[0],k[1],k[2]),v=k[3];N.quaternion.setFromAxisAngle(q,v);break;case"scale":N.scale.set(k[0],k[1],k[2]);break;case"scaleOrientation":break;case"translation":N.position.set(k[0],k[1],k[2]);break;case"proxy":break;case"url":break;default:console.warn("THREE.VRMLLoader: Unknown field:",Y);break}}return N}a(d,"buildGroupingNode");function f(O){let N=new Vr,I,Z,V,G,Y=O.fields;for(let q=0,v=Y.length;q<v;q++){let Q=Y[q],H=Q.name,ue=Q.values;switch(H){case"groundAngle":I=ue;break;case"groundColor":Z=ue;break;case"backUrl":break;case"bottomUrl":break;case"frontUrl":break;case"leftUrl":break;case"rightUrl":break;case"topUrl":break;case"skyAngle":V=ue;break;case"skyColor":G=ue;break;default:console.warn("THREE.VRMLLoader: Unknown field:",H);break}}let k=1e4;if(G){let q=new Ca(k,32,16),v=new Wr({fog:!1,side:Ln,depthWrite:!1,depthTest:!1});G.length>3?(L(q,k,V,St(G),!0),v.vertexColors=!0):(v.color.setRGB(G[0],G[1],G[2]),v.color.convertSRGBToLinear());let Q=new ni(q,v);N.add(Q)}if(Z&&Z.length>0){let q=new Ca(k,32,16,0,2*Math.PI,.5*Math.PI,1.5*Math.PI),v=new Wr({fog:!1,side:Ln,vertexColors:!0,depthWrite:!1,depthTest:!1});L(q,k,I,St(Z),!1);let Q=new ni(q,v);N.add(Q)}return N.renderOrder=-1/0,N}a(f,"buildBackgroundNode");function m(O){let N=O.fields,I=new Wr({name:Ni.DEFAULT_MATERIAL_NAME,color:0}),Z;for(let G=0,Y=N.length;G<Y;G++){let k=N[G],q=k.name,v=k.values;switch(q){case"appearance":v[0]!==null&&(I=u(v[0]));break;case"geometry":v[0]!==null&&(Z=u(v[0]));break;default:console.warn("THREE.VRMLLoader: Unknown field:",q);break}}let V;if(Z&&Z.attributes.position){let G=Z._type;if(G==="points"){let Y=new wc({name:Ni.DEFAULT_MATERIAL_NAME,color:16777215});Z.attributes.color!==void 0?Y.vertexColors=!0:I.isMeshPhongMaterial&&Y.color.copy(I.emissive),V=new sd(Z,Y)}else if(G==="line"){let Y=new Ec({name:Ni.DEFAULT_MATERIAL_NAME,color:16777215});Z.attributes.color!==void 0?Y.vertexColors=!0:I.isMeshPhongMaterial&&Y.color.copy(I.emissive),V=new rd(Z,Y)}else Z._solid!==void 0&&(I.side=Z._solid?qi:Ci),Z.attributes.color!==void 0&&(I.vertexColors=!0),V=new ni(Z,I)}else V=new ln,V.visible=!1;return V}a(m,"buildShapeNode");function _(O){let N=new ld,I,Z=O.fields;for(let V=0,G=Z.length;V<G;V++){let Y=Z[V],k=Y.name,q=Y.values;switch(k){case"material":if(q[0]!==null){let Q=u(q[0]);Q.diffuseColor&&N.color.copy(Q.diffuseColor),Q.emissiveColor&&N.emissive.copy(Q.emissiveColor),Q.shininess&&(N.shininess=Q.shininess),Q.specularColor&&N.specular.copy(Q.specularColor),Q.transparency&&(N.opacity=1-Q.transparency),Q.transparency>0&&(N.transparent=!0)}else N=new Wr({name:Ni.DEFAULT_MATERIAL_NAME,color:0});break;case"texture":let v=q[0];v!==null&&(v.name==="ImageTexture"||v.name==="PixelTexture")&&(N.map=u(v));break;case"textureTransform":q[0]!==null&&(I=u(q[0]));break;default:console.warn("THREE.VRMLLoader: Unknown field:",k);break}}if(N.map){if(N.map.__type){switch(N.map.__type){case Di.INTENSITY_ALPHA:N.opacity=1;break;case Di.RGB:N.color.set(16777215);break;case Di.RGBA:N.color.set(16777215),N.opacity=1;break;default:}delete N.map.__type}I&&(N.map.center.copy(I.center),N.map.rotation=I.rotation,N.map.repeat.copy(I.scale),N.map.offset.copy(I.translation))}return N}a(_,"buildAppearanceNode");function M(O){let N={},I=O.fields;for(let Z=0,V=I.length;Z<V;Z++){let G=I[Z],Y=G.name,k=G.values;switch(Y){case"ambientIntensity":break;case"diffuseColor":N.diffuseColor=new ct(k[0],k[1],k[2]),N.diffuseColor.convertSRGBToLinear();break;case"emissiveColor":N.emissiveColor=new ct(k[0],k[1],k[2]),N.emissiveColor.convertSRGBToLinear();break;case"shininess":N.shininess=k[0];break;case"specularColor":N.specularColor=new ct(k[0],k[1],k[2]),N.specularColor.convertSRGBToLinear();break;case"transparency":N.transparency=k[0];break;default:console.warn("THREE.VRMLLoader: Unknown field:",Y);break}}return N}a(M,"buildMaterialNode");function g(O,N,I){let Z;switch(N){case Di.INTENSITY:Z=parseInt(O),I.r=Z,I.g=Z,I.b=Z,I.a=1;break;case Di.INTENSITY_ALPHA:Z=parseInt("0x"+O.substring(2,4)),I.r=Z,I.g=Z,I.b=Z,I.a=parseInt("0x"+O.substring(4,6));break;case Di.RGB:I.r=parseInt("0x"+O.substring(2,4)),I.g=parseInt("0x"+O.substring(4,6)),I.b=parseInt("0x"+O.substring(6,8)),I.a=1;break;case Di.RGBA:I.r=parseInt("0x"+O.substring(2,4)),I.g=parseInt("0x"+O.substring(4,6)),I.b=parseInt("0x"+O.substring(6,8)),I.a=parseInt("0x"+O.substring(8,10));break;default:}}a(g,"parseHexColor");function R(O){let N;switch(O){case 1:N=Di.INTENSITY;break;case 2:N=Di.INTENSITY_ALPHA;break;case 3:N=Di.RGB;break;case 4:N=Di.RGBA;break;default:}return N}a(R,"getTextureType");function y(O){let N,I=bs,Z=bs,V=O.fields;for(let G=0,Y=V.length;G<Y;G++){let k=V[G],q=k.name,v=k.values;switch(q){case"image":let Q=v[0],H=v[1],ue=v[2],Pe=R(ue),Ce=new Uint8Array(4*Q*H),Ee={r:0,g:0,b:0,a:0};for(let ve=3,pe=0,X=v.length;ve<X;ve++,pe++){g(v[ve],Pe,Ee);let he=pe*4;Ce[he+0]=Ee.r,Ce[he+1]=Ee.g,Ce[he+2]=Ee.b,Ce[he+3]=Ee.a}N=new id(Ce,Q,H),N.colorSpace=on,N.needsUpdate=!0,N.__type=Pe;break;case"repeatS":v[0]===!1&&(I=kn);break;case"repeatT":v[0]===!1&&(Z=kn);break;default:console.warn("THREE.VRMLLoader: Unknown field:",q);break}}return N&&(N.wrapS=I,N.wrapT=Z),N}a(y,"buildPixelTextureNode");function b(O){let N,I=bs,Z=bs,V=O.fields;for(let G=0,Y=V.length;G<Y;G++){let k=V[G],q=k.name,v=k.values;switch(q){case"url":let Q=v[0];Q&&(N=T.load(Q));break;case"repeatS":v[0]===!1&&(I=kn);break;case"repeatT":v[0]===!1&&(Z=kn);break;default:console.warn("THREE.VRMLLoader: Unknown field:",q);break}}return N&&(N.wrapS=I,N.wrapT=Z,N.colorSpace=on),N}a(b,"buildImageTextureNode");function S(O){let N={center:new nt,rotation:new nt,scale:new nt,translation:new nt},I=O.fields;for(let Z=0,V=I.length;Z<V;Z++){let G=I[Z],Y=G.name,k=G.values;switch(Y){case"center":N.center.set(k[0],k[1]);break;case"rotation":N.rotation=k[0];break;case"scale":N.scale.set(k[0],k[1]);break;case"translation":N.translation.set(k[0],k[1]);break;default:console.warn("THREE.VRMLLoader: Unknown field:",Y);break}}return N}a(S,"buildTextureTransformNode");function C(O){return O.fields[0].values}a(C,"buildGeometricNode");function W(O){let N={},I=O.fields;for(let Z=0,V=I.length;Z<V;Z++){let G=I[Z],Y=G.name,k=G.values;switch(Y){case"title":N.title=k[0];break;case"info":N.info=k;break;default:console.warn("THREE.VRMLLoader: Unknown field:",Y);break}}return N}a(W,"buildWorldInfoNode");function F(O){let N,I,Z,V,G=!0,Y=!0,k=0,q,v,Q,H,ue=!0,Pe=!0,Ce=O.fields;for(let we=0,Ue=Ce.length;we<Ue;we++){let rt=Ce[we],Xe=rt.name,Ae=rt.values;switch(Xe){case"color":let Ie=Ae[0];Ie!==null&&(N=u(Ie));break;case"coord":let ye=Ae[0];ye!==null&&(I=u(ye));break;case"normal":let Fe=Ae[0];Fe!==null&&(Z=u(Fe));break;case"texCoord":let Qe=Ae[0];Qe!==null&&(V=u(Qe));break;case"ccw":G=Ae[0];break;case"colorIndex":q=Ae;break;case"colorPerVertex":ue=Ae[0];break;case"convex":break;case"coordIndex":v=Ae;break;case"creaseAngle":k=Ae[0];break;case"normalIndex":Q=Ae;break;case"normalPerVertex":Pe=Ae[0];break;case"solid":Y=Ae[0];break;case"texCoordIndex":H=Ae;break;default:console.warn("THREE.VRMLLoader: Unknown field:",Xe);break}}if(v===void 0)return console.warn("THREE.VRMLLoader: Missing coordIndex."),new vn;let Ee=le(v,G),ve,pe,X;if(N){if(ue===!0)if(q&&q.length>0){let we=le(q,G);ve=qe(Ee,we,N,3)}else ve=B(Ee,new gt(N,3));else if(q&&q.length>0){let we=ge(N,q),Ue=ce(we,v);ve=Ze(Ee,Ue)}else{let we=ce(N,v);ve=Ze(Ee,we)}at(ve)}if(Z)if(Pe===!0)if(Q&&Q.length>0){let we=le(Q,G);pe=qe(Ee,we,Z,3)}else pe=B(Ee,new gt(Z,3));else if(Q&&Q.length>0){let we=ge(Z,Q),Ue=ce(we,v);pe=Ze(Ee,Ue)}else{let we=ce(Z,v);pe=Ze(Ee,we)}else pe=tt(Ee,I,k);if(V)if(H&&H.length>0){let we=le(H,G);X=qe(Ee,we,V,2)}else X=B(Ee,new gt(V,2));let he=new vn,Re=B(Ee,new gt(I,3));return he.setAttribute("position",Re),he.setAttribute("normal",pe),ve&&he.setAttribute("color",ve),X&&he.setAttribute("uv",X),he._solid=Y,he._type="mesh",he}a(F,"buildIndexedFaceSetNode");function ee(O){let N,I,Z,V,G=!0,Y=O.fields;for(let H=0,ue=Y.length;H<ue;H++){let Pe=Y[H],Ce=Pe.name,Ee=Pe.values;switch(Ce){case"color":let ve=Ee[0];ve!==null&&(N=u(ve));break;case"coord":let pe=Ee[0];pe!==null&&(I=u(pe));break;case"colorIndex":Z=Ee;break;case"colorPerVertex":G=Ee[0];break;case"coordIndex":V=Ee;break;default:console.warn("THREE.VRMLLoader: Unknown field:",Ce);break}}let k,q=be(V);if(N){if(G===!0)if(Z.length>0){let H=be(Z);k=qe(q,H,N,3)}else k=B(q,new gt(N,3));else if(Z.length>0){let H=ge(N,Z),ue=Oe(H,V);k=st(q,ue)}else{let H=Oe(N,V);k=st(q,H)}at(k)}let v=new vn,Q=B(q,new gt(I,3));return v.setAttribute("position",Q),k&&v.setAttribute("color",k),v._type="line",v}a(ee,"buildIndexedLineSetNode");function P(O){let N,I,Z=O.fields;for(let G=0,Y=Z.length;G<Y;G++){let k=Z[G],q=k.name,v=k.values;switch(q){case"color":let Q=v[0];Q!==null&&(N=u(Q));break;case"coord":let H=v[0];H!==null&&(I=u(H));break;default:console.warn("THREE.VRMLLoader: Unknown field:",q);break}}let V=new vn;if(V.setAttribute("position",new gt(I,3)),N){let G=new gt(N,3);at(G),V.setAttribute("color",G)}return V._type="points",V}a(P,"buildPointSetNode");function U(O){let N=new K(2,2,2),I=O.fields;for(let V=0,G=I.length;V<G;V++){let Y=I[V],k=Y.name,q=Y.values;switch(k){case"size":N.x=q[0],N.y=q[1],N.z=q[2];break;default:console.warn("THREE.VRMLLoader: Unknown field:",k);break}}return new ao(N.x,N.y,N.z)}a(U,"buildBoxNode");function j(O){let N=1,I=2,Z=!1,V=O.fields;for(let Y=0,k=V.length;Y<k;Y++){let q=V[Y],v=q.name,Q=q.values;switch(v){case"bottom":Z=!Q[0];break;case"bottomRadius":N=Q[0];break;case"height":I=Q[0];break;case"side":break;default:console.warn("THREE.VRMLLoader: Unknown field:",v);break}}return new od(N,I,16,1,Z)}a(j,"buildConeNode");function ae(O){let N=1,I=2,Z=O.fields;for(let G=0,Y=Z.length;G<Y;G++){let k=Z[G],q=k.name,v=k.values;switch(q){case"bottom":break;case"radius":N=v[0];break;case"height":I=v[0];break;case"side":break;case"top":break;default:console.warn("THREE.VRMLLoader: Unknown field:",q);break}}return new Lc(N,N,I,16,1)}a(ae,"buildCylinderNode");function _e(O){let N=1,I=O.fields;for(let V=0,G=I.length;V<G;V++){let Y=I[V],k=Y.name,q=Y.values;switch(k){case"radius":N=q[0];break;default:console.warn("THREE.VRMLLoader: Unknown field:",k);break}}return new Ca(N,16,16)}a(_e,"buildSphereNode");function D(O){let N,I,Z,V,G=!0,Y=!0,k=!0,q=!0,v=0,Q=2,H=2,ue=1,Pe=1,Ce=O.fields;for(let Ae=0,Ie=Ce.length;Ae<Ie;Ae++){let ye=Ce[Ae],Fe=ye.name,Qe=ye.values;switch(Fe){case"color":let Pt=Qe[0];Pt!==null&&(N=u(Pt));break;case"normal":let Yi=Qe[0];Yi!==null&&(I=u(Yi));break;case"texCoord":let li=Qe[0];li!==null&&(Z=u(li));break;case"height":V=Qe;break;case"ccw":q=Qe[0];break;case"colorPerVertex":G=Qe[0];break;case"creaseAngle":v=Qe[0];break;case"normalPerVertex":Y=Qe[0];break;case"solid":k=Qe[0];break;case"xDimension":Q=Qe[0];break;case"xSpacing":ue=Qe[0];break;case"zDimension":H=Qe[0];break;case"zSpacing":Pe=Qe[0];break;default:console.warn("THREE.VRMLLoader: Unknown field:",Fe);break}}let Ee=[],ve=[],pe=[],X=[];for(let Ae=0;Ae<H;Ae++)for(let Ie=0;Ie<Q;Ie++){let ye=Ae*Q+Ie,Fe=ue*Ae,Qe=V[ye],Pt=Pe*Ie;if(Ee.push(Fe,Qe,Pt),N&&G===!0){let Yi=N[ye*3+0],li=N[ye*3+1],So=N[ye*3+2];pe.push(Yi,li,So)}if(I&&Y===!0){let Yi=I[ye*3+0],li=I[ye*3+1],So=I[ye*3+2];ve.push(Yi,li,So)}if(Z){let Yi=Z[ye*2+0],li=Z[ye*2+1];X.push(Yi,li)}else X.push(Ae/(Q-1),Ie/(H-1))}let he=[];for(let Ae=0;Ae<Q-1;Ae++)for(let Ie=0;Ie<H-1;Ie++){let ye=Ae+Ie*Q,Fe=Ae+(Ie+1)*Q,Qe=Ae+1+(Ie+1)*Q,Pt=Ae+1+Ie*Q;q===!0?(he.push(ye,Qe,Fe),he.push(Qe,ye,Pt)):(he.push(ye,Fe,Qe),he.push(Qe,Pt,ye))}let Re=B(he,new gt(Ee,3)),we=B(he,new gt(X,2)),Ue,rt;if(N){if(G===!1){for(let Ae=0;Ae<Q-1;Ae++)for(let Ie=0;Ie<H-1;Ie++){let ye=Ae+Ie*(Q-1),Fe=N[ye*3+0],Qe=N[ye*3+1],Pt=N[ye*3+2];pe.push(Fe,Qe,Pt),pe.push(Fe,Qe,Pt),pe.push(Fe,Qe,Pt),pe.push(Fe,Qe,Pt),pe.push(Fe,Qe,Pt),pe.push(Fe,Qe,Pt)}Ue=new gt(pe,3)}else Ue=B(he,new gt(pe,3));at(Ue)}if(I)if(Y===!1){for(let Ae=0;Ae<Q-1;Ae++)for(let Ie=0;Ie<H-1;Ie++){let ye=Ae+Ie*(Q-1),Fe=I[ye*3+0],Qe=I[ye*3+1],Pt=I[ye*3+2];ve.push(Fe,Qe,Pt),ve.push(Fe,Qe,Pt),ve.push(Fe,Qe,Pt),ve.push(Fe,Qe,Pt),ve.push(Fe,Qe,Pt),ve.push(Fe,Qe,Pt)}rt=new gt(ve,3)}else rt=B(he,new gt(ve,3));else rt=tt(he,Ee,v);let Xe=new vn;return Xe.setAttribute("position",Re),Xe.setAttribute("normal",rt),Xe.setAttribute("uv",we),Ue&&Xe.setAttribute("color",Ue),Xe._solid=k,Xe._type="mesh",Xe}a(D,"buildElevationGridNode");function z(O){let N=[1,1,1,-1,-1,-1,-1,1,1,1],I=[0,0,0,0,1,0],Z,V,G=!0,Y=!0,k=0,q=!0,v=!0,Q=O.fields;for(let Xe=0,Ae=Q.length;Xe<Ae;Xe++){let Ie=Q[Xe],ye=Ie.name,Fe=Ie.values;switch(ye){case"beginCap":G=Fe[0];break;case"ccw":Y=Fe[0];break;case"convex":break;case"creaseAngle":k=Fe[0];break;case"crossSection":N=Fe;break;case"endCap":q=Fe[0];break;case"orientation":V=Fe;break;case"scale":Z=Fe;break;case"solid":v=Fe[0];break;case"spine":I=Fe;break;default:console.warn("THREE.VRMLLoader: Unknown field:",ye);break}}let H=N[0]===N[N.length-2]&&N[1]===N[N.length-1],ue=[],Pe=new K,Ce=new K,Ee=new K,ve=new K,pe=new Ri;for(let Xe=0,Ae=0,Ie=0,ye=I.length;Xe<ye;Xe+=3,Ae+=2,Ie+=4){Pe.fromArray(I,Xe),Ce.x=Z?Z[Ae+0]:1,Ce.y=1,Ce.z=Z?Z[Ae+1]:1,Ee.x=V?V[Ie+0]:0,Ee.y=V?V[Ie+1]:0,Ee.z=V?V[Ie+2]:1;let Fe=V?V[Ie+3]:0;for(let Qe=0,Pt=N.length;Qe<Pt;Qe+=2)ve.x=N[Qe+0],ve.y=0,ve.z=N[Qe+1],ve.multiply(Ce),pe.setFromAxisAngle(Ee,Fe),ve.applyQuaternion(pe),ve.add(Pe),ue.push(ve.x,ve.y,ve.z)}let X=[],he=I.length/3,Re=N.length/2;for(let Xe=0;Xe<he-1;Xe++)for(let Ae=0;Ae<Re-1;Ae++){let Ie=Ae+Xe*Re,ye=Ae+1+Xe*Re,Fe=Ae+(Xe+1)*Re,Qe=Ae+1+(Xe+1)*Re;Ae===Re-2&&H===!0&&(ye=Xe*Re,Qe=(Xe+1)*Re),Y===!0?(X.push(Ie,ye,Fe),X.push(Fe,ye,Qe)):(X.push(Ie,Fe,ye),X.push(Fe,Qe,ye))}if(G===!0||q===!0){let Xe=[];for(let ye=0,Fe=N.length;ye<Fe;ye+=2)Xe.push(new nt(N[ye],N[ye+1]));let Ae=ad.triangulateShape(Xe,[]),Ie=[];for(let ye=0,Fe=Ae.length;ye<Fe;ye++){let Qe=Ae[ye];Ie.push(Qe[0],Qe[1],Qe[2])}if(G===!0)for(let ye=0,Fe=Ie.length;ye<Fe;ye+=3)Y===!0?X.push(Ie[ye+0],Ie[ye+1],Ie[ye+2]):X.push(Ie[ye+0],Ie[ye+2],Ie[ye+1]);if(q===!0){let ye=Re*(he-1);for(let Fe=0,Qe=Ie.length;Fe<Qe;Fe+=3)Y===!0?X.push(ye+Ie[Fe+0],ye+Ie[Fe+2],ye+Ie[Fe+1]):X.push(ye+Ie[Fe+0],ye+Ie[Fe+1],ye+Ie[Fe+2])}}let we=B(X,new gt(ue,3)),Ue=tt(X,ue,k),rt=new vn;return rt.setAttribute("position",we),rt.setAttribute("normal",Ue),rt._solid=v,rt._type="mesh",rt}a(z,"buildExtrusionNode");function se(O){let N=n[O],I=u(N);return I.isObject3D||I.isMaterial?I.clone():I}a(se,"resolveUSE");function fe(O,N){for(let I=0,Z=O.length;I<Z;I++){let V=u(O[I]);V instanceof ln&&N.add(V)}}a(fe,"parseFieldChildren");function le(O,N){let I=[],Z=0;for(let V=0,G=O.length;V<G;V++){let Y=O[Z],k=O[V+(N?1:2)],q=O[V+(N?2:1)];I.push(Y,k,q),(O[V+3]===-1||V+3>=G)&&(V+=3,Z=V+1)}return I}a(le,"triangulateFaceIndex");function ce(O,N){let I=[],Z=0;for(let V=0,G=N.length;V<G;V++){let Y=Z*3,k=O[Y],q=O[Y+1],v=O[Y+2];I.push(k,q,v),(N[V+3]===-1||V+3>=G)&&(V+=3,Z++)}return I}a(ce,"triangulateFaceData");function ge(O,N){let I=[];for(let Z=0,V=N.length;Z<V;Z++){let Y=N[Z]*3,k=O[Y],q=O[Y+1],v=O[Y+2];I.push(k,q,v)}return I}a(ge,"flattenData");function be(O){let N=[];for(let I=0,Z=O.length;I<Z;I++){let V=O[I],G=O[I+1];N.push(V,G),(O[I+2]===-1||I+2>=Z)&&(I+=2)}return N}a(be,"expandLineIndex");function Oe(O,N){let I=[],Z=0;for(let V=0,G=N.length;V<G;V++){let Y=Z*3,k=O[Y],q=O[Y+1],v=O[Y+2];I.push(k,q,v),(N[V+2]===-1||V+2>=G)&&(V+=2,Z++)}return I}a(Oe,"expandLineData");let $=new K,me=new K,Se=new K,Be=new nt,Le=new nt,ze=new nt;function qe(O,N,I,Z){let V=[];for(let G=0,Y=O.length;G<Y;G+=3){let k=N[G],q=N[G+1],v=N[G+2];Z===2?(Be.fromArray(I,k*Z),Le.fromArray(I,q*Z),ze.fromArray(I,v*Z),V.push(Be.x,Be.y),V.push(Le.x,Le.y),V.push(ze.x,ze.y)):($.fromArray(I,k*Z),me.fromArray(I,q*Z),Se.fromArray(I,v*Z),V.push($.x,$.y,$.z),V.push(me.x,me.y,me.z),V.push(Se.x,Se.y,Se.z))}return new gt(V,Z)}a(qe,"computeAttributeFromIndexedData");function Ze(O,N){let I=[];for(let Z=0,V=0,G=O.length;Z<G;Z+=3,V++)$.fromArray(N,V*3),I.push($.x,$.y,$.z),I.push($.x,$.y,$.z),I.push($.x,$.y,$.z);return new gt(I,3)}a(Ze,"computeAttributeFromFaceData");function st(O,N){let I=[];for(let Z=0,V=0,G=O.length;Z<G;Z+=2,V++)$.fromArray(N,V*3),I.push($.x,$.y,$.z),I.push($.x,$.y,$.z);return new gt(I,3)}a(st,"computeAttributeFromLineData");function B(O,N){let I=N.array,Z=N.itemSize,V=new I.constructor(O.length*Z),G=0,Y=0;for(let k=0,q=O.length;k<q;k++){G=O[k]*Z;for(let v=0;v<Z;v++)V[Y++]=I[G++]}return new gt(V,Z)}a(B,"toNonIndexedAttribute");let xt=new K,Ge=new K;function tt(O,N,I){let Z=[],V={};for(let Y=0,k=O.length;Y<k;Y+=3){let q=O[Y],v=O[Y+1],Q=O[Y+2],H=new cR(q,v,Q);$.fromArray(N,q*3),me.fromArray(N,v*3),Se.fromArray(N,Q*3),Ge.subVectors(Se,me),xt.subVectors($,me),Ge.cross(xt),Ge.normalize(),H.normal.copy(Ge),V[q]===void 0&&(V[q]=[]),V[v]===void 0&&(V[v]=[]),V[Q]===void 0&&(V[Q]=[]),V[q].push(H.normal),V[v].push(H.normal),V[Q].push(H.normal),Z.push(H)}let G=[];for(let Y=0,k=Z.length;Y<k;Y++){let q=Z[Y],v=De(V[q.a],q.normal,I),Q=De(V[q.b],q.normal,I),H=De(V[q.c],q.normal,I);$.fromArray(N,q.a*3),me.fromArray(N,q.b*3),Se.fromArray(N,q.c*3),G.push(v.x,v.y,v.z),G.push(Q.x,Q.y,Q.z),G.push(H.x,H.y,H.z)}return new gt(G,3)}a(tt,"computeNormalAttribute");function De(O,N,I){let Z=new K;if(I===0)Z.copy(N);else for(let V=0,G=O.length;V<G;V++)O[V].angleTo(N)<I&&Z.add(O[V]);return Z.normalize()}a(De,"weightedNormal");function St(O){let N=[];for(let I=0,Z=O.length;I<Z;I+=3)N.push(new ct(O[I],O[I+1],O[I+2]));return N}a(St,"toColorArray");function at(O){let N=new ct;for(let I=0;I<O.count;I++)N.fromBufferAttribute(O,I),N.convertSRGBToLinear(),O.setXYZ(I,N.r,N.g,N.b)}a(at,"convertColorsToLinearSRGB");function L(O,N,I,Z,V){let G=[],Y=V===!0?0:Math.PI;for(let ue=0,Pe=Z.length;ue<Pe;ue++){let Ce=ue===0?0:I[ue-1];Ce=V===!0?Ce:Y-Ce;let Ee=new K;Ee.setFromSphericalCoords(N,Ce,0),G.push(Ee)}let k=O.index,q=O.attributes.position,v=new ii(new Float32Array(O.attributes.position.count*3),3),Q=new K,H=new ct;for(let ue=0;ue<k.count;ue++){let Pe=k.getX(ue);Q.fromBufferAttribute(q,Pe);let Ce,Ee,ve=1;for(let he=1;he<G.length;he++){Ce=he-1,Ee=he;let Re=G[Ce],we=G[Ee];if(V===!0){if(Q.y<=Re.y&&Q.y>we.y){ve=Math.abs(Re.y-Q.y)/Math.abs(Re.y-we.y);break}}else if(Q.y>=Re.y&&Q.y<we.y){ve=Math.abs(Re.y-Q.y)/Math.abs(Re.y-we.y);break}}let pe=Z[Ce],X=Z[Ee];H.copy(pe).lerp(X,ve).convertSRGBToLinear(),v.setXYZ(Pe,H.r,H.g,H.b)}O.setAttribute("color",v)}a(L,"paintFaces");let T=new hd(this.manager);if(T.setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin),e.indexOf("#VRML V2.0")===-1)throw Error("THREE.VRMLLexer: Version of VRML asset not supported.");let te=r(e);return l(te)}},aR=class{static{a(this,"VRMLLexer")}constructor(e){this.lexer=new jt(e)}lex(e){let t=this.lexer.tokenize(e);if(t.errors.length>0)throw console.error(t.errors),Error("THREE.VRMLLexer: Lexing errors detected.");return t}},lR=class extends au{static{a(this,"VRMLParser")}constructor(e){super(e);let t=this,n=e.Version,r=e.LCurly,s=e.RCurly,o=e.LSquare,l=e.RSquare,c=e.Identifier,u=e.RouteIdentifier,h=e.StringLiteral,d=e.HexLiteral,f=e.NumberLiteral,m=e.TrueLiteral,_=e.FalseLiteral,M=e.NullLiteral,g=e.DEF,R=e.USE,y=e.ROUTE,b=e.TO,S=e.NodeName;t.RULE("vrml",function(){t.SUBRULE(t.version),t.AT_LEAST_ONE(function(){t.SUBRULE(t.node)}),t.MANY(function(){t.SUBRULE(t.route)})}),t.RULE("version",function(){t.CONSUME(n)}),t.RULE("node",function(){t.OPTION(function(){t.SUBRULE(t.def)}),t.CONSUME(S),t.CONSUME(r),t.MANY(function(){t.SUBRULE(t.field)}),t.CONSUME(s)}),t.RULE("field",function(){t.CONSUME(c),t.OR2([{ALT:function(){t.SUBRULE(t.singleFieldValue)}},{ALT:function(){t.SUBRULE(t.multiFieldValue)}}])}),t.RULE("def",function(){t.CONSUME(g),t.OR([{ALT:function(){t.CONSUME(c)}},{ALT:function(){t.CONSUME(S)}}])}),t.RULE("use",function(){t.CONSUME(R),t.OR([{ALT:function(){t.CONSUME(c)}},{ALT:function(){t.CONSUME(S)}}])}),t.RULE("singleFieldValue",function(){t.AT_LEAST_ONE(function(){t.OR([{ALT:function(){t.SUBRULE(t.node)}},{ALT:function(){t.SUBRULE(t.use)}},{ALT:function(){t.CONSUME(h)}},{ALT:function(){t.CONSUME(d)}},{ALT:function(){t.CONSUME(f)}},{ALT:function(){t.CONSUME(m)}},{ALT:function(){t.CONSUME(_)}},{ALT:function(){t.CONSUME(M)}}])})}),t.RULE("multiFieldValue",function(){t.CONSUME(o),t.MANY(function(){t.OR([{ALT:function(){t.SUBRULE(t.node)}},{ALT:function(){t.SUBRULE(t.use)}},{ALT:function(){t.CONSUME(h)}},{ALT:function(){t.CONSUME(d)}},{ALT:function(){t.CONSUME(f)}},{ALT:function(){t.CONSUME(M)}}])}),t.CONSUME(l)}),t.RULE("route",function(){t.CONSUME(y),t.CONSUME(u),t.CONSUME(b),t.CONSUME2(u)}),this.performSelfAnalysis()}},cR=class{static{a(this,"Face")}constructor(e,t,n){this.a=e,this.b=t,this.c=n,this.normal=new K}},Di={INTENSITY:1,INTENSITY_ALPHA:2,RGB:3,RGBA:4};var If=class extends de{constructor(){super();this.camera=new Kn(60,window.innerWidth/window.innerHeight,.1,1e10),this.camera.position.set(-10,5,10),this.scene=new Wa,this.scene.add(this.camera);let t=new pd(16777215,1.2);this.scene.add(t);let n=new fd(16777215,2);n.position.set(200,200,200),this.scene.add(n),this.loader=new Uf,this.loadAsset(),this.spacer=re`<div class="spacer"></div>`,this.renderer=new Pc,this.renderer.setPixelRatio(window.devicePixelRatio),this.controls=new xd(this.camera,this.renderer.domElement),this.controls.minDistance=1,this.controls.maxDistance=200,this.controls.enableDamping=!0;let r=a(()=>{requestAnimationFrame(r),this.controls.update(),this.renderer.render(this.scene,this.camera)},"do_animate");r()}static{a(this,"VRMLViewer")}static{this.styles=[...de.styles,new Qi(No),Je`
            :host {
                margin: 0;
                display: flex;
                position: relative;
                width: 100%;
                height: 100%;
                max-height: 100%;
                max-width: 100%;
                background-color: white;
                color: var(--fg);
            }

            main {
                display: contents;
            }

            vrml-viewer,
            canvas {
                width: 100%;
                height: 100%;
                flex: 1;
            }
            .spacer {
                height: 10px; /* Adjust the height as needed */
            }
        `]}make_view(){return this.renderer.domElement}render(){return re`
            <style>
                :host {
                    display: block;
                    touch-action: none;
                    width: 90%;
                    height: 90%;
                }
                canvas {
                    width: 90%;
                    height: 90%;
                    border: solid 1px rgb(24, 144, 255);
                }
                spacer {
                    height: 10%; /* Adjust the height as needed */
                }
            </style>
            ${this.renderer.domElement} ${this.spacer}
        `}loadAsset(){let t=[];this.src&&t.push(this.src);for(let n of this.querySelectorAll("ecad-source"))n.src&&t.push(n.src);if(t.length==0){console.warn("No valid sources specified");return}if(t.length==0){console.warn("No valid sources specified");return}t.length&&this.loader.load(t[0],n=>{this.vrmlScene=n,this.scene.add(n),this.controls.reset()},void 0,void 0)}updateControl(){this.controls.update(),this.renderer.render(this.scene,this.camera)}};Me([Ye({type:String})],If.prototype,"src",2);window.customElements.define("vrml-viewer",If);
/*! Bundled license information:

three/build/three.module.js:
  (**
   * @license
   * Copyright 2010-2023 Three.js Authors
   * SPDX-License-Identifier: MIT
   *)

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/
